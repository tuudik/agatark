{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "WebKit Web Inspector",
      "version": "1.0"
    },
    "pages": [
      {
        "startedDateTime": "2025-04-02T15:06:00.064Z",
        "id": "page_0",
        "title": "http://192.168.1.125/",
        "pageTimings": {
          "onContentLoad": 6006.705833333399,
          "onLoad": 6034.270749998541
        }
      }
    ],
    "entries": [
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:00.064Z",
        "time": 79.58407399928547,
        "request": {
          "method": "GET",
          "url": "http://192.168.1.125/",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Cache-Control",
              "value": "max-age=0"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=0, i"
            }
          ],
          "queryString": [],
          "headersSize": 459,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:00 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/html; charset=UTF-8"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "180385"
            },
            {
              "name": "Cache-Control",
              "value": "public, max-age=31556908"
            }
          ],
          "content": {
            "size": 180385,
            "compression": 0,
            "mimeType": "text/html",
            "text": "<!DOCTYPE html><html><head><meta charset=utf-8><title>EnLife</title><meta name=viewport content=\"width=device-width,initial-scale=1\"><link rel=manifest href=manifest.json?9a2b><meta name=mobile-web-app-capable content=yes><link rel=apple-touch-icon href=apple-touch-icon.png?ae8a><style>\n*,*:before,*:after{color:inherit;-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit;-webkit-backface-visibility:inherit;backface-visibility:inherit}\nhtml{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;touch-action:manipulation;-webkit-backface-visibility:hidden;backface-visibility:hidden}\nhtml,body,form,fieldset,legend,img,.btn,.reset{margin:0;padding:0;border:0;outline:0}\na,button,label,.btn,.hand{cursor:pointer;*cursor:hand;pointer-events:auto}\n.no-events{pointer-events:none}\nbutton{width:auto;overflow:visible}\nb,strong,th{font-weight:bold}\naudio,button,canvas,iframe,img,input,select,svg,video{vertical-align:middle}\ntable{border-collapse:collapse;border-spacing:0}\ncode,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}\ntextarea{resize:vertical}\nbutton,[draggable=true],.btn,.noselect{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}\n[draggable=true]{-webkit-user-drag:element;-khtml-user-drag:element;user-drag:element}\n.max-height{height:auto !important;height:100%;min-height:100%}\n.sm .sm-hide,.md .md-hide,.lg .lg-hide,.hide-empty:empty,.hide{display:none !important;visibility:hidden}\n.transparent{opacity:0 !important;filter:alpha(opacity=0) !important}\n.max{top:0px;left:0px;width:100%;height:100%;overflow:hidden}\n.abs{position:absolute;top:0px;left:0px}\n.absr{position:absolute;top:0px;right:0px}\n.fix{position:absolute;position:fixed}\n.rel{position:relative;height:100%}\n.block{overflow:hidden}\n.btn,.nowrap,.ellipsis{text-overflow:ellipsis;white-space:nowrap}\n.anim,.anim:after,.anim:before{-webkit-transition:all .25s cubic-bezier(0,0,.2,1) 0s;-moz-transition:all .25s cubic-bezier(0,0,.2,1) 0s;-o-transition:all .25s cubic-bezier(0,0,.2,1) 0s;transition:all .25s cubic-bezier(0,0,.2,1) 0s;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-perspective:1000;perspective:1000}\n.sm .sm-left,.md .md-left,.lg .lg-left,.left{float:left}\n.sm .sm-right,.md .md-right,.lg .lg-right,.right{float:right !important}\n.sm .sm-t-left,.md .md-t-left,.lg .md-t-left,.lg .lg-t-left,.t-left{text-align:left}\n.sm .sm-t-center,.md .md-t-center,.lg .md-t-center,.lg .lg-t-center,.t-center{text-align:center}\n.sm .sm-t-right,.md .md-t-right,.lg .md-t-right,.lg .lg-t-right,.t-right{text-align:right}\n.grid,.row{display:block;clear:both;*zoom:1}\n.grid:after,.row:after{content:\" \";display:block;clear:both}\n.col,.grid>.grid{position:relative;display:block;float:left;min-height:1px;clear:none}\n.col,.w12,.md .md-w12,.lg .md-w12,.lg .lg-w12{width:100%}\n.w11,.md .md-w11,.lg .md-w11,.lg .lg-w11{width:91.6667%}\n.w10,.md .md-w10,.lg .md-w10,.lg .lg-w10{width:83.3333%}\n.w9,.md .md-w9,.lg .md-w9,.lg .lg-w9{width:75%}\n.w8,.md .md-w8,.lg .md-w8,.lg .lg-w8{width:66.6667%}\n.w7,.md .md-w7,.lg .md-w7,.lg .lg-w7{width:58.3333%}\n.w6,.md .md-w6,.lg .md-w6,.lg .lg-w6{width:50%}\n.w5,.md .md-w5,.lg .md-w5,.lg .lg-w5{width:41.6667%}\n.w4,.md .md-w4,.lg .md-w4,.lg .lg-w4{width:33.3333%}\n.w3,.md .md-w3,.lg .md-w3,.lg .lg-w3{width:25%}\n.w2,.md .md-w2,.lg .md-w2,.lg .lg-w2{width:16.6667%}\n.w1,.md .md-w1,.lg .md-w1,.lg .lg-w1{width:8.3333%}\n.h12,.md .md-h12,.lg .md-h12,.lg .lg-h12{height:100%}\n.h11,.md .md-h11,.lg .md-h11,.lg .lg-h11{height:91.6667%}\n.h10,.md .md-h10,.lg .md-h10,.lg .lg-h10{height:83.3333%}\n.h9,.md .md-h9,.lg .md-h9,.lg .lg-h9{height:75%}\n.h8,.md .md-h8,.lg .md-h8,.lg .lg-h8{height:66.6667%}\n.h7,.md .md-h7,.lg .md-h7,.lg .lg-h7{height:58.3333%}\n.h6,.md .md-h6,.lg .md-h6,.lg .lg-h6{height:50%}\n.h5,.md .md-h5,.lg .md-h5,.lg .lg-h5{height:41.6667%}\n.h4,.md .md-h4,.lg .md-h4,.lg .lg-h4{height:33.3333%}\n.h3,.md .md-h3,.lg .md-h3,.lg .lg-h3{height:25%}\n.h2,.md .md-h2,.lg .md-h2,.lg .lg-h2{height:16.6667%}\n.h1,.md .md-h1,.lg .md-h1,.lg .lg-h1{height:8.3333%}\n.left12,.md .md-left12,.lg .md-left12,.lg .lg-left12{left:100%}\n.left11,.md .md-left11,.lg .md-left11,.lg .lg-left11{left:91.6667%}\n.left10,.md .md-left10,.lg .md-left10,.lg .lg-left10{left:83.3333%}\n.left9,.md .md-left9,.lg .md-left9,.lg .lg-left9{left:75%}\n.left8,.md .md-left8,.lg .md-left8,.lg .lg-left8{left:66.6667%}\n.left7,.md .md-left7,.lg .md-left7,.lg .lg-left7{left:58.3333%}\n.left6,.md .md-left6,.lg .md-left6,.lg .lg-left6{left:50%}\n.left5,.md .md-left5,.lg .md-left5,.lg .lg-left5{left:41.6667%}\n.left4,.md .md-left4,.lg .md-left4,.lg .lg-left4{left:33.3333%}\n.left3,.md .md-left3,.lg .md-left3,.lg .lg-left3{left:25%}\n.left2,.md .md-left2,.lg .md-left2,.lg .lg-left2{left:16.6667%}\n.left1,.md .md-left1,.lg .md-left1,.lg .lg-left1{left:8.3333%}\n.left0,.md .md-left0,.lg .md-left0,.lg .lg-left0{left:0}\n.right12,.md .md-right12,.lg .md-right12,.lg .lg-right12{right:100%}\n.right11,.md .md-right11,.lg .md-right11,.lg .lg-right11{right:91.6667%}\n.right10,.md .md-right10,.lg .md-right10,.lg .lg-right10{right:83.3333%}\n.right9,.md .md-right9,.lg .md-right9,.lg .lg-right9{right:75%}\n.right8,.md .md-right8,.lg .md-right8,.lg .lg-right8{right:66.6667%}\n.right7,.md .md-right7,.lg .md-right7,.lg .lg-right7{right:58.3333%}\n.right6,.md .md-right6,.lg .md-right6,.lg .lg-right6{right:50%}\n.right5,.md .md-right5,.lg .md-right5,.lg .lg-right5{right:41.6667%}\n.right4,.md .md-right4,.lg .md-right4,.lg .lg-right4{right:33.3333%}\n.right3,.md .md-right3,.lg .md-right3,.lg .lg-right3{right:25%}\n.right2,.md .md-right2,.lg .md-right2,.lg .lg-right2{right:16.6667%}\n.right1,.md .md-right1,.lg .md-right1,.lg .lg-right1{right:8.3333%}\n.right0,.md .md-right0,.lg .md-right0,.lg .lg-right0{right:0}\n.p0,.p00,.p01,.p02,.p03,.p04{padding-top:0;padding-bottom:0}\n.p1,.p10,.p11,.p12,.p13,.p14{padding-top:4px;padding-bottom:4px}\n.p2,.p20,.p21,.p22,.p23,.p24{padding-top:8px;padding-bottom:8px}\n.p3,.p30,.p31,.p32,.p33,.p34{padding-top:12px;padding-bottom:12px}\n.p4,.p40,.p41,.p42,.p43,.p44{padding-top:16px;padding-bottom:16px}\n.p0,.p00,.p10,.p20,.p30,.p40{padding-left:0;padding-right:0}\n.p1,.p01,.p11,.p21,.p31,.p41{padding-left:4px;padding-right:4px}\n.p2,.p02,.p12,.p22,.p32,.p42{padding-left:8px;padding-right:8px}\n.p3,.p03,.p13,.p23,.p33,.p43{padding-left:12px;padding-right:12px}\n.p4,.p04,.p14,.p24,.p34,.p44{padding-left:16px;padding-right:16px}\n.m0,.m00,.m01,.m02,.m03,.m04{margin-top:0;margin-bottom:0}\n.m1,.m10,.m11,.m12,.m13,.m14{margin-top:4px;margin-bottom:4px}\n.m2,.m20,.m21,.m22,.m23,.m24{margin-top:8px;margin-bottom:8px}\n.m3,.m30,.m31,.m32,.m33,.m34{margin-top:12px;margin-bottom:12px}\n.m4,.m40,.m41,.m42,.m43,.m44{margin-top:16px;margin-bottom:16px}\n.m0,.m00,.m10,.m20,.m30,.m40{margin-left:0;margin-right:0}\n.m1,.m01,.m11,.m21,.m31,.m41{margin-left:4px;margin-right:4px}\n.m2,.m02,.m12,.m22,.m32,.m42{margin-left:8px;margin-right:8px}\n.m3,.m03,.m13,.m23,.m33,.m43{margin-left:12px;margin-right:12px}\n.m4,.m04,.m14,.m24,.m34,.m44{margin-left:16px;margin-right:16px}\n.grid.p1,.grid.p1>.row>.col,.grid.p1>.col{padding:2px}\n.grid.p2,.grid.p2>.row>.col,.grid.p2>.col{padding:4px}\n.grid.p3,.grid.p3>.row>.col,.grid.p3>.col{padding:6px}\n.grid.p4,.grid.p4>.row>.col,.grid.p4>.col{padding:8px}\n.grid.p1>.grid,.grid.p2>.grid,.grid.p3>.grid,.grid.p4>.grid{padding:0}\n.grid.b1,.grid.b1>.row>.col,.grid.b1>.col{border:2px solid transparent}\n.grid.b2,.grid.b2>.row>.col,.grid.b2>.col{border:4px solid transparent}\n.grid.b3,.grid.b3>.row>.col,.grid.b3>.col{border:6px solid transparent}\n.grid.b4,.grid.b4>.row>.col,.grid.b4>.col{border:8px solid transparent}\n.grid.b1>.grid,.grid.b2>.grid,.grid.b3>.grid,.grid.b4>.grid{border:none}\n.cf:before,.cf:after{content:\" \";display:table}\n.cf,.cf:after{clear:both}\n.cf{*zoom:1}\nbody{font-family:\"Segoe UI\",system-ui,-apple-system,Oxygen,Cantarell,Ubuntu,Roboto,\"Droid Sans\",\"Helvetica Neue\",sans-serif}\nhtml{height:100%;overflow-y:scroll;min-width:300px}\n.app{margin:0 auto 50%}\n.lg .app{width:990px;zoom:1}\n.login{max-width:600px;margin:0 auto}\n.scroll,.md .md-scroll,.lg .lg-scroll{overflow-y:auto;scroll-behavior:smooth;overscroll-behavior:none;-ms-scroll-chaining:none}\n.sm .sm-bottom-unset{bottom:unset !important}\n.shutdown{background:#0F0D1B}\n.shutdown>body{position:fixed;overflow:hidden;animation:5s linear 0s 1 forwards shutdown}\n@keyframes shutdown{0%{filter:brightness(100%);top:0%;height:100%}\n4%{filter:brightness(500%);left:0%;width:100%}\n6%{top:50%;height:1%;filter:brightness(500%)}\n20%{top:50%;left:50%;width:4px;height:2px;filter:brightness(90%)}\nto{filter:brightness(0%);top:45%;left:50%;width:1px;height:1px}}\n@keyframes rot360{0%{transform:rotate(0deg)}\nto{transform:rotate(360deg)}}\n@keyframes fadeIn{0%{opacity:0}\n50%{opacity:0}\nto{opacity:1}}\n.expandable{overflow:hidden;clear:both}\n.is-expanded{background-color:#212121;box-shadow:rgba(0,0,0,.12) 0px 1px 6px,rgba(0,0,0,.12) 0px 1px 4px}\n:not(.is-expanded)>.expandable{opacity:0;margin-top:-40px;filter:alpha(opacity=0)}\ninput.Item-right{width:80px;height:20px;line-height:18px;text-align:right;clear:right}\ninput[type=time].Item-right{padding:0}\ninput[type=\"file\"i]{width:260px}\nprogress{width:260px;height:20px;margin:6px 0}\n.is-hidden{display:none !important;visibility:hidden}\n.is-blue{color:#029fe3;fill:#029fe3}\n.btn.is-blue{background-color:#029fe3;color:#fff;border-color:#004f71}\n.is-green{color:#00a651;fill:#00a651}\n.btn.is-green{background-color:#00a651;color:#fff;border-color:#005328}\n.is-orange{color:#f2994a;fill:#f2994a}\n.btn.is-orange{background-color:#f2994a;color:#fff;border-color:#934a0a}\n.is-red{color:#eb5757;fill:#eb5757}\n.btn.is-red{background-color:#eb5757;color:#fff;border-color:#8f1111}\n.is-white{color:#dcdcdc;fill:#dcdcdc}\n.btn.is-white{background-color:#dcdcdc;color:#0F0D1B;border-color:#6e6e6e}\n.is-yellow{color:#fcdd39;fill:#fcdd39}\n.btn.is-yellow{background-color:#fcdd39;color:#0F0D1B;border-color:#988002}\n.i.dot-blue:after,.i.dot-green:after,.i.dot-orange:after,.i.dot-red:after,.i.dot-white:after,.i.dot-yellow:after{display:block;content:\"\";width:16px;height:16px;position:absolute;border-radius:50%;border:1px solid #fff;right:2px;top:2px}\n.i.dot-blue:after{background-color:#029fe3}\n.i.dot-green:after{background-color:#00a651}\n.i.dot-orange:after{background-color:#f2994a}\n.i.dot-red:after{background-color:#eb5757}\n.i.dot-white:after{background-color:#dcdcdc;border-color:#0F0D1B}\n.i.dot-yellow:after{background-color:#fcdd39;border-color:#0F0D1B}\n.btn.is-small{height:24px;line-height:22px}\n.btn.is-icon:before{content:\"\";width:32px;height:32px;background-image:url(css/ico/s.svg);background-repeat:no-repeat;background-size:228px 1083px;vertical-align:middle;display:inline-block}\n.i{display:block;position:relative;float:left;text-indent:-9999px;width:57px;height:57px;background-image:url(css/ico/s.svg);background-repeat:no-repeat;background-position:0 57px;background-size:228px 1425px;border-radius:10px;flex:0 0 57px;color:#706f6f}\n.i.i--inline{float:none;display:inline-block;vertical-align:middle}\n.is-offline>div>.i{color:inherit}\n.is-btn>.i{width:55px;height:55px;margin:-4px 0;box-shadow:inset 0px 0px 10px currentColor;border-radius:50%;transform:scale(0.8);box-sizing:content-box;border:2px solid currentColor}\n.i-lock{color:#00A651}\n.i-lock.is-open{color:#f44336}\n.i.is-on,.i.is-open,.i.is-active{background-position-x:-57px}\n.i-light{background-position:0 0}\n.i-light.is-on{background-position:-171px 0}\n.is-offline>div>.i,.i-dishwasher,.i-fridge,.i.is-error{box-shadow:inset 4px 0 currentColor,inset -4px 0 currentColor,inset 0 4px currentColor,inset 0 -4px currentColor}\n.i-dishwasher{background-position:0 -57px}\n.i-dishwasher.is-washing{background-position:-57px -57px}\n.i-dishwasher.is-rinsing{background-position:-114px -57px}\n.i-dishwasher.is-cleaning{background-position:-171px -57px}\n.i-canister{background-position:0 -114px}\n.i-canister.is-med{background-position:-57px -114px}\n.i-canister.is-low{background-position:-114px -114px}\n.i-canister.is-clear{background-position:-171px -114px}\n.i-calendar{background-position:-0px -171px}\n.i-fridge{background-position:-57px -171px}\n.i-fridge.is-open{background-position:-114px -171px;box-shadow:none}\n.is-offline>div>.i-fridge.is-open{box-shadow:none;background-position:-171px -171px}\n.i-temp{background-position:-0px -228px}\n.i-tempRh{background-position:-57px -228px}\n.i-tempRhCo2{background-position:-114px -228px}\n.i-tempCo2{background-position:-171px -228px}\n.i-door{background-position-y:-285px}\n.i-window{background-position-y:-342px}\n.i-lock{background-position-y:-399px}\n.i-secarea{background-position:-0px -456px}\n.i-secarea.is-armed{background-position:-57px -456px}\n.i-secarea.is-exit{background-position:-114px -456px}\n.i-secarea.is-entry{background-position:-171px -456px}\n.i-secarea.is-alarm{background-position:-0px -513px}\n.i-secarea.is-fire{background-position:-57px -513px}\n.i-secarea.is-water{background-position:-114px -513px}\n.i-waterDetector{background-position-y:-570px}\n.i-smokeDetector{background-position-y:-627px}\n.i-motionDetector{background-position-y:-684px}\n.i-waterMeter{background-position:-0px -741px}\n.i-gasMeter{background-position:-57px -741px}\n.i-energyMeter{background-position:-114px -741px}\n.i-valve{background-position:-0px -798px}\n.i-co2{background-position:-0px -855px}\n.i-role{background-position:-0px -912px}\n.i-user{background-position:-57px -912px}\n.i-anemoMeter{background-position:-0px -970px}\n.i-phoneAnswer{background-position:-0px -1027px}\n.i-phoneHangup{background-position:-57px -1027px}\n.i-heater{background-position:-0px -1084px}\n.i-controller{background-position:-0px -1141px}\n.i-socket{background-position:-0px -1198px}\n.i-keypad{background-position:-0px -1255px}\n.i-switch1{background-position:-0px -1312px}\n.i-switch2{background-position:-0px -1369px}\n.tip{position:relative;margin:1.5em 0;padding:.75em 1.5em .75em;background-color:rgba(255,255,255,.8);border:1px solid currentColor;border-left-width:.4em;border-radius:.4em;color:#05a;clear:both}\n.tip:before{position:absolute;top:.4em;left:-.6em;width:1em;height:1em;line-height:1em;color:#fff;text-align:center;border-radius:50%;font-size:1.8em;content:\"ℹ\";background-color:#05a}\n.r1{border-radius:4px;overflow:hidden}\nsvg{overflow:visible;fill:currentColor}\n.Chart{color:#565656;overflow:visible}\n.Chart-axes{stroke:#565656;stroke-dasharray:0;stroke-width:1}\n.Chart-line{fill:none;stroke:currentColor;stroke-width:1}\n.Chart-line>circle{fill:currentColor}\n.Chart-line.is-active{stroke-width:2}\n.Chart-xLabel{text-anchor:middle;font-size:12px}\n.Chart-yLabel{font-size:12px;text-anchor:end;alignment-baseline:middle}\n.Chart-yLabelr{font-size:12px;text-anchor:start;alignment-baseline:middle}\n.Chart-line{fill:none;stroke-width:2;stroke:currentColor}\n.labels{font-size:13px}\n.label-title{font-weight:bold;text-transform:uppercase;font-size:12px;fill:black}\n.flex-grid{display:flex;flex-wrap:wrap}\n.flex-grid>.col{flex:0 0 auto}\nbody{color:#fff;font-size:15px;line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#303030}\n::-moz-selection{text-shadow:none;background:#b3d4fc}\n::selection{text-shadow:none;background:#b3d4fc}\ninput[disabled],input[readonly]{color:#666;font-style:italic}\nh1,h2,h3,h4,h5,h6{margin:0;padding:1em 0 .5em}\n.bg-1{background-image:linear-gradient(#257,#27b);border-bottom:1px solid #257}\n.bg-2{border-top:1px solid #6ae;border-bottom:1px solid #123;background-image:linear-gradient(#38c,#269)}\n.bg3{background-color:#212121;border-color:#fff}\n.bg4{background:rgba(0,0,0,.5)}\n.hover-bg5:hover,.hover-bg5:active,.bg5{background-color:#414141}\n.bg6{color:#0F0D1B;background-color:#eb5757;font-weight:bold}\n.bg7{color:#0F0D1B;background-color:#f2994a;font-weight:bold}\n.bg8{color:#0F0D1B;background-color:#00a651;font-weight:bold}\n.hide-empty:not(:empty)+.hide-empty:not(:empty){margin-top:2px}\n.fw1{font-weight:100}\n.fw2{font-weight:200}\n.fw3{font-weight:300}\n.fw4{font-weight:400}\n.fw5{font-weight:500}\n.fw6{font-weight:600}\n.fw7{font-weight:700}\n.fw8{font-weight:800}\n.fw9{font-weight:900}\n.box1{background-color:#222;border:1px solid #ddd;border-radius:8px}\n.t-1{color:#def;font-size:.75em;text-shadow:2px 1px 1px #0F0D1B}\n.ts0{font-size:2.33em}\n.ts1{font-size:2em}\n.ts2{font-size:1.5em;text-shadow:0px 0px 3px #000}\n.ts3{font-size:1.25em}\n.ts4{font-size:.8em}\n.ts5{font-size:.6667em}\n.ts6{font-size:.5em}\n.ts7{font-size:10em;font-size:15vw}\n.ts8{font-size:5em;font-size:8vw}\n.ts35{font-size:35px}\n.ts9{font-size:.43em}\n.lh1{line-height:1.1}\n.lh2{line-height:1.2}\n.lh3{line-height:1.3}\n.lh4{line-height:1.4}\n.lh5{line-height:1.5}\n.lh6{line-height:1.6}\n.op5{opacity:.5}\n.lang>.selected{text-decoration:underline}\n.no-line{text-decoration:none}\n.showMenu{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px;margin:-4px -4px -4px auto}\n.showMenu:after{content:\" ▾\"}\n.collapsible:before{display:inline-block;content:\"▾\";margin:0 8px}\n.collapsible.is-collapsed:before{transform:rotate(-90deg)}\n.collapsible.is-collapsed+.hide-collapsed{display:none !important;visibility:hidden}\n.menu{font-size:16px;padding:0px 6px;line-height:32px;color:#fff;background:linear-gradient(to top,transparent,#303030);overflow:auto}\n.menu__item{margin:0 1px;padding:8px 2px 2px;text-transform:uppercase;text-decoration:none;display:block;float:left}\n.menu__item:hover,.menu__item:active,.menu__item.selected{box-shadow:inset 0 -4px #fff}\n.menu__icon{height:42px;margin:0 1px 0 4px;padding:8px 5px 2px;line-height:26px}\n.menu__right{margin:0 4px 0 1px;padding:8px 2px 2px;display:block;float:right;text-decoration:none;max-width:25%}\n.Lang{display:inline-block;border:1px solid #aaa;border-radius:4px;margin:0 1px;padding:0px 8px}\n.Lang.is-selected{background-color:#eee}\n.br1:not(:last-child){box-shadow:0 1px #565656}\n.nav{display:block;height:2.4em}\n.nav a{display:block;float:left;margin:0 .3em;padding:.3em;background:#eee}\n.content{padding:1em 1em 3em}\n.c0{color:#0F0D1B}\n.c1{color:#fff}\n.c2{color:#789}\n.c3{color:#f12}\n.c4{color:#16a}\n.c5{color:#999}\n.sm .sm-p0b,.md .md-p0b,.lg .lg-p0b,.p0b{padding-bottom:0}\n.sm .sm-p0l,.md .md-p0l,.lg .lg-p0l,.p0l{padding-left:0}\n.sm .sm-p0r,.md .md-p0r,.lg .lg-p0r,.p0r{padding-right:0}\n.sm .sm-p0t,.md .md-p0t,.lg .lg-p0t,.p0t{padding-top:0}\n.sm .sm-p2t,.md .md-p2t,.lg .lg-p2t,.p2t{padding-top:8px}\n.sm .sm-p4t,.md .md-p4t,.lg .lg-p4t,.p4t{padding-top:16px}\n.sm .sm-m1b,.md .md-m1b,.lg .lg-m1b,.m1b{margin-bottom:4px}\n.sm .sm-m1r,.md .md-m1r,.lg .lg-m1r,.m1r{margin-right:4px}\n.sm .sm-m1t,.md .md-m1t,.lg .lg-m1t,.m1t{margin-top:4px}\n.sm .sm-m2b,.md .md-m2b,.lg .lg-m2b,.m2b{margin-bottom:8px}\n.sm .sm-m2l,.md .md-m2l,.lg .lg-m2l,.m2l{margin-left:8px}\n.sm .sm-m2r,.md .md-m2r,.lg .lg-m2r,.m2r{margin-right:8px}\n.sm .sm-m2t,.md .md-m2t,.lg .lg-m2t,.m2t{margin-top:8px}\n.sm .sm-b1b,.md .md-b1b,.lg .lg-b1b,.b1b{border-bottom:1px solid #565656}\n.sm .sm-b1l,.md .md-b1l,.lg .lg-b1l,.b1l{border-left:1px solid #565656}\n.sm .sm-b1r,.md .md-b1r,.lg .lg-b1r,.b1r{border-right:1px solid #565656}\n.sm .sm-b1t,.md .md-b1t,.lg .lg-b1t,.b1t{border-top:1px solid #565656}\n.row.is-indent{text-indent:16px}\n.bold,.row.is-bold{font-weight:bold}\n.row.is-italic{font-style:italic}\n.Item.is-offline{color:#eb5757}\n.Item.is-disabled{color:#999;font-style:italic}\n.Item.is-alarm{color:#0F0D1B;background-color:#eb5757}\n.flex-mid+.flex-right,.flex-right+.flex-right{margin-top:4px}\n.Toggle+.lh3{margin-top:1px}\n.Map-view{padding:0px 12px;background:#919191;border:1px solid #fff;border-radius:6px;text-decoration:none;transform:translate(-50%,-50%)}\n.Map-icon{border-radius:50%;transform:translate(-50%,-50%)}\n.Map-info,.Map-val{border-radius:10px;transform:translate(-28px,-28px)}\n.Map-info-collapse{width:66px;height:66px}\n.Map-info.is-collapsed{overflow:hidden;width:57px;height:57px}\n.Map-val{width:57px;height:57px;line-height:57px;text-align:center}\n.Map-info>.Item{max-width:260px}\n.Map-info.is-collapsed>.Item{margin:-8px 0 0 -8px}\n.Map-info:not(.is-collapsed){z-index:1}\n.Map-view:hover,.Map-icon:hover,.Map-info:hover{z-index:2}\n.tooltip--top>i{pointer-events:none}\n.Notifications{position:sticky;top:0;left:0;right:0;z-index:6}\n.Map-item.is-alarm{color:#0F0D1B;background-color:#eb5757}\n.rightc{float:right;clear:both}\n[data-on-empty]:empty:after{content:attr(data-on-empty);color:#999;font-style:italic;text-align:center;font-weight:normal;display:block;padding:1em}\n.loading:after{content:\" \";display:block;width:24px;height:24px;margin:8px auto;border-radius:50%;border:5px solid #fff;border-color:currentColor transparent currentColor transparent;animation:rot360 1s linear infinite,2s ease-in fadeIn}\n[data-error]:after{content:\"Error \"attr(data-error);color:#eb5757;display:block;padding:1em}\n[data-legend]:before{content:attr(data-legend);display:block;padding:8px 16px 0;font-size:1.5rem}\n.paper{background-color:#303030;box-shadow:rgba(0,0,0,.12) 0px 1px 6px,rgba(0,0,0,.12) 0px 1px 4px}\n.paper:after{display:block;content:\" \";clear:both}\ndiv.mat-Menu,*>input,*>select,*>textarea{color:#0F0D1B;background:#c4c4c4}\n.is-divider,div.mat-Menu-item.is-divider{border-bottom:1px solid #aaa}\nbody .btn:active,body .btn:focus,body input:active,body input:focus,body select:active,body select:focus,body textarea:active,body textarea:focus{box-shadow:0 2px 5px rgba(0,0,0,.5) inset,0 0 2px 2px #009FE3}\ndiv.input__hint{color:#fff}\ndiv.Confirm-content{background-color:#303030}\n.flex-mid{display:flex;align-items:center}\n.flex-right{margin-left:auto;text-align:right;transform-origin:100% 50%}\n.group.is-center{display:table;margin:0 auto}\n.Confirm{z-index:9}\n.Confirm-bg{backdrop-filter:blur(5px);background-color:rgba(0,0,0,.6)}\n.Confirm-content{position:absolute;left:0;right:0;margin:0 auto;top:4%;width:600px;background-color:#fff;box-shadow:0 2px 10px 2px rgba(255,255,255,.5)}\n.sm .Confirm-content{width:94%}\n.Confirm--blur{transform:scale(.85);transform-origin:50% 100vh}\n.mat-Menu,.tooltip{border-radius:2px;position:absolute;margin:0;opacity:0;transform:scale(0);transition:opacity .4s cubic-bezier(0,0,.2,1) 0s,transform .2s cubic-bezier(0,0,.2,1) 0s}\n.tooltip{padding:8px;color:#fff;background:#666;font-weight:500;max-width:90%;text-align:center;pointer-events:none;z-index:8}\n.tooltip[data-pos]:before{content:\"\";position:absolute;display:block;width:.4em;height:.4em;border:.4em solid transparent;border-left-color:#666;border-top-color:#666}\n.tooltip[data-pos=top]:before{bottom:-.3em;left:-.3em;margin-left:50%;transform:rotate(225deg)}\n.tooltip[data-pos=bottom]:before{top:-.3em;left:-.3em;margin-left:50%;transform:rotate(45deg)}\n.tooltip[data-pos=right]:before{top:50%;left:-.3em;margin-top:-.4em;transform:rotate(315deg)}\n.tooltip[data-pos=left]:before{top:-.3em;right:-.3em;margin-top:50%;transform:rotate(135deg)}\n.mat-Menu{padding:8px 0;color:#000;background:#fff;min-width:124px;max-width:100%;z-index:7}\n.mat-Menu-item{display:block;padding:12px 16px;text-decoration:none;line-height:24px;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\n.mat-Menu-item:hover{background-color:#eee}\n.mat-Menu-item[disabled]{color:#bdbdbd;background-color:transparent;cursor:auto}\n.mat-Menu-item.is-divider{border-bottom:1px solid #ddd}\n.mat-Menu.is-visible,.tooltip.is-visible{transform:scale(1);opacity:1}\n.waves{position:relative;overflow:hidden}\n.waves-ripple{position:absolute;border-radius:50%;background-color:#000;opacity:0;transform:scale(0);transition:opacity .6s cubic-bezier(0,0,.2,1) 0s,transform 0s cubic-bezier(0,0,.2,1) .6s;pointer-events:none}\n.waves.is-active>.waves-ripple,.waves-ripple--play{opacity:.4;transform:scale(1);transition:opacity 1s cubic-bezier(0,0,.2,1) 0ms,transform .4s cubic-bezier(0,0,.2,1) 0ms}\n.shadow-1{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}\n.Button,.Checkbox,.Fab,.material{font-size:14px;font-weight:500;position:relative;text-transform:uppercase;transition:all .2s cubic-bezier(.4,0,.2,1);perspective:1px}\n.Button:focus,.Fab:focus{outline:none}\n.Button,.Button:disabled:hover{background:transparent;border:none;min-width:64px;height:36px;line-height:36px;border-radius:2px;padding:0 16px;letter-spacing:0;text-align:center}\n.Button.raised,.Button:hover{background-color:rgba(158,158,158,.20)}\n.Button:focus{background-color:#ddd}\n.raised:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36)}\n.Button:disabled{color:#aaa;background:transparent}\n.Fab{border:none;border-radius:50%;font-size:24px;height:56px;line-height:56px;width:56px;padding:0;background:rgba(158,158,158,.2)}\n.Button.is-warning,.Fab--red{color:#fff;background-color:#f40}\n.Button.is-warning>.waves-ripple,.Fab--red>.waves-ripple{background-color:#fff}\n.Fab--red>.waves-ripple--play{opacity:.6}\n.raised{box-shadow:0 1px 1.5px 0 rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.24)}\n.Checkbox{display:block;height:56px;line-height:56px;width:56px}\n.Checkbox-icon{overflow:visible;display:block;height:50%;width:50%;top:25%;left:25%}\n.MenuBtn{position:relative;width:30px;height:30px;background:transparent;color:#fff}\n.MenuBtn-x,.MenuBtn-x:before,.MenuBtn-x:after{display:block;content:\"\";background-color:currentColor;position:absolute;width:100%;height:.3em;border-radius:.3em;pointer-events:none;transition-property:transform}\n.MenuBtn-x:before{transform:translate(0,-.6em)}\n.MenuBtn-x:after{transform:translate(0,.6em)}\n.MenuBtn--back>.MenuBtn-x,.MenuBtn--close>.MenuBtn-x{color:#666;transform:rotateZ(-180deg)}\n.MenuBtn--back>.MenuBtn-x:before{transform:rotateZ(45deg) scaleX(.75) translate(0,-230%)}\n.MenuBtn--back>.MenuBtn-x:after{transform:rotateZ(-45deg) scaleX(.75) translate(0,230%)}\n.MenuBtn--close>.MenuBtn-x{background-color:transparent}\n.MenuBtn--close>.MenuBtn-x:before{transform:rotateZ(45deg) translate(0,0)}\n.MenuBtn--close>.MenuBtn-x:after{transform:rotateZ(-45deg) translate(0,0)}\n::-moz-focus-inner{border:0;padding:0}\n.Form1-del.right{display:block;margin:-10px -10px 0 0;opacity:.2}\n.Form1-del{font-size:20px;font-weight:700;border:1px solid transparent;line-height:16px;width:20px;height:20px;text-align:center;border-radius:4px}\n.Form1-del:hover{opacity:1;border:1px solid #aaa;background-image:linear-gradient(to bottom,#ddd,#888)}\n.input{display:block;border-radius:4px;border:1px solid #aaa}\n.field{width:100%}\n.btn,input,select,textarea{display:block;border-radius:4px;border:1px solid #aaa;font-size:14px;font-weight:400;line-height:30px;height:32px;padding:0 8px;margin:0}\ninput[type=checkbox]{height:auto}\ninput[type=time]{padding:0 0 0 8px}\ntextarea{height:64px;padding:8px;margin:0;line-height:1.1}\nselect{padding-right:0}\nselect[multiple]{height:auto;padding:0}\ninput[type=radio],input[type=checkbox]{width:auto;display:inline;margin-top:-2px}\n.btn,input[type=submit]{-webkit-appearance:none;position:relative;padding:0px 14px;text-align:center;text-decoration:none;background-color:#ddd;color:#444;cursor:pointer}\noption[disabled],.btn.disabled,.btn[disabled]{box-shadow:none;cursor:not-allowed;font-style:italic;opacity:.6;pointer-events:none}\n.group{overflow:auto}\n.group>.btn{border-radius:0;float:left}\n.group>.btn:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}\n.group>.btn:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}\n.btn--narrow{line-height:1.6;margin:.7em 0}\n.btn__spacer{height:33px}\n.md .input__label,.lg .input__label{padding-right:8px;text-align:right;line-height:28px}\n.input__hint{text-align:right;color:#444}\ninput[type=checkbox]+.input__hint{display:inline-block;margin-left:8px}\n.btn:active,.btn:focus,input:active,input:focus,select:active,select:focus,textarea:active,textarea:focus{border-color:#257;outline:0 none;box-shadow:0 2px 5px rgba(0,0,0,.5) inset,0 0 2px 2px #6ae;z-index:1}\n.btn:hover,.btn:focus{filter:brightness(1.3) saturate(1.2);text-decoration:none}\n.btn:active,.btn.is-active{box-shadow:inset 0 0 8px rgba(0,0,0,.5)}\n.Slider{width:200px;background:transparent;touch-action:none}\n.Slider.is-vertical{width:auto;height:200px}\n.is-vertical>.Slider-track{margin:0 14px;width:4px;height:100%}\n.is-vertical>.Slider-track>.Slider-fill{top:auto;bottom:0;width:4px}\n.is-vertical>.Slider-track>.Slider-fill>.Slider-knob{margin:-10px -8px 0 0}\n.Slider-track{position:relative;margin:14px 0}\n.Slider-track,.Slider-fill{height:4px;border-radius:2px;overflow:visible;background:#666}\n.Slider-fill{background:rgba(255,255,255,.57)}\n.Slider-knob,.Toggle-knob{position:relative;width:20px;height:20px;border-radius:50%;box-shadow:0 1px 4px rgba(0,0,0,.2)}\n.Slider-knob{float:right;margin:-8px -10px 0 0;outline:none;background:#f5f5f5;background-color:rgb(245,245,245)}\n.Slider-knob:hover,.Slider-knob:focus,:hover>.Toggle-knob{box-shadow:0 0 0 8px rgb(0,0,0,.2),0 1px 4px rgba(0,0,0,.3)}\n.Slider-knob.is-active{box-shadow:0 0 0 12px rgb(0,0,0,.2),0 1px 5px 5px rgba(0,0,0,.3)}\n.Slider-knob.is-active:before,.Slider-knob.is-active:after{position:absolute;width:32px;height:32px;left:-6px;display:block;top:-44px;animation:.1s linear 0s 1 forwards Slider-active}\n.Slider-knob.is-active:before{content:\"\";border-radius:50% 50% 50% 0;transform:rotate(-45deg);background:inherit;box-shadow:0 1px 4px rgba(0,0,0,.2)}\n.Slider-knob.is-active:after{content:attr(data-val);color:#000;font-size:14px;line-height:32px;text-align:center}\n.Toggle{background:transparent;touch-action:none;position:relative;display:block;width:36px;height:22px;-webkit-tap-highlight-color:rgba(0,0,0,0)}\n.Toggle:before{display:block;content:\"\";background:#bdbdbd;position:absolute;width:36px;height:14px;top:4px;border-radius:7px;-webkit-tap-highlight-color:rgba(0,0,0,0)}\n.Toggle-knob{background-color:#666;left:0px}\ninput:checked+.Toggle-knob{background-color:#00a651;left:16px}\n@keyframes Slider-active{0%{top:0px;opacity:0}\nto{top:-44px;opacity:1}}\n.Select,.Select-box,.Select-edit{display:block;font-size:14px;font-weight:400;line-height:30px;height:30px;margin:0;overflow:visible}\n.Select-edit,.Select-edit:active,.Select-edit:focus{width:100%;box-shadow:none;border:0;pointer-events:none}\n.Select-box{position:relative;border-radius:4px;border:1px solid #aaa;height:32px;width:100%;background:#fff;padding:0 0px;overflow:hidden}\n.Select-box:before{position:absolute;content:\"▼\";color:#999;right:4px;pointer-events:none}\n.Select-box:hover:before,.Select-box.is-active:before{color:#000}\n.Select-box.is-open,.Select-box:focus{border-color:#257;outline:0 none;box-shadow:0 2px 5px rgba(0,0,0,.5) inset,0 0 2px 2px #6ae;outline:0 none}\n.Select-box.is-open{height:auto;max-height:80vh;z-index:1}\n.sm .Select-box.is-open{position:absolute;top:10px;bottom:10px;left:10px;right:10px;left:0;width:100vw;height:100vh}\n.Select-search,.Select-search:active,.Select-search:focus{display:block;width:100%;box-shadow:none}\n.Select-val{padding:0px 8px}\n.Select-val:hover{color:#fff;background:#3875d7;background-image:linear-gradient(#3875d7 20%,#2a62bc 90%);cursor:default}\n.Cal{width:240px;white-space:nowrap;overflow:hidden}\n.Cal>table{width:240px;height:240px;text-align:center;display:inline-block;cursor:default}\n.Cal.is-month>table{transform:translateX(-240px)}\n.Cal.is-year>table{transform:translateX(-480px)}\n.Cal-head{font-size:1.4em}\n.other,.weekNum,.weekday,.weekend{width:30px;height:30px;border-radius:50%;padding:0}\n.monthname:hover,.yearnum:hover,td.other:hover,td.weekday:hover,td.weekend:hover{background:#ddd}\n.Cal-year td.act,.Cal-month td.act,.Cal-day td.act{box-shadow:inset 0 0 20px #666}\n.yearnum{border-radius:4px;width:48px;height:35px}\n.monthname{font-size:1.4em;border-radius:4px;width:79px;height:52.5px}\n.other{color:#999}\n.weekNum{font-size:.8em;color:#999}\n.weekday{}\n.weekend{color:#e00}\n</style></head><body class=\"cf max-height\"><script>\n!function(o,e){g._s=new Date\nvar a,s={},u=(o.setTimeout=o.setTimeout)||setTimeout,c={\"lang/en.js\":\"lang/en.js?46b2\",\"lang/et.js\":\"lang/et.js?bb2db6\",\"schema/core.json\":\"schema/core.json?d537\",\"schema/device.json\":\"schema/device.json?e47e\",\"schema/role.json\":\"schema/role.json?0efa\",\"schema/room.json\":\"schema/room.json?2223\",\"schema/rule.json\":\"schema/rule.json?6161\",\"schema/securityArea.json\":\"schema/securityArea.json?d72d\",\"schema/site.json\":\"schema/site.json?20a91\",\"schema/user.json\":\"schema/user.json?9e314\",\"schema/wizard.json\":\"schema/wizard.json?297d\",\"view/setup.view\":\"view/setup.view?af3c\",\"view/wizard.view\":\"view/wizard.view?5c04\"},l=+\"\\v1\"&&o.XMLHttpRequest||e(\"return new ActiveXObject('Microsoft.XMLHTTP')\"),f=o.execScript||e(\"e,eval\",\"try{return e('eval')}catch(e){}\")(eval)||e(\"a\",\"var d=document,b=d.body,s=d.createElement('script');s.text=a;b.removeChild(b.insertBefore(s,b.firstChild))\"),p=[],h=g._e=[],d=o.onerror=function(e,t,n,r,i){a!==(a=[t,n,r||(o.event||h).errorCharacter||\"?\",e].join(\":\"))&&1==h.push([+new Date,a,i&&(i.stack||i.stacktrace)||\"-\",\"\"+location])&&u(m,307)}\nfunction m(){g.err?g.err(h):u(m,1307)}function g(e,t,n,r,i){var o=p.pop()||new l\nreturn o.open(e,c[t]||t,!0!==n),!0!==n&&(o.onreadystatechange=function(){4==o.readyState&&(e=o.status||(o.responseText?200:1),n&&n.call(o,(e<200||299<e&&304!=e&&1223!=e)&&e,o.responseText,t,r,i),o.onreadystatechange=n=v,p.push(o))}),o}function t(t,n){for(var e,r=0,i=0,o=(t=\"string\"==typeof t?[t]:t)&&t.length,a=[];r<o;r++)(e=t[r])&&2!==s[e]&&(s[e]?(s[e].x||(s[e].x=[])).push(c,e,r):g(\"GET\",e,s[e]=c,r).send(null),i++)\nfunction c(e,t,n,r){s[n]=2,a[r]=e?(d(e,n),\"\"):t,l()}function l(){if(a[i]){try{(g[t[i].replace(/[^?]+\\.|\\?.*/g,\"\")]||f)(a[i])}catch(e){d(e,t[i])}a[i]=\"\"}if(\"\"===a[i]||!t[i])if(++i<o)l()\nelse if(i===o)u(l,1)\nelse if(n&&n(),a=c.x)for(r=0;a[r];)a[r++](0,\"\",a[r++],a[r++])}!i&&n&&n(),i=0}function v(){}((o.xhr=g).load=t)([])}(this,Function),!function(r,a,e,c){var n,i,l=r,s=(r.xhr||r)._p=[],$=/[\\x00-\\x1f\\x22\\x5c]/g,t={\"\\b\":\"\\\\b\",\"\\f\":\"\\\\f\",\"\\n\":\"\\\\n\",\"\\r\":\"\\\\r\",\"\\t\":\"\\\\t\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},L=t.hasOwnProperty,o=escape,u=F(\"document\",{body:{}}),P=F(\"navigator\"),f=0|u.documentMode,p=!+\"\\v1\"&&f<9,h=p||9==f,d=\"Event\",m=F(d,\"c=F.createEventObject(event),b=c.buttons=c.button;c.button=b==1?0:b==4?1:b;c.preventDefault=X;c.stopPropagation=Y;c.target=c.srcElement;c.type=a;return c\",!k(l[d])&&u,a(\"event.returnValue=!1\"),a(\"event.cancelBubble=event.cancel=!0\")),g=120,v=m.fixEv={wheel:\"onwheel\"in u?\"wheel\":\"onmousewheel\"in u?\"mousewheel\":\"DOMMouseScroll\"},m=m.fixFn={wheel:function(r,i){return function(e){var t,n=(e.wheelDelta||-e.detail||-e.deltaY)/g\nn&&(n<1&&-1<n&&(n*=t=(n<0?-1:1)/n,g/=t),i.call(r,e,n))}}},y=\"MSPointer\",b=\"pointerdown\",w=\"pointermove\",E=\"pointerup\",x=\"pointercancel\",_={d:\"touchstart\",m:\"touchmove\",u:\"touchend\",c:\"touchcancel\"}\nfunction T(e){try{return r[e+=\"Storage\"].setItem(e,e)}catch(t){}var n={setItem:function(e,t){return n[e]=\"\"+t},getItem:function(e){return n[e]},removeItem:function(e){delete n[e]},clear:function(){for(var e in n)delete n[e]}}\nF(e,n,1)}function M(e){return t[e]||o(e).replace(/%u/g,\"\\\\u\").replace(/%/g,\"\\\\x\")}r.PointerEvent||(r[y+d]?(s.push(\"pointer:MS\"),v[b]=y+\"Down\",v[w]=y+\"Move\",v[E]=y+\"Up\",v[x]=y+\"Cancel\"):(s.push(\"pointer\"),v[b]=\"mousedown\",v[w]=\"mousemove\",v[E]=\"mouseup\",v[x]=\"mouseup\",m[b]=m[w]=m[E]=v[x]=function(a,c,e){var l\nreturn r.TouchEvent&&(El.on(a,_[e[7]],n),t._rm=El.off.bind(a,a,_[e[7]],n)),t\nfunction t(e){l||(e.target||(e.target=a),e.pointerId=1,e.pointerType=\"mouse\",e.width=e.height=1,e.pressure=\"mouseup\"==e.type?0:.5,a.setCapture&&(\"mousedown\"==e.type&&a.setCapture(!0),\"mouseup\"==e.type)&&u.releaseCapture(),c.call(a,e))}function n(e){for(var t,n=e.changedTouches,r=e.preventDefault.bind(e),i=e.stopPropagation.bind(e),o=0;t=n[o++];)t.pointerId=t.identifier+2,t.pointerType=\"touch\",t.width=2*(t.radiusX||t.webkitRadiusX||0),t.height=2*(t.radiusY||t.webkitRadiusY||0),t.pressure=t.force||t.webkitForce||.5,t.preventDefault=r,t.stopPropagation=i,c.call(a,t)\nl=e.touches[0]}})),F(\"escape\",\"return X(a)\",\"a\"!=o(\"a\",0),o),F(\"setTimeout\",f=\"return O(X(a)&&A.length>2?a.apply.bind(a,null,S.call(A,2)):a,b)\",h,k),F(\"setInterval\",f,h,k),T(\"session\"),T(\"local\"),F(\"requestAnimationFrame\",\"return setTimeout(a,50)\"),F(\"cancelAnimationFrame\",\"clearTimeout(a)\"),F(\"console\",{log:j,error:j}),F(\"matchMedia\",\"b=a||'all';return{media:b,matches:X?X.matchMedium(b):!1,addListener:Y}\",0,r.styleMedia||r.media,j),F(\"JSON\",{parse:function(e){return a(\"return(\"+e.replace(/\\u2028|\\u2029/g,M)+\")\")()},stringify:function Y(t){return D(t)?'\"'+t.replace($,M)+'\"':t!=t||null==t||t===e||t===-e?\"null\":\"object\"==typeof t?k(t.toJSON)?Y(t.toJSON()):n(t)?\"[\"+t.map(Y)+\"]\":\"{\"+i(t).flatMap(function(e){return void 0===t[e]?[]:Y(e)+\":\"+Y(t[e])})+\"}\":\"\"+t}}),l=F(\"performance\"),F(\"p:now\",(f=\"return+new Date\")+\"-X\",0,new Date),F(\"timing\"),l=Date,F(\"d:now\",f),l=a[c],F(\"bind\",\"b=S.call(A,1);c=function(){return t.apply(this instanceof c?this:a,b.concat(S.call(arguments)))};if(t[P])c[P]=t[P];return c\"),l=Object,F(\"assign\",\"for(var k,i=1,l=A.length;i<l;)if(t=A[i++])for(k in t)if(o.call(t,k))a[k]=t[k];return a\"),F(\"create\",\"X[P]=a||Y;return new X\",0,j,{constructor:i,hasOwnProperty:i,isPrototypeOf:i,propertyIsEnumerable:i,toLocaleString:i,toString:i,valueOf:i}),F(\"entries\",(f=\"c=[];for(b in a)o.call(a,b)&&c.push(\")+\"[b,a[b]]\"+(d=\");return c\")),F(\"hasOwn\",\"return!!(a&&o.call(a,b))\"),i=F(\"keys\",f+\"b\"+d),F(\"values\",f+\"a[b]\"+d),f=l[c][d=\"toString\"],l=Error[c],F(d,\"a=t.message||t.number;return a?X+': '+a:X\",\"Error: 1\"!=Error(1),\"Error\"),l=Array,n=F(\"isArray\",\"return X.call(a)==='[object Array]'\",0,f),F(\"from\",\"a=X(a)?a.split(''):b?a:S.call(a);return b?a.map(b,c):a\",0,D),F(\"of\",\"return S.call(A)\"),l=l[c],y=\"if(t[i]===a)return i;return -1\",F(\"includes\",(f=\"var l=t.length,o=[],i=-1;\")+(d=\"i+=b|0;while(++i<l)\")+\"if(t[i]===a||(a!==a&&t[i]!==t[i]))return!0;return!1\"),F(\"indexOf\",f+d+y),F(\"lastIndexOf\",f+\"i=(b|0)||l;i>--l&&(i=l)||i<0&&(i+=l);++i;while(--i>-1)\"+y),F(\"reduce\",(d=f+\"if(A.length<2)b=t\")+\"[++i];while(++i<l)\"+(y=\"b=a.call(null,b,t[i],i,t);return b\")),F(\"reduceRight\",d+\"[--l];i=l;while(i--)\"+y),F(\"splice\",\"if(b===Y){A=S.call(A);A[1]=t.length-a}return O.apply(t,A)\",\"1,2\"!=[1,2].splice(0)),F(\"every\",(d=f+\"while(++i<l)\")+\"if(!a.call(b,t[i],i,t))return!1;return!0\"),F(\"forEach\",d+\"a.call(b,t[i],i,t)\"),F(\"map\",d+\"o[i]=a.call(b,t[i],i,t)\"+(y=\";return o\")),F(\"filter\",(d+=\"if(a.call(b,t[i],i,t))\")+\"o.push(t[i])\"+y),F(\"some\",d+\"return!0;return!1\"),F(\"flat\",\"return a<1?S.call(t):(b=t.concat.apply([],t))&&a>1&&b.some(X)?b.flat(a-1):b\",0,n),F(\"flatMap\",\"return X.apply(t,A).flat()\",0,l.map),l=String[c],F(\"endsWith\",\"return(a+='')===t.slice(-a.length)\"),F(\"startsWith\",\"return t.lastIndexOf(a,0)===0\"),F(\"trim\",\"return t.replace(/^\\\\s+|\\\\s+$/g,'')\"),l=P,F(\"sendBeacon\",function(e,t){(e=xhr(\"POST\",e,xhr.unload)).setRequestHeader(\"Content-Type\",\"text/plain;charset=UTF-8\"),e.send(t)})\nvar l=u.body,O={},I=/([.#:[])([-\\w]+)(?:\\(((?:[^()]|\\([^)]+\\))+?)\\)|([~^$*|]?)=((\"|')(?:\\\\.|[^\\\\])*?\\6|[-\\w]+))?]?/g,U=/([\\s>+~]*)(?:(\"|')(?:\\\\.|[^\\\\])*?\\2|\\((?:[^()]|\\([^()]+\\))+?\\)|~=|[^'\"()\\s>+~])+$/,X=/\\s*,\\s*(?=(?:[^'\"()]|\"(?:\\\\.|[^\\\\\"])*?\"|'(?:\\\\.|[^\\\\'])*?'|\\((?:[^()]|\\([^()]+\\))+?\\))+$)/,S={\"empty\":\"!_.lastChild\",\"enabled\":\"!m(_,':disabled')\",\"first-child\":\"(a=_.parentNode)&&a.firstChild==_\",\"lang\":\"m(c(_,'[lang]'),'[lang|='+v+']')\",\"last-child\":\"(a=_.parentNode)&&a.lastChild==_\",\"link\":\"m(_,'a[href]')\",\"only-child\":\"(a=_.parentNode)&&a.firstChild==a.lastChild\",\".\":\"~_.className.split(/\\\\s+/).indexOf(a)\",\"#\":\"_.id==a\",\"^\":\"!a.indexOf(v)\",\"|\":\"a.split('-')[0]==v\",\"$\":\"a.slice(-v.length)==v\",\"~\":\"~a.split(/\\\\s+/).indexOf(v)\",\"*\":\"~a.indexOf(v)\",\">>\":\"m(_.parentNode,v)\",\"++\":\"m(_.previousSibling,v)\",\"\":\"c(_.parentNode,v)\"},z=F(\"matches\",\"return!!X(a)(t)\",0,N),B=C.bind(r,\"parentNode\",1)\nfunction N(e){if(null!=e&&\"string\"!=typeof e)throw Error(\"Invalid selector\")\nreturn O[e||\"\"]||(O[e]=a(\"m,c\",\"return function(_,v,a,b){return \"+e.split(X).map(function(e){var i,o,c=[\"_&&_.nodeType==1\"],t=e.replace(U,function(e,t,n,r){return o=r+t.length,i=t.trim(),\"\"}),e=e.slice(o).replace(I,function(e,t,n,r,i,o,a){return c.push(\"((v='\"+(r||(a?o.slice(1,-1):o)||\"\").replace(/[\\\\']/g,\"\\\\$&\")+\"'),(a='\"+n+\"'),1)\",S[\":\"==t?n:t]||\"(a=_.getAttribute(a))\"+(i?\"&&\"+S[i]:o?\"==v\":\"!==null\")),\"\"})\nreturn e&&\"*\"!=e&&(c[0]+=\"&&_.tagName=='\"+e.toUpperCase()+\"'\"),t&&c.push(\"(v='\"+t+\"')\",S[i+i]),c.join(\"&&\")}).join(\"||\")+\"}\")(z,B))}function C(e,t,n,r,i){r=N(r)\nfor(var o=[];n;n=n[e]||i&&i(n))if(r(n)){if(t)return n\no.push(n)}return t?null:o}function A(n,e,t){return C(\"firstChild\",t,n.firstChild,e,function(e){for(var t=e.nextSibling;!t&&(e=e.parentNode)!==n;)t=e.nextSibling\nreturn t})}if(F(d=\"querySelector\",(f=\"return X(t,a,\")+\"1)\",p,A),F(d+\"All\",f+\"0)\",p,A),p)try{u.execCommand(\"BackgroundImageCache\",!1,!0)}catch(J){}function k(e){return\"function\"==typeof e}function D(e){return\"string\"==typeof e}function j(){}function F(e,t,n,r,i){var o=e.split(\":\").pop()\nreturn!n&&l[o]||(l[s.push(e),o]=D(t)?a(\"o,O,P,S,F,X,Y\",\"return function(a,b,c){var t=this,A=arguments;\"+t+\"}\")(L,l[o],c,s.slice,n,r,i):t||{})}}(this,Function,Infinity,\"prototype\"),\n/*! litejs.com/MIT-LICENSE.txt */\n!function(c){var l=[],e=c.Event||c\nfunction t(){}function n(e){e.on=o,e.off=a,e.one=r,e.emit=s,e.listen=i,e.unlisten=u}function o(e,t,n,r){var i=this===c?l:this,o=i._e||(i._e=Object.create(null))\nreturn e&&t&&(\"string\"==typeof t&&(t=s.bind(i,t)),s.call(i,\"newListener\",e,t,n,r),(o[e]||(o[e]=[])).unshift(n,r,t)),this}function a(e,t,n){var r,i,o=this===c?l:this,a=o._e&&o._e[e]\nif(a)for(r=a.length-2;0<r&&(a[r+1]!==t&&a[r]!==t||a[r-1]!=n||(i=a.splice(r-1,3),s.call(o,\"removeListener\",e,i[2],i[0],i[1]),!t));r-=3);return this}function r(e,t,n){var r=this===c?l:this\nreturn o.call(r,e,function i(){a.call(r,e,t,n),a.call(r,e,i,n)},n),o.call(r,e,t,n),this}function s(e){var t,n,r=this===c?l:this,i=r._e,o=i?(i[e]||l).concat(i[\"*\"]||l):l\nif(i=o.length)for(n=i-1,t=o.slice.call(arguments,1);1<n;n-=3)o[n]&&o[n].apply(o[n-2]||r,t)\nreturn i/3}function i(e,t,n,r,i){return e&&(o.call(e,t,n,r),(this._l||(this._l=[])).push([e,t,n,r,i])),this}function u(e){var t,n,r=this._l\nif(r)for(n=r.length;n--;)t=r[n],(\"*\"===e||-1<t.indexOf(e))&&(r.splice(n,1),a.call(t[0],t[1],t[2],t[3]))\nreturn this}e.Emitter=t,(e.asEmitter=n)(t.prototype)}(this),!function(n,r,i,o){var a,c,e,l,s,u,t=/^[#\\/\\!]+|[\\s\\/]+$/g,f=!+\"\\v1\"&&(0|r.documentMode)<8\nfunction p(e){return(c?o.pathname.slice(c.length):(e||o).href.split(\"#\")[1]||\"\").replace(t,\"\")}function h(e,t){return c?i[t?\"replaceState\":\"pushState\"](null,null,c+e):(o[t?\"replace\":\"assign\"](\"#\"+e),l&&p()!==p(l.location)&&l.location[t||l.document.open().close(),\"assign\"](\"#\"+e)),d()}function d(){if(e!=(e=p()))return a&&a(e),!0}i.getUrl=p,i.setUrl=h,i.start=function(e){a=e\nvar t,e=r.documentElement.getElementsByTagName(\"base\")[0];(e=e&&e.href.replace(/.*:\\/\\/[^/]*|[^\\/]*$/g,\"\"))&&!i.pushState&&(t=o.pathname.slice(e.length))&&o.replace(e+\"#\"+t),e&&i.pushState?(c=e,(t=o.href.split(\"#\")[1])&&!p()&&h(t,1),n.onpopstate=d):\"onhashchange\"in n&&!f?n.onhashchange=d:(f&&!l&&(l=r.body.appendChild(r.createElement(\"<iframe tabindex=-1 style=display:none>\")).contentWindow),clearInterval(s),s=setInterval(function(){var e=p()\nl&&u===e&&(e=p(l.location)),u!==e&&(u=e,l?h(e):d())},60)),d()}}(this,document,history,location),!function(e){var o,a,i,c,l,s=document.body,n=Array.isArray,u=1,f=\"\",p=\"\",h=w.views={},d={},m=d,g=h.hasOwnProperty,v=/[.*+?^=!:${}()|\\[\\]\\/\\\\]/g,y=/\\{([\\w%.]+?)\\}|.[^{\\\\]*?/g,b={base:\"view/\",home:\"home\",root:s}\nfunction w(e,t,n){var r,i=h[e]\nreturn i?(t&&(i.el=t,i.parent=n&&w(n)),i):(i=this)instanceof w?((h[i.route=e]=i).el=t,i.parent=n&&w(n),void(\"#\"!==e.charAt(0)&&(r=\"m[\"+(i.seq=u++)+\"]?(\",i=e.replace(y,function(e,t){return t?(r+=\"o['\"+t+\"']=m[\"+u+++\"],\")&&\"([^/]+?)\":e.replace(v,\"\\\\$&\")}),f+=r+\"'\"+e+\"'):\",p+=(p?\"|(\":\"(\")+i+\")\",o=0))):new w(e,t,n)}function E(e,t){var n,r=e._v,i=r&&r.parent\nif(!r||e._p&&/{/.test(r.route))return x(t);(i&&!r.isOpen||r===t)&&(x(t,r),El.scope(r.isOpen=r.el.cloneNode(!0),El.scope(n=i.isOpen||i.el)),El.append(n,r.isOpen),El.render(r.isOpen),_(i,\"openChild\",r,t),_(r,\"open\",e),r.kb&&El.addKb(r.kb),t=null),(e._d=e._v=r.child)&&E(e,t),a===r&&(_(r,\"show\",e),T())}function x(e,t){e&&e.isOpen&&(_(e.parent,\"closeChild\",e,t),x(e.child),El.kill(e.isOpen),e.isOpen=null,e.kb&&El.rmKb(e.kb),_(e,\"close\"))}function _(e,t,n,r){e.emit(t,n,r),w.emit(t,e,n,r)}function r(e,t){return o=o||Function(\"var r=/^\\\\/?(?:\"+p+\")[\\\\/\\\\s]*$/;\"+\"return function(i,o,d){var m=r.exec(i);return m!==null?(\"+f+\"d):d}\")(),w(e?o(e,t||{},\"404\"):w.home)}function T(){try{var e=document.activeElement,t=e&&e.tagName\n\"A\"!==t&&\"BUTTON\"!==t||e.blur()}catch(n){}}function M(e,t){var n=e.charAt(0),r=e.slice(1),t=t||c\nreturn\"+\"===n?t+r:\"%\"===n?(0<(n=t.lastIndexOf(r.charAt(0)))?t.slice(0,n):t)+r:i=e}e.View=w,e.LiteJS=function(e){var t,n,r=(e=Object.assign({},b,e)).root\nfor(t in e)if(g.call(e,t))if(\"function\"==typeof w[t])for(n in e[t])g.call(e[t],n)&&w[t](n,e[t][n])\nelse w[t]=e[t]\nreturn w(\"#\",r),w.$=function(e,t){return s.querySelector.call(t||r,e)},w.$$=function(e,t){return Array.from(s.querySelectorAll.call(t||r,e))},w},w.prototype={show:function(e){var t,n=m=e||{},r=a=this,i=n._v||r,o=r.isOpen&&r\nfor(w.route=r.route,_(r,\"init\");i;i=t){if(_(l=n._v=i,\"ping\",n,w),l=null,m!==n)return\nif((t=i.parent)&&(t.child&&t.child!==i&&(o=t.child),t.child=i),!i.el)return void(i.file?xhr.load(i.file.replace(/^|,/g,\"$&\"+(w.base||\"\")).split(\",\"),r.wait(i.file=null)):(\"404\"===i.route&&(El.txt(i=El(\"h3\"),\"# Error 404\"),w(\"404\",i,\"#\")),w(\"404\").show({origin:n})))}for(i in r!==o&&_(r,\"change\",o),n)\"_\"!==i.charAt(0)&&(l=g.call(d,i)&&d[i]||d[\"*\"])&&(l.call(r,n[i],i,n),l=null)\nE(n,o)},wait:function(){var e=m\nreturn e._p=1+(0|e._p),function(){--e._p||m!==e||l||(e._d?E(e):e._v&&a.show(e))}}},Event.asEmitter(w),Event.asEmitter(w.prototype),w.get=r,w.ping=function(e,t){w(e).on(\"ping\",t)},w.show=function(e,t){if(!0===e){if(0<m._p)return\ne=c,c=0}var t=t||{},n=r(e,t)\nn.isOpen&&c===e||(t._u=c=e,n.show(El.data.params=t))},w.param=function(e,t){(n(e)?e:e.split(/\\s+/)).forEach(function(e){d[e]=t})},w.def=function(e){for(var t,n=/(\\S+) (\\S+)/g;t=n.exec(e);)t[1].split(\",\").map(r)\nfunction r(e){(e=w(M(e,i))).file=(e.file?e.file+\",\":\"\")+t[2].split(\",\").map(function(e){return h[e]?h[e].file:M(e,i)})}},w.blur=T,w.expand=M}(this),!function(c,a,r,o,i){var f,t,l=\"data-bind\",p=Array.isArray,$=0,n=g.cache={},e=v[i]=[],L=e.slice,P=n.hasOwnProperty,s=a.body,u=a.documentElement,I=g.T=\"textContent\"in s?\"textContent\":\"innerText\",U=/([ \\t]*)(%?)((?:(\"|')(?:\\\\\\4|.)*?\\4|[-\\w:.#[\\]]=?)*)[ \\t]*([>^;@|\\\\\\/]|!?=|)(([\\])}]?).*?([[({]?))(?=\\x1f|\\n|$)+/g,X=/[;\\s]*(\\w+)(?:(::?| )((?:([\"'\\/])(?:\\\\\\3|.)*?\\3|[^;])*))?/g,z=/([.#:[])([-\\w]+)(?:\\(((?:[^()]|\\([^)]+\\))+?)\\)|([~^$*|]?)=((\"|')(?:\\\\.|[^\\\\])*?\\6|[-\\w]+))?]?/g,B=/('|\")(?:\\\\\\1|.)*?\\1|\\/(?:\\\\?.)+?\\/[gim]*|\\b(?:n|data|b|s|B|r|false|in|new|null|this|true|typeof|void|function|var|if|else|return)\\b|\\.\\w+|\\w+:/g,J=/\\b[a-z_$][\\w$]*/gi,h=/[,\\s]+/,H=/\\-([a-z])/g,d=g.bindings={attr:g.attr=E(b,y),cls:g.cls=E(x),css:g.css=E(function(e,t,n){e.style[t.replace(H,K)]=\"\"+n||\"\"},function(e,t){return getComputedStyle(e).getPropertyValue(t)}),data:function(e,t,n){b(e,\"data-\"+t,n)},html:function(e,t){e.innerHTML=t},ref:function(e,t){this[t]=e},txt:g.txt=function(e,t){e[I]!==t&&(e[I]=t)},val:g.val=function xe(e,t){if(!e)return\"\"\nvar n,r,i,o,a=0,c=e.type,l=e.options,s=\"checkbox\"===c||\"radio\"===c\nif(\"FORM\"===e.tagName){for(l={};n=e.elements[a++];)!n.disabled&&(i=n.name||n.id)&&(o=xe(n,t!=f?t[i]:f))!==f&&(r=l,i.replace(/\\[(.*?)\\]/g,u),r[i||r.length]=o)\nreturn l}if(t!==f){if(l)for(o=(p(t)?t:[t]).map(String);n=l[a++];)n.selected=-1<o.indexOf(n.value)\nelse e.val?e.val(t):s?e.checked=!!t:e.value=t\nreturn}if(l){if(\"select-multiple\"===c){for(t=[];n=l[a++];)n.selected&&!n.disabled&&t.push(n.valObject||n.value)\nreturn t}o=e.selectedIndex,e=-1<o&&l[o]||e}return s&&!e.checked?\"radio\"===c?f:null:e.valObject!==f?e.valObject:e.value\nfunction u(e,t,n){r==l&&(i=i.slice(0,n)),r=r[i]||(r[i]=null===r[i]||t&&+t!=t?{}:[]),i=t}},\"with\":function(e,t){var n=N(e,this)\nif(r.assign(n,t),n!==this)return oe(e),!0}},R=[],V=g.data={_:String,_b:d,El:g,history:history,View:View},m=/^(Mac|iP)/.test(navigator.platform),W=!+\"\\v1\",q=W&&(0|a.documentMode)<8\nfunction g(e){var t,c,l\nreturn Y(e)?(l={},e=e.replace(z,function(e,t,n,r,i,o,a){return c=1,o=a?o.slice(1,-1):o||n,l[t=\".\"===t?(i=\"~\",\"class\"):\"#\"===t?\"id\":n]=i&&l[t]?\"^\"===i?o+l[t]:l[t]+(\"~\"===i?\" \":\"\")+o:o,\"\"})||\"div\",(t=(e=n[e]||(n[e]=a.createElement(e))).cloneNode(!0))._s=e._s,c&&b(t,l),t):new v(e)}function v(e,t){var n=this,r=e.length\nif(r)for(n.length=r;r--;)n[r]=t<2?e[r].cloneNode(t):e[r]\nelse null==r&&(n.length=1,n[0]=e)}function K(e,t){return t.toUpperCase()}function y(e,t){return e&&e.getAttribute&&e.getAttribute(t)}function b(e,t,n){if(Ee(t))for(var r in t)b(e,r,t[r])\nelse r=e.getAttribute(t),!q||\"id\"!==t&&\"name\"!==t&&\"checked\"!==t?\"class\"===t?x(e,n):n||0===n?r!=n&&e.setAttribute(t,n):r&&e.removeAttribute(t):e.mergeAttributes(a.createElement(\"<INPUT \"+t+\"='\"+n+\"'>\"),!1)}function w(e,t,n){if(!e.nodeType)return e.append?e.append(t,n):e\nvar r,i,o=0\nif(t){if(Y(t)||we(t))t=a.createTextNode(t)\nelse if(!(\"nodeType\"in t)&&\"length\"in t){for(i=t.length,r=a.createDocumentFragment();o<i;)w(r,t[o++])\nt=r}t.nodeType&&(i=e.insertBefore?e:e[e.length-1],(o=y(t,\"slot\"))?(t.removeAttribute(\"slot\"),i=(n=Z(i,\"%slot-\"+o)||i).parentNode):(o=y(i,\"data-slot\"))&&(i=(n=Z(i,\"%slot-\"+o)||i).parentNode),i.insertBefore(t,(!0===n?i.firstChild:we(n)?i.childNodes[n<0?i.childNodes.length-n-2:n]:n)||null))}return e}function Z(e,t){for(var n,r=e.firstChild;r;){if(8===r.nodeType&&r.nodeValue==t)return r\nfor(n=r.firstChild||r.nextSibling;!n&&(r=r.parentNode)!==e;)n=r.nextSibling\nr=n}}function E(c,l){return function s(e,t,n,r){if(e&&t)if(0<=r)0<r?setTimeout(s,r,e,t,n):requestAnimationFrame(function(){s(e,t,n)})\nelse if(Ee(t))for(a in t)P.call(t,a)&&s(e,a,t[a],n)\nelse{var i=p(t)?t:t.split(h),o=i.length,a=0\nif(arguments.length<3){if(l)return l(e,t)\nfor(;a<o;)c(e,i[a++])}else for(;a<o;)c(e,i[a++],p(n)?n[a-1]:n)}}}function x(e,t,n){var r=e.className||\"\",i=!Y(r)\ni&&(r=e.getAttribute(\"class\")||\"\"),arguments.length<3||n?r&&(t=-1<r.split(h).indexOf(t)?r:r+\" \"+t):t=r&&(\" \"+r+\" \").replace(\" \"+t+\" \",\" \").trim(),r!=t&&(i?e.setAttribute(\"class\",t):e.className=t)}g.matches=function(e,t){return e&&s.matches.call(e,t)},g.closest=function(e,t){return e&&s.closest.call(e.closest?e:e.parentNode,t)},g.find=function(e,t){return s.querySelector.call(e,t)},g.findAll=function(e,t){return new v(s.querySelectorAll.call(e,t))},(c.El=g).hasClass=function(e,t){var n=e.className||\"\"\nY(n)||(n=e.getAttribute(\"class\")||\"\")\nreturn!!n&&-1<n.split(h).indexOf(t)}\nvar G,Q=\"addEventListener\",ee=\"removeEventListener\",te=c[Q]?\"\":(Q=\"attachEvent\",ee=\"detachEvent\",\"on\"),_=o.fixEv||(o.fixEv={}),ne=o.fixFn||(o.fixFn={}),T=new o.Emitter\nfunction M(t,n,e){var r=ne[n]&&ne[n](t,e,n)||e,i=te?function(){var e=new o(n)\ne.clientX!==f&&(e.pageX=e.clientX+ue(),e.pageY=e.clientY+fe()),r.call(t,e)}:r\n\"\"!==_[n]&&t[Q](te+(_[n]||n),i,!1),T.on.call(t,n,i,t,e)}function O(e,t,n){var r=e._e&&e._e[t],i=r&&r.indexOf(n);-1<i&&(n!==r[i+1]&&r[i+1]._rm&&r[i+1]._rm(),e[ee](te+(_[t]||t),r[i+1]),r.splice(i-1,3))}function re(n,e,r,i,o,t){var a=arguments.length\nif(3==a||4==a&&we(i)?(t=i,o=r,r=i=null):(4==a||5==a&&we(o))&&(t=o,o=i,Y(r)?i=null:(i=r,r=null)),0<t)setTimeout(re,t,n,e,r,i,o)\nelse for(var c=Y(o)?function(e){var t=r?g.closest(e.target,r):n\nt&&View.emit.apply(View,[o,e,t].concat(i))}:r?function(e){g.matches(e.target,r)&&o(e)}:o,l=p(e)?e:e.split(h),s=0,u=l.length;s<u;)M(n,l[s++],c)}function ie(e){for(var t;t=e.firstChild;S(t));return e}function S(e,t,n){if(e){if(0<n)return setTimeout(S,n,e,t)\nif(t&&(x(e,t,t=\"transitionend\"),\"on\"+t in e))return M(e,t,S.bind(e,e,e=null))\nif(e._e)for(var r in T.emit.call(e,\"kill\"),e._e)O(e,r)\nif(e.parentNode&&e.parentNode.removeChild(e),1!=e.nodeType)return e.kill&&e.kill()\nie(e),e._scope!==f&&delete N[e._scope],e.valObject!==f&&(e.valObject=f)}}function N(e,t,n){return N[e._scope]||n||(t?((n=N[e._scope=++$]=r.create(t))._super=t,n):function(e){for(;e=e.parentNode;)if(e._scope)return N[e._scope]}(e))||V}function oe(e,t){if(e){var n,r,i=N(e,0,t)\nif(1!=e.nodeType)e.render&&e.render(i)\nelse if(W&&\"SELECT\"===e.tagName&&e.parentNode.insertBefore(e,e),!ae(e,l,i)){for(n=e.firstChild;n;n=r)r=n.nextSibling,oe(n,i)\nae(e,\"data-out\",i)}}}function ae(e,t,i){var n,o=0\nif(n=y(e,t)){i._m=R,n=\"data&&(\"+(i._t=n).replace(X,function(e,t,n,r){return i._m[o]=e,e=d[t],(\"::\"===n||e&&P.call(e,\"once\")?\"s(n,B,data._t=data._t.replace(data._m[\"+o+++\"],''))||\":\"\")+(e?\"b['\"+t+\"'].call(data,n\"+(e.raw?\",'\"+r+\"'\":r?\",\"+r:\"\"):\"s(n,'\"+t+\"',\"+r)+\")||\"})+\"r)\"\ntry{for(var r=n.replace(B,\"\").match(J)||[],o=r.length;o--;)r.indexOf(r[o])!==o&&r.splice(o,1)\nreturn Function(\"n,data,b,s,B,r\",(r[0]?\"var \"+r.join(\"='',\")+\"='';\":\"\")+\"with(data||{})return \"+n).call(e,e,i,d,b,t)?1:void 0}catch(a){c.onerror&&c.onerror(a.message,a.fileName,a.lineNumber)}}}for(G in m&&(_.beforeunload=\"pagehide\"),o.stop=function(e){return e&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1},re.once=1,g.on=d.on=re,g.off=E(O),g.one=function(e,t,n){return M(e,t,n),M(e,t,function r(){O(e,t,n),O(e,t,r)}),e},g.emit=function(e){T.emit.apply(e,L.call(arguments,1))},g.empty=ie,g.kill=S,g.render=oe,g.replace=function(e,t){var n=e&&e.parentNode\nif(n&&t)return n.replaceChild(e,t)},g)ce(G)\nfunction ce(i){e[i]=function ce(){var e=0,t=this,n=t.length,r=L.call(arguments)\nfor(r.unshift(1);e<n;)r[0]=t[e++],g[i].apply(null,r)\nreturn t}}function le(e){var u=g(\"div\"),f=[-1],p=[]\nfunction h(e,t,n,r,i,o,a,c,l,s){if(!s||e!==t){for(i=t.length;i<=f[0];){if(u.plugin){if(u.plugin.content&&!u.plugin.el.childNodes[0])break\nu.plugin.done()}u=p.pop(),f.shift()}u._r?u.txt+=e+\"\\n\":n||l&&(r=\"map\")?k[r]?(p.push(u),f.unshift(i),u=new k[r](u,o+a,c?\"\":\";\").el):w(u,e):c?se(u,a,\"\"):(r&&(p.push(u),f.unshift(i),w(u,u=i=g(r))),a&&\"/\"!=o&&(\">\"===o?(t+\" \"+a).replace(U,h):\"|\"===o||\"\\\\\"===o?w(u,a):(\"@\"===o?a=a.replace(/(\\w+):?/,\"on:'$1',\"):\";\"!=o&&\"^\"!=o&&(a=(\"INPUT\"===u.tagName?\"val\":\"txt\")+(\"=\"===o?\":\"+a.replace(/'/g,\"\\\\'\"):\":_('\"+a.replace(/'/g,\"\\\\'\")+\"',data)\")),se(u,a,\";\",o))))}}e.replace(U,h),h(\"\",\"\")}function se(e,t,n,r){var i=y(e,l)\nb(e,l,i?\"^\"===r?t+n+i:i+n+t:t)}function C(e,t){var n=this,t=t.split(h)\nn.name=t[0],n.attr=t.slice(1),n.parent=e,n.el=g(\"div\"),n.el.plugin=n}function A(e,t,n){var r=this\nr._r=r.parent=e,r.txt=\"\",(r.plugin=r.el=r).params=t,r.a=n}e.append=function(e){var t=this\nreturn t._s?w(t[t._s[y(e,\"slot\")||t._s._]||0],e):t.push(e),t},e.cloneNode=function(e){return(e=new v(this,e))._s=this._s,e},g.append=w,g.scope=N,C[i]={_done:function(){var e=this,t=e.el.childNodes,n=e.el._cp,r=t[1]?new v(t):t[0]\nreturn-1<n&&(1==t[n].nodeType&&e.el._sk&&b(t[n],\"data-slot\",e.el._sk),r._s=e.el._s),e.el.plugin=e.el=e.parent=null,r}},A[i].done=Function(\"Function(this.txt)()\")\nvar k=g.plugins={binding:F(A,{done:function(){r.assign(d,Function(\"return({\"+this.txt+\"})\")())}}),slot:F(C,{done:function(){for(var e=this.name||++$,t=w(this.parent,a.createComment(\"%slot-\"+e));t.parentNode;t=t.parentNode);(t._s||(t._s={}))[e]=t.childNodes.length-1,this.name||(t._s._=t._sk=e),t._cp=t.childNodes.length-1}}),css:F(A,{done:Function(\"xhr.css(this.txt)\")}),def:F(A,{done:Function(\"View.def(this.params||this.txt)\")}),each:F(A,{done:function(){var t=this.txt\nJSON.parse(this.params).each(function(e){le(t.format(Ee(e)?e:{item:e}))})}}),el:F(C,{content:1,done:function(){var e=this,t=e.parent\nreturn n[e.name]=e._done(),t}}),js:A,map:F(A,{done:function(){var e=this,t=e.params+e.txt\nse(e.parent,e.a?t.slice(1):t,e.a)}}),view:F(C,{content:1,done:function(){var e=this,t=e.attr,n=y(e.el,l),i=View(e.name,e._done(),t[0],t[1])\nn&&(e=n.replace(X,function(e,t,n,r){return\"(this['\"+t+\"']\"+(\"function\"==typeof i[t]?\"(\"+(r||\"\")+\")\":\"=\"+r)+\"),\"})+\"1\",Function(e).call(i))}}),\"view-link\":F(C,{done:function(){var t=this.attr\nView(this.name,null,t[1]).on(\"ping\",function(e){View.show(t[0].format(e))})}})}\nfunction ue(){return c.pageXOffset||u.scrollLeft||s.scrollLeft||0}function fe(){return c.pageYOffset||u.scrollTop||s.scrollTop||0}k.child=k.slot,xhr.view=xhr.tpl=g.tpl=le,xhr.css=function(e){t||w(a.getElementsByTagName(\"head\")[0],t=g(\"style\")),t.styleSheet?t.styleSheet.cssText+=e:w(t,e)},g.scrollLeft=ue,g.scrollTop=fe\nvar D=[],pe=g.kbMod=m?\"metaKey\":\"ctrlKey\",he=g.kbMap={8:\"backspace\",9:\"tab\",13:\"enter\",16:\"shift\",17:\"ctrl\",18:\"alt\",19:\"pause\",20:\"caps\",27:\"esc\",33:\"pgup\",34:\"pgdown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"ins\",46:\"del\",91:\"cmd\",112:\"f1\",113:\"f2\",114:\"f3\",115:\"f4\",116:\"f5\",117:\"f6\",118:\"f7\",119:\"f8\",120:\"f9\",121:\"f10\",122:\"f11\",123:\"f12\"}\nfunction j(e,t,n){for(var r,i,o=0,a=e.target||e.srcElement,c=/INPUT|TEXTAREA|SELECT/i.test((3==a.nodeType?a.parentNode:a).tagName);(i=D[o++])&&!(r=!c||i.input?i[t]||i[n]||i.num&&47<t&&t<58&&(n|=0,i.num)||i.all:r)&&i.bubble;);r&&(Y(r)?View.emit(r,e,n,a):r(e,n,a))}function de(e){-1<(e=D.indexOf(e||D[0]))&&D.splice(e,1)}g.addKb=function(e,t){e&&(D.unshift(e),t)&&T.on.call(t,\"kill\",de.bind(e,e))},g.rmKb=de,M(a,\"keydown\",function(e){var t,n\nD[0]&&(t=e.keyCode||e.which,n=he[t=95<t&&t<106?t-48:t]||String.fromCharCode(t).toLowerCase()||t,8==t&&D[0].backspace&&o.stop(e),j(e,t,n),e.shiftKey&&16!=t&&j(e,t,\"shift+\"+n),e.altKey?18!=t&&j(e,t,\"alt+\"+n):17!=t&&(e.ctrlKey&&j(e,t,\"ctrl+\"+n),e[pe])&&91!=t&&j(e,t,\"mod+\"+n))})\nvar me,ge,ve={sm:0,md:601,lg:1025},m=be(ye,100)\nfunction ye(e){var t,n,r=u.offsetWidth,i=ve=e||ve\nfor(t in i){if(i[t]>r)break\nn=t}n!=me&&(x(u,me,0),x(u,me=n)),(n=r>u.offsetHeight?\"landscape\":\"portrait\")!=ge&&(x(u,ge,0),x(u,ge=n)),(n=c.View)&&n.emit(\"resize\")}function F(e,t){function n(){return e.apply(this,arguments)}return n[i]=r.create(e[i]),r.assign(n[i],t),n[i].constructor=n}function be(t,n){var r,i=0\nreturn function(){var e=Date.now()\nclearTimeout(r),i<=e?(i=e+n,t()):r=setTimeout(t,i-e)}}function we(e){return\"number\"==typeof e}function Ee(e){return e&&e.constructor===r}function Y(e){return\"string\"==typeof e}g.setBreakpoints=ye,m(),M(c,\"resize\",m),M(c,\"orientationchange\",m),M(c,\"load\",m),g.rate=be,g.step=function(e,t,n){var r=(\"\"+t).split(\".\"),e=e/t,e=~~(e+(e<0?-1:1)*(n==f?.5:1===n&&e==(0|e)?0:+n))*t\nreturn\"\"+(1 in r?e.toFixed(r[1].length):e)}}(window,document,Object,Event,\"prototype\"),!function(e,t,n){var l,s,r,i=\"http://www.w3.org/2000/svg\",o=\"http://www.w3.org/1999/xlink\",a=t.createElementNS&&t.createElementNS(i,\"svg\").createSVGRect,e=e&&e.prototype\nfunction c(e,t,n,r){return r=(r-90)*Math.PI/180,{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}a&&e&&((\"svg defs pattern g symbol use clipPath textPath marker mask stop linearGradient radialGradient \"+\"circle ellipse image line mesh path polygon polyline rect text tspan \"+\"filter feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDropShadow feFlood eFuncA feFuncB feFuncG feFuncR eGaussianBlur feImage feMerge feMergeNode feMorphology feOffset feSpecularLighting feTile feTurbulence\").replace(/\\w+/g,function(e){El.cache[e]=t.createElementNS(i,e)}),n.arc=function(e,t,n,r,i,o){var a=o&&i&&r||e.viewportElement.viewBox.baseVal.width>>1\ne.setAttribute(\"d\",(t=3.6*t,n=c(i=i||a,o=o||a,r=r||a,a=3.6*n),i=c(i,o,r,t),o=a-t<=180?\"0\":\"1\",[\"M\",n.x,n.y,\"A\",r,r,0,o,0,i.x,i.y].join(\" \")))},n.xlink=function(e,t){e.setAttributeNS(o,\"xlink:href\",t)},n.xlink.once=1,l=\"a? ? 0 1 0 ? -?\".split(\"?\"),s=\"a? ? 0 1 0 ? ?\".split(\"?\"),n.svgLine=function(e,t,n){var r,i,o=0,a=(n=n||{}).radius||0,c=[\"M\"+(100-a),t[0]]\nfor(a&&c.push(l.join(a),s.join(a));++o<t.length;)n.smooth?c.push(\"C\"+(100*o+50-a),t[o-1]+\",\"+(100*o+50+a),t[o]+\",\"+(100*o+100-a),t[o]):c.push(\"L\"+(100*o+100-a),t[o]),a&&c.push(l.join(a),s.join(a))\ne.setAttribute(\"d\",c.join(\" \")),i=(r=e).getTotalLength(),r.style.transition=r.style.WebkitTransition=\"none\",r.style.strokeDasharray=i+\" \"+i,r.style.strokeDashoffset=i,r.getBoundingClientRect(),r.style.transition=r.style.WebkitTransition=\"stroke-dashoffset 5s ease .5s\",r.style.strokeDashoffset=\"0\",e.parentNode.append([])},n.initChart=function(t){El.on(t,\"mouseout\",function(e){r&&e.target==t&&El.cls(r,\"is-active\",r=null)})},n.svgToLast=function(e){El.on(e,\"mouseover\",function(){r&&e==e.parentNode.lastChild||(El.cls(r,\"line-active\",0),El.append(e.parentNode,e),El.cls(e,\"is-active\",r=e))})},n.svgToLast.once=n.initChart.once=1)}(this.SVGElement,document,El.bindings),!function(r,i){var o,a,c,l,t=\"-tf\",s=\"pointermove\",n=\"start\",u=\"end\",f=[0,1,4,2],p=r.fixEv,h=r.fixFn,d=[],m={}\nfunction g(e,t){var n=e?d.push(e):d.length\nif(m.cancel=!1,0===n&&(l&&(El.emit(o,l+u,t,m,o),l=null),o=null),1===n){if(e){if(o=e.currentTarget||e.target,2===e.button||El.matches(e.target,\"INPUT,TEXTAREA,SELECT,.no-drag\"))return}else e=d[0]\nm.X=e.clientX,m.Y=e.clientY,E(\"left\",\"offsetWidth\"),E(\"top\",\"offsetHeight\"),v(e)}return 2===n&&(o.clientWidth,a=c=null,y(e)),El[1===n?\"on\":\"off\"](i,s,v),El[2===n?\"on\":\"off\"](i,s,y),r.stop(e)}function v(e){if(d[0].buttons&&d[0].buttons!==(e.buttons||f[e.which||0]))return w(e)\nm.leftPos=e.clientX-m.X+m.left,m.topPos=e.clientY-m.Y+m.top,l||(l=\"pan\",El.emit(o,l+n,e,m,o)),El.emit(o,\"pan\",e,m,o),m.cancel||(o.getBBox?El.attr(o,{x:m.leftPos,y:m.topPos},0):El.css(o,{left:m.leftPos+\"px\",top:m.topPos+\"px\"},0))}function y(e){d[d[0].pointerId==e.pointerId?0:1]=e\nvar t=m.X-d[1].clientX,n=m.Y-d[1].clientY,r=0|Math.sqrt(t*t+n*n),n=Math.atan2(n,t)\nnull!==a&&((t=r-a)&&El.emit(o,\"pinch\",e,t,n),t=n-c)&&El.emit(o,\"rotate\",e,t*(180/Math.PI)),a=r,c=n}function b(e,t){if(e.ctrlKey&&!d[0]&&El.emit(e.currentTarget||e.target,\"pinch\",e,t,0))return r.stop(e)}function w(e){for(var t=d.length;t--;)if(d[t].pointerId==e.pointerId){d.splice(t,1)\nbreak}g(null,e)}function E(e,t){var n=o.getBBox?o.getAttributeNS(null,\"top\"==e?\"y\":\"x\"):o.style[e]\nm[e]=parseInt(n,10)||0,n&&-1<n.indexOf(\"%\")&&(m[e]*=o.parentNode[t]/100)}function x(e){e[t]||(e.style.touchAction=e.style.msTouchAction=\"none\",El.on(e,\"pointerdown\",g),El.on(e,\"pointerup pointercancel\",w),El.on(e,\"wheel\",b),e[t]=1)}\"pan pinch rotate\".split(\" \").map(function(e){p[e]=p[e+n]=p[e+u]=\"\",h[e]=x})}(Event,document),!function(e){var r=Object.prototype.hasOwnProperty,n=Array.prototype.slice\nfunction t(a,t,c){var l=0,s=this,e=a.parentNode,u=document.createComment(\"every \"+(t.name||t.length)),f=[]\nreturn e.replaceChild(u,a),t&&(\"string\"==typeof t?(s.model.on(\"change:\"+t,n),El.on(e,\"kill\",function(){s.model.off(\"change:\"+t,n)}),n()):t.eachLive?(t.eachLive(r,i,t),El.on(e,\"kill\",function(){t.off(\"add\",r,t).off(\"remove\",i,t)})):(u.render=n)()),!0\nfunction n(){for(;l;l--)i()\nvar e=\"string\"==typeof t?s.model.get(t,[]):t\n\"string\"==typeof e&&e.split(\",\"),Object.each(e,r,e.constructor===Object?Object.keys(e):e)}function r(e,t){l++\nvar n,r=a.cloneNode(!0),i=El.scope(r,s),o=f[t]||u\no.parentNode&&(f.splice(t,0,r),i.i=t,(i._scope=i).len=this.length,i[c||\"item\"]=e,El.append(o.parentNode,r,o),El.render(r,i),\"function\"==typeof e.on)&&(e.on(\"change\",n=El.render.bind(r,r)),El.on(r,\"kill\",function(){e.off(\"change\",n)}))}function i(e,t){El.kill(f.splice(t,1)[0])}}function i(e){El.on(e,\"click pointerdown\",function(e){if((this.firstChild||this).readOnly)return Event.stop(e)})}function o(e,t){return t.apply(e,n.call(arguments,3))}function a(n,r,i,o,a,c){El.on(n,\"submit\",function(e){var t=El.val(n)\nreturn View.emit(r,e,t,i,o,a,c),Event.stop(e)})}function c(e,t){var n=function(e){var t,n=e._childs\nif(!n)for(e._childs=n=[];t=e.firstChild;)n.push(t),e.removeChild(t)\nreturn n}(e)[0],t=/^\\s*(\\w+) in (\\w*)(.*)/.exec(t),t=\"with(data){var out=[],loop={i:0,offset:0},_1,_2=\"+t[2]+t[3].replace(/ (limit|offset):\\s*(\\d+)/gi,\";loop.$1=$2\")+\";if(_2)for(_1 in _2)if(hasOwn.call(_2,_1)&&!(loop.offset&&loop.offset--)){\"+\"loop.i++;\"+\"if(loop.limit&&loop.i-loop.offset>loop.limit)break;\"+\"var clone=el.cloneNode(true)\"+\",scope=El.scope(clone,data);\"+\"scope.loopKey=loop.key=_1;\"+\"scope.loop=loop;\"+\"scope.\"+t[1]+\"=_2[_1];\"+\"out.push(clone);\"+\"};return out}\",t=Function(\"hasOwn,el,data\",t)(r,n,this)\nreturn El.append(El.empty(e),t),El.render(e),e}i.once=t.once=a.once=o.once=c.raw=c.once=!0,e.every=t,e.fixReadonlyCheckbox=i,e.fn=o,e[\"if\"]=function(e,t){var n=e.parentNode,r=this\n{if(!t)return n&&(e._ifComm||(El.on(e,\"kill\",El.kill.bind(e,e._ifComm=document.createComment(\"if\"))),e._ifComm.render=function(){El.render(e,r)}),n.replaceChild(e._ifComm,e)),!0\n!n&&e._ifComm&&e._ifComm.parentNode.replaceChild(e,e._ifComm)}},e.is=function(e,t,n,r,i,o){var a\n\"string\"==typeof t&&(o=i,i=r,r=n,n=t,t=this.model),t&&n&&(o=o||\"is-\",a=i18n.pick(i!==a?i:t.get(n),r),n+=\"-\"+r,El.cls(e,e[o+n],0),El.cls(e,e[o+n]=a&&o+a))},e.emitForm=a,e.each=c,e.focus=function(e){e.focus()},e.href=function(e,t){var n\nt&&(n=t.charAt(0),El.attr(e,\"href\",\"+\"===n||\"%\"===n?\"#\"+View.expand(t):t))}}(El.bindings),El.bindings.list=function(o,e,t,n){var a=o._child,c=this,l=0,a=a||(o._child=o.removeChild(o.firstChild))\nif(e&&o._list!=e)return o._list&&s(),o._list=c.list=e,El.on(o,\"kill\",s),El.cls(o,\"loading\"),t&&(t.each(r),l=t.length),e.each(r).on(\"add\",r).on(\"remove\",i).on(\"startLoading\",function(){El.cls(o,\"loading\")}).on(\"endLoading\",function(){El.cls(o,\"loading\",0)}).then(function(){void 0!==n&&El.val(o)!==n&&(this.get(n)||(r({id:n,name:n},l),l++),El.val(o,n)),El.cls(o,\"loading\",0)}),!0\nfunction r(e,t){var n=a.cloneNode(!0),r=El.scope(n,c)\nfunction i(){El.render(n,r)}return r.item=e.data||e||{id:e,name:e},r.model=e,r.pos=t,e.on&&(e.on(\"change\",i),El.on(n,\"kill\",function(){e.off(\"change\",i)})),El.append(o,n,l+t),El.render(n,r)}function i(e,t){El.kill(o.childNodes[l+t])}function s(){var e=o._list\nEl.empty(o),e&&(o._list=null,e.off(\"add\",r).off(\"remove\",i))}},!function(x,f){\"use strict\"\nvar r=f.create(null),i=f.create(null),c=f.create(null),l=f.keys,_=\"Invalid filter: \",t=/['\\n\\r\\u2028\\u2029]|\\\\(?!x2e)/g,n=/(^$|[\\s\\S]+?)(?:(?:\\[((?:\\[[^\\]]+\\]|[^\\]])*)\\]|\\{([^}]*)})(?:([*^])(.*))?)?(?:\\.(?=([^.]))|(?:;(.+))?$)/g,s=\"i,j,I,J,K,m,p,f,r,e,t\",u=/(\\w+)(?::((?:(['\"\\/])(?:\\\\\\3|.)*?\\3[gim]*|[^;])*))?/g,T=/[.+^=:${}()|\\/\\\\]/g,a=/\\[(.*?)\\]/g,M=/\\[.+?\\]|[?*]/,O=/\\?|(?=\\*)/g,S=/\\[!(?=.*\\])/g,$=/^(-?(\\d*\\.)?\\d+|true|false|null)$/,N=/(\"|')(?:\\\\\\1|.)*?\\1|(\\w*)\\{((?:(\"|')(?:\\\\\\4|.)*?\\4|\\w*\\{(?:(\"|')(?:\\\\\\5|.)*?\\5|[^}])*?\\}|.)*?)\\}|([@$]?)([^,]+)/g,e=/(!?)(\\$?)((?:[-+:.\\/\\w]|\\[[^\\]]+\\]|\\{[^}]+}|\\\\x2e)+)(\\[]|\\{}|)(?:(!(?=\\1)==?|(?=\\1)[<>=]=?)((?:(\"|')(?:\\\\\\7|.)*?\\7|\\w*\\{(?:(\"|')(?:\\\\\\8|.)*?\\8|\\{(?:(\"|')(?:\\\\\\9|.)*?\\9|[^}])*?\\}|[^{\"'])*?\\}|[^|&()])*))?(?=[;)|&]|$)|(([;&|])\\11*|([()])|.)/g,p=RegExp(\"^(?:([@*])|\"+e.source.slice(0,-10)+\"))+$\"),L=/(\\(o=d\\)&&(?!.*o=o).*)\\(o=d\\)&&/g,h={\"==\":\"a==d\",\"===\":\"a===d\",\">\":\"a<d\",\">=\":\"a<=d\",\"<\":\"a>d\",\"<=\":\"a>=d\",\"~\":\"typeof d==='string'&&a.test(d)\"},P={R:\"Time()-Date.now()\",w:\"Day()||7\",Y:\"FullYear()%100\",M:\"Month()+1\",D:\"Date()\",h:\"Hours()\",H:\"Hours()%12||12\",m:\"Minutes()\",s:\"Seconds()\",S:\"Milliseconds()\"},d=h.hasOwnProperty,I=new Date,m=Array.isArray\nfunction g(e){return\"'\"+(e||\"\").replace(t,U)+\"'\"}function U(e){return escape(e).replace(/%u/g,\"\\\\u\").replace(/%/g,\"\\\\x\")}function C(e,t){return(\"/\"===e.charAt(0)?e.slice(1).replace(/\\./g,\"\\\\x2e\").replace(/\\//g,\".\").replace(/~1/g,\"/\").replace(/~0/g,\"~\"):e).replace(n,!0===t?X:v)}function v(e,t,n,r,i,o,a,c){var l=a?\"(o=\":\"(c=\",s=n||r\nif(s&&!(s=p.exec(s)))throw Error(_+e)\nif(l=(s||i?v(0,t,0,0,0,0,1)+(n||\"\"===n?\"i\":\"j\")+\"(o)&&\"+l+(i?\"f(o,\"+(s?\"m(\"+g(s[0])+\")\":\"1\")+(o?(\"*\"===i?\",p(\":\",r(\")+g(o)+\"))\":\")\"):s[1]?(n?\"o\":\"K(o)\")+(\"*\"===s[0]?\"\":\".length\"):+n==n?\"o[\"+(n<0?\"o.length\"+n:n)+\"]\":\"@\"===s[0].charAt(0)?\"o[p(\"+g(s[0].slice(1))+\")(d)]\":(n?\"I\":\"J\")+\"(o,m(\"+g(s[0])+\"),0,b)\")+\")\":l+\"o[\"+g(t)+\"])\"+(\"\"===n?\"&&i(c)&&c\":\"\"===r?\"&&j(c)&&c\":\"\"))+(a?\"&&\":\"\"),c)for(;s=u.exec(c);)l=\"(c=e.\"+s[1]+\"(\"+l+(s[2]?\",\"+s[2]:\"\")+\"))\"\nreturn l}function X(e,t,n,r,i,o,a){var t=\"o[\"+g(t)+\"]\",c=\"\",r=n||r\nif(r||i)if(c=\"(o=\"+(n||\"\"===n?\"i(\":\"j(\")+t+\")?\"+t+\":(\"+t+(n||\"\"===n?\"=[]\":\"={}\")+\"))&&\",\"-\"===n)t=\"o[o.length]\"\nelse if(+n==n)t=\"o[\"+(n<0?\"o.length\"+n:n)+\"]\"\nelse if(\"@\"===r.charAt(0))t=\"o[p(\"+g(r.slice(1))+\")(d)]\"\nelse if(!i){if(!p.test(n))throw Error(_+e)\nt=\"o[t]\",c+=\"(t=\"+(n?\"I\":\"J\")+\"(o,m(\"+g(r)+\"),1,b))!=null&&\"}return c+(i?\"(c=f(o,\"+(r?\"m(\"+g(r)+\")\":1)+(o?\",p(\"+g(o)+\",true),v))\":\",0,v))\"):a?\"(o=typeof \"+t+\"==='object'&&\"+t+\"||(\"+t+\"={}))&&\":\"((c=\"+t+\"),(\"+t+\"=v),c)\")}function y(e,t){var n=!0===t?i:r\nreturn n[e]||(n[e]=Function(s,\"return function(d,v,b){var c,o;return (o=d)&&\"+C(e,t)+(t?\",c}\":\"!==void 0?c:v}\"))(m,E,D,j,l,A,y,F,w,x.ext))}function A(e,t,n,r,i){var o,a=[],t=(t||\"\")+(h[e]||b(e,n,a,r)),n=c[t]\nif(!n){for(o=t;o!=(o=o.replace(L,\"$1\")););(n=c[t]=Function(h[e]?\"a\":\"a,\"+s,\"return function(d,b){var o;return \"+o+\"}\")).source=o}return h[e]?n:n(a,m,E,D,j,l,A,y,F,w,x.ext,i)}function z(e){return\"(t.get\"+P[e]+\")\"}function b(y,b,w,E){return y.replace(e,function(e,t,n,r,i,o,a,c,l,s,u,f,p){if(u){if(f||p)return p||(\";\"==f?\"&&\":f+f)\nthrow Error(_+y)}if(n)return b&&(b[r]=a),\"1\"\nvar h,d,m,g,v=[],u=\"(o=d)&&\"\nr=(E||C)(r),(d=r.match(/\\(c=(.*?)\\)$/))&&(r=\"K(o)\"==d[1]?(u+=r+\"&&\",\"c\"):(d.index&&(u+=r.slice(0,d.index)),d[1]))\n\"!=\"!=o&&\"!==\"!=o||(t=\"!\",o=o.slice(1))\ni&&(u+=t+(\"[]\"===i?\"i(\":\"j(\")+r+\")\")\nif(!o)return\"\"===i?u+t+r:u\n\"=\"!=o&&\"==\"!=o||(o+=\"=\")\n\"\"===a&&(a=\"''\")\nfor(;d=N.exec(a);)g=0,m=\"$\"==d[6]?\"b['\"+d[7]+\"']\":k(w,d[1]||d[3]?d[0].slice(d[3]?d[2].length+1:1,-1):d[6]?d[7]:$.test(d[0])?x.parse(d[0]):(g=M.test(d[0]))?RegExp(\"^\"+d[0].replace(T,\"\\\\$&\").replace(O,\".\").replace(S,\"[^\")+\"$\",\"==\"===o?\"i\":\"\"):d[0]),h=(d[2]?\"m.\"+d[2].toLowerCase():d[3]?\"m\":i||\"c\"===r?k(w,A(g?\"~\":o)):\"\")+\"(\"+m,v.push(i||\"c\"===r?(\"{}\"==i?\"J(\":\"I(\")+r+\",\"+h+\"),0,b)\":d[2]||d[3]?h+\")(\"+r+\")\":g?\"typeof \"+r+\"==='string'&&\"+m+\".test(\"+r+\")\":d[6]?r+\"!==void 0&&\"+r+o+(\"$\"==d[6]?\"b['\"+d[7]+\"']\":\"p(\"+m+\")(o)\"):r+o+m)\nreturn u+(i?t?\"||\":\"&&\":\"\")+t+\"(\"+v.join(\"||\")+\")\"}).replace(/^[1&]&+|&+1?$/g,\"\")||\"1\"}function k(e,t){for(var n=e.length;0<=--n&&!(e[n]===t||t&&t.source&&t.source===e[n].source););return\"a[\"+(-1<n?n:e.push(t)-1)+\"]\"}function w(e,t){for(var n,r,i=0,o=[],a={};n=N.exec(e);)y((r=n[0].split(\":\"))[0],!0)(a,i),o[i++]=y(r[1]?n[0].slice(r[0].length+1):r[0])\nreturn Function(\"g,a\",\"return function(o,a){return \"+x.stringify(a).replace(/:(\\d+)/g,\":g[$1](o)\")+\"}\")(o,t)}function E(e){return!!e&&e.constructor===f}function D(e,t,n,r){for(var i=-1,o=e.length;++i<o;)if(t(e[i],r))return 0===n?e[i]:i\nreturn 0!==n&&o}function j(e,t,n,r){for(var i in e)if(t(e[i],r))return 0===n?e[i]:i\nreturn null}function F(e,t,n,r){var i=[],o=-1,a=e.length\nif(E(e))for(o in e)d.call(e,o)&&(1===t||t(e[o]))&&(i.push(n?n(e[o],r):e[o]),0===n)&&(e[o]=r)\nelse for(;++o<a;)1!==t&&!t(e[o])||(i.push(n?n(e[o],r):e[o]),0!==n)||(e[o]=r)\nreturn i}x.matcher=A,x.get=function(e,t,n){return y(t)(e,n)},x.isObject=E,x.mergePatch=function Y(e,t,n,r,i){var o,a,c,l,s,u\nif(E(t))for(a in i=i||\"\",E(e)||(e={}),t)o!==(c=E(e[a])?f.assign({},e[a]):e[a],l=t[a])&&d.call(t,a)&&(o==l?o!==c&&delete e[a]:e[a]!==l)&&(u=i+\"/\"+a.replace(/~/g,\"~0\").replace(/\\//g,\"~1\"),s=n&&E(e[a])&&n.length,o!=l&&(e[a]=Y(e[a],l,n,r,u)),!1===s||n&&s!=n.length)&&(n.push(u),r)&&(r[u]=c)\nelse{if(n&&E(e)){for(a in l={},e)d.call(e,a)&&(l[a]=null)\nY(e,l,n,r,i)}e=t}return e},x.set=function(e,t,n){return y(t,!0)(e,n)},x.setForm=function(e,t,n){for(var r,i=t,o=e;r=a.exec(t);)o===e&&(i=i.slice(0,r.index)),r=r[1],o=o[i]||(o[i]=r&&+r!=r?{}:[]),i=r\nm(o)?o.push(n):m(o[i])?o[i].push(n):o[i]=null!=o[i]?[o[i],n]:n},x.tr=w,x.get.str=C,A.re=e,A.str=b,A.valRe=N,x.ext={toNum:function(e,t){t=\"string\"==typeof e?parseFloat(e.replace(t||\".\",\"﷿\").replace(/[^-e\\d\\ufdff]/g,\"\").replace(\"﷿\",\".\")):NaN\nreturn t==t?t:null},toDate:Date.parse},x.clone=function o(e){var t,n\nif(e&&\"object\"==typeof e){for(n in t=e instanceof Date?new Date(e):e instanceof RegExp?RegExp(e.source,(\"\"+e).split(\"/\").pop()):e.constructor(),e)d.call(e,n)&&(t[n]=o(e[n]))\ne=t}return e},A.date=function(e){return A(e,\"(t.setTime(typeof d==='string'?Date.parse(d):+d)>=0)&&\",null,z,I)}}(JSON,Object),!function(n,i,s){\"use strict\"\nvar o,c,a=Array.isArray,l=i.create,r={},u=/{(?!;)({[\\s\\S]*}|\\[[\\s\\S]*]|(?:(\"|')(?:\\\\\\2|.)*?\\2|[^;{}])+?)(?:;((?:(['\"\\/])(?:\\\\\\4|.)*?\\4[gim]*|[^}])*))?}/g,f=/(['\"\\/])(?:\\\\\\1|.)*?\\1[gim]*|\\b(?:[$_]|false|in|null|true|typeof|void)\\b|\\.\\w+|\\w+\\s*:|\\s+/g,p=/(\\$?)([a-z_][\\w$]*)/gi,h=/(\\w+)(?::((?:(['\"\\/])(?:\\\\\\3|.)*?\\3[gim]*|[^;])*))?/g,d=/^([\\w ]+)\\.([\\w ]+)$/,m={},g=w.vals={},v=w.list=[],y=w.ext={},b={}\nfunction w(e,t){return\"number\"==typeof e?\"\"+e:M(e=r[e]||(r[e]=function(e){for(var t,n,r,i,o=\"\",a=\"\",c=0;n=u.exec(e);){for(r=n[1].replace(f,\"\");t=p.exec(r);)o+=(o?\",\":\"var \")+t[0]+(t[1]?\"=\":\"=$['\"+t[0]+\"']!=null?$['\"+t[0]+\"']:\")+\"$g['\"+t[2]+\"']!=null?$g['\"+t[2]+\"']:''\"\nif(r=n[1],i=E(n[3],n[3]))if(y[t=i.charAt(0)])r=\"_.\"+y[t]+\"(\"+r+\",\"+N(i.slice(\"#\"===t?0:1))+\")\"\nelse for(;t=h.exec(i);)r=\"_.\"+t[1]+\".call($,\"+r+(t[2]?\",\"+t[2]:\"\")+\")\"\na+=(a?\"+\":\"\")+(c<n.index?N(e.slice(c,n.index))+\"+(\":\"(\")+r+\")\",c=n.index+n[0].length}if(a)try{return s(\"$,_,$g\",o+\";return(\"+a+(c<e.length?\")+\"+N(e.slice(c)):\")\"))}catch(l){}return e.replace(/{;/g,\"{\")}(E(e)||e)))?e:e(t||{},w,g)}function E(e,t){var n\nreturn M(e)?M(c[e])?c[e]:\"object\"==typeof c[e]?c[e][\"\"]:(n=d.exec(e))&&(\"object\"==typeof c[n[1]]&&c[n[1]][n[2]]||c[n[2]]||t||n[2])||t:a(e)?E(e[0],E(e[1],E(e[2],t))):t}function x(e,t){v.indexOf(e)<0&&(w[e]=l(m),v.push(e),o||T(e)),function r(e,t){for(var n in t)e[n]=t[n]&&t[n].constructor===i?r(l(e),t[n]):t[n]\nreturn e}(w[e],t)}function _(e){return e&&(w[e=(\"\"+e).toLowerCase()]||w[e=e.split(\"-\")[0]])&&e}function T(e){return(e=_(e))&&o!==e&&(r={},c=w[o=w.current=e]=w[o]),o}function M(e){return\"string\"==typeof e}function O(e){return e&&e.constructor===i}function S(e,t,n){return c&&(O(c[t])&&c[t][e]||O(c[e])&&c[e][t]||M(c[e+t])&&c[e+t]||M(c[t])&&c[t])||M(n)&&n||\"\"}function N(e){return\"'\"+(e||\"\").replace(/'/g,\"\\\\'\").replace(/\\n/g,\"\\\\n\")+\"'\"}(n.i18n=w).add=x,w.get=E,w.use=T,w.def=function(e){for(var t in e)x(t,e)}\nvar t=/([Md])\\1\\1\\1?|([yMdHhmswSZ])(\\2?)|[uUaSeoQ]|'((?:''|[^'])*)'|([\"\\\\\\n\\r\\u2028\\u2029])/g,C=l(null),A=new Date,k=new Date,D={e:\"Day()||7\",M:\"Month()+1\",d:\"Date()\",H:\"Hours()\",h:\"Hours()%12||12\",m:\"Minutes()\",s:\"Seconds()\",S:\"Milliseconds()\"}\nfunction e(e,t,n){var r,i,e=\"number\"==typeof e?e:isNaN(e)?Date.parse(e):+e,o=c[\"@\"],t=o[t]||t||o.iso,n=n!=i?n:Date._tz!=i?Date._tz:i,a=\"UTC:\"===t.slice(0,4)\nreturn n==i||a?(A.setTime(e),r=a?0:-A.getTimezoneOffset()):(A.setTime(e+6e4*(r=60*n)),a=t=\"UTC:\"+t),isNaN(e)?\"\"+e:(C[t]||(C[t]=s(\"d,a,o,l\",'var t;return \"'+j(t,a)+'\"')))(A,k,r,o)}function j(a,e){var c=\"d.get\"+(e?\"UTC\":\"\"),l=\"a.setTime(+d+((4-(\"+c+D.e+\"))*864e5))\"\nreturn(e?a.slice(4):a).replace(t,function(e,t,n,r,i,o){return a=o?escape(o).replace(/%u/g,\"\\\\u\").replace(/%/g,\"\\\\x\"):void 0!==i?i.replace(/''/g,\"'\"):t?\"l.names[\"+c+(\"M\"===t?\"Month\":\"Day\")+\"()+\"+(\"ddd\"===e?24:\"d\"===t?31:\"MMM\"===e?0:12)+\"]\":\"u\"===e?\"(d/1000)>>>0\":\"U\"===e?\"+d\":\"Q\"===e?\"((\"+c+\"Month()/3)|0)+1\":\"a\"===e?\"l[\"+c+D.H+\">11?'pm':'am']\":\"o\"===e?l+\",a\"+c.slice(1)+\"FullYear()\":\"y\"===n?c+\"FullYear()\"+(\"y\"===r?\"%100\":\"\"):\"Z\"===n?\"(t=o)?(t<0?((t=-t),'-'):'+')+(t<600?'0':'')+(0|(t/60))\"+(r?\"\":\"+':'\")+\"+((t%=60)>9?t:'0'+t):'Z'\":\"w\"===n?\"Math.ceil(((\"+l+\"-a.s\"+c.slice(3)+\"Month(0,1))/864e5+1)/7)\":c+D[n||e],void 0!==i||o?a:'\"+('+(\"SS\"===e?\"(t=\"+a+\")>9?t>99?t:'0'+t:'00'+t\":r&&\"Z\"!==n?\"(t=\"+a+\")>9?t:'0'+t\":a)+')+\"'})}(w[y[\"@\"]=\"date\"]=e).dateStr=j,w.detect=function(e){var t=n.navigator||n\nreturn T([t.language,t.userLanguage].concat(t.languages,e,v[0]).filter(_)[0])}\nvar F=/([^\\d#]*)([\\d# .,_·']*\\/?\\d+)(?:(\\s*)([a-z%]+)(\\d*))?(.*)/,$=/([.,\\/])(\\d*)$/\nfunction Y(e,t){return t=S(\"#\",t.slice(1),t),(r[t]||(r[t]=s(\"d,g\",\"var N=d<0&&(d=-d),n,r,o;return \"+function(e){var e=e.split(\";\"),t=e[1]||\"-\",n=F.exec(e[0]),r=$.exec(n[2]),i=r&&r[2].length||0,o=r?n[2].slice(0,r.index):n[2],a=o.replace(/\\D+/g,\"\"),c=a.length,l=i?+(\"/\"===r[1]?1/r[2]:a+\".\"+r[2]):a,s=r&&r[1],l=\"d===Infinity?(N?\"+N(e[5]||t)+\":\"+N(e[4]||t)+\"):d>0||d===0||d==='0'?(o=\"+N(n[3])+\",\"+(Y.pre[n[4]]||\"\")+\"n=\"+(i?\"d>1e-\"+(i+1)+\"?(n=(d+'e\"+i+\"')/\"+l+\"e\"+i:\"d>\"+a+\"e-1?(n=d/\"+a)+\",Math.floor(n\"+(\"1\"===e[6]?\"%1?n+1:n\":\"+\"+(e[6]||.5))+\")*\"+l+\"):0,r=\"+(n[5]?\"(''+(+n.toPrecision(\"+n[5]+\")))\":i?\"n.toFixed(\"+i+\")\":\"n+''\")\ni&&(\"/\"===s?l+=\".replace(/\\\\.\\\\d+/,'\"+(\"5\"===r[2]?\"⅕⅖⅗⅘'.charAt(5\":\"⅛¼⅜½⅝¾⅞'.charAt(8\")+\"*(n%1)-1))\":\".\"!==s&&(l+=\".replace('.','\"+s+\"')\"),0===c)&&(l+=\",n<1&&(r=r.slice(1)||'0')\")\n1<c&&(i&&(c+=i+1),l+=\",r=(r.length<\"+c+\"?(1e15+r).slice(-\"+c+\"):r)\");(a=o.match(/[^\\d#][\\d#]+/g))&&(l+=\",r=\"+function u(e,t,n,r){var i=n+e[t].length-1\nreturn\"(n<1e\"+i+(n?\"?r.slice(0,-\"+(n+r)+\"):\":\"?r:\")+(i<16?u(e,t&&t-1,i,r):\"r.slice(0,-\"+(n+r)+\")\")+\"+\"+N(e[t].charAt(0))+\"+r.slice(-\"+(i+r)+(n?\",-\"+(n+r):\"\")+\"))\"}(a,a.length-1,0,i?i+1:0))\n\"o\"===n[4]&&(Y.post.o=\"r+(o=g.o,\"+(b.o=E(\"ordinal\").split(\";\")).pop()+\")\")\nreturn(l+=(n[4]?\",r=\"+(Y.post[n[4]]||\"r+o\"):\"\")+\",N&&n>0?\"+N(e[2]||\"-#\").replace(\"#\",\"'+r+'\")+\":\"+(e[3]?\"n===0?\"+N(e[3])+\":\":\"\")+(n[1]?N(n[1])+\"+r\":\"r\")+(n[6]?\"+\"+N(n[6]):\"\"))+\"):\"+N(t)}(t))))(e,b)}(w[y[\"#\"]=y[\"+\"]=\"number\"]=Y).pre={a:\"(o+=d<1e3?'':d<1e6?(d/=1e3,'k'):d<1e9?(d/=1e6,'M'):d<1e12?(d/=1e9,'G'):d<1e15?(d/=1e12,'T'):d<1e18?(d/=1e15,'P'):(d/=1e18,'E')),\"},Y.post={}\nvar L=/([^;=,]+?)\\?/g,P=/[;=,]/\nw[y[\"?\"]=\"pick\"]=function(e,t){for(var n=S(\"?\",t,t).replace(L,\"$1=$1;\").split(P),r=1|n.length;0<r;)if((r-=2)<0||n[r]&&(n[r]===\"\"+e||+n[r]<=e))return n[r+1]?n[r+1].replace(\"#\",e):\"\"},w[y[\"*\"]=\"plural\"]=function(e,t){var n=S(\"*\",\"\",\"n!=1\")\nreturn(r[n]||(r[n]=s(\"a,n\",\"return (a[+(\"+n+\")]||a[0]).replace('#',n)\")))(S(\"*\",t,\"# \"+t).split(\";\"),e)},w.map=function(e,t,n,r){if(O(e))e=i.values(e)\nelse if(!a(e))return e\nreturn e=e.map(function(e){return w(t,e)}),r=r&&1<e.length?r+e.pop():\"\",e.join(n||\", \")+r},w.upcase=function(e){return M(e)?e.toUpperCase():\"\"+e},w.locase=function(e){return M(e)?e.toLowerCase():\"\"+e},w.json=JSON.stringify}(this,Object,Function),!function(c,e){var t=c[e],n=String[e],i=Number[e],r=/(\\[)((?:\\\\?.)*?)\\]|([YMD])\\3\\3\\3?|([YMDHhmsWSZ])(\\4?)|[uUASwoQ]|([\"\\\\\\n\\r\\u2028\\u2029])/g,l=/(\\d+)[-.\\/](\\d+)[-.\\/](\\d+)/,s=/(\\d+):(\\d+)(?::(\\d+))?(\\.\\d+)?(?:\\s*(?:(a)|(p))\\.?m\\.?)?(\\s*(?:Z|GMT|UTC)?(?:([-+]\\d\\d):?(\\d\\d)?)?)?/i,u=Object.create(null),o={sec:\"s\",second:\"s\",seconds:\"s\",min:\"m\",minute:\"m\",minutes:\"m\",hr:\"h\",hour:\"h\",hours:\"h\",day:\"D\",days:\"D\",week:\"W\",weeks:\"W\",month:\"M\",months:\"M\",year:\"Y\",years:\"Y\"},a={S:1,s:1e3,m:6e4,h:36e5,D:864e5,W:6048e5},f=new c,p=new c,h=new c,d=c.fnMap={w:\"Day()||7\",Y:\"FullYear()%100\",M:\"Month()+1\",D:\"Date()\",h:\"Hours()\",H:\"Hours()%12||12\",m:\"Minutes()\",s:\"Seconds()\",S:\"Milliseconds()\"},m=c.locales={en:{am:\"AM\",pm:\"PM\",names:\"JanFebMarAprMayJunJulAugSepOctNovDecJanuaryFebruaryMarchAprilMayJuneJulyAugustSeptemberOctoberNovemberDecemberSunMonTueWedThuFriSatSundayMondayTuesdayWednesdayThursdayFridaySaturday\".match(/.[a-z]+/g),masks:{LT:\"hh:mm\",LTS:\"hh:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY hh:mm\",LLLL:\"DDDD, D MMMM YYYY hh:mm\"}}},g=c.masks={\"iso\":\"UTC:YYYY-MM-DD[T]hh:mm:ss[Z]\"}\nfunction v(e,t){var c=\"d.get\"+(t?\"UTC\":\"\"),l=\"a.setTime(+d+((4-(\"+c+d.w+\"))*864e5))\"\nreturn(t?e.slice(4):e).replace(r,function(e,t,n,r,i,o,a){n=a?escape(a).replace(/%u/g,\"\\\\u\").replace(/%/g,\"\\\\x\"):t?n:\"Y\"==r?c+\"FullYear()\":r?\"l.names[\"+c+(\"M\"==r?\"Month\":\"Day\")+\"()+\"+(\"DDD\"==e?24:\"D\"==r?31:\"MMM\"==e?0:12)+\"]\":\"u\"==e?\"(d/1000)>>>0\":\"U\"==e?\"+d\":\"Q\"==e?\"((\"+c+\"Month()/3)|0)+1\":\"A\"==e?\"l[\"+c+d.h+\">11?'pm':'am']\":\"o\"==e?l+\",a\"+c.slice(1)+\"FullYear()\":\"Z\"==i?\"(t=o)?(t<0?((t=-t),'-'):'+')+(t<600?'0':'')+(0|(t/60))\"+(o?\"\":\"+':'\")+\"+((t%=60)>9?t:'0'+t):'Z'\":\"W\"==i?\"Math.ceil(((\"+l+\"-a.s\"+c.slice(3)+\"Month(0,1))/864e5+1)/7)\":c+d[i||e]\nreturn t||a?n:'\"+('+(\"SS\"==e?\"(t=\"+n+\")>9?t>99?t:'0'+t:'00'+t\":o&&\"Z\"!=i?\"(t=\"+n+\")>9?t:'0'+t\":n)+')+\"'})}function y(r,e){t[r]=e,n[r]=i[r]=function(e,t,n){return this.date()[r](e,t,n)}}function b(r){c[r]=t[r]=function(e,t){var n=this\nreturn n[\"_\"+r]=e,t?n.date(t):n}}c.makeStr=v,t.date=function(e,t){var n,r,i=this,o=m[i._locale||c._locale||\"en\"]||m.en,e=o.masks&&o.masks[e]||g[e]||e||g.iso,t=t!=r?t:i._tz!=r?i._tz:c._tz!=r?c._tz:r,a=\"UTC:\"==e.slice(0,4)\nreturn t==r||a?(n=a?0:-i.getTimezoneOffset(),f.setTime(+i)):(f.setTime(+i+6e4*(n=60*t)),a=e=\"UTC:\"+e),isNaN(+i)?\"\"+i:(u[e]||(u[e]=Function(\"d,a,o,l\",'var t;return \"'+v(e,a)+'\"')))(f,p,n,o)},y(\"add\",function(e,t,n){var r=this,t=o[t]||t\nreturn\"M\"==t||\"Y\"==t&&(e*=12)?(t=r.getUTCDate(),r.setUTCMonth(r.getUTCMonth()+e),t>(t=r.getUTCDate())&&r.add(-t,\"D\")):e&&r.setTime(r.getTime()+e*(a[t]||1)),n?r.date(n):r}),y(\"startOf\",function(e,t){var n,r=this,e=o[e]||e,i=r._tz!=n?r._tz:c._tz!=n?c._tz:n\nreturn\"Y\"==e?(0===i?r.setUTCMonth(0,1):r.setMonth(0,1),e=\"D\"):\"M\"==e?(0===i?r.setUTCDate(1):r.setDate(1),e=\"D\"):\"W\"==e&&(1!=(n=r.getDay())&&r.setHours(-24*(n?n-1:6)),e=\"D\"),i=i<36?36e5*i:6e4*-r.getTimezoneOffset(),n=r.getTime()+i,r.setTime(n-n%(a[e]||1)-i),t?r.date(t):r}),y(\"endOf\",function(e,t){return this.add(1,e).startOf(e).add(-1,\"S\",t)}),y(\"since\",function(e,t){var n,r=this,t=o[t]||t\nreturn\"string\"==typeof e&&(e=o[e]?(h.setTime(+r),h.tz(r._tz).startOf(e)):e.date()),a[t]?n=(r-e)/a[t]:((n=r.since(\"month\",\"S\")-e.since(\"month\",\"S\"))&&(f.setTime(+r),n/=a.D*f.endOf(\"M\").getUTCDate()),n+=12*(r.getUTCFullYear()-e.getUTCFullYear())+r.getUTCMonth()-e.getUTCMonth(),\"Y\"==t&&(n/=12)),n}),n.date=function(e,t,n){var r,i,o,a=this\nreturn isNaN(+a)?(o=(r=a.match(l))?(i=99<r[1]?1:3,o=c.middleEndian?4-i:2,new c(r[i],r[o]-1,r[6-o-i])):new c,r=a.match(s)||[0,0,0],o.setHours(r[6]&&r[1]<12?+r[1]+12:r[5]&&12==r[1]?0:r[1],r[2],0|r[3],1e3*r[4]|0),null!=(n=r[7]?(0|r[8])+(0|r[9])/(r[8]<0?-60:60):n)&&(o.tz(n),o.setTime(o-6e4*(60*n+o.getTimezoneOffset()))),e?o.date(e,t):o):(+a).date(e,t,n)},i.date=function(e,t,n){var r,i=this\nreturn i<4294967296&&(i*=1e3),r=new c(n!=r?f.setTime(i)-6e4*(60*n+f.getTimezoneOffset()):i),e?r.date(e,t):r},b(\"tz\"),b(\"locale\")}(Date,\"prototype\"),!function(e,a){var l,t=\"prototype\",r=Array[t],n=Function[t],i=String[t],o=Number[t],c=Function[t].call.bind(r.slice),s={},u=s.hasOwnProperty,f=/('|\")(?:\\\\?.)*?\\1|\\/(?:\\\\?.)+?\\/[gim]*|\\b(?:false|in|new|null|this|true|typeof|void|function|var|if|else|return)\\b|\\.\\w+|\\w+:/g,p=/{(?!\\\\)((?:(\"|')(?:\\\\?.)*?\\2|\\\\}|[^}])*)}/g,h=/-?\\d+\\.?\\d*/g,d=/\\b[a-z_$][\\w$]*/gi,m=/{\\\\/g\nfunction g(){for(var e=this,t=e.length,n=c(arguments),r=-1;t--;)~n.indexOf(e[t])&&e.splice(r=t,1)\nreturn r}function v(e){var t=[],n=e.match(/[^\"']+?->|[\\s\\S]+$/g),r=c(arguments,1),i=r.length+\":\"+e,o=s[i]\nif(!o){for(o=e.replace(f,\"\").match(d)||[];1<n.length;)e=n.pop(),t=n.pop().match(/\\w+/g)||[],g.apply(o,t),n.length&&n.push(\"function(\"+t+\"){return(\"+e+\")}\"+(r[0]?\".bind(this)\":\"\"))\ne=\"return(\"+e+\")\",r[0]&&((n=a.keys(r).map(v(\"a->'__'+a\")))[0]=\"this\",e=(o[0]?\"var \"+o.uniq().join(\"='',\")+\"='';\":\"\")+\"with(\"+n.join(\")with(\")+\"){\"+e+\"}\",t=n.slice(1).concat(t)),o=s[i]=Function(t,e)}return r.length?o.bind.apply(o,r):o}function y(e){var t=1\nfunction n(){!--t&&e&&e.call(this)}return n.wait=function(){return t++,n},n}(e.Fn=v).hold=function(e){var t,r=this,i=[],o=[],n=y(function(){for(var e,t=r,n=o.length;n--;n--)o[n]?r[o[n-1]]=o[n]:delete r[o[n-1]]\nfor(;e=i[++n];)t=t[e].apply(t,i[++n])||t\ni=o=null})\nfor(t in e=e||r.syncMethods||[],r)\"function\"==typeof r[t]&&e.indexOf(t)<0&&!function(e){o.push(e,u.call(r,e)&&r[e]),r[e]=function(){return null===i?r[e].apply(this,arguments):i.push(e,arguments),r}}(t)\nreturn r.wait=n.wait,n},v.wait=y,a.each=function(e,t,n,r){if(e)for(r in e)u.call(e,r)&&t.call(n,e[r],r,e)},r.remove=g,r.each=r.forEach,r.uniq=function(){for(var e=this,t=e.length;t--;)e.indexOf(e[t])!==t&&e.splice(t,1)\nreturn e},r.pushUniq=function(e){return this.indexOf(e)<0&&this.push(e)},r.pluck=function(e){for(var t=this.length,n=[];t--;)n[t]=this[t][e]\nreturn n},i.format=function(){var n=r.slice.call(arguments)\nreturn n.unshift(0),this.replace(p,function(e,t){return n[0]=t.replace(/\\\\}/g,\"}\"),v.apply(null,n)()}).replace(m,\"{\")},o.format=function(e){return\"\"+this},o.step=function(e,t){var n=(\"\"+e).split(\".\"),r=this/e,r=~~(r+(r<0?-1:1)*(t==l?.5:1===t&&r==(0|r)?0:+t))*e\nreturn\"\"+(1 in n?r.toFixed(n[1].length):r)},i.step=function(t,n){return this.replace(h,function(e){return(+e).step(t,n)})},n.ttl=function(e,t,n){var r=this,i=setTimeout(function(){e=0,t&&t.call(n)},e)\nreturn function(){clearTimeout(i),e&&r.apply(n===l?this:n,arguments)}},n.once=function(e,t){var n,r,i=this\nreturn function(){t===l&&(t=this),clearTimeout(n),r=arguments,n=setTimeout(function(){i.apply(t,r)},e)}},n.rate=function(t,n,r){var i,o,a=this,c=0\nreturn n&&\"function\"!=typeof n&&(n=a),function(){r===l&&(r=this)\nvar e=Date.now()\nclearTimeout(i),c<=e?(c=e+t,a.apply(r,arguments)):n&&(o=arguments,i=setTimeout(function(){n.apply(r,o)},c-e))}}}(this,Object),!function(e,l){\"use strict\"\nvar o=Array.prototype,s=/ (\\w+)/,u=Array.isArray\nfunction r(e,t){var n=this\nreturn e instanceof r?e:n instanceof r?(n.data=e,n.lists=[],n.init&&n.init(e,t),void n.set(e)):((n=r.cache[e.id]||(r.cache[e.id]=new r(e,t))).set(e),n)}function c(e,t){var f=this,n={\"add\":1,\"remove\":1,\"newListener\":1,\"removeListener\":1}\nif(!(f instanceof c))return c.cache[e]||(c.cache[e]=new c(e,t))\nf.name=e,f.init&&f.init(e,t),f.on(\"newListener\",function(i,o,a,c){function l(e){e.on(i,o,a,c)}function s(e){e.off(i,o,a,c)}n[i]||(f.eachLive(l,s),f.on(\"removeListener\",function u(e,t,n,r){e===i&&t==o&&n==a&&r==c&&(f.each(s).off(\"add\",l).off(\"remove\",s),f.off(\"removeListener\",u))}))})}function i(e){e.lists.every(f,this.lists)&&this.remove(e)}function a(e,t){var n=this,r=n.filterFn(t),i=-1<t.lists.indexOf(n)\nr&&!i&&n.add(t),!r&&i&&n.remove(t)}function t(){return!0}function n(e,t){return\"function\"==typeof e&&e.call(t||this),this}function f(e){return this.indexOf(e)<0}e.Item=r,e.List=c,r.extend=c.extend=function p(e,t,n,r,i){var o=this,a=o.toString(),a=Function(a+\";return \"+a.match(s)[1])(),c=o.prototype\na.prototype=l.assign(u(c)?[]:l.create(null),c,e,t,n,r,i,{_super:c,constructor:a})\na.extend=p\na.cache=a.prototype.cache||o.cache\nreturn a},r.cache={},c.cache={},r.prototype={constructor:r,set:function(e,t,n){var r=this,i=[],o={},a=e\nreturn\"object\"!=typeof e?JSON.set(a={},e,t):n=t,r.validate(a,n)&&JSON.mergePatch(r.data,a,i,o),i.length&&(r.emit(\"change\",i,r,n,o),i.each(function(e,t){r.emit(\"change:\"+e,r.get(e),r,n,o[e])})),i},get:function(e,t){return JSON.get(this.data,e,t)},validate:t,destroy:function(e){for(var t=this,n=t.lists.slice(),r=n.length;r--;)n[r].remove(t)\nt.off(),t.constructor.cache[t.get(\"id\")]=null},matches:function(e){return JSON.matcher(e)(this.data)},each:function(e,t,n){return l.each(this.get(e),t,n||this),this},then:n,toJSON:function(e){return u(e)?JSON.tr(e)(this.data):this.data}},Event.asEmitter(r.prototype),l.assign(c.prototype=[],Event.Emitter.prototype,{item:r,wait:Fn.hold,syncMethods:[\"add\",\"emit\",\"filterFn\",\"merge\",\"item\",\"paged\",\"pluck\",\"remove\",\"removeAll\",\"sortFn\"],add:function(e){var t,n=this\nreturn e&&-1==(e=e.constructor===l?n.item(e):e).lists.indexOf(n)&&(t=function(e,t,n){var r,i=0,o=e.length\nif(n&&o&&n(t,e[o-1])<1)for(;i<o;)n(t,e[r=i+o>>1])<0?o=r:i=r+1\nreturn o}(n,e,n.sortFn),n.filterFn(e,t))&&(e.lists.push(n),n.splice(t,0,e),n.emit(\"add\",e,t,!0)),n},filterFn:t,remove:function(e){var t=this\nreturn e&&e.lists&&-1<e.lists.remove(t)&&t.emit(\"remove\",e,o.remove.call(t,e),!1),t},removeAll:function(){for(var e=this,t=e.length;t--;)e.remove(e[t])\nreturn e},each:function(e,t){return o.each.call(this,e,t||this),this},eachLive:function(e,t,n){return this.on(\"add\",e,n).on(\"remove\",t,n).slice(0).each(e,n),this},get:function(e,t,n){var r=this,i=r.item.cache[e]\nif(i&&-1!=i.lists.indexOf(r))return t?(t.call(n||r,null,i),r):i\nt&&t.call(n||r,Error(\"Item[#\"+e+\"] not found in \"+r))},at:function(e,t,n){var r=this,i=r[e<0?r.length+e:e],e=i?null:Error(\"Item not found at \"+e+\" in \"+r)\nreturn t?(t.call(n||r,e,i),r):i},then:n,pluck:function(t,e,n){var r=this,i=o.map.call(r,function(e){return e.get(t)})\nreturn e?(e.call(n||r,i),r):i},set:function(t,n,r){return this.each(function(e){e.set(t,n,r)})},merge:function(e){var t=this,n=t.lists||(t.lists=[])\nreturn e&&-1==n.indexOf(e)&&(n.push(e),e.eachLive(t.add,i,t).on(\"change\",a,t).then(t.wait())),t},unmerge:function(e){var t=this,n=t.lists,r=n&&n.indexOf(e)\nreturn n&&e&&-1!=r&&(n.splice(r,1),e.each(i,t).off(\"add\",t.add,t).off(\"remove\",i,t).off(\"change\",a,t)),t},paged:function(n){var r=this,i=new c,o=0,a=n\nreturn i.filterFn=function(e,t){return t=r.indexOf(e),o<=t&&t<a},i.pages=new c,i.setPage=function(e){var t=0|r.length/n\ni.page=e=t<e?t:e,a=(o=n*e)+n,i.reFilter()},i.merge(r),i},reFilter:function(){var t=this;(t.lists||(t.lists=[])).each(function(e){e.each(function(e){a.call(t,null,e)})})},reSort:function(e){var t,n=this,r=n.length,i=[]\nfor(u(e=\"string\"==typeof e?[e]:e)&&(e=Fn(\"a b->\"+e.map(function(e){return\"(A=a.get('\"+e+\"'))<(B=b.get('\"+e+\"'))?-1:A>B?1:0\"}).join(\"||\"))),e=n.sortFn=e||n.sortFn;1<r;)0<e(t=n[--r-1],n[r])&&(i.push(t),n.remove(t))\ni.each(n.add,n)},toJSON:function(){return this.slice(0)}})}(this,Object),!function(e){e=e.crypto||(e.crypto={})\nfunction d(e){for(var t=e.length;t--;)e[t]=(\"0000000\"+(e[t]>>>0).toString(16)).slice(-8)\nreturn e.join(\"\")}function c(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=0,i=[];r<n;)i[r>>2]=t.charCodeAt(r++)<<24|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<8|t.charCodeAt(r++)\nreturn i.len=n,i}function m(e,t,n){for(var r=0,i=[],o=[],a=(64<t.length?e:c)(t),t=\"string\"==typeof n?c(n):n,n=t.len||4*t.length;r<16;)i[r]=909522486^a[r],o[r]=1549556828^a[r++]\nreturn e(o.concat(e(i.concat(t),64+n)))}function n(e,t){var e=m(\"sha256\"==(t=Object.assign({counter:\"number\"==typeof t?t:0,digits:6,algo:\"sha1\"},t)).algo?v:g,e,[0,t.counter]),n=15&e[e.length-1]\nreturn(\"0000000\"+(2147483647&parseInt(d(e).substr(2*n,8),16))).slice(-t.digits)}function k(e,t){return t=\"string\"==typeof e?(e=c(e)).len:t||e.length<<2,e[t>>2]|=128<<24-(31&(t<<=3)),e[(t+64>>9<<4)+15]=t,e}function y(e,t){return e<<t|e>>>32-t}function g(e,t){for(var n,r,i,o,a,c,l,s=0,u=[],f=1732584193,p=4023233417,h=2562383102,d=271733878,m=3285377520,g=k(e,t),v=g.length;s<v;s+=16,f+=n,p+=r,h+=i,d+=o,m+=a)for(l=0,n=f,r=p,i=h,o=d,a=m;l<80;)u[l]=l<16?g[s+l]:y(u[l-3]^u[l-8]^u[l-14]^u[l-16],1),c=(l<20?(r&i|~r&o)+1518500249:l<40?(r^i^o)+1859775393:l<60?(r&i|r&o|i&o)+2400959708:(r^i^o)+3395469782)+y(n,5)+a+(0|u[l++]),a=o,o=i,i=y(r,30),r=n,n=0|c\nreturn[f,p,h,d,m]}e.hmac=function(e,t,n){return d(m(\"sha256\"==e?v:g,t,n))},e.pbkdf2=function(e,t,n,r,i){for(var o,a,c,l,s=\"sha256\"==i?v:g,u=n||1e3,f=1,p=[],h=r>>2||5;p.length<h;f++){for(o=a=m(s,e,t+String.fromCharCode(f>>24&15,f>>16&15,f>>8&15,15&f)),c=u;--c;)for(a=m(s,e,a),l=a.length;l--;)o[l]^=a[l]\np.push.apply(p,o)}return d(p).slice(0,2*r||40)},e.hotp=n,e.totp=function(e,t){return(t=Object.assign({time:\"number\"==typeof t?t:Math.floor(Date.now()/1e3),t0:0,step:30},t)).counter=Math.floor((t.time-t.t0)/t.step),n(e,t)},e.sha1=function(e){return d(g(e))}\nvar D=[],j=[]\nfunction v(e,t,n){if(!D[0]){function r(e,t){return 4294967296*((e=Math.pow(e,t))-(e>>>0))|0}e:for(var i,o=0,a=2;o<64;a++){for(i=2;i*i<=a;i++)if(a%i==0)continue e\no<8&&(D[o]=r(a,.5)),j[o++]=r(a,1/3)}}var c,l,s,u,f,p,h,d,m,g,v,y=0,b=[],w=D[0],E=D[1],x=D[2],_=D[3],T=D[4],M=D[5],O=D[6],S=D[7],N=k(e,t),C=N.length,A=j\nfor(n&&(w=3238371032,E=914150663,x=812702999,_=4144912697,T=4290775857,M=1750603025,O=1694076839,S=3204075428);y<C;y+=16,w+=c,E+=l,x+=s,_+=u,T+=f,M+=p,O+=h,S+=d)for(v=0,c=w,l=E,s=x,u=_,f=T,p=M,h=O,d=S;v<64;)b[v]=v<16?N[y+v]:((m=b[v-2])>>>17^m<<15^m>>>19^m<<13^m>>>10)+(0|b[v-7])+((g=b[v-15])>>>7^g<<25^g>>>18^g<<14^g>>>3)+(0|b[v-16]),m=(0|b[v])+d+(f>>>6^f<<26^f>>>11^f<<21^f>>>25^f<<7)+(f&p^~f&h)+A[v++],g=(c>>>2^c<<30^c>>>13^c<<19^c>>>22^c<<10)+(c&l^c&s^l&s),d=h,h=p,p=f,f=u+m|0,u=s,s=l,l=c,c=m+g|0\nreturn[w,E,x,_,T,M,O,S]}e.sha224=function(e){return d(v(e,0,1)).slice(0,-8)},e.sha256=function(e){return d(v(e))}}(this)\n</script><script type=litejs/view>\n%el Confirm\n .Confirm.max.fix.anim\n  .Confirm-bg.max.abs\n  .Confirm-content.Confirm--blur.grid.p2.anim\n   .col.ts3 ;txt:: _(title, map)\n   .col.js-body ;md:: _(body, map)\n   .row.js-numpad\n    ;if:code;each:num in [1,2,3,4,5,6,7,8,9,\"CLEAR\",0]\n    .col.w4>.btn {num}\n   .row\n    ;if:input\n    .col>input.field.js-input\n   .row\n    ;if:data.inputMd!=null\n    .col\n     textarea.field.js-inputMd\n      @keyup [this.parentNode.nextSibling.nextSibling], \"renderMd\"\n      ;val:inputMd\n    .col.ts3 Preview\n    .p4\n     ;md:inputMd\n   .row\n    ;if:select\n    .col\n     select.field.js-select\n      ;list:select, [\"\"]\n      option\n       ;val::item.id;txt::_(item.name)\n   .col\n    .group ;each: action in actions\n     .btn.js-btn\n      ;txt::_(action.title);class::\"w\" + (12/actions.length)\n      ;nop:this.focus();data:\"action\", action.action\n      ;class::\"is-\" + action.action, action.action\n%el Checkbox\n label.Checkbox\n  input[type=checkbox].hide\n  i.Checkbox-icon.waves\n%el Button\n button[type=button].Button.waves Button\n%el Fab\n button[type=button].Fab.waves.raised\n%el Radio\n button[type=button].Radio.waves\n%el MenuBtn\n button[type=button].MenuBtn.reset.noselect\n  .MenuBtn-x.anim\n%el form1-row\n label.row\n  .col.md-w4.input__label\n   = _(title||name)\n  .col.md-w8\n   %child\n   .input__hint\n    = _(description)\n    ;if:description\n%el form1-subheader\n .col\n  = _(title)\n%el form1-fieldset\n fieldset.grid.b2\n  legend\n   = _(schema.title || _link.title || \"\")\n%el form1\n form1-row\n  input.field\n%el form1-ro\n form1-row>span ;txt: value\n%el form1-hidden\n div>input.field[type=hidden]\n%el form1-boolean\n form1-row\n  input.field[type=checkbox] ;value: value\n%el form1-boolean-ro\n form1-row>span\n  = _(!!value)\n%el form1-password\n form1-row\n  input.field[type=password]\n%el form1-new-password\n form1-row\n  input.field[type=password][autocomplete=new-password]\n%el form1-text\n form1-row\n  textarea.field\n%el form1-text-ro\n form1-ro\n%el form1-enum\n form1-row\n  select.field ;each:val in data[\"enum\"]\n   option\n    ;val::val\n    = _(\"\" + val)\n%el form1-enum-ro\n form1-ro\n%el form1-list\n form1-row\n  select.field\n   ;list:api(resourceCollection.format(data.params, data)), required ? 0 : [\"\"], value\n   option\n    ;val::item.id;txt::_(item.name)\n%el form1-list-ro\n form1-row>span\n  = _(item.name)\n%el form1-array\n .col\n  .input.p13.cf\n   .left\n    = _(title||name)\n   .input__hint\n    = _(description)\n   .js-items.cf\n   a.btn.right\n    ;if:!data.noAdd;txt:_(data.name + \".Add\")\n    @click: data.add\n%el form1-array-item\n .input.p3.m2b.cf.js-del\n  a.right.Form1-del.hand ×\n   ;if:!data.noAdd;data::\"tooltip\", _(\"Delete\")\n   @click: data.del\n  b\n   ;if:title;txt:title\n  .grid.b2.js-item\n%el Slider\n button.Slider.reset ;SliderInit\n  .Slider-track\n   .Slider-fill.abs.anim\n    .Slider-knob.anim[tabindex=0]\n%el Toggle\n button.Toggle.reset[tabindex=0]\n  ;fixReadonlyCheckbox\n  input[type=checkbox].hide\n   ;readonly:row && !row.write;checked:model && (row && row.opts ? row.opts === model.get(row.path) : !!model.get(row.path))\n  .Toggle-knob.anim\n%el Toggle2\n .Toggle.reset\n  ;fixReadonlyCheckbox\n  input[type=checkbox].hide\n   ;readonly:row && !row.write;checked:model && (row && row.opts ? row.opts === model.get(row.path) : !!model.get(row.path))\n  .Toggle-knob.anim\n%def wizard %.view\n%def setup,setup/pub setup.view\n%el svg-icon\n svg.no-events[viewBox=\"0 0 24 24\"][width=24px][height=24px]\n%el i-home\n svg-icon>path[d=\"M12,2L1,12h3v9h5V14h9V2h-3V21h5V12h3z\"]\n%el i-chart\n svg-icon>path[d=\"M2.5,21v-6h4v6h-4h5v-16h4v16h-4h5v-12h4v12h-4h5v-8h4v8z\"]\n%el i-wrench\n svg-icon>path[d=\"M4.5,18a1.5,1.5 0,1,0 3,0a1.5,1.5 0,1,0 -3,0m5.5 0a4,4 0,1,1 -4,-4L9.5,9.5a6,6 0,0,1 8.5,-6.5l-3 3a2,2 0,0,0 3,3l3 -3a6,6 0,0,1 -6.5,8.5z\"]\n%el i-log\n svg-icon>path[d=\"M2,12a10,10 0,1,1 4,8a1,1 0,0,1 1.3,-1.6a8,8 0,1,0 -3.2,-6.4h-4l3,3l3,-3zM11,6h2v5.5h3v2h-5z\"]\n%el i-edit\n svg-icon>path[fill-rule=evenodd][d=\"m5,13c-2,8 -2,8 6,6l6,-6 -6,-6 -6,6m5,5 -4,-4c-2,6 -2,6 4,4m2,-12c4,-5 11,2 6,6z\"]\n%el i-doorlog\n svg-icon>path[d=\"M2,12a10,10 0,1,1 4,8a1,1 0,0,1 1.3,-1.6a8,8 0,1,0 -3.2,-6.4h-4l3,3l3,-3zM12,12a1,1 0,1,0 2,0a1,1 0,1,0 -2,0M8,6v12h1.5v-10.5h5.5v10.5h1.5v-12z\"]\n%el i-seclog\n svg-icon>path[d=\"M2,12a10,10 0,1,1 4,8a1,1 0,0,1 1.3,-1.6a8,8 0,1,0 -3.2,-6.4h-4l3,3l3,-3zM6,9q3,0 6,-3q3,3 6,3q-1,7 -6,10q-5,-3 -6,-10\"]\n%el i-plus\n svg-icon>path[d=\"M11,11h-6v2h6v6h2v-6h6v-2h-6v-6h-2z\"]\n%el i-drop\n svg-icon>path[d=\"M12,5c-20,20 20,20 0,0z\"]\n%el i-eye\n svg-icon>path[d=\"M1,12c6.5,9.5 15.5,10 22,0 -6,-8 -14.5,-10.5 -22,0m6,-0.1a5,5 1 1 1 0,0.1zm2,0a3,3 1 1 1 0,0.5z\"]\n%view icon #\n.app.max-height.anim\n h2 List of icons\n .m2\n  span\n   ;every [\"drop\", \"eye\", \"home\", \"chart\", \"wrench\", \"log\", \"doorlog\", \"seclog\", \"plus\", \"edit\"], \"i\";data \"tooltip\", i\n   span ;el: \"i-\" + i\n h2 List of large icons\n .m2\n  i.i.m2r\n   ;every getCssRules().filter(s=>s.slice(0,3)===\".i-\"), \"i\";cls::i.slice(1); data \"tooltip\", i\n%el form1-array-txt\n .cf.js-del\n  a.Form1-del.hand.left ×\n   ;data::\"tooltip\", _(\"Delete\")\n   @click data.del\n  b.m02\n   ;txt data.txt\n  a.m1\n   ;data::\"tooltip\", _(\"Edit\")\n   @click data.edit\n   i-edit[width=20][height=20]\n%el form1-gen-basic\n label.row\n  .col.md-w4.input__label\n   = _(title||name)\n  .col.md-w6\n   input.field[autocomplete=\"off\"]\n   .input__hint\n    = _(description)\n    ;if:description\n  .col.md-w2\n   .btn.is-red Generate\n    @click [this.parentNode.previousSibling.firstChild, data._super.selected], \"genBasic\"\n%el form-js\n form[action=\"javascript:\"][method=POST].cf\n%el logs-table\n .grid.b2.paper\n  ;nop::data.items = data.api.items;list list\n  ;debug list\n  .row\n   h5.c2 =lastDate\n    ^if: _super.lastDate != (_super.lastDate = item.time.date(\"fullDate\"))\n   .col.w2\n    =item.time.date(\"fullTime\")\n    ;title item.time.date(\"iso\")\n   .col.w10\n    ;txt _([\"log.\" + item.key.split(\":\")[0], \"log._\"], (\n     (data.d = data), (data.key = item.key),\n     (data.by = items[item.by] || \"#\" + item.by),\n     (data.model = items[item.model] || \"#\" + item.model),\n     (data.value = item.value), data)\n    )\n .btn.left\n  ;model list;if list.url\n  = \"More before \" + list.last.date(\"longDateTime\")\n  @click list.more.bind(list)\n%el Notifications\n .Notifications.hide-empty\n  ;init::api(\"securityAreas\").then(El.render.bind(El, this));init::api(\"devices\").then(El.render.bind(El, this))\n  ;list api(\"sites?status.alarms{start}\")\n  .grid\n   ;nop data.alarms=model.get(\"status.alarms{start}*\")\n   label.row.p1.collapsible.bg6\n    ;format:\"{name} alarms ({alarmCount})\", {name:model.data.name,alarmCount:alarms.length}\n    @click [\"is-collapsed\", this], \"toggleClass\"\n   .row.p1.hide-collapsed\n    ;every model.get(\"status.alarms\");if item && item.start\n    ;cls item.type == \"msg\" ? \"bg8\" : item.type == \"warn\" ? \"bg7\" : \"bg6\"\n    .col.w2 {item.start.date(\"dateTime\")}\n    .col.w10\n     span\n      ;nop data.model = data.api.items[item.area || item.site] || \"#\" + item.area\n      =_(item.area ? \"security.alarm\" : item.tpl || \"{item.text}\", data)\n     .group.right\n      .btn Silence\n       ;if item.area && !item.end && !item.recovered && model.acl(\"write\", \"status\")\n       @click [item.area], \"removeAlarm\"\n      .btn Delete\n       ;if (!item.area || item.end || item.recovered) && _super.model.acl(\"write\", \"status\")\n       @click [_super.model, i], \"removeNotification\"\n%view #public #\n .app.max-height.anim\n  .rel\n   %child\n%el Top-menu\n .mat-Menu.shadow-1\n  .mat-Menu-item.waves Change server\n   ;if app\n   @click app.openNodeIdEntryView\n  a.mat-Menu-item.waves Change location\n   ;if api(\"sites\").length > 1;href \"#sites\"\n  .mat-Menu-item.waves.is-divider Log out\n   ;if !user.get(\"ui.noLogout\")\n   @click \"logout\"\n  .t-right.p04.ts4.is-divider Version {version}\n  .mat-Menu-item.waves.is-divider Check for updates\n   ;if View.worker\n   @click \"update\"\n  .p04.m1t\n   a.Lang.hand {lng}\n    ^every: _.list, \"lng\"\n    ;cls \"is-selected\", lng == _.current\n    @click [lng], \"setLang\"\n%view #private #\n Notifications\n .app.max-height.anim\n  @click \".expand\", [\".Item\"], \"expand\"\n  %child\n%el submit\n input.w12.btn.is-blue[type=submit]\n%view #login #public\n ;title \"Log in\"\n form-js.grid.b3.login.ts3 ;emitForm \"login\"\n  .row\n   .col.md-w4\n   h3.col.md-w4.t-center.login-logo Log in\n  .row.c3.t-center {params.error||\"\"}\n  label.row\n   .col.md-w4.input__label E-mail\n   .col.md-w4>input.w12[name=email][autocomplete=username][autocapitalize=off] ;focus::\n  label.row\n   .col.md-w4.input__label Password\n   .col.md-w4>input.w12[name=pass][type=password][autocomplete=current-password]\n  .row\n   .col.md-w4\n   label.col.md-w4\n    Toggle2.m1t.right ;cattr \"input\", \"name\", \"remember\"\n    span Remember me\n  .row\n   .col.md-w4\n   .col.md-w4\n    submit Log in\n  .row.m30\n   .col.w12.t-center\n    a.c2[href=\"#recover\"] Forgot your password?\n  .row.m30\n   ;if app\n   .col.w12.t-center\n    a.c2[href=\"#\"] Change server\n     @click app.openNodeIdEntryView\n%view #setPassword #public\n form-js.grid.b3.login.ts3 ;emitForm \"login\"\n  .col.t-center\n   h3 pass.forceTitle\n  label.row\n   .col.md-w4.input__label.ts3 New password\n   .col.md-w4>input.w12[name=newPass][type=password][autocomplete=new-password] ;focus::\n  .row\n   .col.md-w4\n   .col.md-w4.t-center\n    submit Save\n%view recover #public\n form-js.grid.b3.login.ts3 ;emitForm \"login\"\n  .col.t-center\n   h3 Forgot your password?\n   .c3 {params.error||\"\"}\n  input[type=hidden][name=recover][value=1]\n  label.row\n   ;if !params.error\n   .col.md-w4.input__label E-mail\n   .col.md-w4>input.w12[name=email][autocomplete=username][autocapitalize=off] ;focus::\n  .row\n   ;if !params.error\n   .col.md-w4\n   .col.md-w4\n    submit Send recover link\n  .row.m30\n   ;if !params.error\n   .col.w12.t-center\n    a.c2[href=\"#\"] Log in with existing password\n%view #recoverSent #public\n .grid.b3.login.ts3\n  .col.t-center\n   h3 Forgot your password?\n   span Recover link sent\n%view recover/{recoverToken} #public\n form-js.grid.b2.login.ts3 ;emitForm \"login\"; if recover.email\n  .col.t-center\n   h3 Set password for {recover.name} {recover.email}\n   .c3 {params.error||\"\"}\n  input[name=recoverToken][type=hidden] ;value params.recoverToken\n  input[name=email][type=hidden] ;value recover.email\n  label.row\n   .col.md-w4.input__label Password\n   .col.md-w4>input.w12[name=pass][type=password][autocomplete=new-password]\n  .row\n   .col.md-w4\n   .col.md-w4\n    submit Set password\n  .row.m30\n   .col.w12.t-center\n    a.c2[href=\"#\"] Log in with existing password\n div ;if !recover.email\n  h2 Invalid link\n  a.btn-link[href=\"#\"] Start over again\n%view 404 #private\n h2 Error 404\n a.btn-link[href=\"#\"] Start over again\n%el Main-menu\n .menu.js-viewRender\n  ;if !user.get(\"ui.noMenu\");stopPropagation \"pointerdown\"\n  .showMenu.menu__right.hand\n   ;if !user.get(\"ui.noName\")\n   @click [\"Top-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n   =auth.nick || auth.name || _(\"- unnamed -\")\n  a.menu__item.menu__icon\n   ;href \"#sites/\" + params.siteId\n   i-home[width=26][height=26]\n  a.menu__item\n   ;every site.get(\"ui.view\");if item.name && (!item.link || api.items[item.link[0]])\n   ;href \"#sites/\" + params.siteId + \"/view-\" + i\n   =_(item.name)\n  a.menu__item Users\n   ;href \"#sites/\" + params.siteId + \"/users\"\n  a.menu__item Rules\n   ;if site.get(\"/_acl/admin\");href \"#sites/\" + params.siteId + \"/rules\"\n%view #site #private\n ;title \"{site.data.name}\"\n Main-menu\n .m01\n  %child\n%el schemaList\n div.paper\n  h2\n   a.btn.right\n    ;if !noconf;href \"#\" + (uri || params._u) + \"/new\"\n    =_(\"Add \" + rel.slice(0,-1))\n   span =_((title||rel).capitalize())\n  div\n   ;list item.rel(rel);data \"on-empty\", _(\"No \" + rel + \" created\")\n   a.row\n    ;cls \"is-offline\", rel == \"devices\" && !model.get(\"/status/online\");href \"#\" + model.getView()\n    b =_(item.name || \"-\")\n    div =model.getInfo()\n%each [\"room\", \"role\", \"group\", \"securityArea\", \"device\", \"rule\"]\n %view sites/{\\siteId}/{item}s #site\n  ;title \"{item}s\"\n  schemaList ;with {\\item:site,rel:\"{item}s\"}\n %view sites/{\\siteId}/{item}s/new #site\n  ;title \"new {item}\"\n  h2 Create {item}\n  form-js.paper\n   ;nop::data.lastModel = data.model;nop::data.model = null\n   ;schemaToForm \"schema/{item}.json\", \"create\", \"form1\"\n   %child\n   .group.right.m2\n    button.btn[type=button] Use last viewed item values\n     @click this.form.fill.bind(null, lastModel)\n     ;if lastModel\n    button.btn[type=button] Reset\n     @click this.form.fill.bind(null, null)\n    button.btn.is-blue Save\n %view sites/{\\siteId}/{item}s/{\\{item}Id} #site\n  ;title \"{\\{item}.data.name}\"\n  h2 Edit {item}\n   ;nop data.model={item}\n  form-js.paper\n   ;schemaToForm \"schema/{item}.json\", \"edit\", \"form1\"\n   %child\n   .group.right.m2\n    button.btn.is-red[type=button] Delete\n     ;if model.get(\"/_acl/admin\")\n     @click model.confirmDrop && model.confirmDrop.bind(model, null)\n    a.btn Logs\n     ;if model.get(\"/_acl/logs\");href \"+/logs\"\n    a.btn Activities\n     ;if model.get(\"/_acl/logs\");href \"+/activities\"\n    a.btn Relations\n     ;href \"+/relations\"\n    a.btn UI\n     ;href \"+/ui\"\n    a.btn Managers\n     ;if model.get(\"/acl\");href \"+/managers\"\n    button.btn.is-blue Save\n%view-link sites/{siteId}/securityArea-{securityAreaId} sites/{siteId}/securityAreas/{securityAreaId}\n%view-link sites/{siteId}/room-{roomId} sites/{siteId}/rooms/{roomId}\n%view-link sites/{siteId}/device-{deviceId} sites/{siteId}/devices/{deviceId}\n%view-link sites/{siteId}/users/role-{roleId} sites/{siteId}/roles/{roleId}\n%view-link sites/{siteId}/users/role-{roleId}/{sub} sites/{siteId}/roles/{roleId}/{sub}\n%view-link sites/{siteId}/{item}-{itemId}/logs sites/{siteId}/{item}s/{itemId}/logs\n%el Mode-menu\n .mat-Menu.shadow-1\n  .mat-Menu-item.waves OFF\n   ;if::_super.row.pathList[1] != \"no.off\"\n   @click [_super.model, row, null], \"set\"\n  .mat-Menu-divider ;every model.get(row.opts,[])\n   .mat-Menu-item.waves\n    =_(item.name!=null?item.name:item)\n    @click [_super.model, row, item.val!==void 0?item.val:item.name!=null?item.name:item], \"set\"\n%el Item-right\n .flex-right\n  ;is row.path, row.is;el \"Item-right-\" + row.type, \"Item-right-val\"\n%el Item-right-val\n .nowrap.lh3\n  ;is row.path, row.state;format row.type, row\n%el Item-right-editmd\n .nowrap.lh3\n  i-edit.hand\n  ;is row.path, row.state\n  @click [model, row], \"popupMd\"\n%el Item-right-onoff\n Toggle\n  @click [model, row, \"toggle\"], \"set\"\n%el Item-right-level\n Slider\n  @change [model, row], \"setNum\"\n  ;stopPropagation;range row.opts\n  ;css::\"width\", row.name ? \"66%\" : \"100%\";val model.get(row.path)\n%el Item-right-menu\n %el Right-menu\n  .mat-Menu.shadow-1\n   .mat-Menu-item.waves\n    ;every model.ui(row.opts, []), \"row\"\n    @click [model, row, row.opts], \"set\"\n    ;is row.path, row.is;format row.name, row\n .hand\n  @click [\"Right-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n  ;cls \"ts3 p03 bold\", !row.name;format row.name || \"⋮\", row\n%el Item-right-mode\n label.showMenu\n  @click [\"Mode-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n  =_(model.get(row.opts + \"[val=\"+model.get(row.path)+\"].name\", model.get(row.path, row.pathList[1] != \"no.off\" ? _(\"OFF\") : \"-\")))\n%el Item-right-icon\n div\n  i.i.right\n   ;cls \"i-\" + row.opts;is row.path, row.state\n%el Item-right-icont\n Item-right-icon.hand\n  @click [model, row, \"toggle\"], \"set\"\n%el Item-right-edit\n input.Item-right\n  @blur: [model, row], \"set\"\n  ;stopPropagation;blurOnEnter model, row.path\n  ;val model.get(row.path, \"\")\n%el Item-right-editt\n Item-right-edit[type=time][max=\"24:00\"]\n%el Item-right-editn\n input.Item-right\n  @blur: [model, row], \"setNum\"\n  ;stopPropagation;blurOnEnter model, row.path\n  ;val model.get(row.path, \"\")\n%el Item-right-button\n button.btn.max\n  @click [model, row, row.opts], \"set\"\n  ;stopPropagation;is row.path, row.state\n  ;format row.name, row\n%el Item-info\n .row.hover-bg5.p02\n  ;nop row.value = (row.i = row.pathList.map(row.get))[0];cls::row.type !== \"button\" ? \"flex-mid\" : \"flex-right\"\n  ;is row.path, row.is\n  span.m2r\n   ;if::row.name && row.type !== \"button\";format row.name, row\n  Item-right\n%el Item-i1\n .p02.flex-mid.expand\n  i.i.m2r\n   ;if data.model !== data.site;cls::\"i-\" + model.get(\"ui.icon\", data.icon)\n   ;nop data.st = model.get(\"status.alarm\") ? \"alarm\" : model.get(\"status.entryDelay\") ? \"entry\" : model.get(\"status.exitDelay\") ? \"exit\" : model.get(\"status.armed\") ? \"armed\" : \"x\";is \".\", \",alarm,alarm,armed,armed,exit,exit,entry,entry\", data.st\n   ;is \"ou\", \",true,on\", !!model.get(\"status.output\");is \"op\", \",true,open\", !!model.get(\"status.open\")\n   ;is \"ac\", \",true,active\", !!model.get(\"status.active\");is \"status.state\"\n   ;is:\"status.dot\", \",blue?green?orange?red?white?yellow?\", void 0, \"dot-\"\n  b.m2r =_(hasOwn.call(data, \"name\") ? data.name : model.get(\"name\")||\"#\" + model.data.id)\n  .flex-right\n   ;if model.hasUi(\"i1\", data);each row in data.i1\n   Item-right\n    ;nop row.value = (row.i = row.pathList.map(row.get))[0]\n .bg6.p2.m2t.hide-empty\n  ;if model.get(\"status.alarms\")\n  .row\n   ;every \"/status/alarms\";if typeof item === \"string\"\n   =_(item)\n .bg7.p2.m2t.hide-empty\n  ;if model.get(\"status.warnings\")\n  .row\n   ;every \"/status/warnings\"\n   =_(item)\n .bg8.p2.m2t.hide-empty\n  ;if model.get(\"status.messages\")\n  .row\n   ;every \"/status/messages\";if typeof item === \"string\"\n   =_(item)\n%el Item-i2\n .p2t.hide-empty\n  ;if model.hasUi(\"i2\", data);each row in data.i2\n  Item-info\n%el Item-i3\n .expandable.anim.no-events\n  ;if data.expanded\n  .p2t.hide-empty\n   ;if model.hasUi(\"i3\", data);each row in data.i3\n   Item-info\n%el Item-buttons\n .hide-empty.m2t.m2l.cf\n  .btn.is-small.left Remove from role\n   ;if data.roleChange && !data.roleTitle\n   @click [model, _super.model], \"removeUserFromRole\"\n  a.m2r.right\n   ;href data.href;if::data.href && (model.acl(\"write\", \"name\") || model.acl(\"write\", \"setup\"))\n   ;data::\"tooltip\", _(\"Edit\")\n   i-wrench\n  a.m2r.right\n   ;if::data.href && model.get(\"_acl.logs\");href data.href.replace(/\\/edit$/, \"\") + \"/logs\"\n   ;data::\"tooltip\", _(\"Logs\")\n   i-log\n  a.m2r.right\n   ;every model.ui(\"i4\"), \"row\";data::\"tooltip\", _(row.name, row)\n   @click [model, row, row.opts], \"set\"\n   div\n    ;el \"i-\" + row.opts\n%el Item-site\n .Item.col.p20\n  ;cls \"is-disabled\", !model.get(\"enabled\")\n  Item-i1\n  Item-i2\n  Item-i3\n  Item-buttons\n   %child\n%el Item-role\n .Item.col.p20\n  ;cls \"is-disabled\", !model.get(\"enabled\")\n  .p02.flex-mid.expand\n   i.i.m2r.i-role\n   div\n    b.m2r =_(model.get(\"name\")||\"#\" + model.data.id)\n    .ts4\n     ;model model.get(\"siteId\"), api(\"sites\"), \"roleSite\";txt roleSite.get(\"name\")\n  .expandable.anim.no-events\n   ;if data.expanded\n   .m2t.m2l.group\n    .btn.is-small.left Remove from role\n     @click [data.user, model, data.roleType], \"removeUserFromRole\"\n    a.btn.is-small.left Edit role\n     ;href \"#sites/\" + model.data.siteId + \"/users/role-\" + model.data.id\n%el Item-label\n label.Item.col.p20\n  ;cls \"is-disabled\", !model.get(\"enabled\")\n  Item-i1\n%el Item\n .Item.col.p20\n  ;cls \"is-disabled\", !model.get(\"enabled\")\n  Item-i1\n  Item-i2\n  Item-i3\n   Item-buttons\n    %child\n%view sites #private\n ;title \"Sites\"\n .menu\n  .showMenu.menu__right.hand\n   @click [\"Top-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n   =auth.nick || auth.name || _(\"- unnamed -\")\n .rel\n  h2 Select a site\n  .grid.b1\n   ;data::\"on-empty\", _(\"No sites available\");list api(\"sites\")\n   .col.paper.md-w6.lg-w4.hand\n    a.col.p2.bg5.ts3.waves.no-line.flex-mid\n     ;href \"#sites/\" + model.data.id + params._home\n     b.m2r {model.get(\"name\")||\"#\" + model.data.id}\n     .flex-right\n      ;if model.hasUi(\"i1\", data);each row in data.i1\n      Item-right\n       ;nop row.value = (row.i = row.pathList.map(row.get))[0]\n%view sites/{siteId} #site\n .paper.cf.m1\n  ;model site\n  %el Add-menu\n   .mat-Menu.shadow-1\n    a.mat-Menu-item.waves Add room\n     ;href \"+/room-new\"\n    a.mat-Menu-item.waves Add device\n     ;href \"+/device-new\"\n    a.mat-Menu-item.waves Add security area\n     ;href \"+/securityArea-new\"\n  Item-site.bg3.ts3\n   ;with { href: \"+/edit\" }\n   a.m2r.right\n    ;if site.get(\"/_acl/admin\");data::\"tooltip\", _(\"Add\")\n    @click [\"Add-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n    i-plus\n  .reset.grid.p1.hide-empty.br1\n   ;list api(\"rules?enabled&category=scene&siteId=\" + params.siteId)\n   .col.w6.md-w3.lg-w2\n    .btn =_(item.name)\n     @click [model], \"execute\"\n  .reset.grid.hide-empty.br1\n   ;list api(\"securityAreas?siteId=\" + params.siteId + \"|id=\" + site.data.linkedAreas)\n   Item.md-w6.lg-w4\n    ;nop::data.href = \"+/securityArea-\" + model.data.id;cls \"is-alarm\", !!model.get(\"status.alarm\")\n  .reset.grid.hide-empty\n   ;list api(\"devices?roomId=\" + params.siteId + \"|id=\" + site.data.linkedDevices)\n   Item.md-w6.lg-w4\n    ;nop::data.href = \"+/device-\" + model.data.id;cls \"is-offline\", !model.get(\"status.online\")\n .reset.grid\n  .col.md-w6.lg-w4\n   ;spread::3\n   .paper.m1\n    ;api::\"rooms?siteId=\" + params.siteId, \"model\", spread\n    Item.bg5.ts3\n     ;nop::data.href = \"+/room-\" + model.data.id\n    .reset\n     ;api::\"devices?roomId=\" + model.data.id + \"|id=\" + model.data.linkedDevices, \"model\", spread.wait()\n     Item.br1\n      ;nop::data.href = \"+/device-\" + model.data.id;cls \"is-offline\", !model.get(\"status.online\")\n  .col.md-w6.lg-w4\n  .col.md-w6.lg-w4\n%el Map-view\n a.Map-view.tooltip--top {j[5]||j[4]}\n  ;href::\"#sites/\" + model.data.id + \"/view-\" + j[4];data::\"tooltip\", model.get(\"name\", \"#\" + j[0])\n%el Map-val\n .paper.Map-val.ts2\n  ;format j[4], model.data\n%el Map-icon\n .paper.hand.Map-icon.tooltip--top\n  @click [model, j[4], \"toggle\"], \"set\"\n  ;data::\"tooltip\", model.get(\"name\", \"#\" + j[3])\n  i.i\n   ;cls::\"i-\" + j[5];is j[4], j[6]\n   ;cls \"is-offline\", !model.get(\"status.online\");cls \"is-disabled\", !model.get(\"enabled\")\n   ;cls \"is-error\", !!model.get(\"status.error\")\n%el Map-item\n .paper.Map-info\n  ^nop:: j[4]&&(model.hasUi(\"i1\",data,j[4])), j[5]&&(model.hasUi(\"i2\",data,j[5])), j[6]&&(model.hasUi(\"i3\",data,j[6]))\n  Item.anim\n%el Map-info\n Map-item.is-collapsed\n  .abs.hand.Map-info-collapse.tooltip--top\n   ;data::\"tooltip\", model.get(\"name\", \"#\" + j[3])\n   @click [\"is-collapsed\", this.parentNode], \"toggleClass\"\n%el Map-menu\n .mat-Menu.shadow-1\n  .mat-Menu-item.waves Move items\n   @click \"map:edit\"\n  .mat-Menu-item.waves Save changes\n   @click \"map:save\"\n%el Map\n .abs.max\n  ;if viewMap.img;css::\"overflow\", \"hidden\"\n  @click \".expand\", [\".Item\"], \"expand\"\n  .abs.anim\n   ;css::\"overflow\", \"visible\"\n   img.abs.max\n    ;src linked(viewMap.img);mapInit\n   .abs.max\n    @contextmenu: [\"Map-menu\", \"mouse\", \"bottom\", 0, 1], \"showMenu\"\n    ;css::\"overflow\", \"visible\"\n    .abs\n     ;every viewMap.items.map(linked)\n     ;init data.j = typeof item == \"string\" ? item.split(\":\") : [];css::\"left\", j[0] + \"%\"\n     ;css::\"top\", j[1] + \"%\";el \"Map-\" + j[2]\n     ;model::j[3], site.rel(\"all\");if::hasOwn.call(data, \"model\")\n%el Map-tiles-val\n .h12.row\n  ;model linked(item.item), site.rel(\"all\"), \"model\"\n  = _(item.val, model.data)\n%el Map-tiles-texts\n div\n  ;model linked(item.item), site.rel(\"all\"), \"model\"\n  div\n   ;every item.texts\n   = _(item[0], model.data)\n   ;cls item[1];is item[2], item[3], item[2] == \".\" ? _.vals.tmp : null\n%el Map-tiles-val1\n svg[viewBox=\"0 0 100 60\"][preserveAspectRatio=\"xMidYMid meet\"][width=\"100%\"][height=\"100%\"].ts0\n  ;model linked(item.item), site.rel(\"all\"), \"model\"\n  text[text-anchor=middle][x=50][y=42]\n   = _(item.val1, model.data)\n   ;svgFit2 95, 35\n%el Map-tiles-val2\n svg[viewBox=\"0 0 100 60\"][preserveAspectRatio=\"xMidYMid meet\"][width=\"100%\"][height=\"100%\"].ts0\n  ;model linked(item.item), site.rel(\"all\"), \"model\"\n  text[text-anchor=middle][x=50][y=30]\n   = _(item.val, model.data)\n  text[text-anchor=middle][x=50][y=53].ts9\n   = _(item.val2, model.data)\n%el Map-tiles-justsetpoint\n .grid.h12\n  svg[viewBox=\"-10 -5 120 80\"][preserveAspectRatio=\"xMidYMid meet\"][width=\"100%\"][height=\"100%\"].ts1\n   defs\n    rect#r1[x=5][y=43][width=15][height=15][fill=transparent][rx=2][stroke=currentColor]\n    linearGradient#grHeat\n     stop[offset=0][stop-color=\"#fff33b\"]\n     stop[offset=1][stop-color=\"#e93e3a\"]\n   g[shape-rendering=\"crispEdges\"]\n    ;if model\n    path.is-blue\n     ;d:\"M40,1\" + \"v6h-6v-6h6m-8,0\".repeat(Math.ceil(model.get(\"/status/coolingNeed\",0)/20))\n    path.is-red\n     ;d:\"M60,1\" + \"v6h6v-6h-6m8,0\".repeat(Math.ceil(model.get(\"/status/heatingNeed\",0)/20))\n   g[transform=\"translate(48 0)\"]\n    ;if model;fill:model.get(\"/status/heatingNeed\",0) > 0 ? \"url(#grHeat)\" : model.get(\"/status/coolingNeed\",0) > 0 ? \"#029fe3\" : \"#706f6f\"\n    path[d=\"m 0,8 c -4,-4 0,-5 0,-8 3,5 -2,3 0,8 z\"]\n    path[d=\"m 3,8 c -4,-4 0,-5 0,-8 3,5 -2,3 0,8 z\"]\n    path[d=\"m 6,8 c -4,-4 0,-5 0,-8 3,5 -2,3 0,8 z\"]\n   g ;if item.item\n    text[text-anchor=start][x=0][y=15][font-size=\"2.4\"][fill=\"#aaa\"] MÕÕDETUD TEMPERATUUR\n    text[text-anchor=middle][x=50][y=34][font-size=24]\n     = _(item.val, model.data)\n    text[text-anchor=start][x=0][y=-1][font-size=\"2.4\"][fill=\"#aaa\"] JAHUTUSVÕIMSUS\n    text[text-anchor=end][x=100][y=-1][font-size=\"2.4\"][fill=\"#aaa\"] KÜTTEVÕIMSUS\n    text[text-anchor=middle][x=50][y=46][font-size=\"2.4\"][fill=\"#aaa\"] SOOVITUD TEMPERATUUR\n    text[text-anchor=middle][x=50][y=57].ts9\n     = _(item.val2, model.data)\n    text[text-anchor=middle][x=\"12.5\"][y=55].is-blue.ts9 −\n    text[text-anchor=middle][x=\"87.5\"][y=55].is-red.ts9 +\n    use[href=\"#r1\"][data-do=dec].is-blue\n    use[href=\"#r1\"][x=75][data-do=inc].is-red\n   g\n    ;setpointList::linked(item.justsetpoint)\n    g\n%el Map-tiles-setpoint\n svg[viewBox=\"-5 0 200 60\"][preserveAspectRatio=\"xMidYMid meet\"][width=\"100%\"][height=\"100%\"].ts0\n  defs\n   rect#r1[x=5][y=40][width=15][height=15][fill=transparent][rx=2][stroke=currentColor]\n  g ;if item.item\n   text[text-anchor=middle][x=50][y=30]\n    = _(item.val, model.data)\n   text[text-anchor=middle][x=50][y=53].ts9\n    = _(item.val2, model.data)\n   text[text-anchor=middle][x=\"12.5\"][y=\"52\"].ts9 −\n   text[text-anchor=middle][x=\"87.5\"][y=\"52\"].ts9 +\n   use[href=\"#r1\"][data-do=dec]\n   use[href=\"#r1\"][x=75][data-do=inc]\n  g\n   ;setpointList::linked(item.setpoint)\n   rect#r1[x=110][width=80][height=15][rx=2][stroke=currentColor]\n    ;data \"id\", item.data.id;attr \"y\", (60-(len*18-3))/2 + i*18\n    ;fill model == item ? \"currentColor\" : \"transparent\";svgBoxY\n   text.no-events[text-anchor=middle][x=150]\n    ;attr \"y\", (60-(len*18-3))/2 + i*18 + 10;fill model == item ? \"#222\" : \"currentColor\"\n    ;svgFit 76, 8\n    = _(_super.item.format||item.data.name, item.data)\n%el Map-tiles-mode\n svg[viewBox=\"-5 0 200 60\"][preserveAspectRatio=\"xMidYMid meet\"][width=\"100%\"][height=\"100%\"].ts0\n  ;model linked(item.item), site.rel(\"all\"), \"model\"\n  defs\n   rect#r1[x=5][y=40][width=15][height=15][fill=transparent][rx=2][stroke=currentColor]\n  g\n   ;every model.get(_super.item.mode,[])\n   rect#r1[x=10][width=80][height=15][rx=2][stroke=currentColor]\n    ;attr \"y\", (60-(len*18-3))/2 + i*18;fill _super.model.get(_super.item.path) == (data.itemVal = item.val!==void 0?item.val:item.name!=null?item.name:item) ? \"currentColor\" : \"transparent\"\n    @click [_super.model, _super.item.path, itemVal], \"set\"\n   text.no-events[text-anchor=middle][x=50]\n    ;attr \"y\", (60-(len*18-3))/2 + i*18 + 10;fill _super.model.get(_super.item.path) == itemVal ? \"#222\" : \"currentColor\"\n    ;svgFit 76, 8\n    =_(item.name!=null?item.name:item)\n  use[x=100][y=0][width=100][height=40]\n   ;href \"css/ico.svg#\" + item.icon;is item.iconAttr, item.iconState\n  text[text-anchor=middle][x=150][y=53].ts9\n   = _(item.val2, model.data)\n%el Map-tiles-iframe\n iframe.max[frameborder=0][allow=\"autoplay\"]\n  ;src linked(item.iframe)\n%el Map-tiles-items\n .grid.scroll.h12\n  ;list site.rel(\"all?id=\" + linked(item.items).map(linked));stopPropagation \"wheel\"\n  Item\n   ^nop: _super.item.i1&&(data.i1=_super.item.i1),_super.item.i2&&(data.i2=_super.item.i2),_super.item.name&&(data.name=_super.item.name)\n   ;data:\"out\", \"ccss::'.flex-right',_super.item.rightCss\";cls \"is-offline\", !(_super.item.online||model.get(\"status.online\"))\n   ;cls \"is-error\", !!model.get(\"status.error\")\n%el Map-tiles-items2\n .grid.scroll.h12\n  ;list site.rel(\"all?id=\" + linked(item.items2).map(linked));stopPropagation \"wheel\"\n  Item-label\n   ^nop: _super.item.i1&&(data.i1=_super.item.i1),_super.item.i2&&(data.i2=_super.item.i2),_super.item.name&&(data.name=_super.item.name)\n   ;data:\"out\", \"ccss::'.flex-right',_super.item.rightCss\";cls \"is-offline\", !(_super.item.online||model.get(\"status.online\"))\n   ;cls \"is-error\", !!model.get(\"status.error\")\n%el Map-tiles-logs\n .scroll.h12\n  ;init data.list = item.logs && logs(\"logs?\" + linked(item.logs));stopPropagation \"wheel\"\n  logs-table\n%el Map-tiles-img\n img ;src linked(item.img)\n  @click \"reload\"\n%el Chart\n svg.Chart[viewBox=\"0 0 600 200\"][preserveAspectRatio=\"xMidYMid meet\"]\n%el Chart-nav\n .group.right.p04\n  .btn.is-blue\n   =\"<\"\n   ;disabled !!chart.noPrev\n   @click [-1], chart.prev\n  .btn.is-blue\n   =\"◉\"\n   @click chart.now\n  .btn.is-blue\n   =\">\"\n   ;disabled !!chart.noNext\n   @click [1], chart.next\n%el Map-tiles-chart\n .h12\n  ;init data.time = 0;init data.step = item.chart.step[item.chart.defaultStep < item.chart.step.length ? item.chart.defaultStep : item.chart.step.length-1]\n  .bg5.p1.t-center\n   span\n    ;if time\n    =_(item.chart.title||\"\") + \" \" + (+time).add(-1 * data.span, \"ms\", \"longDateTime\") + \" - \" + time.date(\"longDateTime\")\n  .group.right.p4\n   ;if item.chart.step.length > 1\n   a.btn\n    ;every item.chart.step;cls \"is-blue\", item == data.step\n    @click [this.parentNode, \"nextSibling\", \"setStep\", item], \"callRel\"\n    =_(item.split(\":\").pop())\n  Chart.w12.h10\n   ;init data.chart = this;initChart item.chart\n  Chart-nav\n%el Map-tiles\n .grid.abs\n  ;if::viewMap.tiles;cls item.style\n  ;every viewMap.tiles;css \"top,right,bottom,left,height,width\", (item.pos+\"\").split(\":\")\n  .col\n   ;every item.col;cls item.style\n   div\n    ;data:\"legend\", _(item.legend || \"\");cls::item.inStyle; css:: item.css\n    ;el \"Map-tiles-\" + (\n     item.iframe ? \"iframe\" :\n     item.items ? \"items\" :\n     item.items2 ? \"items2\" :\n     item.logs ? \"logs\" :\n     item.ui ? \"ui\" :\n     item.map ? \"map\" :\n     item.tiles ? \"tiles\" :\n     item.chart ? \"chart\" :\n     item.mode ? \"mode\" :\n     item.setpoint ? \"setpoint\" :\n     item.justsetpoint ? \"justsetpoint\" :\n     item.val2 ? \"val2\" :\n     item.val1 ? \"val1\" :\n     item.val ? \"val\" :\n     item.img ? \"img\" :\n     item.texts ? \"texts\" : \"\"\n    )\n%el Modal\n .max.fix\n  .Confirm-bg.abs.max\n  %child\n%el close-overlay\n a.absr.ts2.p02.hand ×\n  @click [\".fix\"], \"kill\"\n%el overlay\n Modal\n  .cf.paper.abs[style=\"right: 10px; top: 10px; bottom: 10px; left: 10px\"]\n   div ;el el\n   close-overlay\n%el Map-tiles-ui\n .rel\n  Map\n  Map-tiles\n%el Map-tiles-map\n .rel\n  Map\n%el Map-tiles-tiles\n .rel\n  Map-tiles\n%view sites/{siteId}/full-{mapIdx} #\n ;title \"{site.data.name}/{params.mapIdx}\"\n .max-height\n  Map\n  Map-tiles\n%view sites/{siteId}/view-{mapIdx} #\n ;title \"{site.data.name}/{params.mapIdx}\"\n .max-height\n  Notifications\n  Map\n  Map-tiles\n  .app.anim\n   Main-menu.rel\n%view sites/{siteId}/edit #site\n ;title \"edit\"\n h2 Edit site\n form-js.paper\n  ;init data.model=site;schemaToForm \"schema/site.json\", \"edit\", \"form1\"\n  %child\n  .group.right.m2\n   a.btn Logs\n    ;if model.get(\"/_acl/logs\");href \"%/logs\"\n   a.btn Activities\n    ;if model.get(\"/_acl/logs\");href \"%/activities\"\n   a.btn UI\n    ;href \"%/ui\"\n   a.btn Managers\n    ;if model.get(\"/acl\");href \"%/managers\"\n   button.btn.is-blue Save\n%view sites/{siteId}/users #site\n ;title \"users\"\n .paper.cf.m1\n  ;model site\n  %el Add-user-menu\n   .mat-Menu.shadow-1\n    a.mat-Menu-item.waves Add role\n     ;if site.get(\"_acl.admin\");href \"+/role-new\"\n    a.mat-Menu-item.waves Add user\n     ;href \"%/users/new\"\n  Item-site.bg3.ts3\n   ;nop::data.href = \"%/edit\"\n   a.m2r.right\n    ;if site.get(\"_acl.admin\") || api(\"roles?_acl.write&siteId=\" + params.siteId).length;data::\"tooltip\", _(\"Add\")\n    @click [\"Add-user-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n    i-plus\n .reset.grid\n  .col.md-w6.lg-w4\n   ;spread::3\n   .paper.m1\n    ;api::\"roles?siteId={params.siteId}\", \"model\", spread\n    Item.bg5.ts3\n     ;nop data.roles = api(\"roles?id=\" + model.data.roleIds);nop data.roleChange = model.acl(\"write\", \"userIds\")\n     ;with { icon: \"role\", href: \"+/role-\" + model.data.id, roleTitle: 1 }\n    .col.p2.br1\n     ;if roles.length\n     =_(\"Roles\") + \": \" + roles.pluck(\"name\").join(\", \")\n    .reset\n     ;list model.rel(\"users\")\n     Item.br1\n      ^nop:: model.hasUi(\"i1\", data, [\"email#\"]), data.icon = \"user\"\n      ^nop: model.hasUi(\n       \"i2\", data,\n       [ model.get(\"credentials[type=rfid]\") && \"credentials[type=rfid]*code#{value}#Card\",\n       model.get(\"credentials[type=phone]\") && \"credentials[type=phone]*code#{value}#Phone\" ]\n      )\n      ^nop:: data.href = \"+/\" + model.data.id\n  .col.md-w6.lg-w4\n  .col.md-w6.lg-w4\n%view-link sites/{siteId}/roles sites/{siteId}/users\n%view sites/{siteId}/users/new #site\n ;title \"new user\"\n h2 Create user\n form-js.paper\n  ;nop::data.model = null;schemaToForm \"schema/user.json\", \"create\", \"form1\"\n  %child\n  .group.right.m2\n   button.btn.is-blue Save\n%view sites/{siteId}/users/{userId} #site\n ;title \"{user.data.name}\"\n h2 Edit user\n  ;init data.model=user\n form-js.paper\n  ;schemaToForm \"schema/user.json\", \"edit\", \"form1\"\n  %child\n  .group.right.m2\n   button.btn.is-red[type=button] Delete\n    ;if model.get(\"/_acl/admin\")\n    @click model.confirmDrop && model.confirmDrop.bind(model, null)\n   a.btn Logs\n    ;if model.get(\"/_acl/logs\");href \"+/logs\"\n   a.btn Activities\n    ;if model.get(\"/_acl/logs\");href \"+/activities\"\n   a.btn Managers\n    ;if model.get(\"/acl\");href \"+/managers\"\n   a.btn Roles\n    ;if site.get(\"_acl.admin\") || api(\"roles?_acl.write&siteId=\" + params.siteId).length;href \"+/roles\"\n   a.btn Set password\n    ;if model.get(\"/_acl/admin\");href \"+/setPassword\"\n   button.btn.is-blue Save\n%view sites/{siteId}/users/{userId}/roles #site\n .paper.cf.m1\n  %el Add-role-menu\n   .mat-Menu.shadow-1\n    .mat-Menu-item.waves Add to regular role\n     @click [user, \"regular\"], \"addUserToRole\"\n    .mat-Menu-item.waves Add to time limited role\n     @click [user, \"time limited\"], \"addUserToRole\"\n  .Item.col.p20.bg3.ts3\n   a.m2r.right\n    ;data::\"tooltip\", _(\"Add\")\n    @click [\"Add-role-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n    i-plus\n   .p02.flex-mid>b.m2r =user.get(\"name\")+\" - \"+_(\"roles\")\n .reset.grid\n  .col.md-w6.lg-w4 ;with {roleType: \"regular\"}\n   .paper.m1\n    .Item.col.p20.bg5.ts3>.p02.flex-mid>b.m2r {roleType}\n    .reset\n     ;api::\"roles?userIds[]=\" + user.data.id, \"model\"\n     Item-role\n  .col.md-w6.lg-w4 ;with {roleType: \"time limited\"}\n   .paper.m1\n    .Item.col.p20.bg5.ts3>.p02.flex-mid>b.m2r {roleType}\n    .reset\n     ;api::\"roles?userSchedule.\" + user.data.id+\"{}\", \"model\"\n     Item-role\n%view sites/{siteId}/users/{userId}/setPassword #site\n ;title \"{user.data.name}/pass\"\n h2 Set password\n form-js.paper\n  ;nop::data.model = null;schemaToForm \"schema/user.json\", \"/setPassword\", \"form1\"\n  %child\n  .group.right.m2\n   button.btn.is-blue Save\n%view sites/{siteId}/rules #site\n ;title \"rules\"\n .paper.cf.m1\n  ;model site\n  %el Add-rule-menu\n   .mat-Menu.shadow-1\n    a.mat-Menu-item.waves Add rule\n     ;if site.get(\"_acl.admin\");href \"%/rules/new\"\n  Item-site.bg3.ts3\n   ;nop::data.href = \"%/edit\"\n   a.m2r.right\n    ;if site.get(\"_acl.admin\") || api(\"rules?_acl.write&siteId=\" + params.siteId).length;data::\"tooltip\", _(\"Add\")\n    @click [\"Add-rule-menu\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n    i-plus\n .reset.grid\n  .col.md-w6.lg-w4\n   ;spread::3, true\n   .paper.m1\n    ;every [\"automation\", \"access\", \"security\", \"lighting\", \"climate\", \"metering\", \"notify\", \"system\", \"scene\", \"\"]\n    .Item.col.p20.bg5.ts3\n     .p02.flex-mid\n      b.m2r\n       ;txt _(item||'-')\n    .reset\n     ;api::\"rules?siteId=\"+site.data.id+(item?\"&category=\"+item:\"&category!=automation,access,security,lighting,climate,metering,notify,system,scene\"), \"model\", spread.wait()\n     Item.br1\n      ^nop:: data.href = \"+/\" + model.data.id\n  .col.md-w6.lg-w4\n  .col.md-w6.lg-w4\n%view sites/{siteId}/{list}s/{itemId}/logs #site\n h2 Logs\n  ;init data.list = logs(\"logs?model=\" + params.itemId)\n logs-table\n%view sites/{siteId}/{list}s/{itemId}/activities #site\n h2 Activities\n  ;init data.list = logs(\"logs?by=\" + params.itemId)\n logs-table\n%view sites/{siteId}/{list}s/{itemId}/relations #site\n h2 Relations\n div\n  ;init data.noconf = 1;init data.pre = params.list.capitalize() + \" #\" + params.itemId\n  schemaList\n   ;with:{rel:\"rules\",title:pre + \" rules\", item: device}\n  schemaList\n   ;with:{rel:\"follows\",title:pre + \" followers\", item: device}\n  schemaList\n   ;with:{rel:\"confs\",title:pre + \" configured in\", item: device}\n%view-link sites/{siteId}/{list}s/{itemId}/rules/{ruleId} sites/{siteId}/rules/{ruleId}\n%el form1-acl-map\n .row\n  input[type=hidden].field ;ref \"field\"\n  .col.md-w4.input__label {name}\n  .col.md-w8\n   @click [field], \"sumBitInputs\"\n   ;each perm in [\"APPLY\", \"INHERIT\", \"ADMIN\", \"NAME\", \"STATUS\", \"READ\", \"LOGS\", \"WRITE\", \"USE\", \"RENAME\", \"ENABLE\", \"SETPOINT\", \"CLIMATEMODE\", \"SETUP\", \"ADDRESS\"]\n   .ts4\n    input[type=checkbox].m1r\n     ;value 1<<loopKey; checked: !!(value & this.value)\n    span {perm}\n%el acl-form\n form-js.paper\n  ;schemaToForm \"schema/\" + (params.list ||\"site\") + \".json\", \"acl\", \"form1\"\n  %child\n  .group.right.m2\n   button.btn.is-blue Save\n%el ui-form\n form-js.paper\n  ;schemaToForm \"schema/\" + (params.list ||\"site\") + \".json\", \"ui\", \"form1\"\n  %child\n  .group.right.m2\n   button.btn.is-blue Save\n .tip.m2t\n  | path#type#name#opts#rowStyle#itemStyle#confirm#event#..\n  li type - onoff | level | menu | mode | icon | icont | edit | editt | editn | editmd | button | Custom text with {value}\n  li opts - level min:max:step | menu path under ui | mode path | icon name | button value\n  li row/itemStyle - state selector default,true=open | low,30=med,60=\n  li event - up#sites/3/users/new | set#22#status.output#true | ui#turva (kuva kaart ja tiles ui mapist) | map#soojasolm (kuva ainult kaart ui mapist) | tiles#logs (kuva ainult tiles ui mapist) | chart#117#400,800,1200,1600,2000\n .tip.m2t\n  h3 Examples\n  li status.output#onoff\n  li status.target#level#Name#0:100:5#indent - Slider, without Name will be 100% wide\n  li status.temperature#{value||'-'}℃#Temperatuur##indent\n  li status.temperature,status.rh#RH:{i[1]} T:{i[0]}℃#Rh/temp##indent\n  li id#menu##myMenu - ui.myMenu peab olema array\n  li climate.mode,no.off#mode##climate.modes - neljas parameeter näitab, kust modesid otsitakse\n  li status.armed#mode                - default on modes ja valvealal võib jätta panemata\n  li status.heatingNeed#{value==null?'':value*-1}%#Jahutab\n  li status.level#icon##canister##low,30=med,60=\n  li status.open#icont#Uks#lock##,true,open\n  li status.asi#edit#Muud stringi\n  li status.asi#editn#Muuda numbrit##indent\n  li status.level#button#Vaheta kanku#0#hidden,30=blue,90=red#{value<90?\"Vahetan ainult \"+value+\" täis kanistri?\":\"\"}\n  li status.co2#button#CO2 graafik##hidden#blue##chart#0,400,800,1200,1600,2000\n%view sites/{siteId}/logs #site\n ;title \"logs\"\n h2 Logs\n  ;init data.list = logs(\"logs?model=\" + params.siteId)\n logs-table\n%view sites/{siteId}/activities #site\n ;title \"activities\"\n h2 Activities\n  ;init data.list = logs(\"logs?by=\" + params.siteId)\n logs-table\n%view sites/{siteId}/managers #site\n ;title \"managers\"\n h2 Managers\n  ;init data.model=site\n acl-form\n%view sites/{siteId}/ui #site\n ;title \"ui\"\n h2 Ui setup\n  ;init data.model=site\n ui-form\n%view sites/{siteId}/{list}s/{itemId}/managers #site\n ;title \"{list}/managers\"\n div\n  ;model data[params.list]\n  h2 Managers\n  acl-form\n%view sites/{siteId}/{list}s/{itemId}/ui #site\n ;title \"{list}/ui\"\n div\n  ;model data[params.list]\n  h2 Ui setup\n  ui-form\n%el Select\n .Select\n  .Select-box.anim[tabindex=0]\n   input.Select-edit[tabindex=-1]\n   %child\n%el Select-cal\n .m2.Cal\n  ;stopPropagation;initCal::\n  ;is:\".\", \",1,month,2,year\", data.calView\n  table[cellspacing=0].Cal-day.anim\n   caption.Cal-head\n    .btn.is-primary.left.bold[data-calDo=prev]\n     =\"<\"\n    .btn.is-primary.right.bold[data-calDo=next]\n     =\">\"\n    span.m01[data-calView=1]\n     ;txt:_.date(now, \"MMMM\")\n    span.m01[data-calView=2]\n     ;txt:_.date(now, \"y\")\n   tr\n    th ;txt: \"\\xa0\"\n    th ;every:: [1, 2, 3, 4, 5, 6, 7]\n     ;txt::Date.locales[Date._locale].names[item<7?item + 24 : 24];cls::item <6?\"weekday\":\"weekend\"\n   tr ;every:: [0,1,2,3,4,5]\n    td.weekNum ;txt:: _.date(start-(-item*604800000), \"w\")\n    td\n     ;every::[1, 2, 3, 4, 5, 6, 7];cls::\"act\", (this.i = _super.item*7 + item + dayOff) == day\n     ;cls::this.i < 1 || this.i > daysInMonth ? \"other\" : item < 6 ? \"weekday\" : \"weekend\";txt::this.i < 1 ? daysInLastMonth + this.i : this.i > daysInMonth ? this.i - daysInMonth : this.i\n  table[cellspacing=0].Cal-month.anim\n   caption.Cal-head[data-calView=2]\n    .btn.is-primary.left.bold[data-calDo=prev]\n     =\"<\"\n    .btn.is-primary.right.bold[data-calDo=next]\n     =\">\"\n    ;txt:_.date(now, \"y\")\n   tr.weekRow ;every: [0,1,2,3]\n    td.monthname\n     ;every::[0, 1, 2];cls::\"act\", (this.i = _super.item*3 + item) == month\n     ;txt:Date.locales[Date._locale].names[this.i]\n  table[cellspacing=0].Cal-year.anim\n   caption.Cal-head\n    .btn.is-primary.left.bold[data-calDo=prev]\n     =\"<\"\n    .btn.is-primary.right.bold[data-calDo=next]\n     =\">\"\n    span[data-calView=0] {yearStart} - {yearStart+29}\n   tr.weekRow ;every: [0,1,2,3,4,5]\n    td.yearnum\n     ;every::[0, 1, 2, 3, 4];cls::\"act\", (this.i = _super.item*5 + item + yearStart) == year\n     ;txt::this.i\n%el Select-list\n div.m1\n  input.Select-search[tabindex=-1]\n .scroll\n  .Select-val {item.name||item.id}\n   ;every:list\n%el Select-multi\n div.m1\n  input.Select-search[tabindex=-1]\n div\n  .Select-val item 1\n  .Select-val item 2\n%el menu-cal\n .mat-Menu.shadow-1>Select-cal\n%el form1-date-time\n form1-row\n  input.field[autocomplete=\"off\"]\n   @click: [\"menu-cal\", \"right-end\", \"bottom\", 0, 1], \"showMenu\"\n</script><script>\nfunction chart_text(e,t,n,i,a){a=El(\"text.\"+(a||\"Chart-yLabel\"))\nreturn a.textContent=e,a.setAttribute(\"x\",n.step(1)),a.setAttribute(\"y\",t.step(1)),i&&El.append(i,a),a}El.bindings.initChart=function(c,p){var u,o,f,r,d,h=this,m=50,g=5,E=c.viewBox.baseVal.width-m-m,s={},v={},t={sec:1e3,min:6e4,hour:36e5,day:864e5,week:6048e5,month:31*864e5,year:365*864e5},y={min:\"hh:mm\",hour:\"hh\",day:\"DD DDD\",week:\"W\",month:\"MMM\",year:\"YYYY\"}\nfunction n(){var e=h.step.split(\":\")\no=e[0],f=+e[1],e=o.match(/(\\d+)([a-z]+)/),d=+e[1],r=e[2],h.span=d*t[r]*f,e=(e=Object.keys(y))[e.indexOf(r)+1],h.time=+(h.time||Date.now()).startOf(e).add(1,e)}c.now=function(){h.time=0,n(),e()},c.next=function(){h.time=+h.time.add(d*f,r),e()},c.prev=function(){h.time=+h.time.add(-d*f,r),e()},c.setStep=function(e){h.step!=e&&(h.step=e,n(),i())}\nvar w=El(\"path.Chart-axes\"),b=El(\"g.Chart-temp\"),x=El(\"g.Chart-temp\"),k=El(\"g\"),O=El.data.linked||function(e){return e},S={},C={blue:\"#029fe3\",green:\"#00a651\",orange:\"#f2994a\",red:\"#eb5757\",white:\"#dcdcdc\",yellow:\"#fcdd39\"}\nfunction i(){p.line.forEach(function(e,t){v[t]&&(El.kill(v[t].dots),El.kill(v[t].line))}),s={},S={},v={},El.empty(k),h.time||n(),p.line.forEach(function(e,t){var n=O(e.id),i=\"changed:\"+O(e.path),a=O(e.color||\"blue\"),l=v[t]={line:El(\"path.Chart-line\"),dots:El(\"g.Chart-dots\"),fn:(e.fn||\"avg\")+o,ax:O(e.axis),min:parseFloat(p[O(e.axis)].split(\",\")[0]),max:parseFloat(p[O(e.axis)].split(\",\").pop())},a=C[a]||a\nEl.css(l.line,\"color\",a),El.css(l.dots,\"color\",a),S[n]||(S[n]={keys:[],line:{},conf:{},fns:[]}),S[n].keys.pushUniq(encodeURIComponent(i)),S[n].fns.pushUniq(l.fn),S[n].line[l.fn+i]=t,S[n].conf[l.fn+i]=e,n=t,i=_(O(e.name)),t=a,e=30+110*Object.keys(s).length,(n=s[n]=El(\"path.Chart-line\")).setAttribute(\"d\",\"M\"+e+\" 197l10 0\"),El.css(n,\"color\",t),El.append(k,n),chart_text(i,197,e+15,k,\"Chart-yLabelr\"),El.append(c,l.line),El.append(c,l.dots)}),e()}function e(){c.noPrev=c.noNext=!1,u=\"\",El.render(h.nav),El.cls(c.parentNode,\"loading\",1)\nfor(var s=[\"M\"+(m-g)+\" 160\"],e=(El.empty(x),El.empty(b),p.x1&&l(p.x1.split(\",\"),m-2*g,161),p.x2&&l(p.x2.split(\",\"),E+m+2*g,161,\"Chart-yLabelr\"),w.setAttribute(\"d\",s.join(\" \")),p.line.forEach(function(e,t){El.empty(v[t].dots)}),new Date(h.time).add(-d*f,r)),t=Fn.wait(function(){var t=s.slice()\np.line.forEach(function(e,t){t=v[t]\nt&&t.arr&&t.line.setAttribute(\"d\",t.arr.join(\" \"))}),Object.each(i,function(e){e&&(El.append(x,e),t.push(\"M\"+e.getAttributeNS(null,\"x\")+\" 160l0 \"+g))}),w.setAttribute(\"d\",t.join(\" \")),El.cls(c.parentNode,\"loading\",0),El.attr(c.parentNode,\"data-error\",u||null),El.render(c.nextElementSibling)}),n=Math.ceil(f/20),i={},a=0;a<=f;a+=n)i[a]=chart_text(e.date(y[r]),177,m+E*a/f,null,\"Chart-xLabel\"),e.add(d*n,r)\nfunction l(e,t,n,i){for(var a=0,l=e.length,o=120/(l-1),r=\"l\"+(E+g+g)+\" 0m-\"+(E+g+g)+\" -\"+o;a<l;a++)chart_text(e[a],n-a*o,t,b,i),i||s.push(r)}El.render(c.previousSibling.previousSibling),Object.each(S,function(d,e){var n=t.wait(),s=api.items[e]&&api.items[e].get(\"ui.rrd\")\nfunction i(u){d.fns.forEach(function(e){for(var i,t=u,n=d.line[e+u.key],a=d.conf[e+u.key],l=v[n],o=l.arr=[],r=t[l.fn],s=r.data.shift(),c=r.data.length;c--&&null===r.data[c];);r.data.forEach(function(e,t){var n\nnull!==e&&t<=c&&(s=e),null===e&&!p.fill||c<t||null===s||(e=160-(s-l.min)/(l.max-l.min)*120|0,t=m+t*E/f,n=El(\"circle[r=3][cx=\"+t+\"][cy=\"+e+\"]\"),a.value=s,El.attr(n,\"data-tooltip\",a.format?_(a.format,a):s),o.push((i?\"L\":i=\"M\")+t+\" \"+e),El.append(l.dots,n))})})}s?(setTimeout(n,1),d.keys.forEach(function(o){var r={key:o=decodeURIComponent(o)}\nd.fns.forEach(function(e){try{var t=s[o.slice(8)][e],n=Date.parse(t.from),i=Math.floor((h.time-n-h.span)/h.span*f)-1,a=i<0?Array(-i).concat(t.data):t.data.slice(i)\ni<0&&(c.noPrev=!0),a.length<=f+2&&(c.noNext=!0),r[e]={data:a.slice(0,f+2)}}catch(l){r[e]={data:[]},u+=\"reading \"+o+\" \"+e+\"\\n\"+l}}),i(r)})):xhr.get(\"logs?model=\"+e+\"&key=\"+d.keys+\"&$take=\"+(f+1)+\"&$fn=\"+d.fns+\"&time<\"+h.time,function(e,t){e?u+=e+\"\\n\":t.forEach(i),n()})}),t()}El.append(c,w),El.append(c,x),El.append(c,b),El.append(c,k),i()},El.bindings.debug=function(e,t,n,i){console.debug(\"VIEW DEBUG\",t,n,i)},El.bindings.el=function(e,t,n){var i\nif(El.cache[t]||n)return t=El(El.cache[t]?t:n),(n=e._scope)&&(t._scope=n),(n=e.getAttribute(\"data-bind\"))&&(i=t.getAttribute(\"data-bind\"),t.setAttribute(\"data-bind\",i?n+\";\"+i:n)),(n=e.className)&&El.cls(t,n),(n=e.getAttribute(\"style\"))&&t.setAttribute(\"style\",n),e.parentNode.replaceChild(t,e),El.render(t,this),t},El.bindings.el.once=!0,El.bindings.model=function bindingModel(n,e,t,i){var a,l,o\nreturn!e||(a=this,l=El.scope(n,a),t=t||a.list,o=i||\"model\",i||l===a?l[o]&&l.hasOwnProperty.call(a,o)?!e:\"string\"==typeof(e=\"clock\"===e?El.data.clock:e)||\"number\"==typeof e?(t.get(e<0?El.data.viewAttr[-e]:e,function(e,t){t&&((a[o]=t).on(\"change\",r),El.on(n,\"kill\",s),r())}),!0):((a[o]=e).on(\"change\",r),void El.on(n,\"kill\",s)):(l.model=null,r(),!0))\nfunction r(){El.render(n,a)}function s(){var e=a[o]\nEl.empty(n),e&&(a[o]=null,e.off(\"change\",r))}},El.bindings.api=function(e,t,n,i){var a=api(_(t,this))\nreturn El.bindings.every.call(this,e,a,n||t.replace(/^.*\\/|s(\\?[^?]*)?$/g,\"\")),a.then(i),!0},El.bindings.spread=function(r,s,e){this.spread=Fn.wait(function(){for(var e,t=r.offsetHeight/s,n=r.childNodes.length,i=s,a=r,l=0,o=0;e=r.childNodes[l];)e.parentNode!==a?a.appendChild(e):l++,n--,1===e.nodeType&&(o+=e.offsetHeight),(t<o||n==i&&1<i)&&(i--,o=0,a=a.nextSibling)}),e&&setTimeout(this.spread,1)},El.bindings.xhr=function(l,e,o){var r=El.scope(l,{})\nreturn r.c||(r.i=0,r.c=document.createComment(\"xhr \"+e),r.t=l.replaceChild(r.c,l.firstChild)),r.x||(r.x=1,xhr.get(e,function(e,t){for(var n,i,a;0<r.i;r.i--)El.kill(r.c.previousSibling)\nif(r.c.parentNode){if(e)a=El(\".is-red\"),El.txt(a,\"Error:\"+e)\nelse for(a=t[o],n=r.i=a.length;n--;)i=r.t.cloneNode(!0),El.scope(i,{}).item=a[n],El.render(i),a[n]=i\nEl.append(l,a,r.c)}})),!0},El.bindings.setpointList=function(e,t){var a=this,n=e.parentNode,l=a.item.path||\"setpoint\",i=t&&api(t.format(El.data.params))\nreturn El.on(n,\"mousedown\",Event.stop),El.on(n,\"click\",function(e){Event.stop(e)\nvar t,n,i=e.target;(t=El.attr(i,\"data-id\"))?o(t):(t=El.attr(i,\"data-do\"))&&((t=(i=a.model).get(l,22)+(\"inc\"==t?.5:-.5))<(n=i.get(\"setpointMin\"))&&(t=n),(n=i.get(\"setpointMax\"))<t&&(t=n),View.emit(\"set\",e,{},i,l,t))}),i.on(\"change\",function(){El.render(n)}).at(0,function(e,t){o(t.data.id)}),El.bindings.every.call(this,e,i),!0\nfunction o(e){a.item.item=e,a.model=i.get(e),El.render(n)}},El.bindings.svgFit=function svgFit(e,t,n,i){El.attr(e,\"font-size\",n)\nvar a=e.getBBox().width\na||i||setTimeout(svgFit,1,e,t,n,1),t<a&&El.attr(e,\"font-size\",n*t/a)},El.bindings.svgBoxY=function(e){var t=e.ownerSVGElement.viewBox.baseVal,e=e.y.baseVal.value\ne<t.y&&(t.y=e,t.height+=-2*e)},El.bindings.mapInit=function(a){var i,l,o,r=this,s=1,c=a.parentNode,u=c.parentNode,t=new Image,d=[]\nfunction p(){var e,t,n\na.offsetHeight<5?(c.style.width=c.style.height=\"100%\",c.style.top=c.style.left=\"0px\"):(e=u.offsetWidth,t=u.offsetHeight,o=l/(n=(i<(n=e/t)?e/n*i:e)*s),El.css(c,{width:n+\"px\",height:n/i+\"px\",left:e/2-d[0]/o+\"px\",top:t/2-d[1]/o+\"px\"}))}function e(){}function n(){r.newItems=r.site.get(\"ui.view.\"+r.params.mapIdx+\".items[]\").slice(0)\nfor(var e,t=a.nextSibling,n=t.childNodes,i=n.length;i--;)1==(e=n[i]).nodeType&&((e=e.cloneNode(!0))._scope=n[i]._scope,\"A\"==e.tagName&&El.attr(e,\"href\",null),t.replaceChild(e,n[i]),El.on(e,\"pan\",f))}function f(e,t,n){var i=El.scope(n),a=m(+(t.leftPos/c.offsetWidth*100).toFixed(1),-10,110),l=m(+(t.topPos/c.offsetHeight*100).toFixed(1),-10,110)\nEl.css(n,{top:l+\"%\",left:a+\"%\"}),t.cancel=1,i.j[0]=a,i.j[1]=l,r.newItems[i.i]=i.j.join(\":\")}function h(){var e={}\ne[r.params.mapIdx]={items:r.newItems},r.site.patch({ui:{view:e}},function(){location.reload()}),r.newItems=null}function m(e,t,n){return n<e?n:t<e?e:t}El.on(a,\"load\",function(){var e=(l=a.naturalWidth)?a.naturalHeight:(t.src=a.src,l=t.width,t.height)\ni=l/e,d=[l/2,e/2],p()}),View.on(\"resize\",p),p(),El.on(c,\"pan\",function(e,t){var n=c.clientWidth>>1,i=c.clientHeight>>1\nd[0]=(u.offsetWidth/2-c.offsetLeft)*o,d[1]=(u.offsetHeight/2-c.offsetTop)*o,t.leftPos=m(t.leftPos,-n,n),t.topPos=m(t.topPos,-i,i)}),El.on(c,\"wheel pinch\",function(e,t,n){e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||(Event.stop(e),e.type&&\"wheel\"===e.type.slice(-5)?s+=t/5:s+=t/70,s<.8?s=.8:5<s&&(s=5),p())}),El.on(a,\"kill\",function(){View.off(\"map:add\",e),View.off(\"map:edit\",n),View.off(\"map:save\",h)}),View.on(\"map:add\",e),View.on(\"map:edit\",n),View.on(\"map:save\",h)},El.bindings.stopPropagation=function(e,t){function n(e){e.stopPropagation()}El.on(e,\"dblclick\",n),El.on(e,\"click\",n),t&&El.on(e,t,n)},El.bindings.stopPropagation.once=1,El.bindings.nop=function(){},El.bindings.init=function(){},El.bindings.init.once=1,El.bindings.blurOnEnter=function(t,n,i){El.on(t,\"keyup\",function(e){13===e.keyCode&&t.blur(),27===e.keyCode&&n&&(t.value=n.get(i,\"\"),t.blur())})},El.bindings.format=function(e,t,n){try{El.txt(e,_(t||\"-\",n))}catch(i){console.error(\"Format error: \"+i.message,\"in\",t,n,\"\"+this.model)}},El.bindings.cattr=function(e,t,n,i){n&&El.attr(El.find(e,t),n,i)},El.bindings.ccss=function(e,t,n,i){n&&El.css(El.find(e,t),n,i)},El.bindings.blurOnEnter.once=1,function(i,a,s){var c,l,o,e=[]\nfunction t(e,t){s[e||t.toLowerCase()]=s[t]=n.bind(null,t)}function n(n,i,a,l){i=_(i.replace(/[+#\\s]+/g,encodeURIComponent),El.data.params)\nvar o=s(n,i,function r(e,t){if(!e&&r._reload)return location.reload()\nt=\"application/json\"==o.getResponseHeader(\"Content-Type\")?JSON.parse(t):{message:t,code:e}\na&&!0===a(e,t,o)||e&&View.emit(View._e[\"xhr:\"+e]?\"xhr:\"+e:\"xhr:err\",t,n,i,l,r,u)})\nreturn u(o,l),o}function u(e,t){c&&e.setRequestHeader(\"Authorization\",c),t&&e.setRequestHeader(\"Content-Type\",\"application/json\"),e.send(t?JSON.stringify(t):null)}function r(){o&&s.post(\"/events\",d,0<e.length?e.splice(0):null)}function d(e,t){if(e)return View.emit(\"update\",!0)\nvar n=0,i=!e&&(Array.isArray(t)?t:t.events),a=i&&i.length||0\nif(a)for(;n<a;)try{View.emit(\"event\",i[n++])}catch(l){console.error(l)}setTimeout(r,600)}function p(e,t){var n={}\ntry{n=JSON.parse(e.name.match(/^{[\\w:\"]*}$/)[0])}catch(i){}return t&&(e.name=JSON.stringify(Object.assign(n,t))),n}function f(){l&&a.hasFocus()&&sessionStorage.setItem(\"act\",l)}Object.each({DELETE:\"del\",GET:0,PATCH:0,POST:0,PUT:0},t),s.addMethod=t,s.hello=function(e,n){var t={a:p(i).a}\nt.a||(t.b=p(i.opener).a||sessionStorage.getItem(\"act\"),t.c=a.referrer)\ns.put(\"/hello\",function(e,t){c=t&&t.authorization,o=t&&t.user,t&&t.a&&(p(i,{a:t.a}),l=t.a),n&&n(e,t),setTimeout(r,1500),f()},Object.assign(t,e))},s.logout=function(){s.del(\"/hello\",function(e,t){authorization=null,location.reload()})},El.on(i,\"focus\",f),El.on(i,\"unload\",function(){s.unload=!0,e.length&&navigator.sendBeacon(\"/events\",JSON.stringify(e))}),View.on(\"upload\",function(e,t,n){var i=new FormData(t),a=El(\"upload-progress\"),l=s(t.method,t.action,function(e,t){r(),n&&app(n).show({message:t})})\nfunction o(e){El.render(a,e)}function r(){var e\na.parentNode&&(a.parentNode.replaceChild(t,a),e=t.previousSibling,El.scope(e).x=0,El.render(e),t.reset(),app.blur())}return c&&l.setRequestHeader(\"Authorization\",c),l.onabort=l.onerror=l.ontimeout=r,l.upload&&(l.upload.onprogress=o),l.send(i),t.parentNode.replaceChild(a,t),o({cancel:function(){l.abort()}}),Event.stop(e)}),View.on(\"xhr\",function(t,e,n,i){n=s(n,i,function(){var e=t.target.parentNode.parentNode\nEl.scope(e).x=0,El.render(e)})\nreturn c&&n.setRequestHeader(\"Authorization\",c),n.send(null),Event.stop(t)})}(this,document,xhr),function(i){var u=[],d=p.loaded={}\nfunction p(e,s){var t=e.split(\"#\"),c=t[0],n=d[c],t=decodeURIComponent((t[1]||\"\").replace(/\\+/g,\" \"))\nif(n&&1!==n)return s&&s(null,t?JSON.get(n,t):n)\nu.push(arguments),d[c]=1,1!==n&&i(\"GET\",c,function(e,t){if(e)return s(e)\nvar n,i,a=[],l=JSON.parse(t),o=Fn.wait(function(){if(d[c]=l,u.length){var e=u\nfor(u=[],n=0;i=e[n++];)p.apply(null,i)}})\nif(!function r(e,t,n,i,a,l){for(a in e)(l=e[a])&&(\"string\"==typeof l.$id?r(d[l.$id]=l,t,l.$id,l):\"object\"==typeof l&&r(l,t,n,i),l=l.$ref)&&(\"#\"==l.charAt(0)?(l=l.slice(1),e[a]=l?JSON.get(i,l):i):\"/\"!=l.charAt(0)&&(l=n.replace(/[^\\/]*$/,l),t.push(l,e,a)))}(l,a,c,l),a[0])for(n=0;i=a[n];n+=3)!function(e,n,i){p(e,function(e,t){a[n+1][a[n+2]]=t,i()})}(i,n,o.wait())\no()}).send()}i.getSchema=p}(xhr),function(e){function c(e){return Array.isArray(e.allOf)?e.allOf.reduce(function(e,t){return JSON.mergePatch(e,t)},{}):e}e.schemaApply=function u(i,l,e){var a,t=i.type,n=typeof l,e=e||i.required\ni=c(i)\ni.anyOf&&i.anyOf.map(c).each(function(e){var t,n,i,a=Object.keys(e.properties)\nfor(t=0;n=a[t++];)if((i=e.properties[n][\"enum\"])&&i.indexOf(l[n])<0)return\nu(e,l)})\nif(Array.isArray(a=i[\"enum\"])){if(a.indexOf(l)<0)for(var o=a.length;o--;)if(a[o]==l){l=a[o]\nbreak}}else{var r,s\n\"string\"==t?t!==n&&(l=\"\"+l):\"number\"===t||\"integer\"==t?(l=((l=\"date-time\"==i[\"ui:el\"]?Date.parse(l):l)+\"\").replace(\",\",\".\"),l=\"number\"===t?parseFloat(l):parseInt(l,10),\"number\"==typeof(a=i.multipleOf)&&(l-=l%a),\"number\"==typeof(a=i.minimum)&&l<a&&(l=a),\"number\"==typeof(a=i.maximum)&&a<l&&(l=a)):\"boolean\"==t?l=!!l||!e&&null:\"array\"==i.type?(r=Array.isArray(i.items)&&i.items,l=Array.isArray(l)?l.reduce(function(e,t,n){n=r?r[n]:i.items\nreturn void 0!==t&&n&&(t=u(n,t),e.push(t)),e},[]):null):l&&(s=Array.isArray(i.required)&&i.required,Object.each(i.properties,function(e,t){void 0!==l[t]&&(l[t]=u(e,l[t],s&&-1<s.indexOf(t)))}),i.patternProperties)&&(a=i.properties||{},Object.each(i.patternProperties,function(n,e){var i=RegExp(e)\nObject.each(l,function(e,t){!a[t]&&i.test(t)&&(l[t]=u(n,l[t],s&&-1<s.indexOf(t)))})}))}return l}}(this.JSON||this),function(){var V=El(\"div\"),j=Array.isArray\nfunction M(e){return j(e.allOf)?e.allOf.reduce(function(e,t){return JSON.mergePatch(e,t)},{}):e}function e(a,e,s,I,c){var u=this,d=u.model||null\nfunction N(u,d,n,p,i,f,h,a,m){var e=(u=M(u)).resourceCollection\nif(e&&!m)api(e.format(f.params,f)).then(function(){N(u,d,n,p,i,f,h,a,this)})\nelse{var t,l,o,r,s,c,g,E=0\nif((u.properties||u.anyOf)&&null!==d&&(i=i?i+\"[\"+d+\"]\":d,u.title)&&El.append(n,El.append(El(I+\"-subheader\"),u.title)),!u.properties||(Object.each(u.properties,function(e,t){N(e,t,n,null===p?null:(\"object\"==e.type||e.properties||e.anyOf?p[t]:p)||{},i,f,h,a)}),u.anyOf)){if(j(u.anyOf)){for(u=u.anyOf.map(M),d=[],t={},l=Object.keys(u[0].properties),o=0;s=u[o++];)l=l.filter(function(e){var t=s.properties[e]\nreturn t&&(t[\"enum\"]||\"boolean\"==t.type&&typeof t[\"default\"]==t.type&&2===u.length&&u[o%2].properties[e]&&u[o%2].properties[e][\"default\"]!==t[\"default\"])})\nfor(f.selected={},o=0;s=u[o++];){function v(e){d.push(e),t[e]=r}r=El(\".grid.b2.w12\"),s=JSON.clone(s),l.each(function(e){var t=s.properties[e]\ng=g||t.title,\"boolean\"==t.type?v(t[\"default\"]):t[\"enum\"].each(v),delete s.properties[e]}),r._draw=[s,null,r,p,i,f,h]}u=\"boolean\"==typeof d[0]?JSON.clone(u[0].properties[l[0]]):{title:g,\"enum\":d},d=l[0]}var y=h&&h.acl&&!h.acl(\"write\",d||i)?\"-ro\":\"\",w=El(I+(u[\"ui:el\"]&&El.cache[I+\"-\"+u[\"ui:el\"]]?\"-\"+u[\"ui:el\"]:u[\"enum\"]?\"-enum\"+y:\"boolean\"==u.type?\"-boolean\"+y:\"array\"==u.type?\"-\"+u.type:u.patternProperties?\"-array\":m?\"-list\"+y:y)),b=El.scope(w,f),x=null===p?a&&a[d]||u[\"default\"]:null==d?p:p[d]\nif(x&&\"date-time\"==u[\"ui:el\"]&&(x=_.date(x,\"y-MM-dd HH:mm:ss\")),b.name=d||\"\",b.value=x,b.add=function(){C()},y&&(b.noAdd=!0),Object.assign(b,u),\"array\"==u.type||u.patternProperties){var k=El.find(w,\".js-items\"),O=El(\"input[type=hidden]\")\nif(El.append(k,O),d=i?i+\"[\"+d+\"]\":d,El.attr(O,\"name\",d),j(u.items))b.noAdd=!0,u.items.each(function(e,t){C(x&&x[t],e)})\nelse if(u.patternProperties)O.valObject=null,x&&Object.each(u.patternProperties,function(n,e){var i=RegExp(e)\nObject.each(x,function(e,t){i.test(t)&&C(e,n,t)})}),b.add=function(e){e.target\nvar n=Object.keys(u.patternProperties)[0]\napp.emit(\"confirm\",\" \",{body:u.addTitle||\"Enter key\",input:!m,select:m,actions:[{title:\"Cancel\",key:\"esc\"},{action:\"ok\",title:\"Ok\",key:\"enter\"}]},function(e,t){C(m?m.get(t.select):null,u.patternProperties[n],t.select)})}\nelse if(m)m.each(function(e,t){var n={}\nn[t]=b.value&&-1!=b.value.indexOf(e.data.id)||null,N({type:\"boolean\",title:e.data.name},\"\"+t,k,p&&n||null,d,f,h)})\nelse if(j(x)&&x.length)(e=u.items&&u.items.resourceCollection)?api(e.format(f.params,f)).then(function(){var t=this\nx.forEach(function(e){C(e,null,null,null,t)})}):x.each(function(e){C(e)})\nelse if(u.minItems)for(o=u.minItems;o--;)C()\nEl.render(w,b),El.append(n,w)}else{El.render(w,b),El.append(n,w)\nvar S=El.find(w,\".field\")\nS&&El.attr(S,\"name\",i&&d?i+\"[\"+d+\"]\":i||d),void 0!==x&&S&&El.val(S,x),u.readonly&&(S.disabled=!0),S&&t&&(El.on(S,\"change click\",A),A())}}}function C(e,t,n,i,a){var l,o,r,s\nfunction c(){var e,t=El.closest(this,\".js-del\")\nu.patternProperties&&((e=El(\"input[type=hidden]\")).valObject=null,El.attr(e,\"name\",r),El.append(k,e,O.nextSibling)),El.kill(t)}!i&&null!=e&&u[\"ui:txt\"]?(l=El(I+\"-array-txt\"),o=El.scope(l,b),r=d+\"[\"+(n||E++)+\"]\",s=m&&m.get(n)||a&&a.get(e),o.key=n,o.item=s&&s.data,o.del=c,o.txt=_(u[\"ui:txt\"],s&&s.data),o.edit=function(){C(e,t,n,l)},a=El(\"input[type=hidden]\"),El.attr(a,\"name\",r),a.valObject=e,El.append(l,a),El.append(k,l),El.render(l,o)):(l=El(I+\"-array-item\"),o=El.scope(l,b),r=d+\"[\"+(n||E++)+\"]\",s=m&&m.get(n),o.key=n,o.item=s&&s.data,o.del=c,t&&n&&(o.title=_(t.title,o)),i?i.parentNode.replaceChild(l,i):El.append(k,l),El.render(l,o),l=El.find(l,\".js-item\")||l,N(t||u.items,null,l,p&&e||null,r,f,h,e))}function A(){var e=El.val(S)\nf[\"selected\"][d]=e=\"string\"!=typeof e?!!e:e,c!=t[e]?(c&&El.append(V,c),(c=t[e])._draw&&(N.apply(null,c._draw),c._draw=null),El.append(n,c=t[e],w.nextSibling)):El.render(c,f)}}s=s||\"self\",a.fill=function(e){View.blur(),a.fillForm(e)},xhr.getSchema(e,function(e,l){var t,o,n,r=l\nif(l.links)for(t=0;r=l.links[t++];)if(\"self\"==r.rel&&(o=r.href),r.rel==s){l=r.schema||l\nbreak}function i(e){n&&El.kill(n),n=El(I+\"-fieldset\"),N(l,null,n,e&&e.data||null,null,u,e),El.append(a,n)}(a.fillForm=i)(d),El.on(a,\"submit\",function(){var e,t,n=El.val(this),i=Object.assign({},u.params,d&&d.data),i=(r.href||o).format(i)\nJSON.schemaApply(l,n),d&&(e=[],t=JSON.clone(d.data),JSON.mergePatch(t,n,e),n=e.length?JSON.tr(e)(n):null)\ntry{document.activeElement.blur()}catch(a){}n&&View.emit(c||\"makeReq\",r,i,n)})})}(El.bindings.schemaToForm=e).once=1}()\nvar _=i18n,api=List.extend({init:function(e,t){var n,i=this,a=e.match(/\\?[^\\/]*$/),a=a&&a.index\ne&&(a?(i.filterFn=JSON.matcher(unescape(e.slice(a+1)),\"(d=d.data)&&\"),i.merge(api(e.slice(0,a)))):\"all\"==e.split(\"/\").pop()?(n=e.split(/id=|\\//),i.merge(api(e.slice(0,-4)||\"sites\")),i.merge(api(e.slice(0,-3)+\"devices\")),i.merge(api(e.slice(0,-3)+\"rooms?siteId=\"+n[1]).then(function(){var e=this.pluck(\"linkedDevices\").concat(api.items[n[1]].data.linkedDevices).filter(Boolean)\ni.merge(api(\"devices?roomId=\"+n[1]+\"|id=\"+e.concat.apply(e,e)))})),i.merge(api(e.slice(0,-3)+\"users\")),i.merge(api(e.slice(0,-3)+\"rules\")),i.merge(api(e.slice(0,-3)+\"roles\")),i.merge(api(e.slice(0,-3)+\"securityAreas\"))):t||i.load())},load:function(){var n=this,i=n.wait()\nxhr.get(\"/\"+n.name,function(e,t){t&&t.each(n.add,n),i()})},first:function(e,t,n){for(var i=JSON.matcher(e),a=0,l=this.length;a<l;a++)if(i(this[a].data,t))return n(null,this[a])},sortFn:function(e,t){return e.sortKey<t.sortKey?-1:1},patch:function(e,t){xhr.patch(\"/\"+this.name,t,e)},rel:function(){},toString:function(){return\"List[\"+this.name+\"]\"}}),hasOwn=(api.items=Item.cache,Item.call.bind({}.hasOwnProperty)),logs=(api.prototype.item=Item.extend({init:function(){},set:function(e,t,n){var i=this,e=Item.prototype.set.call(i,e,t)\nreturn i.sortKey=(i.get(\"name\",\"\").toLowerCase()+\" \"+i.get(\"id\")).replace(/\\d+/g,function(e){return(\"000000000\"+e).slice(-10)}),e},save:function(e,t,n){var i=this,a=i.set(e,t,n)\nif(a.length){for(var l,o,r=0,s={id:i.data.id};o=a[r++];)(l=i.get(o,null))&&l.constructor===Object||JSON.set(s,o,l)\ni.patch(s)}},acl:function(e,t){var n,i,a=this.get(\"_acl.\"+e)\nif(!0===a)return a\nif(t&&Array.isArray(a))for(n=a.length;n--;)if(a[n]===t||(i=t.charAt(a[n].length))&&(\".\"===i||\"[\"===i)&&a[n]===t.slice(0,a[n].length))return!0},format:function(e,t){return(e=(e||\"\").replace(/{\\s*([[\\]\\w$]*)#([~%\\w\\/]+)/g,function(e,t,n){return\"{\"+(t||\"this\")+\".get('\"+n+\"')\"})).format(this,this.data,t||{})},hasUi:function(e,t,n){n=n||hasOwn(t,e)?t[e]:this.get(\"ui.\"+e+\"[]\")\nreturn t[e]=this.ui(n),n&&0<n.length},ui:function(e,t){var n\nreturn t&&t.hasOwnProperty(e)?t[e]:(n=this,(t=\"string\"==typeof e?i(\"ui.\"+e+\"[]\"):e)?t.map(function(e){if(\"string\"!=typeof e)return e\nvar e=e.split(/#(?![^{}]*})/g),t=e[0].split(\",\"),t={_:_,j:e,get:i,id:i(\"id\"),filterFn:JSON.matcher,pathList:t,path:t[0],type:e[1]||\"{value==null?'-':value}\",name:e[2]||\"\",opts:e[3]||\"mode\"==e[1]&&\"modes\",is:e[4],state:e[5],ask:e[6],emit:e[7],read:n.acl(\"read\",t[0]),write:n.acl(\"write\",t[0])}\nif(!t.write){if(\"edit\"===e[1]||\"editn\"===e[1]||\"mode\"===e[1]||\"onoff\"===e[1]){if(!t.read)return null\nt.type=\"{value==null?'-':value===true?'on':value===false?'off':value}\"}if(\"button\"===e[1])return null}return t.read&&t}).filter(Boolean):[])\nfunction i(e){return n.get(e)}},confirmDrop:function(e,t){\"function\"==typeof e&&(t=e,e=\"\")\nvar n=this\nView.emit(\"confirm\",e||\"Delete \"+n+\"?\",{actions:[{title:\"Cancel\"},{action:\"danger\",title:\"Delete\",key:\"enter\"}]},function(e){\"danger\"==e&&(n.drop(\"function\"==typeof t&&t),View.emit(\"up\"))})},rel:function(e,t){var n,i=this,a=i.get(\"id\"),l=i.lists[0].name,o=l+\"?id=\"+a,l=l.split(\"/\").pop()\nreturn\"sites\"!==l&&\"rules\"==e&&((n=api(o+\"/\"+e,1)).filterFn=function(e){return r(e.get(\"/if\"))||s(e.get(\"/then\"))||s(e.get(\"/recover\"))||r(e.get(\"/check\"))||s(e.get(\"/load\"))||r(e.get(\"/roles\"))||r(e.get(\"/input/items\"))||r(e.get(\"/output/items\"))},n.merge(El.data.site.rel(e))),\"roles\"===l&&\"users\"==e&&((n=api(o+\"/\"+e,1)).filterFn=function(e){return i.data.userSchedule&&i.data.userSchedule[e.data.id]||i.data.userIds&&-1<i.data.userIds.indexOf(e.data.id)},n.lists||(n.merge(api(e)),i.on(\"change:/userSchedule\",c),i.on(\"change:/userIds\",c))),\"sites\"!==l&&\"follows\"==e&&((n=api(o+\"/\"+e,1)).merge(El.data.site.rel(\"devices?follow[]={items[]={id=\"+a+\"}}\")),n.merge(El.data.site.rel(\"rooms?follow[]={items[]={id=\"+a+\"}}\"))),\"sites\"!==l&&\"confs\"==e&&(n=api(o+\"/\"+e,1)).merge(El.data.site.rel(\"devices?conf[]={id=\"+a+\"}\")),api(o+\"/\"+e)\nfunction r(e){return Array.isArray(e)&&e.some(function(e){return e&&(e==a||e.id==a)})}function s(e){return Array.isArray(e)&&e.some(function(e){return e&&(r(e.items)||e.value&&e.value.id==a)})}function c(){n.reFilter()}},drop:function(e){xhr.del(this.lists[0].name.replace(/\\?[^\\/]*$/,\"\")+\"?id=\"+this.data.id,e)},getInfo:function(){return this.data.status&&JSON.stringify(this.data.status).replace(/,/g,\", \").replace(/\"/g,\"\").slice(1,-1)||\"\"},getView:function(){for(var e,t=this.lists,n=0;e=t[n++];)if(0===e.name.indexOf(\"sites?id=\"))return e.name.replace(\"?id=\",\"/\")+\"/\"+this.data.id},patch:function(e,t,n){xhr.patch(\"/\"+(n||this.lists[0].name)+\"?id=\"+this.data.id,t,e)},put:function(e,t,n){xhr.put(\"/\"+(n||this.lists[0].name)+\"?id=\"+this.data.id,t,e)},toString:function(){return this.data.name+\"[#\"+this.data.id+\"]\"}}),xhr.parseHeader=function(e,a){return[e].map(function(e){return e.split(/\\s*;\\s*/).reduce(function(e,t,n){var i\nreturn(i=/^(\\w+)=('|\"|)((?:\\\\.|.)*?)\\2$/.exec(t))?e[i[1]]=i[3]:(i=/^<(.*?)>$/.exec(t))?e.href=decodeURI(i[1]):e[a||\"_\"+n]=t,e},{})})},api.extend({cache:{},init:function(e){var t=this\nt.url=\"/\"+t.name,t.more()},getLink:function(e,t){if(t=\"string\"==typeof t?xhr.parseHeader(t):t)for(var n,i=0;n=t[i++];)if(n.rel==e)return n.href},more:function(){var i,a\nthis.url&&(a=(i=this).wait(),i.emit(\"startLoading\"),xhr.get(i.url,function(e,t,n){n=n.getResponseHeader(\"Link\")\nt.each(i.add,i),a(),i.url=n&&i.getLink(\"next\",n),i.last=i.url&&+i.url.split(\"$next=\").pop()+1,i.emit(\"change\"),i.emit(\"endLoading\")}),i.url=null,i.emit(\"change\"))},sortFn:function(e,t){return e.data.time>t.data.time?-1:1},item:Item.extend({init:function(e){if((\"access\"===e.key||\"security\"===e.key)&&\"string\"==typeof e.value&&\"{\"===e.value.charAt(0))try{e.value=JSON.parse(e.value)}catch(t){}},cache:{}})}))\nfunction updateLogs(n){var e=api.items[n.model],i=RegExp(\"\\\\bmodel=[\\\\d,]*\"+n.model+\"\\\\b\"),a=RegExp(\"\\\\bby=[\\\\d,]*\"+n.by+\"\\\\b\"),l=RegExp(\"\\\\bkey=[\\\\w,]*\"+n.key+\"\\\\b\")\ne&&Object.each(logs.prototype.cache,function(e){var t=e.name;-1!==t.indexOf(\"model=\")&&!i.test(t)||-1!==t.indexOf(\"by=\")&&!a.test(t)||-1!==t.indexOf(\"key=\")&&!l.test(t)||e.add(n)})}View.on(\"event\",function(e){var t\n\"add\"==e.op?(t=e.path.split(\"/\").pop())&&api(t).add(e.value):\"log\"==e.op?(e.model=e.id,e.id=-e.time,updateLogs(e)):(t=api.items[e.id])&&(\"remove\"==e.op?t.destroy():e.op?t.emit(e.op,e):t.set(e))}),View.on(\"up\",function(e,t,n){location.hash=n?View.expand(n):location.hash.replace(/\\/[^\\/]*$/,\"\")}),View.on(\"makeReq\",function(i,e,t){function n(e){e&&e.newPass&&(e.email||El.data.params.userId&&(e.email=api.items[El.data.params.userId].get(\"email\")),e.newToken=crypto.pbkdf2(e.newPass,e.email,1e4,32,\"sha256\"),delete e.newPass)}n(t),n(t.user),xhr[i.method||\"POST\"](e,function(e,t,n){e||View.emit(\"response:\"+i.rel,e,t,n)},t)}),View.on(\"sumBitInputs\",function(e,t,n){t=El.findAll(t,\"input:checked\").reduce(function(e,t){return+t.value+e},0)\nn.value=t}),View.on(\"addUserToRole\",function(e,t,l,o){var r=api(\"roles\")\napp.emit(\"confirm\",\" \",{body:\"Select role\",select:r,actions:[{title:\"Cancel\",key:\"esc\"},{action:\"ok\",title:\"Ok\",key:\"enter\"}]},function(e,t){var n,i,t=r.get(t.select),a=l.data.id\nt&&(n=t.get(\"userIds\",[]).slice(0),i={},\"regular\"===o&&n.indexOf(a)<0&&(n.push(a),i.userIds=n,t.patch(i)),\"time limited\"!==o||t.get(\"userSchedule{}\",{})[a]||(i.userSchedule={},i.userSchedule[a]={since:Date.now()},t.patch(i)))})}),View.on(\"removeUserFromRole\",function(e,t,n,i,a){var l=n.get(\"id\")\nfunction o(){var e=i.get(\"userIds\",[]).slice(0),t={};(!a||\"regular\"===a)&&-1<e.remove(l)&&(t.userIds=e),a&&\"time limited\"!==a||!i.get(\"userSchedule{}\",{})[l]||(t.userSchedule={},t.userSchedule[l]=null),i.patch(t)}El.data.site.rel(\"roles?userIds[]=\"+l+\"|userSchedule.\"+l+\"{}\").then(function(){1<this.length?o():View.emit(\"confirm\",\"Remove user from last role?\",{actions:[{title:\"Cancel\"},{action:\"ok\",title:\"Ok\",key:\"enter\"}]},o)})}),View.on(\"execute\",function(e,t,n){Event.stop(e),n.put({event:\"execute\"})}),View.on(\"set\",function(t,n,i,a,l){var o,e\nfunction r(e){\"ok\"==e?o?((l=a.j.slice(7))[1]=i=l[1]?api.items[l[1]]:i,l[3]&&(l[3]=_.pick(i.get(l[2]),l[3])),{ui:1,map:1,tiles:1,chart:1,link:1,logs:1}[l[0]]&&l.unshift(\"overlay\"),l.splice(1,0,t,n),View.emit.apply(View,l)):i.save(a.path,l):El.render(t.target)}Event.stop(t),View.blur(),View.emit(\"closeMenu\"),i.acl||(i=api.items[i]),(a=a&&\"string\"!=typeof a?a:{path:a}).emit&&(o=1),\"true\"===l?l=!0:\"false\"===l?l=!1:\"null\"===l||\"\"===l?l=null:\"toggle\"===l?l=!i.get(a.path):l&&!isNaN(l)?l=+l:\"INPUT\"===n.tagName&&(l=n.value),i.acl(\"write\",a.path)&&l!==i.get(a.path)&&((e=a.ask&&_(a.ask,a))?View.emit(\"confirm\",e,{actions:[{title:\"Cancel\"},{action:\"ok\",title:\"Ok\",key:\"enter\"}]},r):r(\"ok\"))}),View.on(\"setNum\",function(e,t,n,i){var a=\"\"===t.value?null:parseFloat(t.value.replace(\",\",\".\"))\nisNaN(a)?t.value=(n.get?n:api.items[n]).get(i.path):View.emit(\"set\",e,{},n,i,a)}),El.md=El.bindings.md=function(e,t){t=(t=(t=(t=t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")).replace(/^(#{1,6}) (\\S.*?)$/gm,function(e,t,n){return\"<\"+(t=\"h\"+t.length)+\">\"+n+\"</\"+t+\">\"})).replace(/([*_])((?:\\\\\\1|.)+?)\\1/g,function(e,t,n){return\"<\"+(t=\"*\"==t?\"b\":\"/\"==t?\"i\":\"_\"==t?\"u\":\"s\")+\">\"+n+\"</\"+t+\">\"})).replace(/\\n\\n+/g,\"<p>\"),e.innerHTML=t},View.on(\"renderMd\",function(e,t,n){El.md(n,t.value)}),View.on(\"popupMd\",function(e,t,n,i){View.emit(\"confirm\",\"Edit\",{inputMd:n.get(i.path)||\"\",actions:[{title:\"Cancel\"},{action:\"ok\",title:\"Ok\",key:\"enter\"}]},function(e,t){n.save(i.path,t.inputMd)})}),View.on(\"ui\",function(){}),View.on(\"overlay\",function(e,t,n,i,a){View.blur()\nvar l,o=El(\"overlay\"),r=El.scope(o,El.data),s={esc:c}\nfunction c(e,t){!o||\"esc\"!==t&&e.target&&e.target!==o.firstChild||(El.rmKb(s),El.kill(o),o=null)}r.item={},\"link\"===n&&(n=\"ui\",r.item.view=i,r.item.link=a.split(\",\"),l=(l=api.items[r.item.link[0]])&&l.get(\"ui.view.\"+r.item.view),El.data.viewMap=l,El.data.viewLink=r.item.link),r.item[n]=i,r.el=\"Map-tiles-\"+n,\"chart\"===n&&(r.item.item=i,r.item.chart={line:[\"CO2#/status/co2#boiler#x1\"],x1:a}),El.append(document.body,o),El.render(o,r),El.addKb(s),El.on(o,\"kill\",El.rmKb),El.on(o,\"click\",c),El.on(o.lastChild,\"click\",Event.stop),El.on(o,\"wheel\",Event.stop),View.one(\"navigation\",c)}),View.on(\"kill\",function(e,t,n){El.kill(El.closest(t,n))}),View.on(\"toggleClass\",function(e,t,n,i){t=i||t,Event.stop(e),El.cls(t,n,!El.hasClass(t,n))}),View.on(\"expand\",function(e,t,n){t=El.closest(t,n)\nn=El.scope(t)\nn.expanded=!El.hasClass(t,\"is-expanded\"),n.expanded&&El.render(t),El.findAll(t,\".expandable,.expandable .btn\").cls(\"no-events\",n.expanded).cls(\"no-events\",!n.expanded,500),n.expanded||El.render(t),El.cls(t,\"is-expanded\",n.expanded,1)}),View.on(\"removeAlarm\",function(e,t,n){api.items[n].patch({status:{alarm:null}})}),View.on(\"removeNotification\",function(e,t,n,i){var a={}\na[i]=null,n.patch({status:{alarms:a}})}),El.data.Object=Object,El.data.Date=Date,El.data.Math=Math,El.data._=i18n,El.data.Fn=Fn,El.data.api=api,El.data.logs=logs,El.data.now=Date.now,El.data.hasOwn={}.hasOwnProperty,El.data.clock=new api.prototype.item({now:i18n.vals.now=new Date}),El.data.linked=function(e){return e<1?El.data.viewLink[-e]:e},El.data.formatAlarm=function(n,e){return _(e||\"{events;*alarm}: \",n)+Object.values(n.log).map(function(e,t){return(t?\"+\"+(e.time-n.start).ago().step(.1)+\" \":\"\")+api.items[e.device]}).join(\", \")+(n.end?\" kestis: \"+((n.end.at||n.end)-n.start).ago().step(.1):\"\")},El.data.getCssRules=function getCssRules(){var t=/\\{.*|:(?:focus|active|hover|unknown|:[-\\w]+)\\b/g\nreturn Array.from(document.styleSheets).flatMap(function n(e){return Array.from(e.imports||[]).flatMap(n).concat(Array.from(e.cssRules||e.rules).flatMap(function(e){return e.styleSheet?n(e.styleSheet):e.cssText.replace(t,\"\").trim().split(/\\s*,\\s*/)}))})},function(e,t){function n(a,l,o,r){return function(e){for(var t=+(arguments.length?e:this),n=0,i=o||{\"default\":\"{n} {u}{s}\"};t>=a[n];)t/=a[n++]\nreturn n==a.length&&r?r(this):(n=l[n],(i[t<2?n:n+\"s\"]||i[\"default\"]).format({n:t,u:n,s:t<2?\"\":\"s\"}))}}t.safe=function(){return this.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\\"/g,\"&quot;\")},t.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},t.lower=t.toLowerCase,t.upper=t.toUpperCase,e.scale=n([1e3,1e3,1e3],[\"\",\"k\",\"M\",\"G\"],{\"default\":\"{n}{u}\"}),t.scale=function(){return this.replace(numbersRe,function(e){return(+e).scale()})},t.pick=e.pick=function(){for(var e,t=this+\"=\",n=arguments,i=0,a=n.length;i<a;)0==(e=n[i++]).indexOf(t)&&(e=e.slice(t.length),i=a)\nreturn e.replace(\"#\",this)},t.plural=e.plural=function(){return arguments[+Fn(\"n->\"+(String.plural||\"n!=1\"))(parseFloat(this))].replace(\"#\",this)},Fn.words=n,e.ago=n([1e3,60,60],[\"ms\",\"sek\",\"min\",\"hr\"],{\"default\":\"{n}{u}\"})}(Number.prototype,String.prototype)\nvar sipActions,app=LiteJS({home:\"sites\",on:{show:function(e,t){El.findAll(app.root,\".js-viewRender\").render()\nfor(var n=[];t;t=t.parent)t.title&&n.unshift(t.title)\nfor(var i=El.findAll(app.root,\".menu__item\"),a=i.length;a--;)if(-1<location.href.indexOf(i[a].href)){El.cls(app.selectedMenu,\"selected\",0),app.selectedMenu=i[a],El.cls(app.selectedMenu,\"selected\")\nbreak}document.title=_(n.length?n.join(\"/\"):\"EnLife\",El.data),scroll(0,1),setTimeout(scroll,333,0,1)},is:function(e,t,n,i){for(var a=El.scope(t),l=a.hasOwnProperty;t&&!t._scope&&!l.call(a,n)&&(!t._scope||(a=El.scope(t),!l.call(a,n)));)t=t.parentNode\nt&&(a[n]=i,El.render(t))},callRel:function(e,t,n,i,a,l){n[i][a](l),El.render(t.parentNode)},genBasic:function(e,i,a,t){var n=t.type,t={hash:function(){var e=El.closest(i,\"form\").email.value\nif(!e)return app.emit(\"confirm\",\"Set email first\")\nvar t=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),n=(e.length+1+t.length)%3,t=t.slice(n-t.length)\napp.emit(\"confirm\",\"New hash generated\",{body:\"User: \"+e+\"\\nPassword: \"+t+\"\\nAuthorization: Basic \"+btoa(e+\":\"+t)}),a.value=crypto.sha256(t)},pin:function(){xhr.put(\"/sites?id={siteId}\"+(El.data.params.userId?\"/users?id={userId}\":\"\"),function(e,t){e||(a.value=t[n],\"pinHash\"==n&&app.emit(\"confirm\",\"New PIN generated\",{body:\"PIN: \"+t.pin}))},{event:\"genPin\"})}}\nreturn t.pinHash=t.pin,a.value?app.emit(\"confirm\",\"Overwrite existing?\",{actions:[{title:\"Cancel\"},{action:\"red\",title:\"Overwrite\",key:\"enter\"}]},t[n]):(t[n](),Event.stop(e))},\"xhr:406\":function(e,n,i,a,l,o){app.emit(\"confirm\",e.title||\"Not Acceptable\",e,function(e){var t\ne&&((t=xhr(n,i,l)).setRequestHeader(\"Accept-Confirm\",e),o(t,a))})},\"xhr:454\":function(e){app(\"#setPassword\").show()},\"xhr:1\":function(e,t,n,i,a,l){function o(){var e=xhr(t,n,a)\nl(e,i)}a._reload?app.emit(\"confirm\",e.title||\"Connection lost\",{body:e.message||_(\"status.\"+e.code),actions:[{title:\"Try again\",action:\"reload\",key:\"enter\"}]},function(e){\"reload\"==e&&o()}):(a._reload=1,setTimeout(o,4e3))},\"xhr:err\":function(e,t,n,i,a,l){\"/events\"!==n&&app.emit(\"confirm\",e.title||\"Error \"+e.code,{body:e.message||_(\"status.\"+e.code),actions:[{title:\"Ok\",key:\"enter\"}]})}}}),on=(!function(i,e,t,o,a){var l,r,s,n,c,u=0,d=(El.on(e,\"keyup pointerup wheel\",function(){u=0,r&&r.get(\"status.idle\")&&r.patch({status:{idle:null}},0,\"users\")}),setInterval(function(e){600==++u&&(o.emit(\"idle\"),r)&&r.get(\"ui.logIdle\")&&r.patch({status:{idle:!0}},0,\"users\")\nvar t,n=Date.locales[_.current].masks,i={}\nfor(t in e.data.now.setTime(Date.now()),n)i[t]=e.data.now.date(n[t])\nEl.data.clock.set(i)},1e3,El.data.clock),a.def({\"et\":\"Eesti keeles\",\"en\":\"In English\"}),e.documentElement),p=e.body,e=\"standalone\"in t?t.standalone:matchMedia(\"(display-mode:standalone)\").matches\nfunction f(t,n){xhr.load(\"lang/\"+t+\".js\",function(e){e||(t=localStorage.l=d.lang=Date._locale=a.use(t),_[t][\"@\"].names=Date.locales[t].names,El.render(p),n&&n())})}function h(e,t){var n=api(\"sites\",!0)\nif(n.removeAll(),t&&t.sites&&t.sites.each(n.add,n),l=El.data.auth=t&&t.user,r=El.data.user=l&&api.prototype.item(l),El.data.version=t&&t.version,t.style&&xhr.css(t.style),g(),l&&(s=null,l.lang&&f(l.lang),l.sip)&&i.JustSmartApp&&(JustSmartApp.action=function(e,t){o.emit(\"sip:\"+e,t)},JustSmartApp.Sip.init(l.sip)),t&&null!=t.view)return history.setUrl(t.view)\n454!=e&&o.show(!0,{error:t&&t.error?_(t.error):\"\"})}function m(){history.setUrl(history.getUrl().replace(/\\/?[^\\/]*$/,\"\"))}function g(){n||(n=!0,history.start(function(e){El.data.app=this.JustSmartApp,o.show(e),o.emit(\"navigation\")}))}history.scrollRestoration=\"manual\",e&&El.cls(d,\"is-app\"),f(localStorage.l||a.detect()),app.on(\"setLang\",function(e,t,n){f(n,function(){r&&r.acl(\"write\",\"lang\")&&r.patch({lang:n},0,\"users\")})}),o.on(\"response:wizard\",h),o.on(\"response:edit\",m),o.on(\"response:create\",m),o.on(\"response:acl\",m),o.on(\"response:ui\",m),o.on(\"response:/setPassword\",m),o.on(\"error\",function(e,t){o.emit(\"confirm\",t.message||t||\"Error: \"+e)}),o.on(\"login\",function(e,t){t.email=String(t.email).toLowerCase().trim(),t.newPass&&(s.newToken=crypto.pbkdf2(t.newPass,s.email,1e4,32,\"sha256\"),t=s),t.pass&&(t.token=crypto.pbkdf2(t.pass,t.email,1e4,32,\"sha256\"),delete t.pass),s=t,xhr.hello(t,h)}),o.on(\"logout\",function(){xhr.logout(),i.JustSmartApp&&(JustSmartApp.Sip.init(null),JustSmartApp.openNodeIdEntryView())}),o(\"#private\").on(\"ping\",function(){if(!l&&\"#login\"!=o.route)return o(\"#login\").show()}),o.param([\"_p\",\"_u\",\"error\",\"list\"],function(){}),o.param(\"siteId\",function(e,t,n){var i=t.slice(0,-2),a=this.wait()\napi(i+\"s\").get(e,function(e,t){if(e)return o(\"404\").show()\nEl.data[i]=t,api(\"roles\").then(a)})}),o.param([\"mapIdx\"],function(e,t,n){var i,a,l\nEl.data.site&&(n=(l=(a=(i=El.data.site.get(\"ui.view.\"+n.mapIdx))&&i.link&&(Array.isArray(i.link)?i.link:(\"\"+i.link).split(\",\")))&&api.items[a[0]])&&l.get(\"ui.view.\"+(i.view||n.mapIdx)),El.data.viewMap=n||i,El.data.viewLink=a)}),o.param([\"roomId\",\"roleId\",\"groupId\",\"securityAreaId\",\"ruleId\",\"userId\",\"deviceId\",\"itemId\"],function(n,i,a){var l=\"itemId\"==i?a.list:i.slice(0,-2)\napi(l+\"s\").get(n,function(e,t){if(e||t.data.siteId&&t.data.siteId!=a.siteId)return console.log(\"param\",i,n,e),o(\"404\").show()\n\"itemId\"==i&&(El.data.params[l+\"Id\"]=El.data.params.itemId),El.data[l]=t}).then(this.wait())}),o.param(\"recoverToken\",function(e,t,n){var i=this.wait()\nxhr.get(\"/recover/\"+e,function(e,t){return El.data.recover=t,i(),!0})}),o(\"sites\").on(\"ping\",function(n){api(\"sites\").then(function(){var e=this[0]&&this[0].data,t=l&&l.ui&&l.ui.home||e&&e.ui&&e.ui.home\nn._home=t?\"/\"+t:\"\",1==this.length&&o.show(\"sites/\"+e.id+n._home)}).then(this.wait())}),o.on(\"xhr:401\",function(e,t,n,i){if(i&&i.recover)return o(\"#recoverSent\").show()\ne.error=i&&i.email?\"Login fail\":\"\",g()}),El.on(p,\"click\",function(e){var t=e.target,t=\"A\"==t.tagName&&t.href.split(\"#\")\n!t||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||t[0]!=location.href.split(\"#\")[0]||(history.setUrl(t[1]),Event.stop(e))})\nvar E={}\nfunction v(){var n=c.get(\"status.modals{}\")\nObject.each(n,function(e,n){E[n]||(o.one(\"confirm:open\",function(e){E[n]=e}),o.emit(\"confirm\",\" \",{body:e.body,actions:e.actions||[{title:\"Close\"},{action:\"ok\",title:\"Delete\",key:\"enter\"}]},function(e,t){delete E[n],c.save(\"/status/modals/\"+n,null)}))}),Object.each(E,function(e,t){n[t]||(E[t].resolve(),delete E[t])})}o.on(\"navigation\",function(){El.data.site&&(c&&c!==El.data.site&&c.off(v),(c=El.data.site).on(\"change:/status/modals\",v),v())})\nvar y=[],w=(app.$$(\"script[type='litejs/view']\").forEach(function(e){e.src?y.push(e.src):xhr.view(e.innerHTML)}),xhr.load(y,function(){xhr.hello(null,h)}),t.serviceWorker),b=function(){location.reload(!0)}\no.on(\"reload\",b),(o.worker=!!w)&&(w.addEventListener(\"message\",function(e){o.emit(e.data.op||e.data,e.data)}),o.one(\"show\",function(){w.register(\"worker.js\").then(function(t){var n=!!t.active\nfunction e(e){\"installed\"===e.target.state?t.waiting.postMessage(\"skipWaiting\"):\"activated\"===e.target.state&&(n?599<u?b():(o.on(\"change\",b),o.on(\"idle\",b)):n=!0)}t.addEventListener(\"updatefound\",function(){t.installing.addEventListener(\"statechange\",e)}),o.on(\"update\",function i(e){t.waiting?b():t.update().then(e&&b,function(){setTimeout(i,6e3,e)})})})}))}(this,document,navigator,View,i18n),View.on(\"sip:state\",function(e){var t=api.items[El.data.auth.id],n=t&&e&&e.state\n\"INCOMING\"==n?(sipActions&&sipActions.off(\"sip:state\"),api(\"devices\").first(\"ui.sipUri=$uri&ui.sipActions[data.id]\",e,function(e,t){function n(){var e=t.get(\"ui.sipActions[]\").map(function(e){if(api.items[e.data.id])return(e=JSON.clone(e)).icon=location.protocol+\"//\"+location.host+\"/ico/\"+i18n(e.icon,api.items[e.data.id].data),e})\nJustSmartApp.Sip.showActions(e.filter(Boolean))}e||((sipActions=api(\"devices?id=\"+t.get(\"ui.sipActions[]*data.id\"))).on(\"change\",n,\"sip:state\"),n())})):\"ONGOING\"!==n&&sipActions&&sipActions.off(\"sip:state\"),t&&t.put({event:\"log\",name:\"sip\",data:e},null,\"users\")}),View.on(\"sip:ip\",function(e){El.data.auth&&api.items[El.data.auth.id].patch({status:{sipIp:e.ip}},null,\"users\")}),View.on(\"sip:set\",function(e){var t=api.items[El.data.auth.id]\nt&&t.put({event:\"log\",name:\"sip:set\",data:e},null,\"users\"),api.items[e.id].save(e.path,e.value)}),View.on(\"sip:toggle\",function(e){var t=api.items[El.data.auth.id]\nt&&t.put({event:\"log\",name:\"sip:toggle\",data:e},null,\"users\"),api.items[e.id].save(e.path,!api.items[e.id].get(e.path))}),View.on(\"confirm\",function(e,n,i){View.blur(),i||\"function\"!=typeof n||(i=n,n=null)\nvar a,l,o=\"\",r=El(\"Confirm\"),s=El.scope(r,El.data),t={},c=document.body,u=c.lastChild\nObject.assign(s,n),s.title=e||\"Confirm?\",s.actions||(s.actions=[{action:\"close\",title:\"Close\",key:\"esc\"}])\nfor(var d,p=0;d=s.actions[p++];)(d=\"string\"==typeof d?s.actions[p-1]={title:d,action:d}:d).key&&(t[d.key]=h.bind(r,r,d.action))\nfunction f(e,t){null==t&&0==e.clientX||(e=null==t?e.target[El.T]:t,o+=e,\"CLEAR\"!=e&&\"del\"!=e&&\"backspace\"!=e||(o=\"\"),El.md(El.find(r,\".js-body\"),o.replace(/./g,\"•\")||n.body),\"number\"==typeof s.code&&o.length==s.code&&id&&!sent&&i(sent=o,id,h,reject))}function h(e,t){var n\nr&&(t=t||El.attr(this,\"data-action\"),n={code:o,input:El.val(El.find(r,\".js-input\")),inputMd:El.val(El.find(r,\".js-inputMd\")),select:El.val(El.find(r,\".js-select\"))},El.kill(r,\"transparent\"),El.cls(u,\"Confirm--blur\",r=0),t&&i&&(\"function\"==typeof i?i(t,n):\"function\"==typeof i[t]?i[t](n):i[t]&&View.emit(i[t],n)),l&&navigator.vibrate(0),a)&&a.pause()}El.cls(u,\"Confirm--blur\"),El.cls(r.lastChild,\"Confirm--blur\",0,1),El.append(c,r),El.render(r,s),s.code&&(El.findAll(r,\".js-numpad\").on(\"click\",f),t.backspace=t.del=t.num=f),El.addKb(t,r),El.findAll(r,\".js-btn\").on(\"click\",h),View.one(\"navigation\",h),s.bgClose&&El.on(r,\"click\",h),El.on(r,\"wheel\",Event.stop),El.on(r.lastChild,\"click\",Event.stop),s.vibrate&&navigator.vibrate&&(l=navigator.vibrate(s.vibrate)),s.sound&&window.Audio&&(a=new Audio(s.sound)).play(),s.resolve=h,View.emit(\"confirm:open\",s)}),!function(e){var r,s,o,c,u,d,p=El(\".waves-ripple\")\nfunction f(t,e,n,i,a){var l=e.getBoundingClientRect(),o=l.top+El.scrollTop(),r=l.left+El.scrollLeft(),s=l.width||e.offsetWidth||0,l=l.height||e.offsetHeight||0\nn=\"left\"==n?(r-=t.offsetWidth+a,\"150%\"):\"left-start\"==n?(r-=a,\"0%\"):\"right\"==n?(r+=s+a,\"-50%\"):\"right-end\"==n?(r+=s+a-t.offsetWidth,\"100%\"):(r+=s/2-t.offsetWidth/2,\"50%\"),\"top\"==i?(o-=a+t.offsetHeight,i=\" 150%\"):\"bottom\"==i?(o+=l+a,i=\" -50%\",setTimeout(function(){var e=o+t.offsetHeight-El.scrollTop()-document.documentElement.offsetHeight\n0<e&&scrollBy({top:e,left:0,behavior:\"smooth\"})},400)):(o+=l/2-t.offsetHeight/2,i=\" 50%\"),El.css(t,{\"transform-origin\":n+i,top:(o<0?0:o)+\"px\",left:(r<0?0:r)+\"px\"})}function t(e){var t,n,i=e.target,a=El.attr(i,\"data-tooltip\"),l=e.relatedTarget||e.fromElement\nif((l||\"focusin\"===e.type)&&i!==o){if(!a&&o)for(;i=i.parentNode;)if(i===o)return\nm(),a&&(c=h(\"pre.tooltip\",o=i),l=El.attr(i,\"data-tooltip-pos\")||\"top\",El.txt(c,a),\"left\"===l||\"right\"===l?t=l:n=l,El.attr(c,\"data-pos\",l),f(c,i,t,n,6))}}function h(e,t){e=\"string\"==typeof e?El(e):e\nreturn El.scope(e,El.scope(t)).openTarget=t,El.render(e),El.append(document.body,e),El.cls(e,\"is-visible\",1,5),e}function n(e,t){e&&(setTimeout(e.closeFn||El.kill.bind(El,e),999),El.cls(e,\"is-visible\",0,t))}function m(){c&&(n(c),o=c=null)}function g(e){e&&e.target==r||s&&(n(s,200),El.cls(r,\"is-active\",s=r=null))}function E(){d--||El.cls(p,\"waves-ripple--play\",0)}El.near=f,El.on(document.body,\"mouseover\",t),El.on(window,\"focusin\",t),e.on(\"show\",m),e.on(\"ping\",g),e.on(\"closeMenu\",g),e.on(\"showMenu\",function(e,t,n,i,a,l){Event.stop(e)\nvar o=s&&r==t\ng(),o||(s=h(n,t),\"mouse\"==i?El.css(s,{top:e.pageY+\"px\",left:e.pageX+\"px\"}):(El.cls(r=t,\"is-active\"),f(s,t,i,a,4)),void 0!==s.style.transform&&(El.cls(s,\"no-events\"),El.on(s,\"transitionend\",function(e){\"transform\"===e.propertyName&&El.cls(s,\"no-events\",0)})))}),El.on(document.body,\"click\",g),El.on(document.body,\"pointerdown\",function(e){var t,n,i,a,l=e.target\nEl.hasClass(l,\"waves\")&&!l.disabled&&(i=l.getBoundingClientRect(),t=!El.hasClass(l,\"Checkbox-icon\"),n=t?e.clientY-i.top:i.height,e=t?e.clientX-i.left:i.width,i=Math.max(n,l.offsetHeight-n),a=Math.max(e,l.offsetWidth-e),i=Math.sqrt(i*i+a*a),a=(t?2*i:i)+\"px\",El.css(p,{top:n-i+\"px\",left:e-i+\"px\",width:a,height:a}),El.append(l,p),clearTimeout(u),E(),d=1,u=setTimeout(E,800),El.one(document.body,\"pointerup\",E),p.offsetTop,El.cls(p,\"waves-ripple--play\"))})}(View),El.on),off=El.off\nEl.bindings.SliderInit=function(l){var o,r,s,c,u,i,a,d,p,f,h=El.hasClass(l,\"is-vertical\"),m=l.firstChild,g=m.firstChild,E=g.lastChild,v=El.rate(El.emit.bind(l,l,\"change\"),500)\nfunction y(){var e=h?\"offsetHeight\":\"offsetWidth\",t=(El.attr(l,\"range\")||\"\").split(/[^+\\-\\d.]/)\nu=+(t[0]||0),i=+(t[1]||100),a=+(t[2]||1),o=E[e]>>1,d=0,p=m[e]-o-o,s=p/(i-u)}function w(e){var t=h?r-e.pageY:e.pageX-r\nreturn n((t=p<t?p:t<d?d:t)/s+u,e,t),Event.stop(e)}function t(e){c&&(c=!1,b(off),n(f))}function b(e){El.cls(g,\"anim\",!c),El.cls(E,\"is-active\",c),e(document,\"pointerup\",t),e(document,\"pointermove\",w)}function n(e,t,n){y(),e=El.step(e<u?u:i<e?i:e||0,a),void 0===f||c&&void 0===n||El.css(g,h?\"height\":\"width\",(n||(e-u)*s)+o+\"px\",0),f!==e&&(l.value=f=e,c&&t&&v(t),n=El.attr(l,\"format\"),El.attr(E,\"data-val\",n?_(n,{val:e}):e))}on(window,\"blur\",t),on(l,\"pointerdown\",function(e){c=!0,y()\nvar t=l.getBoundingClientRect()\nr=(h?t.top+p+El.scrollTop()+o:t.left+El.scrollLeft())+o,(t=r-e.clientX+(f-u||0)*s)<o&&-o<t&&(r-=t)\nif(1<m.childNodes.length){g=m.firstChild\nfor(var n,i=p,t=g,a=h?r-e.pageY:e.pageX-r;t;t=t.nextSibling)((n=a-t[attr]+o)<0?-n<=i:n<i)&&(E=(g=t).firstChild,i=n<0?-n:n)\ng.previousSibling&&(p=g.previousSibling[attr]-o,range[3])&&(p-=s*range[3]),g.nextSibling&&(d=g.nextSibling[attr]-o,range[3])&&(d+=s*range[3])}w(e),b(on)}),l.val=n,setTimeout(function(){n(f||0)},10)},El.bindings.SliderInit.once=1\nvar inFocus,defaults={list:{},cal:{format:\"LLL\"},multi:{}}\nfunction Select(e,t,n,i,a){var l,o=e.firstChild,r=o.firstChild,s={enter:c}\nfunction c(){l||(o.tabIndex=-1,El.cls(o,\"is-open\"),El.append(o,l=El(\"Select-\"+t)),i(l),El.render(l,El.scope(l,n)))}function u(e){l&&\"Escape\"!==e.key||(El.rmKb(s),El.cls(o,\"is-open\",o.tabIndex=0),setTimeout(d,1,e))}function d(e){if(l){try{var t=document.activeElement\nif(t==o||(t=t.parentNode)==o||t.parentNode==o)return}catch(e){}p()}}function p(){l&&(a(),El.kill(l),l=null)}El.on(o,\"click\",c),El.on(o,\"focus\",function(e){inFocus=o,El.addKb(s,o)}),El.on(o,\"blur\",u,0),e.val=function(e,t){El.val(r,e),void 0!==t&&(r.valObject=t)},n.kill=p,n.blur=u}El.bindings.initCal=function(n,e){var i=El.scope(n),t=i.openTarget,a=El.val(t),l=i.now=a?new Date(a):new Date\nEl.attr(n,\"data-format\")\nfunction o(e){var t=new Date(l).startOf(\"month\")\ni.day=l.getDate(),i.month=l.getMonth(),i.year=l.getFullYear(),i.yearStart=i.year-i.year%5-20,i.dayOff=1-(t.getDay()||7)||-7,i.start=t-(i.dayOff<-6?6048e5:0),t.setMonth(i.month+1,0),i.daysInMonth=t.getDate(),t.setDate(0),i.daysInLastMonth=t.getDate(),View.emit(\"is\",0,n,\"calView\",e)}i.calView=0,o(0),El.on(n,\"click\",\"[data-calDo]\",function(e){e=\"next\"==El.attr(e.target,\"data-calDo\")?1:-1\n2==i.calView?l.setFullYear(i.year+30*e):1==i.calView?l.setMonth(i.month+12*e):l.setMonth(i.month+1*e),o(i.calView)}),El.on(n,\"click\",\"[data-calView]\",function(e){o(+El.attr(e.target,\"data-calView\"))}),El.on(n,\"click\",\".Cal-day td\",function(e){l.setDate(e.target.i),o(0),El.val(t,_.date(l,\"y-MM-dd HH:mm:ss\"))}),El.on(n,\"click\",\".Cal-month td\",function(e){l.setMonth(e.target.i),o(0)}),El.on(n,\"click\",\".Cal-year td\",function(e){l.setFullYear(e.target.i),o(1)})},El.bindings.SelectCal=function(e,t){Select(e,\"cal\",t,initCal,function(){})},El.bindings.SelectList=function(t,n){var i\nfunction a(){}Select(t,\"list\",n,function(e){i=e[0].firstChild,El.on(i,\"blur\",n.close),El.on(i,\"change\",a),i.focus(),El.addKb({bubble:1,input:1,up:function(){},down:function(){},enter:function(){}},e)},function(){i=null}),El.on(t,\"click\",\".Select-val\",function(e){t.val(e.target.valueObj||e.target.textContent),n.kill()})},El.bindings.SelectMulti=function(e,t){Select(e,\"multi\",t,function(){},function(){})}\n</script><noscript><h1>Error</h1>This application requires JavaScript</noscript></body></html>"
          },
          "redirectURL": "",
          "headersSize": 185,
          "bodySize": 180385,
          "_transferSize": 180570
        },
        "cache": {},
        "timings": {
          "blocked": 0.5069677099527325,
          "dns": 0.00004166940925642848,
          "connect": 1.0002076051023323,
          "ssl": -1,
          "send": 0.5248009583738167,
          "wait": 44.839703925390495,
          "receive": 32.712310465285555
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "1",
        "_fetchType": "Network Load",
        "_priority": "high"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:00.133Z",
        "time": 53.82723982620519,
        "request": {
          "method": "GET",
          "url": "http://192.168.1.125/manifest.json?9a2b",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=5, i"
            }
          ],
          "queryString": [
            {
              "name": "9a2b",
              "value": ""
            }
          ],
          "headersSize": 361,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:00 GMT"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "327"
            },
            {
              "name": "Cache-Control",
              "value": "public, max-age=31556908"
            }
          ],
          "content": {
            "size": 327,
            "compression": 0,
            "mimeType": "application/json",
            "text": "{\n  \"name\": \"EnLife\",\n  \"description\": \"EnLife home automation\",\n  \"icons\": [\n    {\n      \"src\": \"apple-touch-icon.png\",\n      \"sizes\": \"192x192\",\n      \"purpose\": \"any maskable\",\n      \"type\": \"image/png\"\n    }\n  ],\n  \"start_url\": \"./\",\n  \"display\": \"standalone\",\n  \"theme_color\": \"#303030\",\n  \"background_color\": \"#303030\"\n}\n"
          },
          "redirectURL": "",
          "headersSize": 174,
          "bodySize": 327,
          "_transferSize": 501
        },
        "cache": {},
        "timings": {
          "blocked": 0.2891638068831526,
          "dns": 0.00004166577127762139,
          "connect": 1.0002076051023323,
          "ssl": -1,
          "send": 0.6039559266355354,
          "wait": 51.92685127258301,
          "receive": 0.006977879820624366
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "2",
        "_fetchType": "Network Load",
        "_priority": "low"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:00.148Z",
        "time": 0.03520833342918195,
        "request": {
          "method": "GET",
          "url": "http://192.168.1.125/lang/et.js?bb2db6",
          "httpVersion": "",
          "cookies": [],
          "headers": [],
          "queryString": [
            {
              "name": "bb2db6",
              "value": ""
            }
          ],
          "headersSize": -1,
          "bodySize": -1
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "",
          "cookies": [],
          "headers": [
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:05:50 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript; charset=UTF-8"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "42198"
            },
            {
              "name": "Cache-Control",
              "value": "public, max-age=31556908"
            }
          ],
          "content": {
            "size": 0,
            "compression": 0,
            "mimeType": "text/javascript",
            "text": "Date.locales.et = {\n\tnames: (\"jaan veeb märts apr mai juuni juuli aug sept okt nov dets \" +\n\t\t\"jaanuar veebruar märts aprill mai juuni juuli august september oktoober november detsember \" +\n\t\t\"P E T K N R L pühapäev esmaspäev teisipäev kolmapäev neljapäev reede laupäev\").split(\" \"),\n\tmasks: {\n\t\t\"date\": \"DDD, D. MMM\",\n\t\t\"time\": \"hh:mm\",\n\t\t\"longDate\": \"MMMM D, YYYY\",\n\t\t\"longDateTime\": \"MMMM D, YYYY hh:mm\",\n\t\t\"dateTime\": \"MMMM D, hh:mm\",\n\t\t\"fullDate\": \"DDDD, MMMM D, YYYY\",\n\t\t\"fullTime\": \"hh:mm:ss\",\n\t\t\"isoDate\": \"YYYY-MM-DD\"\n\t}\n}\n\nString.alphabet = \"ABDEFGHIJKLMNOPRSŠZŽTUVÕÄÖÜXYabdefghijklmnoprsšzžtuvõäöüxy\"\nString.plural   = \"n!=1\"\n\n_.add(\"et\", { \"\": \"\"\n, \"@\": {\n\t\"T\": \"hh:mm\",\n\t\"D\": \"MMMM d, yyyy\",\n\t\"DT\": \"MMMM d, yyyy hh:mm\"\n}\n, \"*\": {\n\t\"batteryEmpty\": \"Patarei tühi - vaheta kohe;Patarei tühi # seadmel - vaheta kohe\",\n\t\"batteryWarning\": \"Patarei tühjenemas;Patarei tühjenemas # seadmel\",\n\t\"coAlarm\": \"Vingugaasihäire;# vingugaasihäiret\",\n\t\"faultAlarm\": \"Tehniline viga;# tehnilist viga\",\n\t\"fireAlarm\": \"Tulehäire;# tulehäiret\",\n\t\"gasAlarm\": \"Gaasihäire;# gaasihäiret\",\n\t\"panicAlarm\": \"Paanikahäire;# paanikahäiret\",\n\t\"powerAlarm\": \"Toiteviga;# toiteviga\",\n\t\"safetyAlarm\": \"Ohutusviga;# ohutusviga\",\n\t\"smokeAlarm\": \"Suitsuhäire;# suitsuhäiret\",\n\t\"tamperAlarm\": \"Muukimine;# muukimist\",\n\t\"turnedOffAlarm\": \"Seade lülitus välja;# seadet lülitus välja\",\n\t\"turnedOnAlarm\": \"Seade lülitus sisse;# seadet lülitus sisse\",\n\t\"waterAlarm\": \"Veeleke;# veeleket\",\n}\n, \"#\": {\n\t// format;NaN;negFormat;0;Infinity;-Infinity;roundPoint\n\t\".1\": \"#0,1\",\n\t\".01\": \"#0,01\",\n\t\".05\": \"#0,05\"\n}\n, \"_\": {\n\t\"num\": \"#1;-\",\n\t\"num1\": \"#0,1;-\",\n\t\"num01\": \"#0,01;-\",\n\t\"num05\": \"#0,05;-\",\n\t\"num001\": \"#0,001;-\",\n\t\"num005\": \"#0,005;-\"\n}\n, \"hint\": {\n\t\"email\": \"Kasutakse sisselogimisel ja parooli taastamisel\"\n}\n, \"i\": {\n\t\"address\": \"a: {value===''?'-':value}\",\n\t\"cantSaveReading\": \"{!i[1]||i[0]==null?'Ei saa salvestada - hetkenäit puudub!':''}\",\n\t\"cantSetModbusAddress\": \"{!i[0]?'Ei saa sättida - seadme ID puudub!':''}\",\n\t\"co2\": \"{value;#1;-} ppm\",\n\t\"co2E\": \"{value;#1; }{value?' ppm':''}\",\n\t\"comp\": \"{(_.vals.tmp=((((i[0]-i[1])/((+now)-(+now).startOf('month')))/(i[2]/(((+now).startOf('month')) - (+now).add(-1,'month').startOf('month'))))-1)*100)>99?'> +99':_.vals.tmp<-99?'< -99':_.number(_.vals.tmp,'+1;-')}%\",\n\t\"conAndComp\": \"{!i[0]||!i[1]?(i[2]?i[2]-(i[3]||0):null):i[0]-(i[3]||0);_.num1}{i[5]?' '+i[5]:''} ({(_.vals.tmp=((((i[0]-i[3])/((+now)-(+now).startOf('month')))/(i[4]/(((+now).startOf('month')) - (+now).add(-1,'month').startOf('month'))))-1)*100)>99?'> +99':_.vals.tmp<-99?'< -99':_.number(_.vals.tmp,'+1;-')}%)\",\n\t\"conAndCompDyn\": \"{(!i[0]||!i[1]?(i[2]?i[2]-(i[3]||0):null):i[0]-(i[3]||0))*1000;#0,001 a5}{i[5]?i[5].replace('k','').replace('M',''):''} ({(_.vals.tmp=((((i[0]-i[3])/((+now)-(+now).startOf('month')))/(i[4]/(((+now).startOf('month')) - (+now).add(-1,'month').startOf('month'))))-1)*100)>99?'> +99':_.vals.tmp<-99?'< -99':_.number(_.vals.tmp,'+1;-')}%)\",\n\t\"conCur\": \"{!i[1]||!i[0]?(i[2]? (i[2]-(i[3]||0)):null): i[0]-(i[3]||0);_.num1}{i[4]?' '+i[4]:''}\",\n\t\"eco\": \"{!i[0]?'':_('eco')+(i[0]=='system'?'🏠':i[0]=='forced'?'🤝':i[0]=='scheduled'?'🕛':'')}\",\n\t\"economy\": \"{!i[1]||!i[2]?'':i[1]+'-'+i[2]}#{_('Economy mode')+(!i[1]||!i[2]?'':i[3]?' '+_('Mon')+'-'+_('Sun'):' '+_('Mon')+'-'+_('Fri'))}\",\n\t\"enabled\": \"{value?'lubatud':'keelatud'}\",\n\t\"Enabled\": \"{value?'Lubatud':'Keelatud'}\",\n\t\"fl\": \"{value!==''?'fl: '+value:''}\",\n\t\"lux\": \"{i[0]>=0?i[0]:'-';#1;} lx\",\n\t\"luxE\": \"{value;#1; }{value?' lx':''}\",\n\t\"ms\": \"{i[0]>=0?i[0]:'-';#1;} ms\",\n\t\"msg\": \"{value>0?_('msg') +': '+value:''}\",\n\t\"need\": \"{i[0]>0?'vaja: '+i[0]+'%':''}\",\n\t\"needHC1\": \"{(i[1]=='cooling'?-1:1)*(i[0]||0)+'%'}\",\n\t\"needHC2\": \"{_('is_'+i[1])+', '+_('need')}\",\n\t\"needH1\": \"{i[1]=='heating'?(i[0]||0)+'%':''}\",\n\t\"needH2\": \"{i[1]=='heating'?_('is_heating')+', '_('need'):''}\",\n\t\"needC1\": \"{i[1]=='cooling'?-1*(i[0]||0)+'%':''}\",\n\t\"needC2\": \"{i[1]=='cooling'?_('is_cooling')+', '_('need'):''}\",\n\t\"no\": \"{value===''?'':'nr: '+value}\",\n\t\"node\": \"node: {value;_.num}\",\n\t\"num1Unit\": \"{value;_.num1}{i[1]?' '+i[1]:''}\",\n\t\"offl\": \"{value?'offl: '+value:''}\",\n\t\"open\": \"{value===''?'-':value?'avatud':'suletud'}\",\n\t\"percentPosE\": \"{i[0]>=0?i[0]+'%':''}\",\n\t\"reading\": \"{i[1]&&i[0]>=0?i[0]:i[2]>=0?i[2]:null;_.num1}{i[3]?' '+i[3]:''}\",\n\t\"readingDyn\": \"{(i[1]&&i[0]>=0?i[0]:i[2]>=0?i[2]:null)*1000;#0,001 a5}{i[3]?i[3].replace('k','').replace('M',''):''}\",\n\t\"reduceH\": \"{_('Reduce heating')+(i[0]&&(i[2]||i[3])?': '+(i[2]||i[3])+' ℃'+' -> '+((i[2]||i[3])+i[0])+' ℃':'')}\",\n\t\"reduceC\": \"{_('Reduce cooling')+(i[0]&&(i[2]||i[3])?': '+(i[2]||i[3])+' ℃'+' -> '+((i[2]||i[3])+i[0])+' ℃':'')}\",\n\t\"rh\": \"{value;#1;-}%\",\n\t\"rhE\": \"{value;#1; }{value?'%':''}\",\n\t\"rssi\": \"{value===''?'':'rssi: '+value}\",\n\t\"sc\": \"{value!==''?'sc:'+value:''}\",\n\t\"setp\": \"soov: {value===''?'-':value;_.num1} ℃\",\n\t\"setpTarget\": \"{_('is_'+i[1])}: {i[0]===''?'-':i[0];_.num1} ℃\",\n\t\"setpDZ\": \"{i[0]!=i[1]?'('+i[0]+' ℃ '+(i[1]-i[0]>0?'+ '+(i[1]-i[0]):'- '+(i[0]-i[1]))+' ℃)':''}\",\n\t\"tamperS\": \"{value===''?'':value?'kaas avatud':''}\",\n\t\"tamperF\": \"{value===''?'-':value?'avatud':'suletud'}\",\n\t\"tariff\": \"{value==1?_('päev'):value==2?_('öö'):''}\",\n\t\"temp\": \"{value;#1;-} ℃\",\n\t\"tempE\": \"{value;#1; }{value!==''?' ℃':''}\",\n\t\"temp1\": \"{value;#0,1;-} ℃\",\n\t\"temp1E\": \"{value;#0,1; }{value!==''?' ℃':''}\",\n\t\"temp01\": \"{value;#0,01;-} ℃\",\n\t\"temp01E\": \"{value;#0,01; }{value!==''?' ℃':''}\",\n\t\"tempLocal\": \"{value;#0,1;-} ℃\",\n\t\"uptime\": \"{value<3600?(value/60).step(0.1)+'min':value<86400?(value*0.000278).step(0.1)+'t':(value*0.000011574074074074073).step(0.1)+'p'}\",\n\t\"valE\": \"{value===''?'':value}\",\n\t\"valD\": \"{value===''?'-':value}\",\n\t\"valS\": \"{value===''?' ':value}\",\n\t\"volt\": \"{value;#1;-} V\",\n\t\"volt1\": \"{value;#0,1;-} V\",\n\t\"volt01\": \"{value;#0,01;-} V\",\n\t\"volt05\": \"{value;#0,05;-} V\"\n}\n, \"log\": {\n\t\"_\": \"{by} {key} {value} on {model}\",\n\t\"access\": \"{model} {value.user?(value.user.name||'Kasutaja#'+value.user.id):'Kaart#'+value.card} {value.access=='granted'?'läbipääs lubatud':'läbipääs keelatud: '+_('log.' + value.reason, d)}\",\n\t\"changed\": \"{value===''?'✖ '+key.replace('changed:','eemaldus: '):'◀ '+key.replace('changed:','muutus: ').replace('cardRead:','kaardi lugemine: ').replace('codeRead:','koodi lugemine: ').replace('singleClick:','üksik vajutus: ').replace('doubleClick:','topelt vajutus: ').replace('longPush:','pikk vajutus: ')+' ➡ '+(value&&value.constructor===Object?JSON.stringify(value):value)}, {by}\",\n\t\"created\": \"{by} lisas ➡ {value}\",\n\t\"deleted\": \"{by} kustutas {model}\",\n\t\"security\": \"{_('security.' + (value.log?'alarm':value.armed?'arm':'disarm'), d)}\",\n\t\"unknown card\": \"tundmatu kaart\",\n\t\"updated\": \"▶ uuendus: {by} ➡ {value}\"\n}\n, \"pass\": {\n\t\"forceDesc\": \"Kasutaja peab muutma salasõna järgmisel logimisel\",\n\t\"forceTitle\": \"Pead seadistama uue parooli\"\n}\n, \"status\": {\n\t\"1\": \"Võrguühendus puudub\",\n\t\"504\": \"Keskseadmega ühendus puudub\"\n}\n, \"{name} alarms ({alarmCount})\": \"{name} alarmid ({alarmCount})\"\n, \"A new version is available.\": \"Uus versioon on saadaval\"\n, \"A role, device group and associated users will be deleted. NB! Devices will be moved to site. Please confirm deleting\": \"Kustutatakse roll, seadmete grupp ja rollis olevad kasutajad. NB! Seadmed liiguvad omanikuta gruppi. Kustutan?\"\n, \"Access log\": \"Läbipääsulogi\"\n, \"Access point URL\": \"Pöörduspunkti URL\"\n, \"Account\": \"Konto\"\n, \"account\": \"konto\"\n, \"Accumulator\": \"Aku\"\n, \"Action\": \"Tegevus\"\n, \"active\": \"aktiivne\"\n, \"active🤝\": \"aktiivne🤝\"\n, \"active🕛\": \"aktiivne🕛\"\n, \"Activated once\": \"Ühekordselt aktiveeritud\"\n, \"Activated by schedule\": \"Kellaajaliselt aktiveeritud\"\n, \"Active alarm count\": \"Aktiivseid alarme\"\n, \"Activities\": \"Tegevused\"\n, \"Add\": \"Lisa\"\n, \"Add 4-port Modbus line extender!\": \"Lisa 4-pordine Modbus liinilaiendi!\"\n, \"Add controller\": \"Lisa kontroller\"\n, \"Add device\": \"Lisa seade\"\n, \"ADD GENERAL METER\": \"LISA ÜLDARVESTI\"\n, \"Add Modbus device\": \"Lisa Modbus seade\"\n, \"Add M-Bus gateway\": \"Lisa M-Bus gateway\"\n, \"ADD OWNER\": \"OMANIKU LISAMINE\"\n, \"ADD ONWNER AND METERS\": \"LISA OMANIK JA ARVESTID\"\n, \"Add role\": \"Lisa roll\"\n, \"Add room\": \"Lisa ruum\"\n, \"Add rule\": \"Lisa reegel\"\n, \"Add security area\": \"Lisa valveala\"\n, \"Add user\": \"Lisa kasutaja\"\n, \"Add Z-Wave device\": \"Lisa Z-Wave seade\"\n, \"Add your address and phone number in email for additional questions. Describe the problem - what did you do and what happened?\": \"E-kirjas lisa aadress, korter ja lisaküsimusteks telefoninumber. Kirjelda probleemi - mida tegid ja mis juhtus?\"\n, \"Add to ventilation device(s)\": \"Lisa ventilatsiooni seadme(te)sse\"\n, \"Added!\": \"Lisatud!\"\n, \"added!\": \"lisatud!\"\n, \"Adding device\": \"Seadme lisamine\"\n, \"Adding device not allowed - gateway not assigned!\": \"Seadme lisamine keelatud - konverter määramata!\"\n, \"address\": \"aadress\"\n, \"Address\": \"Aadress\"\n, \"Address in configuration\": \"Aadress andmebaasis\"\n, \"Address in controller\": \"Aadress kontrolleris\"\n, \"Address (written on the device)\": \"Address (kirjutatud seadme peal)\"\n, \"Address is written on the Line Extender\": \"Address on kirjutatud liinilaiendi peale\"\n, \"Address set command sent\": \"Aadressi sättimise käsk saadetud\"\n, \"administrators\": \"administraatorid\"\n, \"Air flow\": \"Õhuvool\"\n, \"Air flow setpoint\": \"Õhuvoolu säte\"\n, \"Air handling unit\": \"Ventilatsiooniseade\"\n, \"⚙ Alarms notifications\": \"⚙ Alarmide teavitused\"\n, \"Alarm\": \"Häire\"\n, \"Alarm delay, in minutes\": \"Alarmi viivitus, minutites\"\n, \"Alarms\": \"Alarmid\"\n, \"all\": \"kõik\"\n, \"All fields must be filled\": \"Kõik väljad peavad olema täidetud\"\n, \"all roles\": \"kõik rollid\"\n, \"all sites all roles\": \"kõikide paikade kõik rollid\"\n, \"Already limited with ’Maximum cooling need’ setting\": \"Juba piiratud ’Maksimaalne jahutusvajadus’ seadega\"\n, \"Already limited with ’Maximum heating need’ setting\": \"Juba piiratud ’Maksimaalne küttevajadus’ seadega\"\n, \"Already limited with ’Maximum target’ setting\": \"Juba piiratud ’Maksimaalne siht’ seadega\"\n, \"already uses address\": \"juba kasutab aadressi\"\n, \"already uses port\": \"juba kasutab porti\"\n, \"anemometer\": \"anemomeeter\"\n, \"apartment\": \"korter\"\n, \"Apartment\": \"Korter\"\n, \"Apartment building\": \"Kortermaja\"\n, \"Apartment House\": \"Kortermaja\"\n, \"Apartment and Commercial House\": \"Korter- ja ärimaja\"\n, \"API key\": \"API võti\"\n, \"An owner role and user and same name meters room will be created. Please confirm adding data\": \"Luuakse arvesti omanikele andmete vaatamiseks roll ja kasutaja ning arvestitele omaniku nimeline ruum. Kinnita andmete lisamine\"\n, \"and\": \"ja\"\n, \"and devices \": \"ja seadmed \"\n, \"Answer\": \"Vasta\"\n, \"Area\": \"Pindala\"\n, \"armed\": \"valves\"\n, \"arms home\": \"valvestab kodu\"\n, \"attachment\": \"manus\"\n, \"ATTACHMENT\": \"MANUS\"\n, \"AUTO\": \"AUTO\"\n, \"AUTO CO2\": \"AUTO CO2\"\n, \"average\": \"keskmine\"\n, \"Average\": \"Keskmine\"\n, \"AWAY\": \"EEMAL\"\n, \"Backlight\": \"Taustavalgus\"\n, \"Bathroom\": \"Vannituba\"\n, \"Battery\": \"Patarei\"\n, \"Battery empty\": \"Patarei tühi\"\n, \"Battery warning\": \"Patarei hoiatus\"\n, \"Baud rate\": \"Kiirus\"\n, \"Bedroom\": \"Magamistuba\"\n, \"Bedroom 1\": \"Magamistuba 1\"\n, \"Bedroom 2\": \"Magamistuba 2\"\n, \"Bedroom 3\": \"Magamistuba 3\"\n, \"Blind\": \"Kardin\"\n, \"Block\": \"Blokeeri\"\n, \"Block output\": \"Blokeeri väljund\"\n, \"blocked\": \"blokeeritud\"\n, \"Blocked\": \"Blokeeritud\"\n, \"Blocked, smoke detectors in alarm\": \"Blokeeritud, suitsuandurid häires\"\n, \" (buffered)\": \" (puhveradatud)\"\n, \"building\": \"hoone\"\n, \"Building\": \"Hoone\"\n, \"Building manager\": \"Majahaldur\"\n, \"building managers\": \"majahaldurid\"\n, \"but not below\": \"kuid mitte alla\"\n, \"Buzzer\": \"Summer\"\n, \"By activating this device rooms are taken to 'Vacation' climate mode (where it is set up)\": \"Selle seadme aktiveerimisel lähevad ruumid 'Puhkus' kliimarežiimi (kus see on seadistatud)\"\n, \"¢\": \"s\"\n, \"calculated\": \"arvutuslik\"\n, \"Calculate prices\": \"Arvuta hinnad\"\n, \"Calculated setpoint\": \"Arvutuslik soovitud temperatuur\"\n, \"Call to\": \"Helista\"\n, \"Cancel\": \"Loobu\"\n, \"Can not save - current reading is missing!\": \"Ei salvestata - puudub hetkenäit!\"\n, \"Card\": \"Kaart\"\n, \"Category\": \"Kategooria\"\n, \"Certificate\": \"Sertifikaat\"\n, \"Change location\": \"Muuda asukohta\"\n, \"Channel (same for created and incoming networks)\": \"Kanal (sama loodava ja siseneva võrgu jaoks)\"\n, \"Check for updates\": \"Kontrolli uuendusi\"\n, \"City\": \"Linn\"\n, \"cleaners\": \"koristajad\"\n, \"CLEAR\": \"PUHASTA\"\n, \"Click here to add\": \"Lisamiseks kliki siia\"\n, \"Click on device name to edit\": \"Muutmiseks kliki seadme nime peale\"\n, \"Click on room name to set temperature\": \"Temperatuuri sättimiseks kliki ruumi peale\"\n, \"Climate\": \"Kliima\"\n, \"Climate control\": \"Kliima juhtimine\"\n, \"Climate mode\": \"Kliimarežiim\"\n, \"Climate mode has to have either heatTo or coolTo configured\": \"Kliimarežiimil peab olema vähemalt heatTo või coolTo seadistatud\"\n, \"Climate modes\": \"Kliimarežiimid\"\n, \"Climate mode's pre-set temperature setpoint change not allowed!\": \"Kliimarežiimi eelseadistatud soovitud temperatuuri muutmine pole lubatud!\"\n, \"Climate mode's pre-set temperature setpoint changed!\": \"Kliimarežiimi eelseadistatud soovitud temperatuur muudetud!\"\n, \"Close\": \"Sulge\"\n, \"Close fully\": \"Sule täielikult\"\n, \"closed\": \"suletud\"\n, \"Closed position\": \"Suletud oleku väärtus\"\n, \"CO2 setpoint\": \"Soovitud CO2 tase\"\n, \"coldWater\": \"külm vesi\"\n, \"Comfort mode\": \"Mugavusrežiim\"\n, \"Comfort mode setpoint\": \"Tavaoleku soovitud temperatuur\"\n, \"commercial\": \"äri\"\n, \"Commercial\": \"Äri\"\n, \"Commercial House\": \"Ärimaja\"\n, \"Common and client meters\": \"Üld- ja kliendiarvestid\"\n, \"Compose text\": \"Koosta tekst\"\n, \"Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually.\": \"Kinnita - see seade lisatakse kõikidesse ventilatsiooniseadmetesse selles paigas. Kui ta peab olema vaid ühes, eemalda see teistest käsitsi.\"\n, \"Connect\": \"Ühendu\"\n, \"Connecting to existing Wi-Fi network (STA)\": \"Connecting to existing Wi-Fi network (STA)\"\n, \"cold\": \"külm\"\n, \"Comfort_mode_abbr\": \"Mugavus\"\n, \"conf\": \"Seadistus\"\n, \"Configure appropriate channel(s) for sending the readings to accountancy\": \"Seadista raamatupidamisele sobiv(ad) näitude edastuskanal(id)\"\n, \"Configuration\": \"Seadistus\"\n, \"configuration\": \"seadistus\"\n, \"Configured driver offset\": \"Sätitud sageduse hälve\"\n, \"Confirm\": \"Kinnita\"\n, \"Confirm adding controller\": \"Kinnita kontrolleri lisamine\"\n, \"Confirm adding device\": \"Kinnita seadme lisamine\"\n, \"Confirm adding general meter\": \"Kinnita üldarvesti lisamine\"\n, \"Confirm adding Modbus line extender\": \"Kinnita liinilaiendi lisamine\"\n, \"Confirm adding M-bus gateway\": \"Kinnita M-Bus konverteri lisamine\"\n, \"Confirm deleting\": \"Kinnita kustutamine\"\n, \"Confirm setting address\": \"Kinnita aadressi sättimine\"\n, \"Confirm setting primary address\": \"Kinnita primaar aadressi sättimine\"\n, \"connectivity\": \"ühenduvus\"\n, \"Consumption\": \"Tarbimine\"\n, \"controller\": \"kontroller\"\n, \"Controller\": \"Kontroller\"\n, \"Controllers\": \"Kontrollerid\"\n, \"Controller ID\": \"Kontrolleri ID\"\n, \"Coolers\": \"Jahutusseadmed\"\n, \"cooling\": \"jahutus\"\n, \"Cooling\": \"Jahutus\"\n, \"cooling need\": \"jahutusvajadus\"\n, \"Cooling need\": \"Jahutusvajadus\"\n, \"Cooling only\": \"Ainult jahutus\"\n, \"Cooling_state\": \"Jahutab\"\n, \"Corridor\": \"Koridor\"\n, \"Counter\": \"Loendur\"\n, \"Counter sync interval\": \"Loenduri sünkimise intervall\"\n, \"counts\": \"loendab\"\n, \"cover open\": \"kaas avatud\"\n, \"Create new\": \"Loo uus\"\n, \"Create task error code\": \"Töö loomise veakood\"\n, \"created\": \"loodud\"\n, \"credentials\": \"Elektroonilised võtmed\"\n, \"Current consumption\": \"Hetketarbimine\"\n, \"current month\": \"jooksval kuul\"\n, \"Current price\": \"Hetkehind\"\n, \"Current production\": \"Hetketootmine\"\n, \"current reading\": \"hetkenäit\"\n, \"Current reading\": \"Hetkenäit\"\n, \"Current state\": \"Hetkeolek\"\n, \"Data cleared\": \"Andmed puhastatud\"\n, \"Dawn\": \"Koit\"\n, \"day\": \"päev\"\n, \"day1\": \"päev1\"\n, \"day2\": \"päev2\"\n, \"day3\": \"päev3\"\n, \"day4\": \"päev4\"\n, \"Day\": \"Päev\"\n, \"DAY\": \"PÄEV\"\n, \"Day and night tariffs\": \"Öö- ja päevatariif\"\n, \"DAY consumption\": \"PÄEVANE tarbimine\"\n, \"DAY input\": \"PÄEV sisend\"\n, \"DAY reading\": \"PÄEVAnäit\"\n, \"DAY reading correction\": \"PÄEVAnäidu korrigeerimine\"\n, \"deactivated\": \"deaktiveeritud\"\n, \"Dead zone\": \"Surnud tsoon\"\n, \"Decline\": \"Keeldu\"\n, \"Delay before creating task\": \"Viivitus enne töö loomist\"\n, \"delay\": \"viivitus\"\n, \"Delete\": \"Kustuta\"\n, \"Delete device\": \"Kustuta seade\"\n, \"Delete role\": \"Kustuta roll\"\n, \"Deleting the device will end up with deleting all related gateways and all devices configured to these gateways need to be manually reconfigured. Delete anyway?\": \"Seadme kustutamisel KUSTUTATAKSE KONVERTERID ja nendega seotud seadmed tuleb ükshaaval käsitsi üle seadistada. Kustutan ikkagi?\"\n, \"Deleting the device will stop all related devices and they need to be manually reconfigured. Delete anyway?\": \"Seadme kustutamisel seiskuvad kõik seotud seadmed ning need tuleb ükshaaval käsitsi üle seadistada. Kustutan ikkagi?\"\n, \"Desired level\": \"Soovitud tase\"\n, \"Device\": \"Seade\"\n, \"Device exists with different type, ignoring new type\": \"Seade on juba loodud teise tüübiga, ignoreerin uut tüüpi\"\n, \"Device ID\": \"Seadme ID\"\n, \"Device info\": \"Seadme info\"\n, \"Device code\": \"Seadme kood\"\n, \"Device type\": \"Seadme tüüp\"\n, \"Device not added! Assign a Z-Wave gateway to the site.\": \"Seadet ei lisatud! Määra Z-Wave konverter lehe ülaosas.\"\n, \"device doesn't exist, but new device type is not set. Alldevice ID:\": \"seadet pole loodud, uue seadme tüüp on määramata. Alldevice ID:\"\n, \"device not found\": \"seadet ei leitud\"\n, \"Devices\": \"Seadmed\"\n, \"devices\": \"seadmed\"\n, \"Display method\": \"Kuvamisviis\"\n, \"Display orientation\": \"Ekraani orientatsioon\"\n, \"Domain ID\": \"Domeeni ID\"\n, \"DOMESTIC HOT WATER\": \"TARBEVESI\"\n, \"Do not write changes to log\": \"Ära logi\"\n, \"Don’t limit when price is lower than X¢\": \"Ära piira kui hind on madalam kui Xs\"\n, \"Dressing room\": \"Riietusruum\"\n, \"Duplex\": \"Paarismaja ühise süsteemiga\"\n, \"duration\": \"kestus\"\n, \"duration\": \"kestus\"\n, \"Duration\": \"Kestus\"\n, \"Duration activation\": \"Kestusega aktiveerimine\"\n, \"Dusk\": \"Hämarik\"\n, \"eco\": \"sääst\"\n, \"eco🤝\": \"sääst🤝\"\n, \"eco🕛\": \"sääst🕛\"\n, \"Economy mode\": \"Säästurežiim\"\n, \"Economy mode setpoint\": \"Säästurežiimi soovitud temperatuur\"\n, \"Economy mode start and stop times have to be both entered!\": \"Nii säästurežiimi alguse kui lõpu aeg peab olema sisestatud!\"\n, \"Economy_mode_abbr\": \"Sääst\"\n, \"Edit device\": \"Seadme muutmine\"\n, \"Edit\": \"Muuda\"\n, \"Edit role\": \"Rolli muutmine\"\n, \"Edit rule\": \"Reegli muutmine\"\n, \"Edit site\": \"Asukoha muutmine\"\n, \"Edit user\": \"Kasutaja muutmine\"\n, \"Efficiency\": \"Efektiivsus\"\n, \"E-mail\": \"E-post\"\n, \"end\": \"ots\"\n, \"electricity\": \"elekter\"\n, \"Electricity\": \"Elekter\"\n, \"electricity report period\": \"elektri raport periood\"\n, \"email\": \"E-post\"\n, \"enabled\": \"Lubatud\"\n, \"Enabled\": \"Lubatud\"\n, \"End\": \"Lõpp\"\n, \"End energy saving\": \"Lõpeta energiasääst\"\n, \"ended at\": \"lõppes\"\n, \"Energy\": \"Energia\"\n, \"Energy saving\": \"Energiasääst\"\n, \"EnLife 2Ci RF controller address\": \"EnLife 2Ci RF kontrolleri aaddress\"\n, \"Enter\": \"Sisesta\"\n, \"Enter actual reading\": \"Sisesta tegelik näit\"\n, \"Enter actual reading input\": \"Sisesta tegelik näit sisend\"\n, \"Enter controller ID and then press Add button\": \"Sisesta kontroller ID ja tüüp ning vajuta Lisa nuppu\"\n, \"Enter installation name and then press Add button\": \"Sisesta paigaldise nimi ja tüüp ning vajuta Lisa nuppu\"\n, \"Enter mandatory items and then press Add button\": \"Sisesta kohustuslikud väljad ja seejärel vajuta Lisa nuppu\"\n, \"Enter owner name!\": \"Sisesta omaniku nimi!\"\n, \"Enter same URL and Key on controller setup wizard page\": \"Sisesta sama URL ja Key kontrolleri viisardi lehel\"\n, \"Entrance\": \"Välisuks\"\n, \"entryDelay\": \"sisenemisviide\"\n, \"ERROR\": \"VIGA\"\n, \"Evening times\": \"Õhtused ajad\"\n, \"Evening trigger\": \"Õhtune käivitaja\"\n, \"Example\": \"Näide\"\n, \"Exhaust air\": \"Väljaviskeõhk\"\n, \"exitDelay\": \"väljumisviide\"\n, \"expensive hours\": \"kallid tunnid\"\n, \"Extract air\": \"Väljatõmbeõhk\"\n, \"FAILURE\": \"RIKE\"\n, \"Fan level\": \"Ventilaatori tase\"\n, \"Fault\": \"Viga\"\n, \"Feedback\": \"Tagasiside\"\n, \"Filters impurity\": \"Filtrite määrduvus\"\n, \"financial info receivers\": \"finantsinfo saajad\"\n, \"Find devices in the room and add to the list\": \"Leia ruumist seadmed ja lisa loetellu\"\n, \"find\": \"otsi\"\n, \"Fire alarm\": \"Tulehäire\"\n, \"Fire alarm ended\": \"Tulehäire lõppenud\"\n, \"FIREPLACE\": \"KAMIN\"\n, \"Firmware file path\": \"Püsivara faili asukoht\"\n, \"Firmware progress\": \"Püsivara uuendamise edenemine\"\n, \"Firmware status\": \"Püsivara staatus\"\n, \"Firmware version\": \"Püsivara versioon\"\n, \"follow\": \"järgimine\"\n, \"Follow\": \"Järgimine\"\n, \"Follows Nord Pool price\": \"Järgib Nord pool hinda\"\n, \"For adding fill also\": \"Välisuks\"\n, \"Force activate\": \"Sundaktiveeri\"\n, \"Force activate on low price:\": \"Sundaktiveeri madala hinnaga:\"\n, \"Force activate climate control on low price:\": \"Sundaktiveeri kliimaseadmed madala hinnaga\"\n , \"up to X% above today’s MIN price\": \"kuni X% üle tänase madalaima tunnihinna\"\n , \"below X¢ price\": \"alla Xs hinna\"\n, \"force to X% on low price\": \"sunni X% peale madala hinnaga\"\n, \"forced\": \"sunnitud\"\n, \"Forced activated\": \"Sundaktiveeritud\"\n, \"Forced activated below\": \"Sundaktiveeritud alla\"\n, \"Forced activated cooling on Nord Pool low price\": \"Sunnitud jahutamine Nord pool madala hinnaga\"\n, \"Forced activated heating on Nord Pool low price\": \"Sunnitud kütmine Nord pool madala hinnaga\"\n, \"Forced activated on Nord Pool low price\": \"Sundaktiveeritud Nord pool madala hinnaga\"\n, \"Format\": \"Formaat\"\n, \"fl\": \"p\"\n, \"Floor\": \"Korrus\"\n, \"Forgot your password?\": \"Unustasid salasõna?\"\n, \"Found meters\": \"Leitud arvestid\"\n, \"Freeze protection\": \"Külmakaitse\"\n, \"Fri\": \"Reede\"\n, \"Friday\": \"Reede\"\n, \"Full name\": \"Täisnimi\"\n, \"Garage\": \"Garaaž\"\n, \"Garage door\": \"Garaažiuks\"\n, \"gas\": \"gaas\"\n, \"gas detector\": \"gaasiandur\"\n, \"gateway\": \"konverter\"\n, \"Gateway\": \"Konverter\"\n, \"Gateway ID\": \"Konverteri ID\"\n, \"Get device list error code\": \"Seadmete loetelu küsimise veakood\"\n, \"Graph\": \"Graafik\"\n, \"Green LED\": \"Roheline LED\"\n, \"Group\": \"Grupp\"\n, \"guest\": \"külaline\"\n, \"guests\": \"külalised\"\n, \"Guests\": \"Külalised\"\n, \"h\": \"t\"\n, \"habitant\": \"elanik\"\n, \"habitants\": \"elanikud\"\n, \"Habitant\": \"Elanik\"\n, \"Habitants\": \"Elanikud\"\n, \"Hallway\": \"Esik\"\n, \"Hangup\": \"Lõpeta\"\n, \"Hardware version\": \"Riistvara versioon\"\n, \"hash\": \"Räsikood masinliidestuseks\"\n, \"Heat exchanger\": \"Soojusvaheti\"\n, \"Heater room\": \"Katlaruum\"\n, \"Heaters\": \"Kütteseadmed\"\n, \"heater\": \"küte\"\n, \"HEATING\": \"KÜTE\"\n, \"Heating\": \"Küte\"\n, \"heating\": \"küte\"\n, \"heating need\": \"küttevajadus\"\n, \"Heating need\": \"Küttevajadus\"\n, \"Heating only\": \"Ainult küte\"\n, \"Heating substation\": \"Soojussõlm\"\n, \"Heating valve open\": \"Kütteventiil avatud\"\n, \"help\": \"abi\"\n, \"HIGH\": \"KÕRGE\"\n, \"High level limit\": \"Ülemine piirväärtus\"\n, \"Home\": \"Kodu\"\n, \"home\": \"kodu\"\n, \"home manager\": \"koduhaldur\"\n, \"Home manager\": \"Koduhaldur\"\n, \"home managers\": \"koduhaldurid\"\n, \"Home managers\": \"Koduhaldurid\"\n, \"Home security\": \"Koduvalve\"\n, \"hot\": \"soe\"\n, \"hotWater\": \"soe vesi\"\n, \"hour\": \"tund\"\n, \"Hour\": \"Tund\"\n, \"house\": \"eramu\"\n, \"House\": \"Eramu\"\n, \"Illumination\": \"Valgustugevus\"\n, \"Incorrect\": \"Ebakorrektne\"\n, \"I arrived\": \"Saabusin\"\n, \"I leave\": \"Lahkun\"\n, \"Ignore\": \"Ignoreeri\"\n, \"info\": \"info\"\n, \"input\": \"sisend\"\n, \"Input\": \"Sisend\"\n, \"Inputs\": \"Sisendid\"\n, \"Instantaneous power\": \"Hetkeline võimsus\"\n, \"Intercoms\": \"Uksetelefonid\"\n, \"inverted\": \"inverteeritud\"\n, \"in entry delay\": \"sisenemisviites\"\n, \"in exit delay\": \"väljumisviites\"\n, \"is_cooling\": \"Jahutab\"\n, \"is_heating\": \"Kütab\"\n, \"is updated. It may take time to show updated reading.\": \"on korrigeeritud. Uue näidu kuvamine võib võtta aega.\"\n, \"Item\": \"Asi\"\n, \"Key\": \"Võti\"\n, \"Keypad dial number\": \"Klaviatuurilt valitav number\"\n, \"Kitchen\": \"Köök\"\n, \"Kitchen hood\": \"Kubu\"\n, \"lang\": \"Keel\"\n, \"Language\": \"Keel\"\n, \"Large bedroom\": \"Suur magamistuba\"\n, \"Large room\": \"Suur tuba\"\n, \"Last alarm code\": \"Viimase alarmi kood\"\n, \"Last hour airflow\": \"Viimase tunni õhuvool\"\n, \"Last IoT task\": \"Viimane IoT töö\"\n, \"Last minute airflow\": \"Viimase minuti õhuvool\"\n, \"last month\": \"eelmisel kuul\"\n, \"Last sent\": \"Viimati saadetud\"\n, \"lasted\": \"kestis\"\n, \"Learning network\": \"Võrgu õppimine\"\n, \"Leaving home and Energy saving actions:\": \"Kodust lahkumise ja Energiasäästu tegevused:\"\n, \"LEDs\": \"LEDid\"\n, \"level\": \"tase\"\n, \"Level\": \"Tase\"\n, \"Light\": \"Valgus\"\n, \"limit to X% on high price\": \"piira X% peale kõrgel hinnal\"\n, \"Limited above\": \"Piiratud kõrgemal kui\"\n , \"% of max price\": \"% kõrgeimast hinnast\"\n, \"Limited\": \"Piiratud\"\n, \"Limited on\": \"Piiratud\"\n , \"most expensive hours, today above\": \"kallimal tunnil, täna üle\"\n, \"Limit on X most expensive hours\": \"Piira X kõige kallimal tunnil\"\n, \"Limit above X% of MAX price\": \"Piira üle X% maks. hinnast\"\n, \"Limiting method\": \"Piiramismeetod\"\n, \"Limit method not defined!\": \"Piiramismeetod on määramata!\"\n, \"Limited by Nord Pool high price\": \"Piiratud Nord Pool kõrge hinnaga\"\n, \"Limited in a row\": \"Piiratud järjest\"\n, \"linkedAreas\": \"Seotud valvealad\"\n, \"linkedDevices\": \"Seotud seadmed\"\n, \"Living room\": \"Elutuba\"\n, \"Livingroom\": \"Elutuba\"\n, \"Lock\": \"Lukk\"\n, \"Lock_command\": \"Lukusta\"\n, \"locked\": \"lukus\"\n, \"Login fail\" : \"Logimine ebaõnnestus\"\n, \"Log in\": \"Sisselogimine\"\n, \"Log in with existing password\": \"Logi sisse olemasoleva salasõnaga\"\n, \"Log out\": \"Logi välja\"\n, \"Logs\": \"Logid\"\n, \"LOW\": \"MADAL\"\n, \"Low level limit\": \"Alumine piirväärtus\"\n, \"Main door\": \"Peauks\"\n, \"Mains power\": \"Võrgutoide\"\n, \"maintenance partners\": \"hoolduspartnerid\"\n, \"Maintenance personnel\": \"Hoolduspersonal\"\n, \"Management system\": \"Haldussüsteem\"\n, \"Management system ID\": \"Haldussüsteemi ID\"\n, \"Manager\": \"Haldur\"\n, \"managers\": \"haldurid\"\n, \"Managers\": \"Haldurid\"\n, \"Manual switch to eco mode for all rooms, deactivates scheduled switching\": \"Kõikide tubade kütte käsitsi lülitus säästurežiimile, deaktiveerib kellaajaliselt määratud aktiveerumised\"\n, \"manually\": \"käsitsi\"\n, \"Master bedroom\": \"Suur magamistuba\"\n, \"Max meters allowed\": \"Konverteri lubatud arvestite arv\"\n, \"maximum\": \"maksimaalne\"\n, \"Maximum\": \"Maksimaalne\"\n, \"Maximum limited hours in a row\": \"Maksimaalselt järjestikku piiratud tunde\"\n, \"Maximum temperature setpoint\": \"Maksimaalne soovitud temperatuur\"\n, \"Max.\": \"Maks.\"\n, \"max.\": \"maks.\"\n, \"MAX speed\": \"MAX kiirus\"\n, \"Measured driver offset\": \"Mõõdetud sageduse hälve\"\n, \"Measured floor temperature\": \"Mõõdetud põrandatemperatuur\"\n, \"Measured temperature\": \"Mõõdetud temperatuur\"\n, \"MEDIUM\": \"KESKMINE\"\n, \"Meter controller ID\":\"Mõõdiku kontrolleri ID\"\n, \"meter type\": \"arvesti tüüp\"\n, \"Meter type\": \"Arvesti tüüp\"\n, \"Meter was not created - fill empty fields and then press Add button\": \"Arvestit ei lisatud - sisesta puuduvad väljad ja seejärel vajuta Lisa nuppu\"\n, \"meterTariff\": \"Meter with Tariff\"\n, \"meterNoTariff\": \"Meter without Tariff\"\n, \"meters\": \"arvestid\"\n, \"Meters\": \"Arvestid\"\n, \"method\": \"meetod\"\n, \"Method\": \"Meetod\"\n, \"minimum\": \"minimaalne\"\n, \"Minimum\": \"Minimaalne\"\n, \"Minimum temperature setpoint\": \"Minimaalne soovitud temperatuur\"\n, \"Min.\": \"Min.\"\n, \"min.\": \"min.\"\n, \"MIN speed\": \"MIN kiirus\"\n, \"minutesAbbr\": \"min\"\n, \"Missing or invalid role\": \"Puuduv või kehtetu roll\"\n, \"Modbus address\": \"Modbus aadress\"\n, \"Modbus line\": \"Modbus liin\"\n, \"Mode\": \"Režiim\"\n, \"modes\": \"režiimid\"\n, \"Mon\": \"Esm\"\n, \"Monday\": \"Esmaspäev\"\n, \"month\": \"kuu\"\n, \"Month\": \"Kuu\"\n, \"month before last\": \"üleeelmisel kuul\"\n, \"Morning times\": \"Hommikused ajad\"\n, \"Morning trigger\": \"Hommikune käivitaja\"\n, \"motion detector\": \"liikumisandur\"\n, \"Motion detector\": \"Liikumisandur\"\n, \"msg\": \"teateid\"\n, \"M-Bus serial (secondary address)\": \"M-Bus seerianumber (`secondary` aadress)\"\n, \"name\": \"nimi\"\n, \"Name\": \"Nimi\"\n, \"Name suffix\": \"Nimi laiend\"\n, \"Name (e.g. Apartment 1)\": \"Nimi (nt. Korter 1)\"\n, \"need\": \"vajadus\"\n, \"Network created by device (AP)\": \" Seadme poolt loodav võrk (AP)\"\n, \"Network name (SSID)\": \"Võrgu nimi (SSID)\"\n, \"New\": \"Uus\"\n, \"New apartment/office\": \"Uus korter/äripind\"\n, \"New password\": \"Uus salasõna\"\n, \"Next task\": \"Järgmine töö\"\n, \"night\": \"öö\"\n, \"night1\": \"öö1\"\n, \"night2\": \"öö2\"\n, \"night3\": \"öö3\"\n, \"night4\": \"öö4\"\n, \"Night\": \"Öö\"\n, \"NIGHT\": \"ÖÖ\"\n, \"NIGHT consumption\": \"ÖINE tarbimine\"\n, \"NIGHT input\": \"ÖÖ sisend\"\n, \"NIGHT reading\": \"ÖÖnäit\"\n, \"NIGHT reading correction\": \"ÖÖnäidu korrigeerimine\"\n, \"No\": \"Ei\"\n, \"No alarms\": \"Alarme pole\"\n, \"Node ID\": \"Vastutava kontrolleri ID\"\n, \"nordPool\": \"Nord Pool\"\n, \"Nord pool price is still high, but ’Maximum limited hours in a row’ reached\": \"Nord pool hind on ikka kõrge, kuid ’Maksimaalselt järjestikku piiratud tunde’ saavutatud\"\n, \"normal\": \"normaalolek\"\n, \"Normal mode\": \"Tavaolek\"\n, \"Normal operation will be restored after\": \"Normaaloleku taastumine pärast\"\n, \"now\": \"praegu\"\n, \"Now\": \"Praegu\"\n, \"Notification cooldown period, in minutes\": \"Teavituse taaskäivitusperiood, minutites\"\n, \"NOT ACTIVE\": \"MITTEAKTIIVNE\"\n, \"not applied\": \"ei rakendata\"\n, \"Not applied, some parameters missing\": \"Ei rakendata, mõned parameetrid puuduvad\"\n, \"NOT SENT\": \"EI SAADETA\"\n, \"Not sent - management system ID is missing!\": \"Ei saadeta - puudub kauglugemissüsteemi ID!\"\n, \"not valid during forced energy saving\": \"ei kehti sunnitud energiasäästu ajal\"\n, \"Number\": \"Number\"\n, \"Number is written on the controller\": \"Number on kirjutatud kontrolleri peale\"\n, \"off\": \"väljas\"\n, \"OFF\": \"VÄLJAS\"\n, \"office users\": \"kontori kasutajad\"\n, \"on\": \"sees\"\n, \"ON\": \"SEES\"\n, \"One time activation\": \"Ühekordne aktiveerimine\"\n, \"Online\": \"Võrgus\"\n, \"Online manual\": \"Veebijuhend\"\n, \"Only client meters\": \"Ainult kliendiarvestid\"\n, \"onwall tablet\": \"seina tahvelarvuti\"\n, \"onwall tablets\": \"seina tahvelarvutid\"\n, \"open\": \"avatud\"\n, \"Open\": \"Avatud\"\n, \"Open command\": \"Ava\"\n, \"Open fully\": \"Ava täielikult\"\n, \"Open position\": \"Avatud oleku väärtus\"\n, \"Operation mode\": \"Töörežiim\"\n, \"operator\": \"operaator\"\n, \"operator’s\": \"operaatori\"\n, \"or\": \"või\"\n, \"Other\": \"Muu\"\n, \"Out of boundaries\": \"Piiridest väljas\"\n, \"Outdoor air\": \"Õueõhk\"\n, \"Outdoor temperature\": \"Õuetemperatuur\"\n, \"output\": \"väljund\"\n, \"Output\": \"Väljund\"\n, \" owner \": \" omanik \"\n, \"owners\": \"omanikud\"\n, \"Owners\": \"Omanikud\"\n, \"other\": \"muu\"\n, \"Pantry\": \"Sahver\"\n, \"Pairing\": \"Paaritamine\"\n, \"Parent device\": \"Vanemseade\"\n, \"Parent device ID\": \"Vanemseadme ID\"\n, \"Parent ID\": \"Vanemseade\"\n, \"Parity\": \"Paarsus\"\n, \"parking lot users\": \"parkla kasutajad\"\n, \"Password\": \"Salasõna\"\n, \"pcs\": \"tk\"\n, \"Period\": \"Periood\"\n, \"periodicActivation\": \"Perioodiline aktiveerimine\"\n, \"periodicDeactivation\": \"Perioodiline deaktiveerimine\"\n, \"Phone\": \"Telefon\"\n, \"phone\": \"Telefon\"\n, \"Phone number\": \"Telefoni number\"\n, \"Please refresh\": \"Palun värskenda\"\n, \"Position\": \"Asend\"\n, \"powerOn\": \"Toide\"\n, \"Port\": \"Port\"\n, \"Port mode\": \"Pordi režiim\"\n, \"Pressure\": \"Rõhk\"\n, \"Preview\": \"Eelvaade\"\n, \"prices\": \"hinnad\"\n, \"Primary address\": \"Primaar aadress\"\n, \"Production\": \"Tootmine\"\n, \"project\": \"projekt\"\n, \"Project type\": \"Projekti tüüp\"\n, \"Property\": \"Objekt\"\n, \"PROPERTY MANAGEMENT SYSTEMS\": \"KINNISVARA HALDUSSÜSTEEMID\"\n, \"Property list is downloaded automatically after filling out Domain ID and a valid API key\": \"Objektide nimekiri laetakse alla automaatselt peale Domeeni ID ja kehtiva API võtme sisestamist\"\n, \"publicGarage\": \"jagatud garaaž\"\n, \"Pump summer stop temperature ℃\": \"Pumba suvise seiskamise temperatuur ℃\"\n, \"Query filter\": \"Päringufilter\"\n, \"Reading\": \"Näit\"\n, \"Reading correction\": \"Näidu korrigeerimine\"\n, \"Reading input\": \"Näit sisend\"\n, \"readings\": \"näidud\"\n, \"Readings\": \"Näidud\"\n, \"Readings are sent as an email attachment to all members of readings receiver role\": \"Näidud saadetakse e-postiga näitude saajate rolli kõikidele liikmetele\"\n, \"Readings correction\": \"Näitude korrigeerimine\"\n, \"Recall last message\": \"Kutsu viimane sõnum tagasi\"\n, \"Recalled\": \"Tagasi kutsutud\"\n, \"Receiver email\": \"Saaja e-post\"\n, \"Recipient\": \"Saaja\"\n, \"Recover link sent\": \"Taastamise link saadetud\"\n, \"Reduce cooling\": \"Vähenda jahutust\"\n, \"Reduce heating\": \"Vähenda kütet\"\n, \"Red LED\": \"Punane LED\"\n, \"Refresh data\": \"Värskenda andmed\"\n, \"Remote metering ID\": \"Kauglugemissüsteemi ID\"\n, \"Relations\": \"Seosed\"\n, \"Relative humidity\": \"Suhteline õhuniiskus\"\n, \"Relative humidity setpoint\": \"Soovitud suhteline õhuniiskus\"\n, \"Reload to activate it\": \"Aktiveerimiseks laadige uuesti\"\n, \"rental\": \"rent\"\n, \"Remain unlocked\": \"Hoia avatuna\"\n, \"Remain turned off\": \"Hoia väljalülitatuna\"\n, \"Remain turned on\": \"Hoia sisselülitatuna\"\n, \"Remarks\": \"Märkused\"\n, \"Remember me\": \"Mäleta mind\"\n, \"Remote metering\": \"Kauglugemine\"\n, \"Remove CO detectors power\": \"Eemalda vingugaasi andurite toide\"\n, \"Remove fire detectors power\": \"Eemalda tulekahju andurite toide\"\n, \"Remove from role\": \"Eemalda rollist\"\n, \"Remove gas detectors power\": \"Eemalda gaasi andurite toide\"\n, \"Remove water detectors power\": \"Eemalda veelekke andurite toide\"\n, \"Remove user from last role?\": \"Eemalda kasutaja viimasest rollist?\"\n, \"Repeater\": \"Levipikendaja\"\n, \"repeater\": \"levipikendaja\"\n, \"Request all ventilation sensors\": \"Tõmba kõik ventilatsiooniandurid\"\n, \"Return temperature\": \"Tagasivoolu temperatuur\"\n, \"Reset alarm count\": \"Lähtesta alarmiloendur\"\n, \"security and rescue 112\": \"turva ja pääste 112\"\n, \"regular\": \"Tavalised\"\n, \"rfid\": \"Kontaktivaba võti\"\n, \"roleIds\": \"Rollid\"\n, \"role\": \"roll\"\n, \"Role\": \"Roll\"\n, \"roles\": \"rollid\"\n, \"Roles\": \"Rollid\"\n, \"Room\": \"Ruum\"\n, \"Rooms\": \"Ruumid\"\n, \"Room data\": \"Ruumi andmed\"\n, \"Room setpoint is synced with these devices\": \"Ruumi soovitud temperatuuri sünkroniseeritakse nende seadmetega\"\n, \"Room 1\": \"Ruum 1\"\n, \"Room 2\": \"Ruum 2\"\n, \"Room 3\": \"Ruum 3\"\n, \"Room 4\": \"Ruum 4\"\n, \"Runs in\": \"Vastutav kontroller\"\n, \"Rules\": \"Reeglid\"\n, \"sauna\": \"saun\"\n, \"Sauna\": \"Saun\"\n, \"Save\": \"Salvesta\"\n, \"Saturday\": \"Laupäev\"\n, \"scheduled\": \"ajastatud\"\n, \"Scheduled activation\": \"Ajastatud aktiveerimine\"\n, \"secAway\": \"Eemal valves\"\n, \"secStay\": \"Kohal valves\"\n, \"Secondary address\": \"Sekundaar aadress\"\n, \"security.alarm\": \"{model} {_scope.formatAlarm(item)}\"\n, \"security.arm\": \"{model} Valvesse {value.armed}, {by}\"\n, \"security.disarm\": \"{model} Valvest maha, {by}\"\n, \"Security\": \"Turvalisus\"\n, \"Security and Rescue 112\": \"Turva ja Pääste 112\"\n, \"Security area\": \"Valveala\"\n, \"Security detectors power removal\": \"Turvaandurite toite katkestamine\"\n, \"Security log\": \"Valvelogi\"\n, \"Security key\": \"Turvavõti\"\n, \"Select a site\": \"Vali asukoht\"\n, \"Send\": \"Saada\"\n, \"SEND\": \"SAADA\"\n, \"Send current readings\": \"Saada hetkenäidud\"\n, \"Send last month readings\": \"Saada kuu lõpu näidud\"\n, \"Send messages\": \"Sõnumite saatmine\"\n, \"Send reading now\": \"Saada hetkenäit\"\n, \"Send recover link\": \"Saada taastamise link\"\n, \"Sensors\": \"Andurid\"\n, \"sensors\": \"andurid\"\n, \"Sent\": \"Saadetud\"\n, \"Serial number\": \"Seerianumber\"\n, \"service contractors\": \"teenusepakkujad\"\n, \"Set address\": \"Säti aadress\"\n, \"Set display orientation\": \"Säti ekraani orientatsioon\"\n, \"Set password\": \"Muuda salasõna\"\n, \"Set primary address\": \"Säti primaar aadress\"\n, \"Set counter value error code\": \"Loenduri näidu sättimise veakood\"\n, \"Setpoint\": \"Soov\"\n, \"settings\": \"seaded\"\n, \"Settings\": \"Seaded\"\n, \"sharedProperty\": \"jagatud ala\"\n, \"Shower room\": \"Duširuum\"\n, \"Mini circuit breakers can be switched on again\": \"Kaitseautomaate saab nüüd sisse lülitada\"\n, \"Shunt trip circuit breakers shut off electrical power to prevent injury to people and damage to equipment\": \"Vabastid lülitasid kaitseautomaatid välja, et vältida ohtu inimstele ja seadmetele\"\n, \"Signal level\": \"Signaali tugevus\"\n, \"Signal quality\": \"Signaali kvaliteet\"\n, \"Silence\": \"Vaigista\"\n, \"site\": \"paik\"\n, \"Sleep time\": \"Uinakuaeg\"\n, \"Small room\": \"Väike tuba\"\n, \"Smart home support\": \"Nutikodu kasutajatugi\"\n, \"Smoke alarm\": \"Suitsuhäire\"\n, \"Smoke alarm ended\": \"Suitsuhäire lõppenud\"\n, \"smoke detector\": \"suitsuandur\"\n, \"Smoke detector\": \"Suitsuandur\"\n, \"Software version\": \"Tarkvara versioon\"\n, \"Solar energy\": \"Päikeseenergia\"\n, \"Some fire alarm detectors still active\": \"Mõni tulekahjuandur on veel häires\"\n, \"Staircase\": \"Trepikoda\"\n, \"Staircase door\": \"Trepikojauks\"\n, \"Stairhall\": \"Trepihall\"\n, \"standalone\": \"Standalone installation\"\n, \"Start\": \"Algus\"\n, \"State\": \"Olek\"\n, \"Status\": \"Staatus\"\n, \"Stock\": \"Ladu\"\n, \"Stockroom\": \"Laoruum\"\n, \"STOP\": \"STOPP\"\n, \"Stop bits\": \"Stop bitid\"\n, \"storage room\": \"panipaik\"\n, \"Storage room\": \"Panipaik\"\n, \"Summer\": \"Suvi\"\n, \"Sun\": \"Püh\"\n, \"Sunday\": \"Pühapäev\"\n, \"Sunrise\": \"Päikesetõus\"\n, \"Sunrise end\": \"Päikesetõusu lõpp\"\n, \"Sunset\": \"Päikeseloojang\"\n, \"Sunset start\": \"Päikeseloojangu algus\"\n, \"Supply air\": \"Sissepuhkeõhk\"\n, \"Supply temperature\": \"Pealevoolu temperatuur\"\n, \"Syncronising, please wait\": \"Sünkroniseerin, palun oota\"\n, \"System technician\": \"Süsteemitehnik\"\n, \"tablet\": \"tahvelarvuti\"\n, \"Tamper\": \"Muukimine\"\n, \"Tamper alarm\": \"Muukimishäire\"\n, \"Tank temperature\": \"Mahuti temperatuur\"\n, \"target\": \"siht\"\n, \"Target\": \"Siht\"\n, \"Target feedback\": \"Sihi tagasiside\"\n, \"Target low limit\": \"Sihi alumine piirang\"\n, \"Tariff\": \"Tariif\"\n, \"Tariffs\": \"Tariifid\"\n, \"Task created\": \"Töö loodud\"\n, \"Task groups\": \"Tööde grupid\"\n, \"Task not created - too frequent\": \"Tööd ei loodud - liiga sagedane\"\n, \"Technical info\": \"Tehniline info\"\n, \"technical name\": \"tehniline nimi\"\n, \"technical room\": \"tehnoruum\"\n, \"Technical room\": \"Tehnoruum\"\n, \"technician\": \"tehnik\"\n, \"technicians\": \"tehnikud\"\n, \"technicians role\": \"tehnikute roll\"\n, \"Technicians role\": \"Tehnikute roll\"\n, \"Technicians role ID\": \"Tehnikute rolli ID\"\n, \"Technicians role ID not set!\": \"Tehnikute rolli ID määramata!\"\n, \"temperature\": \"temperatuur\"\n, \"Temperature\": \"Temperatuur\"\n, \"Temperature difference\": \"Temperatuurivahe\"\n, \"Temperature setpoint\": \"Soovitud temperatuur\"\n, \"temperature setpoint decreased and cooling turned off\": \"soovitud temperatuuri langetati ja jahutus lülitati välja\"\n, \"Terrace\": \"Terrass\"\n, \"Text\": \"Tekst\"\n, \"thermostat\": \"termostaat\"\n, \"Thermostat\": \"Termostaat\"\n, \"Thermostats\": \"Termostaadid\"\n, \"Thermostats display a low-battery symbol when the juice is running low. Change batteries also if the display screen is blank.\": \"Termostaadi ekraanil kuvatakse patarei märki kui need hakkavad tühjaks saama. Vaheta patareid ka juhul, kui ekraan on täitsa pime.\"\n, \"This is automatically generated e-mail. Please do not reply on that email.\": \"See on automaatselt genereeritud e-kiri. Palun sellele kirjale mitte vastata.\"\n, \"Thursday\": \"Neljapäev\"\n, \"time\": \"aeg\"\n, \"Time\": \"Aeg\"\n, \"time limited\": \"Ajalise piiranguga\"\n, \"Timed control\": \"Ajaline juhtimine\"\n, \"One time timed activation settings removed\": \"Ühekordsed ajalise aktiveerimise sätted eemaldatud\"\n, \"To add Controller click here\": \"Kontrolleri lisamiseks kliki siia\"\n, \"To add Gateway click here\": \"Konverteri lisamiseks kliki siia\"\n, \"To add Line Extender click here\": \"Liinilaiendi lisamiseks kliki siia\"\n, \"Today’s maximum price\": \"Tänane maksimaalne hind\"\n, \"Today’s minimum price\": \"Tänane mininmaalne hind\"\n, \"Toilet\": \"Tualett\"\n, \"Topic\": \"Teema\"\n, \"Townhouse\": \"Ridaelamu ühise süsteemiga\"\n, \"Tuesday\": \"Teisipäev\"\n, \"Turn off\": \"Lülita välja\"\n, \"Turn on\": \"Lülita sisse\"\n, \"Turned off\": \"Välja lülitatud\"\n, \"Turned on\": \"Sisse lülitatud\"\n, \"turns off ligths\": \"kustutab valgustuse\"\n, \"turns off output devices\": \"lülitab välja väljundseadmed\"\n, \"Type\": \"Tüüp\"\n, \"type\": \"tüüp\"\n, \"Update ready\": \"Uuendus saadaval\"\n, \"upside down\": \"pööratud\"\n, \"Unit_meter\": \"Ühik\"\n, \"unknown\": \"teadmata\"\n, \"Unknown key\": \"Tundmatu võti\"\n, \"Unlock\": \"Ava lukk\"\n, \"unlocked\": \"lukustamata\"\n, \"Unlocked\": \"Lukustamata\"\n, \"Updated\": \"Uuendatud\"\n, \"uptime\": \"elusolekuaeg\"\n, \"Uptime\": \"Elusolekuaeg\"\n, \"Usage\": \"Kasutus\"\n, \"userIds\": \"Kasutajad\"\n, \"user\": \"kasutaja\"\n, \"User\": \"Kasutaja\"\n, \"Username\": \"Kasutajanimi\"\n, \"User type\": \"Kasutaja tüüp\"\n, \"Users\": \"Kasutajad\"\n, \"Vacation\": \"Puhkus\"\n, \"Valid on weekend\": \"Kehtib ka nädalavahetusel\"\n, \"value\": \"väärtus\"\n, \"VENTILATION\": \"VENTILATSIOON\"\n, \"Ventilation need\": \"Ventileerimisvajadus\"\n, \"ventilation valve\": \"ventilatsiooni klapp\"\n, \"Ventilator\": \"Ventilaator\"\n, \"Version\": \"Versioon\"\n, \"VOICE CALL\": \"KÕNE\"\n, \"voltage\": \"pinge\"\n, \"Voltage\": \"Pinge\"\n, \"Wardrobe\": \"Garderoob\"\n, \"Washroom\": \"Pesuruum\"\n, \"water\": \"vesi\"\n, \"Water\": \"Vesi\"\n, \"Water level\": \"Veetase\"\n, \"Water temperature\": \"Veetemperatuur\"\n, \"weather\": \"ilm\"\n, \"Weather service\": \"Ilmateenus\"\n, \"Weather service city\": \"Ilmateenuse linn\"\n, \"Week\": \"Nädal\"\n, \"Wednesday\": \"Kolmapäev\"\n, \"Wind\": \"Tuul\"\n, \"Wind direction\": \"Tuulesuund\"\n, \"Wind speed\": \"Tuulekiirus\"\n, \"Window open\": \"Aken avatud\"\n, \"Window sensors\": \"Aknaandurid\"\n, \"Windows\": \"Aknad\"\n, \"Windows open\": \"Aknad avatud\"\n, \"Winter\": \"Talv\"\n, \"Yard\": \"Hoov\"\n, \"Year\": \"Aasta\"\n, \"Years\": \"Aastad\"\n, \"Yellow LED\": \"Kollane LED\"\n, \"Yes\": \"Jah\"\n, \"Z-Wave gateway\": \"Z-Wave konverter\"\n\n\n, \"🔋Battery\": \"🔋Patarei\"\n, \"🌞 SUNNY\": \"🌞 PÄIKE\"\n, \"⛅ CLOUDY\": \"⛅ PILVINE\"\n, \"☁ CLOUDS\": \"☁ PILVES\"\n, \"DARK\": \"HÄMAR\"\n, \"💧COLD WATER\": \"💧KÜLM VESI\"\n, \"⚡COOLING\": \"⚡JAHUTUS\"\n, \"⚡ELECTRICITY\": \"⚡️ELEKTER\"\n, \"🔥GAS\": \"🔥GAAS\"\n, \"🔥HEATING\": \"🔥KÜTE\"\n, \"⚡HEATING\": \"⚡KÜTE\"\n, \"🚿HOT WATER\": \"🚿SOE VESI\"\n, \"⚡️💧🚿🔥 METERS\": \"⚡️💧🚿🔥 ARVESTID\"\n, \"⚡️💧🚿🔥 COMMON METERS\": \"⚡️💧🚿🔥 ÜLDARVESTID\"\n, \"1. 🔧 CONTROLLERS\": \"1. 🔧 KONTROLLERID\"\n, \"2. ↔️  GATEWAYS: M-Bus\": \"2. ↔️  KONVERTERID: M-Bus\"\n, \"3. ↔️  GATEWAYS: Modbus\": \"3. ↔️ KONVERTERID: Modbus\"\n, \"4. ↔️  GATEWAYS: Pulse\": \"4. ↔️ KONVERTERID: Impulss\"\n, \"5. ↔️ GATEWAYS: Z-Wave️\": \"5. ↔️ KONVERTERID: Z-Wave️\"\n, \"📧 READINGS REPORT CHANNELS\": \"📧 NÄITUDE EDASTUSKANALID\"\n, \"- ADD: Meters, client\": \"- LISAMINE: Arvestid, kliendid\"\n, \"- ADD: Meters, common\": \"- LISAMINE: Arvestid, üld\"\n, \"- ADD: Device, Modbus\": \"- LISAMINE: Seade, Modbus\"\n, \"- ADD: Device, Z-Wave\": \"- LISAMINE: Seade, Z-Wave\"\n, \" - Cold water\": \" - Külm vesi\"\n, \" - Hot water\": \" - Soe vesi\"\n})\n"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1
        },
        "cache": {},
        "timings": {
          "blocked": 0,
          "dns": -1,
          "connect": -1,
          "ssl": -1,
          "send": 0,
          "wait": 0.0272083307208959,
          "receive": 0.008000002708286047
        },
        "_fetchType": "Memory Cache"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:00.159Z",
        "time": 96.76882925850805,
        "request": {
          "method": "PUT",
          "url": "http://192.168.1.125/hello",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "b",
              "value": "1ae"
            },
            {
              "name": "a",
              "value": "cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39"
            }
          ],
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Origin",
              "value": "http://192.168.1.125"
            },
            {
              "name": "Cookie",
              "value": "b=1ae; a=cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Content-Length",
              "value": "11"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=3, i"
            }
          ],
          "queryString": [],
          "headersSize": 481,
          "bodySize": 11,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"a\":\"1lp\"}",
            "params": []
          }
        },
        "response": {
          "status": 401,
          "statusText": "Unauthorized",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:00 GMT"
            },
            {
              "name": "Node-Name",
              "value": "Teigaritee16 (c584)"
            }
          ],
          "content": {
            "size": 279,
            "compression": -12,
            "mimeType": "application/json",
            "text": "{\"authorization\":\"S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA\",\"nodeName\":\"Teigaritee16 (c584)\",\"style\":\"body{background:fixed bottom right/contain no-repeat url(pub/agatark-bg.png) #040505}.login-logo{color:transparent;background:center/contain no-repeat url(pub/agatark-logo.png)}\"}"
          },
          "redirectURL": "",
          "headersSize": 182,
          "bodySize": 291,
          "_transferSize": 473
        },
        "cache": {},
        "timings": {
          "blocked": 0.8239622220571619,
          "dns": -1,
          "connect": -1,
          "ssl": -1,
          "send": 0,
          "wait": 95.93777054760722,
          "receive": 0.0070964888436719775
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "1",
        "_fetchType": "Network Load",
        "_priority": "medium"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:15.237Z",
        "time": 457.22809037033585,
        "request": {
          "method": "PUT",
          "url": "http://192.168.1.125/hello",
          "httpVersion": "HTTP/1.1",
          "cookies": [
            {
              "name": "b",
              "value": "1ae"
            },
            {
              "name": "a",
              "value": "cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39"
            }
          ],
          "headers": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Authorization",
              "value": "S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Origin",
              "value": "http://192.168.1.125"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Content-Length",
              "value": "126"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Cookie",
              "value": "b=1ae; a=cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39"
            },
            {
              "name": "Priority",
              "value": "u=3, i"
            }
          ],
          "queryString": [],
          "headersSize": 537,
          "bodySize": 126,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"a\":\"1lp\",\"email\":\"marko@radr.eu\",\"remember\":null,\"token\":\"7df5c7ff3ca5373e446f83a610c91b35c6660f0630ee8ee433ba21e9d350fb18\"}",
            "params": []
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:15 GMT"
            },
            {
              "name": "Node-Name",
              "value": "Teigaritee16 (c584)"
            }
          ],
          "content": {
            "size": 491478,
            "compression": -14,
            "mimeType": "application/json",
            "text": "{\"authorization\":\"S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA\",\"nodeName\":\"Teigaritee16 (c584)\",\"style\":\"body{background:fixed bottom right/contain no-repeat url(pub/agatark-bg.png) #040505}.login-logo{color:transparent;background:center/contain no-repeat url(pub/agatark-logo.png)}\",\"user\":{\"id\":441,\"created\":1667933446963,\"updated\":1711407746748,\"enabled\":true,\"name\":\"Marko Valing\",\"remarks\":\"\",\"email\":\"marko@radr.eu\",\"lang\":\"et\",\"number\":\"56238977\",\"acl\":{\"inherit\":[364,377],\"policy\":[{\"who\":[441],\"acl\":5}]},\"uuid\":\"pu705ozn\",\"status\":{\"online\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},\"version\":\"23.8.1-445\",\"sites\":[{\"id\":364,\"created\":1667892938805,\"updated\":1711892470031,\"category\":\"building\",\"ids\":{\"technicianRoleId\":375,\"projectId\":363,\"mainDistributionBoardId\":366,\"allSiteRolesId\":369,\"ecoId\":365,\"weatherId\":368,\"siteFinancialInfoRoleId\":370,\"siteGuestRoleId\":371,\"siteServiceContractorRoleId\":372,\"siteCleanerRoleId\":373,\"securityAndResqueRoleId\":374,\"siteHabitantRoleId\":376,\"siteManagerRoleId\":377,\"nordPoolDeviceId\":379,\"modbusGatewayId\":384,\"ventilationRoomId\":618,\"testId\":426},\"name\":\"Teigari tee 16\",\"type\":\"house\",\"lang\":\"et\",\"weather\":{\"service\":\"ilmateenistus\",\"city\":\"pirita\"},\"acl\":{\"inherit\":[3,363],\"policy\":[{\"who\":[4],\"acl\":7},{\"who\":[355],\"acl\":8201},{\"who\":[374],\"acl\":9},{\"who\":[355],\"acl\":7},{\"who\":[376],\"acl\":2169}]},\"enabled\":true,\"uuid\":\"c6olzcgq\",\"ui\":{\"i1\":[\"status.offline.devices#i.offl\"],\"i3\":[\"setup# #Leave home function##bold\",\"setup.onLeaveArm#onoff#arms home##indent\",\"setup.onLeaveTurnOffLights#onoff#turns off ligths##indent\",\"setup.onLeaveTurnOffOutputs#onoff#turns off output devices##indent\"],\"notify\":{\"alarm24-status-coAlarm\":{\"tpl\":\"{_scope.formatAlarm(item,'{events;*coAlarm}: ')}\",\"type\":\"alarm\",\"description\":\"\"},\"alarm24-status-faultAlarm\":{\"tpl\":\"{_scope.formatAlarm(item,'{events;*faultAlarm}: ')}\",\"type\":\"warn\",\"description\":\"\"},\"alarm24-status-fireAlarm\":{\"tpl\":\"{_scope.formatAlarm(item,'{events;*fireAlarm}: ')}\",\"type\":\"alarm\",\"description\":\"\"},\"alarm24-status-gasAlarm\":{\"tpl\":\"\",\"type\":\"alarm\",\"description\":\"\"},\"alarm24-status-panicAlarm\":{\"tpl\":\"\",\"type\":\"alarm\",\"description\":\"\"},\"alarm24-status-powerAlarm\":{\"tpl\":\"{_scope.formatAlarm(item,'{events;*powerAlarm}: ')}\",\"type\":\"warn\",\"description\":\"\"},\"alarm24-status-safetyAlarm\":{\"tpl\":\"{_scope.formatAlarm(item,'{events;*safetyAlarm}: ')}\",\"type\":\"warn\",\"description\":\"\"},\"alarm24-status-tamperAlarm\":{\"tpl\":\"\",\"type\":\"alarm\",\"description\":\"\"},\"alarm24-status-turnedOffAlarm\":{\"tpl\":\"\",\"type\":\"warn\",\"description\":\"\"},\"alarm24-status-turnedOnAlarm\":{\"tpl\":\"\",\"type\":\"warn\",\"description\":\"\"},\"alarm24-status-waterAlarm\":{\"tpl\":\"\",\"type\":\"alarm\",\"description\":\"\"},\"null\":{\"type\":\"alarm\",\"tpl\":\"{_scope.formatAlarm(item,'{events;*waterAlarm}: ')}\"}},\"view\":{\"roomTemp_chart\":{\"tiles\":[{\"pos\":\"10px:10px:10px:10px\",\"chart\":{\"fill\":true,\"x1\":\"14,16,18,20,22,24,26\",\"step\":[\"5min:12:Hour\",\"1day:7:Week\",\"1hour:24:Day\"],\"line\":[{\"id\":-1,\"path\":\"/status/temperature\",\"name\":\"Average temperature\",\"color\":\"red\",\"axis\":\"x1\",\"fn\":\"avg\",\"format\":\"{name} {value;#,1} ℃\"}]}}]},\"outdoorTemp_chart\":{\"tiles\":[{\"pos\":\"10px:10px:10px:10px\",\"chart\":{\"fill\":true,\"x1\":\"-30,-20,-10,0,10,20,30\",\"step\":[\"5min:12:Hour\",\"1day:7:Week\",\"1hour:24:Day\"],\"line\":[{\"id\":-1,\"path\":\"/status/temperature\",\"name\":\"Average temperature\",\"color\":\"red\",\"axis\":\"x1\",\"fn\":\"avg\",\"format\":\"{name} {value;#,1} ℃\"}]}}]},\"saunaTemp_chart\":{\"tiles\":[{\"pos\":\"10px:10px:10px:10px\",\"chart\":{\"fill\":true,\"x1\":\"10,20,30,40,50,60,70,80,90,100,110,120\",\"step\":[\"1day:7:Week\",\"1hour:24:Day\",\"5min:12:Hour\"],\"line\":[{\"id\":-1,\"path\":\"/status/temperature\",\"name\":\"Average temperature\",\"color\":\"red\",\"axis\":\"x1\",\"fn\":\"avg\",\"format\":\"{name} {value;#,1} ℃\"}]}}]},\"rh_chart\":{\"tiles\":[{\"pos\":\"10px:10px:10px:10px\",\"chart\":{\"fill\":true,\"x1\":\"0,20,40,60,80,100\",\"step\":[\"5min:12:Hour\",\"1day:7:Week\",\"1hour:24:Day\"],\"line\":[{\"id\":-1,\"path\":\"/status/rh\",\"name\":\"Relative humidity\",\"color\":\"blue\",\"axis\":\"x1\",\"fn\":\"max\",\"format\":\"{name} {value;#1} ppm\"}]}}]},\"co2_chart\":{\"tiles\":[{\"pos\":\"10px:10px:10px:10px\",\"chart\":{\"fill\":true,\"x1\":\"400,600,800,1000,1200,1400,1600\",\"step\":[\"5min:12:Hour\",\"1day:7:Week\",\"1hour:24:Day\"],\"line\":[{\"id\":-1,\"path\":\"/status/co2\",\"name\":\"CO2\",\"color\":\"green\",\"axis\":\"x1\",\"fn\":\"max\",\"format\":\"{name} {value;#1} ppm\"}]}}]}}},\"buildingId\":364,\"setBuildingId\":true,\"remarks\":\"v442 kuni 2023.11.20\",\"number\":\"\",\"setup\":{\"pinExclude\":\"\",\"lang\":\"et\",\"onLeaveArm\":true},\"co2Setpoint\":\"\",\"rhSetpoint\":\"\",\"usage\":{\"house\":[\"home\"]},\"linkedDevices\":[513,512,604],\"ventilation\":{\"rhIds\":[530,536,548,555,561,570,576,581],\"status\":{\"ventilationNeedRh\":[{\"id\":530,\"path\":\"/status/ventilationNeedRh\"},{\"id\":536,\"path\":\"/status/ventilationNeedRh\"},{\"id\":548,\"path\":\"/status/ventilationNeedRh\"},{\"id\":555,\"path\":\"/status/ventilationNeedRh\"},{\"id\":561,\"path\":\"/status/ventilationNeedRh\"},{\"id\":570,\"path\":\"/status/ventilationNeedRh\"},{\"id\":576,\"path\":\"/status/ventilationNeedRh\"},{\"id\":581,\"path\":\"/status/ventilationNeedRh\"}],\"rh\":[{\"id\":530,\"path\":\"/status/rh\"},{\"id\":536,\"path\":\"/status/rh\"},{\"id\":548,\"path\":\"/status/rh\"},{\"id\":555,\"path\":\"/status/rh\"},{\"id\":561,\"path\":\"/status/rh\"},{\"id\":570,\"path\":\"/status/rh\"},{\"id\":576,\"path\":\"/status/rh\"},{\"id\":581,\"path\":\"/status/rh\"}],\"ventilationNeedCo2\":[{\"id\":554,\"path\":\"/status/ventilationNeedCo2\"},{\"id\":560,\"path\":\"/status/ventilationNeedCo2\"},{\"id\":569,\"path\":\"/status/ventilationNeedCo2\"},{\"id\":575,\"path\":\"/status/ventilationNeedCo2\"},{\"id\":580,\"path\":\"/status/ventilationNeedCo2\"}],\"co2\":[{\"id\":554,\"path\":\"/status/co2\"},{\"id\":560,\"path\":\"/status/co2\"},{\"id\":569,\"path\":\"/status/co2\"},{\"id\":575,\"path\":\"/status/co2\"},{\"id\":580,\"path\":\"/status/co2\"}]},\"co2Ids\":[554,560,569,575,580]},\"sendMail\":{\"null\":{\"subject\":\"Teigari tee 16 häireteavitused\",\"body\":\"Teigari tee 16 häireteavitused\\n - Tulekahjualarmi sündmuseid: 2\\n\\nTäpsem info häiret tekitanud seadmete kohta veebilehitsejas ja äpis.\\n\\n-----------------------------------\\nAGATARK - kodu nagu ikka, aga tark!\\nSee e-kiri on saadetud automaatselt AGATARK nutikodu poolt. Palun sellele mitte vastata.\",\"send\":true},\"siteManager\":{\"subject\":\"Teigari tee 16 häireteavitused\",\"body\":\"Teigari tee 16 häireteavitused\\n - Tulekahjualarmi sündmuseid: 2\\n\\nTäpsem info häiret tekitanud seadmete kohta veebilehitsejas ja äpis.\\n\\n-----------------------------------\\nAGATARK - kodu nagu ikka, aga tark!\\nSee e-kiri on saadetud automaatselt AGATARK nutikodu poolt. Palun sellele mitte vastata.\",\"send\":true},\"siteHabitant\":{\"subject\":\"Teigari tee 16 häireteavitused\",\"body\":\"Teigari tee 16 häireteavitused\\n - Tulekahjualarmi sündmuseid: 2\\n\\nTäpsem info häiret tekitanud seadmete kohta veebilehitsejas ja äpis.\\n\\n-----------------------------------\\nAGATARK - kodu nagu ikka, aga tark!\\nSee e-kiri on saadetud automaatselt AGATARK nutikodu poolt. Palun sellele mitte vastata.\",\"send\":true}},\"serverId\":\"\",\"newOperator\":{\"name\":\"\",\"lang\":\"en\"},\"newSite\":{\"name\":\"\",\"number\":\"\",\"type\":\"\",\"lang\":\"en\"},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"status\":{\"alarms\":{},\"lastFireAlarmTime\":\"1735593916222\"}},{\"id\":363,\"created\":1667892896254,\"updated\":1700476050039,\"category\":\"project\",\"ids\":{\"technicianRoleId\":355,\"vendorId\":352},\"name\":\"PROJEKT\",\"lang\":\"en\",\"acl\":{\"inherit\":[3,352],\"policy\":[{\"who\":[4],\"acl\":7}]},\"enabled\":true,\"uuid\":\"nv8sdxvw\",\"ui\":{\"i1\":[\"category#{value||''}\"],\"i2\":[]},\"newBuilding\":{\"types\":[{\"name\":\"House\",\"val\":\"house\"},{\"name\":\"Duplex\",\"val\":\"duplex\"},{\"name\":\"Townhouse\",\"val\":\"townHouse\"},{\"name\":\"Apartment House\",\"val\":\"apartmentHouse\"},{\"name\":\"Commercial House\",\"val\":\"commercialHouse\"},{\"name\":\"Apartment and Commercial House\",\"val\":\"apartmentAndCommercialHouse\"}],\"languages\":[{\"name\":\"English\",\"val\":\"en\"},{\"name\":\"Estonian\",\"val\":\"et\"}],\"weatherServices\":[{\"name\":\"Local sensors\",\"val\":\"local\"},{\"name\":\"Ilmateenistus\",\"val\":\"ilmateenistus\"}],\"ilmateenistus\":[{\"name\":\"Tallinn-Harku\",\"val\":\"tallinnHarku\"},{\"name\":\"Tallinn-Pirita\",\"val\":\"pirita\"},{\"name\":\"Tallinn-Tänassilma\",\"val\":\"tanassilma\"},{\"name\":\"Haapsalu\",\"val\":\"haapsalu\"},{\"name\":\"Pärnu\",\"val\":\"parnu\"},{\"name\":\"Pärnu-Sauga\",\"val\":\"parnuSauga\"},{\"name\":\"Tartu-Kvissental\",\"val\":\"tartuKvissental\"},{\"name\":\"Tartu-Tõravere\",\"val\":\"tartuToravere\"}],\"weather\":{\"service\":\"ilmateenistus\",\"city\":\"pirita\"},\"type\":\"house\",\"lang\":\"et\"},\"projectId\":363,\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":352,\"created\":1667842322245,\"updated\":1700476050026,\"enabled\":true,\"category\":\"vendor\",\"ui\":{\"i1\":[\"category#{value||''}\"],\"i2\":[]},\"newProject\":{\"languages\":[{\"name\":\"English\",\"val\":\"en\"},{\"name\":\"Estonian\",\"val\":\"et\"}],\"lang\":\"et\"},\"name\":\"Vendor\",\"acl\":{\"policy\":[{\"who\":[1,4],\"acl\":7}]},\"uuid\":\"pscwug88\",\"vendorId\":352,\"ids\":{\"allSiteRolesId\":353,\"vendorAdministratorRoleId\":354,\"vendorTechnicianRoleId\":355},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":3,\"created\":1667841962369,\"updated\":1700476048840,\"name\":\"_ AGATARK _\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":7}]},\"uuid\":\"89c4a5b9-9539-46d4-8e16-85e661b93813\",\"ids\":{\"nordPoolChildNodeId\":357},\"initRules\":[{\"name\":\"onCreate - timeSetRule - periodic execution\",\"initRule\":true,\"tag\":\"init_timeSetRulePeriodicExecution\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rules?tag=timeSetRuleMasterNode,sysNode_timeSetRuleChildNode\"},{\"op\":\"itemChange\",\"url\":\"rules?tag=timeSetRuleMasterNode,sysNode_timeSetRuleChildNode\",\"path\":\"/updated\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"if[0]\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"op\\\": \\\"event\\\",id: item.get('id'),value: {\\\"event\\\": \\\"load\\\"}}\"}},{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"then[0]\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"op\\\": \\\"executeRule\\\", \\\"rules\\\": [item.get('id')], \\\"delay\\\": 60000}\"}}]}],\"systemRules\":[{\"enabled\":false,\"name\":\"configuration - device - valve periodic onoff\",\"tag\":\"sys_conf_device_valvePeriodicOnoff\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climate[]=*erValve\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'0')*1, mode: \\\"formula\\\",  path: \\\"/status/periodicOn\\\",  value: \\\"i[0]>='23:00'&&i[0]<'23:06'?true:false\\\",  items: [{id: item.get('nodeId',2), path: \\\"/status/time\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'1')*1, mode: \\\"formula\\\",  path: \\\"/status/periodicOff\\\",  value: \\\"i[0]>='23:06'&&i[0]<'23:12'?true:false\\\",  items: [{id: item.get('nodeId',2), path: \\\"/status/time\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'2')*1, mode: \\\"formula\\\",  path: \\\"/status/output\\\",  \\\"nolog\\\": true, value: \\\"i[0]?true:i[1]?false:i[2]==100&&!c?true:i[2]==0&&c?false:c\\\",  items: [{path: \\\"/status/periodicOn\\\"}, {path: \\\"/status/periodicOff\\\"}, {path: \\\"/status/target\\\"}, {id: item.get('nodeId',2), path: \\\"/status/time\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'3')*1, mode: \\\"formula\\\",  path: \\\"/period\\\",  \\\"nolog\\\": true, value: \\\"!i[0]?600000:c\\\",  items: [{path: \\\"/period\\\"}] }\"}}]},{\"name\":\"configuration - item - temp icon\",\"tag\":\"sys_conf_icon_temp\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=temperature&status.temperature&!status.rh&!status.co2&(!ui|ui.icon!=temp)\",\"forTime\":60000},{\"op\":\"itemAdd\",\"url\":\"rooms?status.temperature&!status.rh&!status.co2&(!ui|ui.icon!=temp)\",\"forTime\":60000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/icon\"}],\"value\":{\"type\":\"string\",\"value\":\"temp\"}}]},{\"name\":\"configuration - item - temp+rh icon\",\"tag\":\"sys_conf_icon_tempRh\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=temperature,rh&status.temperature&status.rh&!status.co2&(!ui|ui.icon!=tempRh)\",\"forTime\":60000},{\"op\":\"itemAdd\",\"url\":\"rooms?status.temperature&status.rh&!status.co2&(!ui|ui.icon!=tempRh)\",\"forTime\":60000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/icon\"}],\"value\":{\"type\":\"string\",\"value\":\"tempRh\"}}]},{\"name\":\"configuration - item - temp+CO2 icon\",\"tag\":\"sys_conf_icon_tempCo2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=temperature,co2&status.temperature&!status.rh&status.co2&(!ui|ui.icon!=tempCo2)\",\"forTime\":60000},{\"op\":\"itemAdd\",\"url\":\"rooms?status.temperature&!status.rh&status.co2&(!ui|ui.icon!=tempCo2)\",\"forTime\":60000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/icon\"}],\"value\":{\"type\":\"string\",\"value\":\"tempCo2\"}}]},{\"name\":\"configuration - item - temp+rh+CO2 icon\",\"tag\":\"sys_conf_icon_tempRhCo2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=temperature,rh,co2&status.temperature&status.rh&status.co2&(!ui|ui.icon!=tempRhCo2)\",\"forTime\":60000},{\"op\":\"itemAdd\",\"url\":\"rooms?status.temperature&status.rh&status.co2&(!ui|ui.icon!=tempRhCo2)\",\"forTime\":60000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/icon\"}],\"value\":{\"type\":\"string\",\"value\":\"tempRhCo2\"}}]},{\"name\":\"Create site - project site\",\"tag\":\"sys_create_site_createProjectSite\",\"remarks\":\"create new project on vendor site\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=vendor&ids.vendorTechnicianRoleId&newProject.name&newProject.add\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{ \\\"category\\\": \\\"project\\\", \\\"ids\\\": {\\\"technicianRoleId\\\": item.get('ids.vendorTechnicianRoleId'), \\\"vendorId\\\": item.get('id')}, \\\"name\\\": item.get('newProject.name'), \\\"lang\\\": item.get('newBuilding.lang', 'en'), \\\"calcPrice\\\": item.get('newProject.calcPrice'), \\\"acl\\\": {\\\"inherit\\\":[3, item.get('id')], \\\"policy\\\": [{\\\"who\\\": [4],\\\"acl\\\": 7}]}, \\\"enabled\\\":true };json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/newProject/add\"},{\"id\":null,\"path\":\"/newProject/name\"}],\"delay\":500},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingItems\"}]}]},{\"name\":\"Create site - building site\",\"tag\":\"sys_create_site_createBuildingSite\",\"remarks\":\"create new building on project site\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=project&ids.technicianRoleId&newBuilding.name&newBuilding.type&newBuilding.lang&newBuilding.add\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{ \\\"category\\\": \\\"building\\\", \\\"ids\\\": {\\\"technicianRoleId\\\": item.get('ids.technicianRoleId'), \\\"projectId\\\": item.get('id')}, \\\"name\\\": item.get('newBuilding.name'), \\\"type\\\": item.get('newBuilding.type'), \\\"lang\\\": item.get('newBuilding.lang'), \\\"calcPrice\\\": item.get('newBuilding.calcPrice'), \\\"weather\\\": {\\\"service\\\": item.get('newBuilding.weather.service'), \\\"city\\\": item.get('newBuilding.weather.city')}, \\\"acl\\\": {\\\"inherit\\\":[3, item.get('id')], \\\"policy\\\": [{\\\"who\\\": [4],\\\"acl\\\": 7}]}, \\\"enabled\\\":true };json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/newBuilding/add\"},{\"id\":null,\"path\":\"/newBuilding/name\"}],\"delay\":500},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingItems\"}]}]},{\"name\":\"Create site - apartment\",\"tag\":\"sys_create_site_createApartment\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&ids.buildingManagerRoleId&ids.technicianRoleId&ids.securityAndResqueRoleId&newSite.type&newSite.name&newSite.number&newSite.add\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{ \\\"name\\\": item.get('newSite.name'), \\\"ids\\\": {\\\"buildingManagerRoleId\\\": item.get('ids.buildingManagerRoleId'), \\\"technicianRoleId\\\": item.get('ids.technicianRoleId'), \\\"securityAndResqueRoleId\\\": item.get('ids.securityAndResqueRoleId')}, \\\"controllerNames\\\": item.get('controllerNames'), \\\"nodeId\\\": item.get('newSite.nodeId'),\\t\\\"tmpl\\\": item.get('newSite.template'), \\\"templates\\\": item.get('newSite.templates'), \\\"zWaveGw\\\": item.get('newSite.zWaveGw'),\\t \\\"ref\\\": item.get('id'),\\t\\\"vendorId\\\": item.get('id'), \\\"projectId\\\": item.get('projectId'), \\\"projectName\\\": item.get('name'), \\\"projectType\\\": item.get('type'), \\\"type\\\": item.get('newSite.type'),\\t\\\"number\\\": item.get('newSite.number'), \\\"area\\\": item.get('newSite.area'),\\t\\\"stairCase\\\": item.get('newSite.stairCase'),\\t\\\"floor\\\": item.get('newSite.floor'),\\t\\\"usage\\\": item.get('newSite.usage'),\\t\\\"lang\\\": item.get('newSite.lang', 'en'), \\\"acl\\\": {\\\"inherit\\\":[3, item.get('id')], \\\"policy\\\": [{\\\"who\\\": [4],\\\"acl\\\": 7}, {\\\"who\\\": [item.get('ids.technicianRoleId')],\\\"acl\\\": 8201}]}, \\\"enabled\\\":true };json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingItems\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/newSite/add\"},{\"id\":null,\"path\":\"/newSite/name\"},{\"id\":null,\"path\":\"/newSite/number\"},{\"id\":null,\"path\":\"/newSite/area\"}],\"delay\":500}]},{\"name\":\"Create site - missing items notifcation\",\"tag\":\"sys_create_site_missingItems\",\"nodeId\":2,\"enabled\":true,\"acl\":{\"inherit\":[3]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?setup.add&((!setup.name&!siteName)||(!setup.type&!siteType))\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=vendor&!newProject.name&newProject.add\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingItems\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Enter mandatory items and then press Add button')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/add\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingItems\"}],\"delay\":3000}]},{\"name\":\"Create child-node - create\",\"tag\":\"sys_create_childNode_create\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=nodesRoom&setup.add&setup.cert\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"value\":{\"type\":\"string\",\"value\":\"{item.get('setup.cert') + ' ' + _('added!')}\"}},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices?tag=node&cert={item.get('setup.cert')}&$by=setup.cert\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"tag\\\": \\\"node\\\", \\\"siteId\\\": item.get('siteId'), \\\"name\\\": item.get('setup.cert') + (item.get('setup.stairCase')!=null?' sc' + item.get('setup.stairCase'):'') + (item.get('setup.floor')!=null?'-fl' + item.get('setup.floor'):''), \\\"roomId\\\": item.get('id'), \\\"ids\\\": item.get('ids'), \\\"setup\\\": {\\\"wifi\\\":{\\\"enabled\\\":false}, \\\"stairCase\\\": item.get('setup.stairCase'), \\\"cert\\\": item.get('setup.cert'), \\\"floor\\\": item.get('setup.floor')}, \\\"type\\\": \\\"child-node\\\", \\\"acl\\\": item.get('acl'), \\\"url\\\": \\\"ws://172.17.5.162\\\", \\\"enabled\\\": true}];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingCert\"},{\"id\":null,\"path\":\"/setup/add\"},{\"id\":null,\"path\":\"/setup/cert\"},{\"id\":null,\"path\":\"/setup/stairCase\"},{\"id\":null,\"path\":\"/setup/floor\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"delay\":5000}]},{\"name\":\"Create child-node - restore button and warnings\",\"tag\":\"sys_create_childNode_restore\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=nodesRoom&setup.add&!setup.cert\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingCert\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Enter controller ID and then press Add button')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/add\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/missingCert\"}],\"delay\":3000}]},{\"name\":\"Create Modbus gateway - create\",\"tag\":\"sys_create_modbus_create\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=modbusGatewaysRoom&setup.name&setup.node&setup.address&setup.add\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.controllerIds')[item.get('setup.node')] + ' Modbus Line EXTender ' + item.get('setup.name') + ' ' + _('added!')\"}},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices?tag=modbusGateway&dev=*enlife{item.get('setup.address')}*&nodeId={item.get('setup.node')}&$by=dev\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('setup.node'), \\\"nodeId\\\": item.get('setup.node'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.address')+\\\"-1\\\", \\\"name\\\": \\\"`\\\" + item.get('setup.controllerIds')[item.get('setup.node')] + \\\"` Modbus a:\\\" + item.get('setup.address')+\\\"-p:1\\\"+ (item.get('setup.name','').length?' '+item.get('setup.name'):''), \\\"roomId\\\": item.get('id'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":250, \\\"setup\\\": {\\\"nodeName\\\": item.get('setup.controllerIds')[item.get('setup.node')], \\\"address\\\": item.get('setup.address'), \\\"name\\\": item.get('setup.name'), \\\"node\\\": item.get('setup.node'), \\\"port\\\": 1}, \\\"enabled\\\": false}, {\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('setup.node'), \\\"nodeId\\\": item.get('setup.node'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.address')+\\\"-2\\\", \\\"name\\\": \\\"`\\\" + item.get('setup.controllerIds')[item.get('setup.node')] + \\\"` Modbus a:\\\" + item.get('setup.address')+\\\"-p:2\\\"+ (item.get('setup.name','').length?' '+item.get('setup.name'):''), \\\"roomId\\\": item.get('id'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":250, \\\"setup\\\": {\\\"nodeName\\\": item.get('setup.controllerIds')[item.get('setup.node')], \\\"address\\\": item.get('setup.address'), \\\"name\\\": item.get('setup.name'), \\\"node\\\": item.get('setup.node'), \\\"port\\\": 2}, \\\"enabled\\\": false}, {\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('setup.node'), \\\"nodeId\\\": item.get('setup.node'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.address')+\\\"-3\\\", \\\"name\\\": \\\"`\\\" + item.get('setup.controllerIds')[item.get('setup.node')] + \\\"` Modbus a:\\\" + item.get('setup.address')+\\\"-p:3\\\"+ (item.get('setup.name','').length?' '+item.get('setup.name'):''), \\\"roomId\\\": item.get('id'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":250, \\\"setup\\\": {\\\"nodeName\\\": item.get('setup.controllerIds')[item.get('setup.node')], \\\"address\\\": item.get('setup.address'), \\\"name\\\": item.get('setup.name'), \\\"node\\\": item.get('setup.node'), \\\"port\\\": 3}, \\\"enabled\\\": false}, {\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('setup.node'), \\\"nodeId\\\": item.get('setup.node'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.address')+\\\"-4\\\", \\\"name\\\": \\\"`\\\" + item.get('setup.controllerIds')[item.get('setup.node')] + \\\"` Modbus a:\\\" + item.get('setup.address')+\\\"-p:4\\\"+ (item.get('setup.name','').length?' '+item.get('setup.name'):''), \\\"roomId\\\": item.get('id'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":250, \\\"setup\\\": {\\\"nodeName\\\": item.get('setup.controllerIds')[item.get('setup.node')], \\\"address\\\": item.get('setup.address'), \\\"name\\\": item.get('setup.name'), \\\"node\\\": item.get('setup.node'), \\\"port\\\": 4}, \\\"enabled\\\": false},];json}\"},{\"op\":\"remove\",\"delay\":500,\"items\":[{\"id\":null,\"path\":\"/setup/add\"},{\"id\":null,\"path\":\"/setup/name\"},{\"id\":null,\"path\":\"/setup/address\"},{\"id\":null,\"path\":\"/setup/node\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"delay\":3000}]},{\"name\":\"Create M-Bus gateway - create\",\"tag\":\"sys_create_mbus_create\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=mbusGatewaysRoom&setup.name&setup.node&setup.port&setup.mbusSize&setup.add\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices?tag=mbusGateway&setup.port={item.get('setup.port')}&$by=setup.port\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"tag\\\": \\\"mbusGateway\\\", \\\"name\\\": \\\"`\\\" + item.get('setup.controllerIds')[item.get('setup.node')] + \\\"` M-Bus \\\" + item.get('setup.name'), \\\"ref\\\": item.get('setup.node'), \\\"roomId\\\": item.get('id'), \\\"type\\\": \\\"enlife_driver_M-Bus_Serial\\\", \\\"nodeId\\\": item.get('setup.node'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.port')+\\\"-1\\\", \\\"setup\\\": {\\\"format\\\": \\\"8E1\\\", \\\"baudRate\\\": item.get('setup.baudRate'), \\\"name\\\": item.get('setup.name'), \\\"node\\\": item.get('setup.node'), \\\"port\\\": item.get('setup.port'), \\\"mbusSize\\\": item.get('setup.mbusSize'), \\\"nodeName\\\": item.get('setup.controllerIds')[item.get('setup.node')]}, \\\"acl\\\": item.get('acl'), \\\"enabled\\\": false}];json}\"},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.controllerIds')[item.get('setup.node')] + ' M-Bus ' + item.get('setup.name') + ' ' + _('added!')\"}},{\"op\":\"remove\",\"delay\":500,\"items\":[{\"id\":null,\"path\":\"/setup/add\"},{\"id\":null,\"path\":\"/setup/node\"},{\"id\":null,\"path\":\"/setup/name\"},{\"id\":null,\"path\":\"/setup/port\"},{\"id\":null,\"path\":\"/setup/mbusSize\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"delay\":3000}]},{\"name\":\"Create - device - Z-Way gateway\",\"tag\":\"sys_create_zwayGateway\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?addDeviceType_zWave=z-way&addDevice\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"enabled\\\": true, \\\"type\\\": \\\"z-way\\\", \\\"name\\\": \\\"`\\\" + item.get('name') + \\\"` Z-Way\\\", \\\"roomId\\\": item.get('ids.zWaveGatewaysRoomId'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"nodeId\\\": item.get('id')};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/addDevice\"},{\"id\":null,\"path\":\"/addDeviceType\"}]}]},{\"name\":\"Create - device - Z-Way Range Extender\",\"tag\":\"sys_create_zwayRangeExtender\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?addDeviceType_zWave=generic_rangeExtender_Z-Way&addDevice\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"enabled\\\": true, \\\"type\\\": \\\"generic_rangeExtender_Z-Way\\\", \\\"name\\\": item.get('name') + \\\" levipikendaja\\\", \\\"roomId\\\": item.get('id'), \\\"nodeId\\\": item.get('id',2)};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/addDevice\"},{\"id\":null,\"path\":\"/addDeviceType\"}]}]},{\"name\":\"Create - device - Z-Way thermostat\",\"tag\":\"sys_create_zwayThermostat\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?addDeviceType_zWave=generic_thermostat_Z-Way&addDevice\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"enabled\\\": true, \\\"type\\\": \\\"generic_thermostat_Z-Way\\\", \\\"name\\\": item.get('name') + \\\" termostaat\\\", \\\"roomId\\\": item.get('id'), \\\"nodeId\\\": item.get('id',2)};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/addDevice\"},{\"id\":null,\"path\":\"/addDeviceType\"}]}]},{\"name\":\"Create - device - Z-Way smoke\",\"tag\":\"sys_create_zwaySmoke\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?addDeviceType_zWave=generic_smoke_Z-Way&addDevice\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"enabled\\\": true, \\\"type\\\": \\\"generic_smoke_Z-Way\\\", \\\"name\\\": item.get('name') + \\\" suitsuandur\\\", \\\"roomId\\\": item.get('id'), \\\"nodeId\\\": item.get('id',2)};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/addDevice\"},{\"id\":null,\"path\":\"/addDeviceType\"}]}]},{\"name\":\"Notify technical 24h alarms by email\",\"tag\":\"sys_notify_alarms24h\",\"remarks\":\"sets email subject and body to site, where they are used by site email sending rules and then deleted for next email\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-coAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-faultAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-fireAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-gasAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-panicAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-powerAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-safetyAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-waterAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-tamperAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-turnedOffAlarm/events\"},{\"op\":\"itemChange\",\"url\":\"sites?status.alarms\",\"path\":\"/status/alarms/alarm24-status-turnedOnAlarm/events\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/sendMail\"}],\"value\":{\"type\":\"formula\",\"value\":\"{[item.get('ids.siteManagerRoleId') ? 'siteManager':null] : {'subject': (_.vals.sub = ((_.vals.al=item.get('status.alarms')) ? item.get('name') + ' häireteavitused' : '')), 'body': (_.vals.bod = item.get('name') + ' häireteavitused' + '\\\\n' + ((_.vals.co=_.vals.al['alarm24-status-coAlarm'])&& _.vals.co.start ? ' - CO alarmi sündmuseid: ' + _.vals.co.events + '\\\\n' : '') + ((_.vals.fault=_.vals.al['alarm24-status-faultAlarm'])&&_.vals.fault.start ? ' - Tehniliste vigade sündmuseid: ' + _.vals.fault.events + '\\\\n' : '') + ((_.vals.fire=_.vals.al['alarm24-status-fireAlarm'])&&_.vals.fire.start ? ' - Tulekahjualarmi sündmuseid: ' + _.vals.fire.events + '\\\\n' : '') + ((_.vals.gas=_.vals.al['alarm24-status-gasAlarm'])&&_.vals.gas.start ? ' - Gaasialarmi sündmuseid: ' + _.vals.gas.events + '\\\\n' : '') + ((_.vals.panic=_.vals.al['alarm24-status-panicAlarm'])&&_.vals.panic.start ? ' - Paanikaalarmi sündmuseid: ' + _.vals.panic.events + '\\\\n' : '') + ((_.vals.power=_.vals.al['alarm24-status-powerAlarm'])&&_.vals.power.start ? ' - Toitekatkestusalarmi sündmuseid: ' + _.vals.power.events + '\\\\n' : '') + ((_.vals.safety=_.vals.al['alarm24-status-safetyAlarm'])&&_.vals.safety.start ? ' - Ohutusalarmi (elektrikilbi kaitsmed, liigpingepiirikud jmt) sündmuseid: ' + _.vals.safety.events + '\\\\n' : '') + ((_.vals.water=_.vals.al['alarm24-status-waterAlarm'])&&_.vals.water.start ? ' - Veelekkealarmi sündmuseid: ' + _.vals.water.events + '\\\\n' : '') + ((_.vals.tamper=_.vals.al['alarm24-status-tamperAlarm'])&&_.vals.tamper.start ? ' - Muukimisalarmi sündmuseid: ' + _.vals.tamper.events + '\\\\n' : '') + ((_.vals.turnedOff=_.vals.al['alarm24-status-turnedOffAlarm'])&&_.vals.turnedOff.start ? ' - Seadmete väljalülitumiste sündmuseid: ' + _.vals.turnedOff.events + '\\\\n' : '') + ((_.vals.turnedOn=_.vals.al['alarm24-status-turnedOnAlarm'])&&_.vals.turnedOn.start ? ' - Seadmete väljalülitumiste sündmuseid: ' + _.vals.turnedOn.events + '\\\\n' : '') + '\\\\n' + 'Täpsem info häiret tekitanud seadmete kohta veebilehitsejas ' + (item.get('serverId') ? item.get('serverId') + '.by.enlife.io ' : '') + 'ja äpis' + (item.get('serverId') ? ' (Server ID: ' + item.get('serverId') + ')' : '') + '.' + '\\\\n\\\\n' + '-----------------------------------\\\\nAGATARK - kodu nagu ikka, aga tark!' + '\\\\n' + 'See e-kiri on saadetud automaatselt AGATARK nutikodu poolt. Palun sellele mitte vastata.'), 'send': true}, [item.get('ids.buildingManagerRoleId') ? 'buildingManager':null] : {'subject': _.vals.sub, 'body': _.vals.bod, 'send': true}, [item.get('ids.siteBuildingManagerRoleId') ? 'siteBuildingManager':null] : {'subject': _.vals.sub, 'body': _.vals.bod, 'send': true}, [item.get('ids.siteHabitantRoleId') ? 'siteHabitant':null] : {'subject': _.vals.sub, 'body': _.vals.bod, 'send': true}, [item.get('ids.siteOperatorAdministratorRoleId') ? 'siteOperatorAdministrator':null] : {'subject': _.vals.sub, 'body': _.vals.bod, 'send': true}}\"}},{\"op\":\"dummy\",\"delay\":100,\"remarks\":\"_.vals.x clearance\",\"value\":\"{[(_.vals.al=null)?'a':'b']: [((_.vals.sub=null)?'a':'b'), ((_.vals.bod=null)?'a':'b')]\"}],\"recover\":null},{\"name\":\"onAlarm - fire - control devices\",\"tag\":\"sys_onAlarm_fire_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-fireAlarm.start|!status.alarms.alarm24-status-fireAlarm.end\"}],\"then\":[{\"remarks\":\"activate shunt trip control and alarm transmission outputs\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=shuntTripControl,alarmTransmissionCommon,alarmTransmissionFire&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"remarks\":\"close and block roof hatch\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeRemoval&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {closeCommand: true, smokeAlarmBlock: true}};json}\",\"delay\":0},{\"remarks\":\"activate siren\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.indication[]=securitySirenPeriodic&siteId={item.get('id')},{item.get('buildingId',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true, target: 50, startTime: now.date('U')*1}};json}\",\"delay\":0},{\"remarks\":\"turn off air handling units\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.climate[]=airHandlingUnit*&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, block: {'fireAlarm': true}}};json}\",\"delay\":0},{\"remarks\":\"turn off and block devices\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(usage.output[]=socket,saunaHeater,recirculationPump|usage.generic[]=evCharger|usage.climate[]=ventilator)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, block: {'fireAlarm': true}}};json}\",\"delay\":0},{\"remarks\":\"open and force water valves\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterValve&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true, force: {'fireAlarm': true}}};json}\",\"delay\":0}]},{\"name\":\"onAlarm - gas - control devices\",\"tag\":\"sys_onAlarm_gas_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-gasAlarm.start|!status.alarms.alarm24-status-gasAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=alarmTransmissionCommon,alarmTransmissionFire&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"remarks\":\"activate siren\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.indication[]=securitySirenPeriodic&siteId={item.get('id')},{item.get('buildingId',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true, target: 50, startTime: now.date('U')*1}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?tag=ventilationRoom*&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: {ventMode: 'max'}};json}\",\"delay\":0},{\"remarks\":\"turn off devices\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(usage.output[]=socket,saunaHeater,recirculationPump|usage.generic[]=evCharger|usage.climate[]=ventilator)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, block: {gasAlarm: true}}};json}\",\"delay\":0}]},{\"name\":\"onAlarm - co - control devices\",\"tag\":\"sys_onAlarm_co_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-coAlarm.start|!status.alarms.alarm24-status-coAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=alarmTransmissionCommon,alarmTransmissionFire&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"remarks\":\"activate siren\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.indication[]=securitySirenPeriodic&siteId={item.get('id')},{item.get('buildingId',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true, target: 50, startTime: now.date('U')*1}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?tag=ventilationRoom*&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: {ventMode: 'max'}};json}\",\"delay\":0},{\"remarks\":\"turn off devices\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(usage.output[]=socket,saunaHeater,recirculationPump|usage.generic[]=evCharger|usage.climate[]=ventilator)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, block: {coAlarm: true}}};json}\",\"delay\":0}]},{\"name\":\"onAlarm - panic - control devices\",\"tag\":\"sys_onAlarm_panic_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-panicAlarm.start|!status.alarms.alarm24-status-panicAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=alarmTransmissionCommon,alarmTransmissionPanic&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0}]},{\"name\":\"onAlarm - water - control devices\",\"tag\":\"sys_onAlarm_water_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-waterAlarm.start|!status.alarms.alarm24-status-waterAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterValve&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, block: {'waterAlarm': true}}};json}\",\"delay\":0}]},{\"name\":\"onAlarmRemoval - fire - control devices\",\"tag\":\"sys_onAlarmRemoval_fire_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-fireAlarm{@}|status.alarms.alarm24-status-fireAlarm.end\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/fireAlarmIds\"}]},{\"remarks\":\"deactivate shunt trip control and alarm transmission outputs\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=shuntTripControl,alarmTransmissionCommon,alarmTransmissionFire&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"remarks\":\"remove roof hatch block\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeRemoval&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {smokeAlarmBlock: false}};json}\",\"delay\":0},{\"remarks\":\"deactivate siren\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.indication[]=securitySirenPeriodic&siteId={item.get('id')},{item.get('buildingId',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, target: 0, startTime: null}};json}\",\"delay\":0},{\"remarks\":\"site alarm end time\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.alarm24[]=*fireAlarm&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {alarmEnd: now.date('U')}};json}\",\"delay\":0},{\"remarks\":\"remove block:fireAlarm and force:fireAlarm\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(status.block.fireAlarm|status.force.fireAlarm)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {block: {fireAlarm: null}, force: {fireAlarm: null}}};json}\"}]},{\"name\":\"onAlarmRemoval - gas and co - control devices\",\"tag\":\"sys_onAlarmRemoval_gasAndCo_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-gasAlarm{@}|status.alarms.alarm24-status-gasAlarm.end\"},{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-coAlarm{@}|status.alarms.alarm24-status-coAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=alarmTransmissionCommon,alarmTransmissionFire&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.indication[]=securitySirenPeriodic&siteId={item.get('id')},{item.get('buildingId',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false, target: 0, startTime: null}};json}\",\"delay\":0},{\"remarks\":\"remove block:coAlarm and force:coAlarm\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(status.block.coAlarm|status.force.coAlarm)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {block: {coAlarm: null}, force: {coAlarm: null}}};json}\"},{\"remarks\":\"remove block:gasAlarm and force:gasAlarm\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(status.block.gasAlarm|status.force.gasAlarm)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {block: {gasAlarm: null}, force: {gasAlarm: null}}};json}\"}]},{\"name\":\"onAlarmRemoval - water - control devices\",\"tag\":\"sys_onAlarmRemoval_water_controlDevices\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-waterAlarm{@}|status.alarms.alarm24-status-waterAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.alarm24[]=*waterAlarm&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {alarmEnd: now.date('U')}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterValve&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"remarks\":\"remove block:waterAlarm and force:waterAlarm\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(status.block.waterAlarm|status.force.waterAlarm)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {block: {waterAlarm: null}, force: {waterAlarm: null}}};json}\"}]},{\"name\":\"onChange - device - airHandlingUnit turns off\",\"tag\":\"sys_onChange_device_turnsOffAirHandlingUnit\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=airHandlingUnit*&!status.output\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms:{ 'airHandlingUnitOff': {start: now.date('U'), tpl: \\\"NB! \\\" + \\\"{_('Ventilation device has been turned off')}\\\", type: 'message'}}}};json}\",\"delay\":0}]},{\"name\":\"onChange - device - shuntTripControl turns off\",\"tag\":\"sys_onChange_device_turnsOffShuntTripControl\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=shuntTripControl&!status.output\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms:{ 'shuntTripControlOff': {start: now.date('U'), tpl: \\\"NB! \\\" + \\\"{_('Shunt trip circuit breakers have restored electrical power')}\\\", type: 'message'}}}};json}\",\"delay\":0}]},{\"name\":\"onChange - device - shuntTripControl turns on\",\"tag\":\"sys_onChange_device_turnsOnShuntTripControl\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=shuntTripControl&status.output\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms:{ 'shuntTripControlOn': {start: now.date('U'), tpl: \\\"NB! \\\" + \\\"{_('Shunt trip circuit breakers shut off electrical power to prevent injury to people and damage to equipment')}\\\", type: 'warn'}}}};json}\",\"delay\":0}]},{\"name\":\"onArrive - switch, eco button, motion, door\",\"tag\":\"sys_onarrive_switchEcoMotionDoor\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.access[]=arrive&!status.locked\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.securityDetector[]=door&!presence&status.open\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.securityDetector[]=motion&!presence&status.active\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=arrive&!presence&!status.arriveBlock&status.input\",\"forTime\":1000},{\"op\":\"itemAdd\",\"url\":\"devices?usage.generic[]=eco&!presence&!setup.output\",\"forTime\":500},{\"op\":\"itemAdd\",\"url\":\"securityAreas?tag=sysSecArea&!status.armed\"}],\"then\":[{\"remarks\":\"mark motion and door presence:true and movementBlock\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.securityDetector[]=motion,door&siteId={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: true};json}\",\"delay\":0},{\"remarks\":\"mark arrive switches presence:true\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.switch[]=arrive&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: true};json}\",\"delay\":0},{\"remarks\":\"deactivate energy saving\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.generic[]=eco&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: true, setup: {output: false}, status: {remarks: 'onArrive - switch, eco button, motion, door', idx: idx}};json}\",\"delay\":0},{\"remarks\":\"turn on indoor lights and outputs\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(usage.light[]=arrive&(usage.light[]=welcome|usage.light[]=indoor*)|usage.output[]=arrive)&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"remarks\":\"turn on outdoor lights presence\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.light[]=arrive&usage.light[]=outdoor&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: true};json}\",\"delay\":0},{\"remarks\":\"remove security only while exit delay\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?status.exitDelay&(tag=sysSecArea|usage.securityArea[]=arrive)&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {armed: null, debug: 'sys_onarrive_switchEcoMotionDoor, idx:'+idx}};json}\",\"delay\":null}]},{\"name\":\"onArrive - unlock doors\",\"tag\":\"sys_onarrive_unlockDoors\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"securityAreas?tag=sysSecArea&!status.armed\"}],\"then\":[{\"remarks\":\"unlock doors\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.access[]=arrive&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {locked: false}};json}\",\"delay\":0}]},{\"name\":\"onArrive - unlock removes security\",\"tag\":\"sys_onarrive_unlockRemovesSecurity\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.access[]=lock&!status.locked\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?(tag=sysSecArea|usage.securityArea[]=arrive)&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {armed: null, debug: 'sys_onarrive_unlockRemovesSecurity, idx:'+idx}};json}\",\"delay\":null}]},{\"name\":\"onLeave - indoor lights\",\"tag\":\"sys_onLeave_lightsIndoor\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?setup.onLeaveTurnOffLights&status.onLeaveTurnOff\"}],\"then\":[{\"remarks\":\"turn off site indoor lights onLeave\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.light[]=leave&usage.light[]=indoor*&siteId={item.get('/id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/onLeaveTurnOff\"}],\"delay\":1000}]},{\"name\":\"onLeave - outputs\",\"tag\":\"sys_onLeave_outputs\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?setup.onLeaveTurnOffOutputs&status.onLeaveTurnOff\"}],\"then\":[{\"remarks\":\"turn off site outputs onLeave\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=leave&siteId={item.get('/id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/onLeaveTurnOff\"}],\"delay\":1000}]},{\"name\":\"onLeave - switch, eco button, secAway\",\"tag\":\"sys_onLeave_switchEcoSecaway\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.switch[]=leave&presence&!status.leaveBlock&status.input\",\"forTime\":1000},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.generic[]=eco&presence&setup.output\",\"forTime\":500},{\"op\":\"itemAdd\",\"url\":\"securityAreas?tag=sysSecArea&(status.armed=secAway|status.armModeIndex=0)\"}],\"then\":[{\"remarks\":\"mark leave switches presence:false\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.switch[]=leave&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: false};json}\",\"delay\":0},{\"remarks\":\"activate energy saving\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.generic[]=eco&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: false, setup: {output: true}};json}\",\"delay\":0},{\"remarks\":\"lock doors\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.access[]=leave&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {locked: true}};json}\",\"delay\":0},{\"remarks\":\"turn off site items through site\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {onLeaveTurnOff: true}};json}\",\"delay\":0},{\"remarks\":\"remove site status.onLeaveTurnOff (turn off site items through site) in case site setting is not selected and the rule doesn't remove it\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {onLeaveTurnOff: null}};json}\",\"delay\":1000},{\"remarks\":\"arm securityArea mode position:0\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?(tag=sysSecArea|usage.securityArea[]=leave)&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {armMode: 0, debug: 'sys_onLeave_switchEcoSecaway, idx:'+idx}};json}\",\"delay\":0},{\"remarks\":\"remove securityArea status.armMode for next arming in case it is not cleared by area itself after arming - the area was not armed because of site setting setup.onLeaveArm\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?(tag=sysSecArea|usage.securityArea[]=leave)&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {armMode: null, debug: 'sys_onLeave_switchEcoSecaway, idx:'+idx}};json}\",\"delay\":1000}]},{\"name\":\"onNonPresence - onLeave delayed actions\",\"tag\":\"sys_onNonPresence_onLeaveDelayedActions\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"securityAreas?tag=sysSecArea&(status.armed=secAway,AWAY,EEMAL|status.armModeIndex=0)&!status.exitDelay\",\"forTime\":200},{\"op\":\"itemAdd\",\"url\":\"devices?usage.generic[]=eco&setup.output\",\"forTime\":30000}],\"then\":[{\"remarks\":\"mark motion and door presence:false\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.securityDetector[]=motion,door&siteId={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: false};json}\",\"delay\":0},{\"remarks\":\"turn off outdoor lights presence\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.light[]=leave&usage.light[]=outdoor&siteId={item.get('/siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{presence: false};json}\",\"delay\":0},{\"remarks\":\"turn off welcome light\",\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.light[]=leave&usage.light[]=welcome&siteId={item.get('/id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0}]},{\"name\":\"RM function1.1 - force RF device online after meter reading correction\",\"tag\":\"sys_rmFunc_meterReadingCorrectionForceOnline\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_2Ci_RF,enlife_4DSi4DSio_RF&((setup.actualReading>=0&status.counter>=0)|(setup.actualReading1>=0&status.counter1>=0)|(setup.actualReading2>=0&status.counter2>=0)|(setup.actualReading3>=0&status.counter3>=0)|(setup.actualReading4>=0&status.counter4>=0)|(setup.actualReadingT1>=0&status.counterT1>=0)|(setup.actualReadingT2>=0&status.counterT2>=0))&!status.online\",\"path\":\"/status/online\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/online\"}]}]},{\"name\":\"RM function1 - meter reading correction\",\"tag\":\"sys_rmFunc_meterReadingCorrection\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading>=0&status.online&status.counter>=0\",\"path\":\"/setup/actualReading\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[0].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading') - (item.get('status.counter') - item.get('conf[0].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')}  {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading1>=0&status.online&status.counter1>=0\",\"path\":\"/setup/actualReading1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[0].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading1') - (item.get('status.counter1') - item.get('conf[0].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input1T1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput1T1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading1T1>=0&status.online&status.counter1T1>=0\",\"path\":\"/setup/actualReading1T1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[0].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading1T1') - (item.get('status.counter1T1') - item.get('conf[0].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1T1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading1T1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter1T1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading1T1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1T1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input1T2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput1T2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading1T2>=0&status.online&status.counter1T2>=0\",\"path\":\"/setup/actualReading1T2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[1].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading1T2') - (item.get('status.counter1T2') - item.get('conf[1].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1T2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading1T2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter1T2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading1T2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated1T2\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading2>=0&status.online&status.counter2>=0\",\"path\":\"/setup/actualReading2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[1].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading2') - (item.get('status.counter2') - item.get('conf[1].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 2 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input2T1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput2T1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading2T1>=0&status.online&status.counter2T1>=0\",\"path\":\"/setup/actualReading2T1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[2].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading2T1') - (item.get('status.counter2T1') - item.get('conf[2].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2T1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading2T1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter2T1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading2T1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2T1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input2T2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput2T2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading2T2>=0&status.online&status.counter2T2>=0\",\"path\":\"/setup/actualReading2T2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[3].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading2T2') - (item.get('status.counter2T2') - item.get('conf[3].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2T2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading2T2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter2T2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading2T2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated2T2\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input3\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading3>=0&status.online&status.counter3>=0\",\"path\":\"/setup/actualReading3\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[2].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading3') - (item.get('status.counter3') - item.get('conf[2].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 3 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading3\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter3\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading3')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input3T1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput3T1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading3T1>=0&status.online&status.counter3T1>=0\",\"path\":\"/setup/actualReading3T1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[4].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading3T1') - (item.get('status.counter3T1') - item.get('conf[4].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3T1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading3T1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter3T1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading3T1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3T1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input3T2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput3T2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading3T2>=0&status.online&status.counter3T2>=0\",\"path\":\"/setup/actualReading3T2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[5].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading3T2') - (item.get('status.counter3T2') - item.get('conf[5].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3T2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading3T2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter3T2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading3T2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated3T2\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input4\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput4\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading4>=0&status.online&status.counter4>=0\",\"path\":\"/setup/actualReading4\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[3].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading4') - (item.get('status.counter4') - item.get('conf[3].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 4 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading4\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter4\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading4')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input4T1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput4T1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading4T1>=0&status.online&status.counter4T1>=0\",\"path\":\"/setup/actualReading4T1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[6].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading4T1') - (item.get('status.counter4T1') - item.get('conf[6].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4T1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading4T1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter4T1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading4T1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4T1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction input4T2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionInput4T2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReading4T2>=0&status.online&status.counter4T2>=0\",\"path\":\"/setup/actualReading4T2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[7].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReading4T2') - (item.get('status.counter4T2') - item.get('conf[7].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4T2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} 1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReading4T2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counter4T2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReading4T2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updated4T2\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction T1\",\"tag\":\"sys_rmFunc_meterReadingCorrectionT1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReadingT1>=0&status.online&status.counterT1>=0\",\"path\":\"/setup/actualReadingT1\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[1].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReadingT1') - (item.get('status.counterT1') - item.get('conf[1].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updatedT1\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} T1 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReadingT1\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counterT1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReadingT1')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updatedT1\"}],\"delay\":5000}]},{\"name\":\"RM function1 - meter reading correction T2\",\"tag\":\"sys_rmFunc_meterReadingCorrectionT2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.actualReadingT2>=0&status.online&status.counterT2>=0\",\"path\":\"/setup/actualReadingT2\"}],\"then\":[{\"op\":\"arrayPatch\",\"items\":[{\"id\":null,\"path\":\"conf[2].offset\"}],\"value\":{\"type\":\"formula\",\"value\":\"((item.get('setup.actualReadingT2') - (item.get('status.counterT2') - item.get('conf[2].offset',0)))*1000).step(1)/1000\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updatedT2\"}],\"value\":{\"type\":\"string\",\"value\":\"{_('Reading')} T2 {_('is updated. It may take time to show updated reading.')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/actualReadingT2\"}],\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/counterT2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.actualReadingT2')\"},\"delay\":2000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/updatedT2\"}],\"delay\":5000}]},{\"name\":\"RM function2 - set meter data on month change\",\"tag\":\"sys_rmFunc_setMeterDataOnMonthChange\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"equal\",\"id\":2,\"path\":\"/status/day\",\"value\":{\"type\":\"string\",\"value\":\"1\"}}],\"if\":[{\"op\":\"itemChange\",\"path\":\"/ui/readings/cacheTime\",\"url\":\"devices?meterType\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'ui': {'readings': {[now.date('M')==1 ? now.date('YYYY')-1 : now.date('YYYY')]: {[now.date('M')==1 ? 12 : now.date('M')-1]: {'reading': item.get('ui.readings.cached'), 'readingT1': item.get('ui.readings.cachedT1'), 'readingT2': item.get('ui.readings.cachedT2'), 'con': ((item.get('ui.readings.cached') - item.get('ui.readings.last1.reading',0))*1000).step(1)/1000, 'conT1': ((item.get('ui.readings.cachedT1') - item.get('ui.readings.last1.readingT1',0))*1000).step(1)/1000, 'conT2': ((item.get('ui.readings.cachedT2') - item.get('ui.readings.last1.readingT2',0))*1000).step(1)/1000}}, 'last2': item.get('ui.readings.last1'), 'last1': {'con': ((item.get('ui.readings.cached') - item.get('ui.readings.last1.reading',0))*1000).step(1)/1000, 'reading': item.get('ui.readings.cached'), 'conT1': ((item.get('ui.readings.cachedT1') - item.get('ui.readings.last1.readingT1',0))*1000).step(1)/1000, 'readingT1': item.get('ui.readings.cachedT1'), 'conT2': ((item.get('ui.readings.cachedT2') - item.get('ui.readings.last1.readingT2',0))*1000).step(1)/1000, 'readingT2': item.get('ui.readings.cachedT2'), 'time': now.date('iso'), 'date': (now.date('U')*1+3*3600000).date('DD.MM.YYYY') }}}};json}\"}]},{\"name\":\"RM function3 - set tariff on master node NIGHT\",\"tag\":\"sys_rmFunc_setTariffMasterNodeNight\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"nodes?id=2&(status.weekDay>5|status.time>=23:00|status.time<07:00)\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(setup.tariff|tariff)&!setup.localTimeSwitch&(!nodeId|nodeId=2)\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"tariff\\\":2}};json}\"}],\"recover\":null},{\"name\":\"RM function3 - set tariff on master node DAY\",\"tag\":\"sys_rmFunc_setTariffMasterNode\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"nodes?id=2&status.weekDay<6&status.time<23:00&status.time>=07:00\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(setup.tariff|tariff)&!setup.localTimeSwitch&(!nodeId|nodeId=2)\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"tariff\\\":1}};json}\"}],\"recover\":null},{\"name\":\"RM function4 - MBus primary address set command\",\"tag\":\"sys_rmFunc_mbusPrimaryAddress\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?setup.secondary&setup.setAddress\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/setAddress\"}],\"value\":{\"type\":\"formula\",\"value\":\"('0000000'+item.get('setup.secondary')).slice(-8)\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/setAddress\"},{\"id\":null,\"path\":\"/status/setAddress\"}]}]},{\"name\":\"onCreateOrAdd - device - secondary sync from hw to client\",\"tag\":\"sys_onCreateOrAdd_setup_secondarySync_fromHwToClient\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?!meterType&secondary|setup.secondary\"},{\"op\":\"itemAdd\",\"url\":\"devices?status.requestSecondary\"},{\"op\":\"itemChange\",\"url\":\"devices?!meterType&setup.secondary\",\"path\":\"/setup/secondary\"},{\"op\":\"itemChange\",\"url\":\"devices?!meterType&secondary\",\"path\":\"/secondary\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/secondary\"}],\"value\":{\"type\":\"formula\",\"value\":\"('0000000'+(item.get('setup.secondary')||item.get('secondary'))).slice(-8)\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?meterType&setup.sourceId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: { secondary: item.get('setup.secondary') || item.get('secondary') }};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/requestSecondary\"}]}]},{\"name\":\"onCreateOrAdd - device - secondary sync from client to hw\",\"tag\":\"sys_onCreateOrAdd_setup_secondarySync_fromClientToHw\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?meterType&setup.sourceId\",\"path\":\"/setup/secondary\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('setup.sourceId')}&setup.secondary!={\\\"'\\\"+item.get('setup.secondary')+\\\"'\\\"}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: { secondary: item.get('setup.secondary')}};json}\"}]},{\"name\":\"onCreateOrAdd - device - request secondary address\",\"tag\":\"sys_onCreateOrAdd_setup_requestSecondaryAddress\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?meterType&setup.sourceId&!setup.secondary\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('setup.sourceId')}&(secondary|setup.secondary)\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'status': { 'requestSecondary': true}};json}\"}]},{\"name\":\"onChange - device - createDevices Co2TempRhLux2Dio2Ai2Ao\",\"tag\":\"sys_onChange_device_createDevicesCo2TempRhLux2Dio2Ai2Ao\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus&createDevices\",\"path\":\"/createDevices\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.temperature.name','Temperature'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.temperature.dType'), path: item.get('createDevices.temperature.path'), target: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.temperature.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.temperature.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.rh.name','Relative humidity'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.rh.dType'), path: item.get('createDevices.rh.path'), target: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.rh.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.rh.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.co2.name','CO2'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.co2.dType'), path: item.get('createDevices.co2.path'), target: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.co2.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.co2.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.i2c.name','Temperature I2C'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.i2c.dType'), path: item.get('createDevices.i2c.path'), target: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.i2c.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.i2c.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io1.name','io1 device'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io1.dType'), path: item.get('createDevices.io1.path'), target: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io1.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io2.name','io2 device'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io2.dType'), path: item.get('createDevices.io2.path'), target: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io2.portMode')} }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ [item.get('createDevices.io1.portMode')?'portMode1':null]: item.get('createDevices.io1.portMode')?check[0].get('templates.controllers.enTempRhCo22Ai2Ao2DioLux.ui.portModes')[ check[0].get('templates.controllers.enTempRhCo22Ai2Ao2DioLux.ui.portModes').pluck('name').indexOf(item.get('createDevices.io1.portMode')) ].val:null, [item.get('createDevices.io2.portMode')?'portMode2':null]: item.get('createDevices.io2.portMode')?check[0].get('templates.controllers.enTempRhCo22Ai2Ao2DioLux.ui.portModes')[ check[0].get('templates.controllers.enTempRhCo22Ai2Ao2DioLux.ui.portModes').pluck('name').indexOf(item.get('createDevices.io2.portMode')) ].val:null }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.createDevices').filter(n=>n&&n.status&&n.status.portMode&&n.status.portMode.length)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevicesCreate\"}],\"value\":{\"type\":\"boolean\",\"value\":true}}]},{\"name\":\"onChange - device - createDevices 4DSi4DSio\",\"tag\":\"sys_onChange_device_createDevices4DSi4DSio\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_4DSi4DSio_Modbus&createDevices\",\"path\":\"/createDevices\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io1.name','io1 device'), roomId: item.get('createDevices.io1.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io1.dType'), path: item.get('createDevices.io1.path'), target: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io1.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io2.name','io2 device'), roomId: item.get('createDevices.io2.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io2.dType'), path: item.get('createDevices.io2.path'), target: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io2.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io3.name','io3 device'), roomId: item.get('createDevices.io3.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io3.dType'), path: item.get('createDevices.io3.path'), target: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io3.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io4.name','io4 device'), roomId: item.get('createDevices.io4.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io4.dType'), path: item.get('createDevices.io4.path'), target: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io4.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.i5.name','i5 device'), roomId: item.get('createDevices.i5.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.i5.dType'), path: item.get('createDevices.i5.path'), target: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.i5.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.i5.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.i6.name','i6 device'), roomId: item.get('createDevices.i6.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.i6.dType'), path: item.get('createDevices.i6.path'), target: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.i6.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.i6.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.i7.name','i7 device'), roomId: item.get('createDevices.i7.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.i7.dType'), path: item.get('createDevices.i7.path'), target: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.i7.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.i7.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.i8.name','i8 device'), roomId: item.get('createDevices.i8.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.i8.dType'), path: item.get('createDevices.i8.path'), target: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.i8.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.i8.portMode')} }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ [item.get('createDevices.io1.portMode')?'ioMode1':null]: item.get('createDevices.io1.portMode')?check[0].get('templates.controllers.en4Dio.ui.portModes')[ check[0].get('templates.controllers.en4Dio.ui.portModes').pluck('name').indexOf(item.get('createDevices.io1.portMode')) ].val:null, [item.get('createDevices.io2.portMode')?'ioMode2':null]: item.get('createDevices.io2.portMode')?check[0].get('templates.controllers.en4Dio.ui.portModes')[ check[0].get('templates.controllers.en4Dio.ui.portModes').pluck('name').indexOf(item.get('createDevices.io2.portMode')) ].val:null, [item.get('createDevices.io3.portMode')?'ioMode3':null]: item.get('createDevices.io3.portMode')?check[0].get('templates.controllers.en4Dio.ui.portModes')[ check[0].get('templates.controllers.en4Dio.ui.portModes').pluck('name').indexOf(item.get('createDevices.io3.portMode')) ].val:null, [item.get('createDevices.io4.portMode')?'ioMode4':null]: item.get('createDevices.io4.portMode')?check[0].get('templates.controllers.en4Dio.ui.portModes')[ check[0].get('templates.controllers.en4Dio.ui.portModes').pluck('name').indexOf(item.get('createDevices.io4.portMode')) ].val:null, }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.createDevices').filter(n=>n&&n.status&&n.status.portMode&&n.status.portMode.length)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevicesCreate\"}],\"value\":{\"type\":\"boolean\",\"value\":true}}]},{\"name\":\"onChange - device - createDevices 2ADi1Dio\",\"tag\":\"sys_onChange_device_createDevices2ADi1Dio\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_2ADi1Dio_Modbus&createDevices\",\"path\":\"/createDevices\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.port1.name','port1 device'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.port1.dType'), path: item.get('createDevices.port1.path'), target: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.port1.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.port1.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.port2.name','port2 device'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.port2.dType'), path: item.get('createDevices.port2.path'), target: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.port2.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.port2.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.port3.name','port3 device'), roomId: item.get('createDevices.io.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.port3.dType'), path: item.get('createDevices.port3.path'), target: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.port3.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.port3.portMode')} }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ [item.get('createDevices.port1.portMode')?'inputMode1':null]: item.get('createDevices.port1.portMode')?check[0].get('templates.controllers.en2ADi1Dio.ui.portModes1_2')[ check[0].get('templates.controllers.en2ADi1Dio.ui.portModes1_2').pluck('name').indexOf(item.get('createDevices.port1.portMode')) ].val:null, [item.get('createDevices.port2.portMode')?'inputMode2':null]: item.get('createDevices.port2.portMode')?check[0].get('templates.controllers.en2ADi1Dio.ui.portModes1_2')[ check[0].get('templates.controllers.en2ADi1Dio.ui.portModes1_2').pluck('name').indexOf(item.get('createDevices.port2.portMode')) ].val:null, [item.get('createDevices.port3.portMode')?'ioMode3':null]: item.get('createDevices.port3.portMode')?check[0].get('templates.controllers.en2ADi1Dio.ui.portModes3')[ check[0].get('templates.controllers.en2ADi1Dio.ui.portModes3').pluck('name').indexOf(item.get('createDevices.port3.portMode')) ].val:null }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.createDevices').filter(n=>n)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevicesCreate\"}],\"value\":{\"type\":\"boolean\",\"value\":true}}]},{\"name\":\"onChange - device - createDevices enlife_SMART_Compact_16\",\"tag\":\"sys_onChange_device_createDevicesEnlife_SMART_Compact_16\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_SMART_Compact_16&createDevices\",\"path\":\"/createDevices\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io1.name','io1 device'), roomId: item.get('createDevices.io1.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io1.dType'), path: item.get('createDevices.io1.path'), target: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io1.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io1.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io2.name','io2 device'), roomId: item.get('createDevices.io2.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io2.dType'), path: item.get('createDevices.io2.path'), target: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io2.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io2.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io3.name','io3 device'), roomId: item.get('createDevices.io3.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io3.dType'), path: item.get('createDevices.io3.path'), target: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io3.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io3.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io4.name','io4 device'), roomId: item.get('createDevices.io4.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io4.dType'), path: item.get('createDevices.io4.path'), target: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io4.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io4.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io5.name','io5 device'), roomId: item.get('createDevices.io5.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io5.dType'), path: item.get('createDevices.io5.path'), target: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io5.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io5.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io6.name','io6 device'), roomId: item.get('createDevices.io6.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io6.dType'), path: item.get('createDevices.io6.path'), target: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io6.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io6.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io7.name','io7 device'), roomId: item.get('createDevices.io7.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io7.dType'), path: item.get('createDevices.io7.path'), target: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io7.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io7.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io8.name','io8 device'), roomId: item.get('createDevices.io8.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io8.dType'), path: item.get('createDevices.io8.path'), target: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io8.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io8.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io9.name','io9 device'), roomId: item.get('createDevices.io9.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io9.dType'), path: item.get('createDevices.io9.path'), target: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io9.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io9.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io10.name','io10 device'), roomId: item.get('createDevices.io10.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io10.dType'), path: item.get('createDevices.io10.path'), target: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io10.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io10.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io11.name','io11 device'), roomId: item.get('createDevices.io11.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io11.dType'), path: item.get('createDevices.io11.path'), target: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io11.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io11.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io12.name','io12 device'), roomId: item.get('createDevices.io12.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io12.dType'), path: item.get('createDevices.io12.path'), target: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io12.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io12.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io13.name','io13 device'), roomId: item.get('createDevices.io13.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io13.dType'), path: item.get('createDevices.io13.path'), target: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io13.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io13.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io14.name','io14 device'), roomId: item.get('createDevices.io14.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io14.dType'), path: item.get('createDevices.io14.path'), target: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io14.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io14.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io15.name','io15 device'), roomId: item.get('createDevices.io15.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io15.dType'), path: item.get('createDevices.io15.path'), target: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io15.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io15.portMode')} }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ enabled: true, name: item.get('createDevices.io16.name','io16 device'), roomId: item.get('createDevices.io16.roomId'), nodeId: item.get('nodeId'), type: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].type, conf: [{id: item.get('id'), dType: item.get('createDevices.io16.dType'), path: item.get('createDevices.io16.path'), target: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].conf[0].target, offset: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].conf[0].offset, pollTime: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].conf[0].pollTime}], usage: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].usage, ui: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].ui, policy: check[0].get('templates.devices')[item.get('createDevices.io16.dType')].policy, delRef: item.get('id'), status: {portMode: item.get('createDevices.io16.portMode')} }\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.createDevices').filter(n=>n)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/createDevicesCreate\"}],\"value\":{\"type\":\"boolean\",\"value\":true}}]},{\"name\":\"onAdd - device - createDevicesCreate\",\"tag\":\"sys_onAdd_device_createDevicesCreate\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?status.createDevicesCreate\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices?delRef={item.get('id')}&$by=conf[0].path\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{item.get('status.createDevices');json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/createDevicesCreate\"},{\"id\":null,\"path\":\"/status/createDevices\"}]}]},{\"name\":\"onAdd - device - climateControl_slowPwm\",\"tag\":\"sys_onAdd_device_climateControl_slowPwm\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=climateControl_slowPwm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/activationDuration\"}],\"value\":{\"type\":\"boolean\",\"value\":true},\"delay\":10000},{\"op\":\"set\",\"items\":[{\"path\":\"/period\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('period', 600000)\"}}]},{\"name\":\"onAdd - device - enlifeco2\",\"tag\":\"sys_onAdd_device_enlifeco2\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlifeco2\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=enlifeco2&forceFollowAndUi\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, 'mode': 'formula', 'path': '/status/port1Mode', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/port1Mode'}, {'path': '/setup/port1Mode'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, 'mode': 'formula', 'path': '/status/port2Mode', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/port2Mode'}, {'path': '/setup/port2Mode'}, {'path': '/status/online'}]}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.enlifeco2.ui',{})\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/forceFollowAndUi\"}]}]},{\"name\":\"onAdd - device - enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"tag\":\"sys_onAdd_device_enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus&forceFollowAndUi\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, 'mode': 'formula', 'path': '/status/portMode1', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/portMode1'}, {'path': '/setup/portMode1'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, 'mode': 'formula', 'path': '/status/portMode2', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/portMode2'}, {'path': '/setup/portMode2'}, {'path': '/status/online'}]}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"(check[0].get('templates.controllers')[item.get('ui.template', 'enTempRhCo22Ai2Ao2DioLux')].ui)||{}\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/forceFollowAndUi\"}]}]},{\"name\":\"onAdd - device - enlife_4DSi4DSio_Modbus\",\"tag\":\"sys_onAdd_device_enlife_4DSi4DSio_Modbus\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_4DSi4DSio_Modbus\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_4DSi4DSio_Modbus&forceFollowAndUi\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, 'mode': 'formula', 'path': '/status/ioMode1', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/ioMode1'}, {'path': '/setup/ioMode1'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, 'mode': 'formula', 'path': '/status/ioMode2', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/ioMode2'}, {'path': '/setup/ioMode2'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'03')*1, 'mode': 'formula', 'path': '/status/ioMode3', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/ioMode3'}, {'path': '/setup/ioMode3'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'04')*1, 'mode': 'formula', 'path': '/status/ioMode4', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/ioMode4'}, {'path': '/setup/ioMode4'}, {'path': '/status/online'}]}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.en4Dio.ui',{})\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/forceFollowAndUi\"}]}]},{\"name\":\"onAdd - device - enlife_2ADi1Dio_Modbus\",\"tag\":\"sys_onAdd_device_enlife_2ADi1Dio_Modbus\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_2ADi1Dio_Modbus\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_2ADi1Dio_Modbus&forceFollowAndUi\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, 'mode': 'formula', 'path': '/status/inputMode1', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode1'}, {'path': '/setup/inputMode1'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, 'mode': 'formula', 'path': '/status/inputMode2', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode2'}, {'path': '/setup/inputMode2'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'03')*1, 'mode': 'formula', 'path': '/status/ioMode3', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/ioMode3'}, {'path': '/setup/ioMode3'}, {'path': '/status/online'}]}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.en2ADi1Dio.ui',{})\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/forceFollowAndUi\"}]}]},{\"name\":\"onAdd - device - enlife8DiRo\",\"tag\":\"sys_onAdd_device_enlife8DiRo\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife8DiRo\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife8DiRo&forceFollowAndUi\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, 'mode': 'formula', 'path': '/status/inputMode1', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode1'}, {'path': '/setup/inputMode1'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, 'mode': 'formula', 'path': '/status/inputMode2', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode2'}, {'path': '/setup/inputMode2'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'03')*1, 'mode': 'formula', 'path': '/status/inputMode3', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode3'}, {'path': '/setup/inputMode3'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'04')*1, 'mode': 'formula', 'path': '/status/inputMode4', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode4'}, {'path': '/setup/inputMode4'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'05')*1, 'mode': 'formula', 'path': '/status/inputMode5', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode5'}, {'path': '/setup/inputMode5'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'06')*1, 'mode': 'formula', 'path': '/status/inputMode6', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode6'}, {'path': '/setup/inputMode6'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'07')*1, 'mode': 'formula', 'path': '/status/inputMode7', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode7'}, {'path': '/setup/inputMode7'}, {'path': '/status/online'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'08')*1, 'mode': 'formula', 'path': '/status/inputMode8', 'value': 'i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c', 'items': [{'path': '/status/inputMode8'}, {'path': '/setup/inputMode8'}, {'path': '/status/online'}]}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.en8DiRo.ui',{})\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/forceFollowAndUi\"}]}]},{\"name\":\"onAdd - device - enlife_SMART_Compact_16\",\"tag\":\"sys_onAdd_device_enlife_SMART_Compact_16\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_SMART_Compact_16\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.smartCompact16.ui')\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/usage\"}],\"value\":{\"type\":\"formula\",\"value\":\"{controller: ['smart']}\"}},{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{tag: 'modbusGateway', siteId: item.get('siteId'), delRef: item.get('id'), nodeId: 2, dev: '/dev/enlife0', name: '`' + item.get('name') + '` Modbus onboard', noderoomId: item.get('createDevices.io.roomId'), roomId: item.get('createDevices.io.ids.modbusGatewaysRoomId')||item.get('roomId'), type: 'modbusDriver', acl: item.get('acl'), stairCase: item.get('setup.stairCase'), floor: item.get('setup.floor'), setup: {baudRate:115200, format:'8E1', pollingDelay:5, nodeName: item.get('name'), node: item.get('id')}, usage: {controller: ['gateway']}, enabled: false};json}\",\"delay\":1000}]},{\"enabled\":true,\"name\":\"onAdd - device - output - nord pool\",\"tag\":\"sys_onAdd_device_output_nordPool\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=output&setup.nordPoolDeviceId&!ui.limitModes\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/status/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.devices.nordPoolOutput.ui\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i1',[]).concat(item.get('status.ui.i1'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i2',[]).concat(item.get('status.ui.i2'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i3\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i3',[]).concat(item.get('status.ui.i3'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/limitModes\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.ui.limitModes')\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'31')*1, mode: \\\"copy\\\", path: \\\"/status/today/hours24Desc\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24Desc\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'32')*1, mode: \\\"copy\\\", path: \\\"/status/today/max\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/max\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'33')*1, mode: \\\"copy\\\", path: \\\"/status/today/min\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/min\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'34')*1, mode: \\\"formula\\\", path: \\\"/status/today/current\\\", value: \\\"i[0][i[1]]\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24\\\"}, {id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/hour\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'35')*1, mode: \\\"formula\\\", path: \\\"/status/today/blockCondition\\\", value: \\\"i[0] && i[6]>=(i[1]||0) && (i[2]=='percOfMax' && i[6]>i[4]*i[3]/100 || i[2]=='expHours' && i[6]>=i[5][i[3]-1]) ? true : false\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/setup/np/limitAbsNotLower\\\"}, {path: \\\"/setup/np/limitMode\\\"}, {path: \\\"/setup/np/limitValue\\\"}, {path: \\\"/status/today/max\\\"}, {path: \\\"/status/today/hours24Desc\\\"}, {path: \\\"/status/today/current\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'36')*1, mode: \\\"formula\\\", path: \\\"/status/today/countInRow\\\", value: \\\"i[0] ? (r[0]&&c==r[0] ? -1 : (c==-1||!c?0:c)+1) : 0\\\", nolog: null, items: [{path: \\\"/status/today/blockCondition\\\"}, {path: \\\"/status/hour\\\"}], read: [{path: \\\"/setup/np/limitHoursInRow\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'37')*1, mode: \\\"formula\\\", path: \\\"/status/block/nordPool\\\", value: \\\"i[0]>0 ? true : null\\\", nolog: null, items: [{path: \\\"/status/today/countInRow\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'38')*1, mode: \\\"formula\\\", path: \\\"/status/force/nordPool\\\", value: \\\"i[0] && ( i[1]<=r[0]*(1+i[2]/100) || i[1]<=i[3]/0.1/1.2 ) ? true : null\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/status/today/current\\\"}, {path: \\\"/setup/np/forcedOnPercentOfMin\\\"}, {path: \\\"/setup/np/forcedOn_UnderAbsValue\\\"}], read: [{path: \\\"/status/today/min\\\"}]}\"}}]},{\"enabled\":true,\"name\":\"onAdd - device - outputTarget - nord pool\",\"tag\":\"sys_onAdd_device_outputTarget_nordPool\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=*slowPwm,outputSet*&setup.nordPoolDeviceId&!ui.limitModes\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/status/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.devices.nordPoolOutputTarget.ui\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i1',[]).concat(item.get('status.ui.i1'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i2',[]).concat(item.get('status.ui.i2'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i3\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i3',[]).concat(item.get('status.ui.i3'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/limitModes\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.ui.limitModes')\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'31')*1, mode: \\\"formula\\\", path: \\\"/setup/min\\\", value: \\\"i[0] && i[1] && i[0]<i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/min\\\" }, { path: \\\"/min\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'32')*1, mode: \\\"formula\\\", path: \\\"/setup/max\\\", value: \\\"i[0] && i[1] && i[0]>i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/max\\\" }, { path: \\\"/max\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'33')*1, mode: \\\"copy\\\", path: \\\"/status/today/hours24Desc\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24Desc\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'34')*1, mode: \\\"copy\\\", path: \\\"/status/today/max\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/max\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'35')*1, mode: \\\"copy\\\", path: \\\"/status/today/min\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/min\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'36')*1, mode: \\\"formula\\\", path: \\\"/status/today/current\\\", value: \\\"i[0][i[1]]\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24\\\"}, {id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/hour\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'37')*1, mode: \\\"formula\\\", path: \\\"/status/today/blockCondition\\\", value: \\\"i[0] && i[6]>=(i[1]||0) && (i[2]=='percOfMax' && i[6]>i[4]*i[3]/100 || i[2]=='expHours' && i[6]>=i[5][i[3]-1]) ? true : false\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/setup/np/limitAbsNotLower\\\"}, {path: \\\"/setup/np/limitMode\\\"}, {path: \\\"/setup/np/limitValue\\\"}, {path: \\\"/status/today/max\\\"}, {path: \\\"/status/today/hours24Desc\\\"}, {path: \\\"/status/today/current\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'38')*1, mode: \\\"formula\\\", path: \\\"/status/today/countInRow\\\", value: \\\"i[0] ? (r[0]&&c==r[0] ? -1 : (c==-1||!c?0:c)+1) : 0\\\", nolog: null, items: [{path: \\\"/status/today/blockCondition\\\"}, {path: \\\"/status/hour\\\"}], read: [{path: \\\"/setup/np/limitHoursInRow\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'39')*1, mode: \\\"formula\\\", path: \\\"/status/nordPoolMax\\\", value: \\\"i[0]>0 && i[1]>=0 ? i[1] : null\\\", nolog: null, items: [{path: \\\"/status/today/countInRow\\\"}, {path: \\\"/setup/np/limitedTarget\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'40')*1, mode: \\\"formula\\\", path: \\\"/status/nordPoolMin\\\", value: \\\"i[0] && ( i[1]<=r[0]*(1+i[2]/100) || i[1]<=i[4]/0.1/1.2 ) ? i[3] : null\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/status/today/current\\\"}, {path: \\\"/setup/np/forcedOnPercentOfMin\\\"}, {path: \\\"/setup/np/forcedTarget\\\"}, {path: \\\"/setup/np/forcedOn_UnderAbsValue\\\"}], read: [{path: \\\"/status/today/min\\\"}]}\"}}]},{\"name\":\"onAdd - device - smoke detector in alarm\",\"tag\":\"sys_onAdd_device_smokeDetectorInAlarm\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*fireAlarm&status.active\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {lastFireAlarmTime: now.date('U')}};json}\",\"delay\":0}]},{\"name\":\"onAdd - device - smoke detector in alarm - request state\",\"tag\":\"sys_onAdd_device_smokeDetectorInAlarm_requestState\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*fireAlarm&status.alarmEnd&status.active\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {fireAlarmIds: {[item.get('id')]: true}}};json}\",\"delay\":0},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarmEnd\"}]}]},{\"name\":\"onAdd - device - remove attributes\",\"tag\":\"sys_onAdd_device_removeAttributes\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.korto.sendAllNow\",\"forTime\":1000},{\"op\":\"itemAdd\",\"url\":\"rooms?setup.korto.sendAllLastMonth\",\"forTime\":1000},{\"op\":\"itemAdd\",\"url\":\"devices?setup.manualSend\",\"forTime\":1000},{\"op\":\"itemAdd\",\"url\":\"devices?setup.manualSendLastMonth\",\"forTime\":1000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/korto/sendAllNow\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/korto/sendAllLastMonth\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/manualSend\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/manualSendLastMonth\"}]}]},{\"name\":\"onAdd - device - usageNotSet\",\"tag\":\"sys_onAdd_device_usageNotSet\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?!usage&!dev&!url&!parentId\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/warnings/usageNotSet\"}],\"value\":{\"type\":\"formula\",\"value\":\"'Usage not set'\"}}]},{\"name\":\"onAdd - device - usageSet\",\"tag\":\"sys_onAdd_device_usageSet\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage&status.warnings.usageNotSet\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/warnings/usageNotSet\"}]}]},{\"name\":\"onAdd - korto data - create site rule\",\"tag\":\"sys_onAdd_KortoRules\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.korto.buildingId\"},{\"op\":\"itemAdd\",\"url\":\"rooms?setup.korto.buildingId&updateKortoRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=rmKorto*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"RM - Korto - reading - tariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmKortoReadingTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/korto/buildingId\\\"}, {\\\"op\\\": \\\"equal\\\", \\\"id\\\": 2, \\\"path\\\": \\\"/status/day\\\", \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"1\\\"}}], \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"path\\\": \\\"/ui/readings/cacheTime\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&tariff&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://pro.korto.ee/api/enlife#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJFbkxpZmUiLCJpc3MiOiJLb3J0byBQcm8ifQ.uZzluVvdCnWAGSn4-ZyK0Slo5cjFP6XDXCQx5bkIB4Y\\\"}], \\\"body\\\": \\\"{{[item.get('setup.remoteId')]: {'buildingId': check[0].get('setup.korto.buildingId'), 'T1TotalActiveEnergy': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT1') : (item.get('status.counterT1')||item.get('ui.readings.cachedT1')), 'T2TotalActiveEnergy': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT2') : (item.get('status.counterT2')||item.get('ui.readings.cachedT2')), 'time': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.time') : now.date('YYYY-MM-DD[T]hh:mm:ss.SS[Z]')}};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"{now.date('U')}\\\"}}]}, {\\\"name\\\": \\\"RM - Korto - reading - send now tariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmKortoReadingSendNowTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/korto/buildingId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&tariff&setup.manualSend&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://pro.korto.ee/api/enlife#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJFbkxpZmUiLCJpc3MiOiJLb3J0byBQcm8ifQ.uZzluVvdCnWAGSn4-ZyK0Slo5cjFP6XDXCQx5bkIB4Y\\\"}], \\\"body\\\": \\\"{{[item.get('setup.remoteId')]: {'buildingId': check[0].get('setup.korto.buildingId'), 'T1TotalActiveEnergy': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT1') : (item.get('status.counterT1')||item.get('ui.readings.cachedT1')), 'T2TotalActiveEnergy': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT2') : (item.get('status.counterT2')||item.get('ui.readings.cachedT2')), 'time': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.time') : now.date('YYYY-MM-DD[T]hh:mm:ss.SS[Z]')}};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"{now.date('U')}\\\"}}, {\\\"op\\\": \\\"remove\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSend\\\"}, {\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSendLastMonth\\\"}]}]}, {\\\"name\\\": \\\"RM - Korto - reading - noTariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmKortoReadingNoTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/korto/buildingId\\\"}, {\\\"op\\\": \\\"equal\\\", \\\"id\\\": 2, \\\"path\\\": \\\"/status/day\\\", \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"1\\\"}}], \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"path\\\": \\\"/ui/readings/cacheTime\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&!tariff&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://pro.korto.ee/api/enlife#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJFbkxpZmUiLCJpc3MiOiJLb3J0byBQcm8ifQ.uZzluVvdCnWAGSn4-ZyK0Slo5cjFP6XDXCQx5bkIB4Y\\\"}], \\\"body\\\": \\\"{{[item.get('setup.remoteId')]: {'buildingId': check[0].get('setup.korto.buildingId'), 'counter': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.reading') : (item.get('status.counter')||item.get('ui.readings.cached')), 'time': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.time') : now.date('YYYY-MM-DD[T]hh:mm:ss.SS[Z]')}};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"{now.date('U')}\\\"}}]}, {\\\"name\\\": \\\"RM - Korto - reading - send now noTariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmKortoReadingSendNowNoTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/korto/buildingId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&!tariff&setup.manualSend&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://pro.korto.ee/api/enlife#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJFbkxpZmUiLCJpc3MiOiJLb3J0byBQcm8ifQ.uZzluVvdCnWAGSn4-ZyK0Slo5cjFP6XDXCQx5bkIB4Y\\\"}], \\\"body\\\": \\\"{{[item.get('setup.remoteId')]: {'buildingId': check[0].get('setup.korto.buildingId'), 'counter': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.reading') : (item.get('status.counter')||item.get('ui.readings.cached')), 'time': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.time') : now.date('YYYY-MM-DD[T]hh:mm:ss.SS[Z]')}};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"string\\\", \\\"value\\\": \\\"{now.date('U')}\\\"}}, {\\\"op\\\": \\\"remove\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSend\\\"}, {\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSendLastMonth\\\"}]} ]} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/updateKortoRules\"}]}]},{\"name\":\"onAdd - moderan data - create site rule\",\"tag\":\"sys_onAdd_ModeranRules\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.moderan.domainId&setup.moderan.apiKey&setup.moderan.setId\"},{\"op\":\"itemAdd\",\"url\":\"rooms?setup.moderan.domainId&setup.moderan.apiKey&setup.moderan.setId&updateModeranRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=rmModeran*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"RM - Moderan - reading - tariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmModeranReadingTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/moderan/setId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"path\\\": \\\"/ui/readings/cacheTime\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&tariff&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId'), 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT2') : (item.get('status.counterT2')||item.get('ui.readings.cachedT2'))};json}\\\"}, {\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId')+'P', 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT1') : (item.get('status.counterT1')||item.get('ui.readings.cachedT1'))};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"formula\\\", \\\"value\\\": \\\"now.date('YYYY-MM-DD')\\\"}} ]}, {\\\"name\\\": \\\"RM - Moderan - reading - send now tariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmModeranReadingSendNowTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/moderan/setId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&tariff&setup.manualSend&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId'), 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT2') : (item.get('status.counterT2')||item.get('ui.readings.cachedT2'))};json}\\\"}, {\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId')+'P', 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.readingT1') : (item.get('status.counterT1')||item.get('ui.readings.cachedT1'))};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"formula\\\", \\\"value\\\": \\\"now.date('YYYY-MM-DD')\\\"}}, {\\\"op\\\": \\\"remove\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSend\\\"}, {\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSendLastMonth\\\"}]} ]}, {\\\"name\\\": \\\"RM - Moderan - reading - noTariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"rmModeranReadingNoTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/moderan/setId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"path\\\": \\\"/ui/readings/cacheTime\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&!tariff&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId'), 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.reading') : (item.get('status.counter')||item.get('ui.readings.cached'))};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"formula\\\", \\\"value\\\": \\\"now.date('YYYY-MM-DD')\\\"}} ]}, {\\\"name\\\": \\\"RM - Moderan - reading - send now noTariff\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\": \\\"rmModeranReadingSendNowNoTariff\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"delRef\\\": item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", \\\"path\\\": \\\"/setup/moderan/setId\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?enabled&setup.remoteId&!tariff&setup.manualSend&siteId=\\\" + item.get('siteId')}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"https://www.moderan.net/api/domains/{check[0].get('setup.moderan.domainId')}/readingdumps#retry=240\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"71a22857-3322-4226-881a-83d5e77a395d\\\"}], \\\"body\\\": \\\"{{'date':now.date('YYYY-MM-DD'), 'meter': item.get('setup.remoteId'), 'set':{'id': check[0].get('setup.moderan.setId')}, 'reading': item.get('manualSendLastMonth') ? item.get('ui.readings.last1.reading') : (item.get('status.counter')||item.get('ui.readings.cached'))};json}\\\"}, {\\\"op\\\": \\\"set\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/ui/readings/sent\\\"}], \\\"value\\\": {\\\"type\\\": \\\"formula\\\", \\\"value\\\": \\\"now.date('YYYY-MM-DD')\\\"}}, {\\\"op\\\": \\\"remove\\\", \\\"items\\\": [{\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSend\\\"}, {\\\"id\\\": null, \\\"path\\\": \\\"/setup/manualSendLastMonth\\\"}]} ]} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"GET\",\"url\":\"https://www.moderan.net/api/domains/{item.get('setup.moderan.domainId')}/properties/0/distributionsets\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"{item.get('setup.moderan.apiKey')}\"}],\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"path\":\"/setup/propertyNames\"}]}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/updateModeranRules\"}]}]},{\"enabled\":true,\"name\":\"configuration - room - add climate mode follow\",\"tag\":\"sys_conf_room_addClimateModeFollow\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?climate.modes\"},{\"op\":\"itemAdd\",\"url\":\"rooms?climate.modes&forceClimateFollow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'10', mode: \\\"formula\\\", path: \\\"/climate/previousMode\\\", value: \\\"i[0]!='eco'&&r[0].pluck('name').includes('eco')?i[0]:c\\\", items: [{path: \\\"/climate/mode\\\"}], read: [{path: \\\"/climate/modes\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'12', mode: \\\"formula\\\", path: \\\"/setup/manualEco\\\", value: \\\"r[0].pluck('name').includes('eco')&&i[0]!='eco'?false:c\\\", items: [{path: \\\"/climate/mode\\\"}], read: [{path: \\\"/climate/modes\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'13', mode: \\\"formula\\\", path: \\\"/climate/normal\\\", value: \\\"i[0]?false:c\\\", items: [{path: \\\"/status/eco\\\"}] }\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceClimateFollow\"}]}]},{\"enabled\":true,\"name\":\"configuration - room - add climate temperature sensor follow\",\"tag\":\"sys_conf_room_addClimateTemperatureFollow\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?climate.temperatureSensors\",\"path\":\"(´/climate/temperatureSensors\"},{\"op\":\"itemAdd\",\"url\":\"rooms?climate.temperatureSensors&forceClimateTemperatureFollow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'21')*1, mode: \\\"avg\\\", path: \\\"/status/temperature\\\", items: item.get('climate.temperatureSensors'), multiplier: 1, step: 0.1 }\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceClimateTemperatureFollow\"}]}]},{\"enabled\":true,\"name\":\"configuration - room - add climate rh sensor follow\",\"tag\":\"sys_conf_room_addClimateRhFollow\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?climate.rhSensors\",\"path\":\"(´/climate/rhSensors\"},{\"op\":\"itemAdd\",\"url\":\"rooms?climate.rhSensors&forceClimateRhFollow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'22')*1, mode: \\\"avg\\\", path: \\\"/status/rh\\\", items: item.get('climate.rhSensors') }\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceClimateRhFollow\"}]}]},{\"enabled\":true,\"name\":\"configuration - room - add climate co2 sensor follow\",\"tag\":\"sys_conf_room_addClimateCo2Follow\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?climate.co2Sensors\",\"path\":\"(´/climate/co2Sensors\"},{\"op\":\"itemAdd\",\"url\":\"rooms?climate.co2Sensors&forceClimateCo2Follow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'23')*1, mode: \\\"avg\\\", path: \\\"/status/co2\\\", items: item.get('climate.co2Sensors') }\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceClimateCo2Follow\"}]}]},{\"enabled\":true,\"name\":\"configuration - room - add eco follow\",\"tag\":\"sys_conf_room_addEcoFollow\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?ids.ecoId\"},{\"op\":\"itemAdd\",\"url\":\"rooms?ids.ecoId&forceEcoFollow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('ids.ecoId'), mode: \\\"formula\\\", path: \\\"/status/eco\\\", value: \\\"i[0]?'manual':i[1]?'system':null\\\", items: [{path: \\\"/setup/manualEco\\\"}, {id: item.get('ids.ecoId'), path: \\\"/setup/output\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'0')*1, mode: \\\"formula\\\", path: \\\"/status/eco\\\", value: \\\"i[7]?c:i[0]?'manual':i[1]?'system':(i[3]<6||i[6])&&i[4]&&i[5]&&((i[4]>i[5]&&(i[2]>=i[4]||i[2]<i[5]))||(i[4]<i[5]&&i[2]>=i[4]&&i[2]<i[5]))?'scheduled':null\\\", items: [{path: \\\"/setup/manualEco\\\"}, {id: item.get('ids.ecoId'), path: \\\"/setup/output\\\"}, {id: item.get('nodeId',2), path: \\\"/status/time\\\"}, {id: item.get('nodeId',2), path: \\\"/status/weekDay\\\"}, {path: \\\"/setup/setpointEcoStart\\\"}, {path: \\\"/setup/setpointEcoStop\\\"}, {path: \\\"/setup/validOnWeekEnd\\\"}, {'path': \\\"/climate/normal\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: (item.get('created')+'1')*1, mode: \\\"formula\\\", path: \\\"/status/eco\\\", value: \\\"r[0].pluck('name').includes('eco')?(i[0]=='eco'?(r[1]?'manual':'system'):null):c\\\", items: [{path: \\\"/climate/mode\\\"}], read: [{path: \\\"/climate/modes\\\"}, {path: \\\"/setup/manualEco\\\"}] }\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceEcoFollow\"}]}]},{\"name\":\"onAdd - room - nord pool climate control\",\"tag\":\"sys_onAdd_room_nordPoolClimateControl\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.nordPoolDeviceId&!ui.limitModes\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/status/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.rooms.nordPoolClimateControl.ui\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i1',[]).concat(item.get('status.ui.i1'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i2',[]).concat(item.get('status.ui.i2'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i3\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ui.i3',[]).concat(item.get('status.ui.i3'))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/limitModes\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.ui.limitModes')\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'31')*1, mode: \\\"formula\\\", path: \\\"/setup/heatingNeedMin\\\", value: \\\"i[0] && i[1] && i[0]<i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/heatingNeedMin\\\" }, { path: \\\"/heatingNeedMin\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'32')*1, mode: \\\"formula\\\", path: \\\"/setup/heatingNeedMax\\\", value: \\\"i[0] && i[1] && i[0]>i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/heatingNeedMax\\\" }, { path: \\\"/heatingNeedMax\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'33')*1, mode: \\\"formula\\\", path: \\\"/setup/coolingNeedMin\\\", value: \\\"i[0] && i[1] && i[0]<i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/coolingNeedMin\\\" }, { path: \\\"/coolingNeedMin\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'34')*1, mode: \\\"formula\\\", path: \\\"/setup/coolingNeedMax\\\", value: \\\"i[0] && i[1] && i[0]>i[1] ? i[1] : c\\\", items: [{ path: \\\"/setup/coolingNeedMax\\\" }, { path: \\\"/coolingNeedMax\\\" }] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'35')*1, mode: \\\"copy\\\", path: \\\"/status/today/hours24Desc\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24Desc\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'36')*1, mode: \\\"copy\\\", path: \\\"/status/today/max\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/max\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'37')*1, mode: \\\"copy\\\", path: \\\"/status/today/min\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/min\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'38')*1, mode: \\\"formula\\\", path: \\\"/status/today/current\\\", value: \\\"i[0][i[1]]\\\", nolog: true, items: [{id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/today/hours24\\\"}, {id: item.get('setup.nordPoolDeviceId'), path: \\\"/status/hour\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'39')*1, mode: \\\"formula\\\", path: \\\"/status/today/blockCondition\\\", value: \\\"i[0] && i[6] && i[7]>=(i[1]||0) && (i[2]=='percOfMax' && i[7]>i[4]*i[3]/100 || i[2]=='expHours' && i[7]>=i[5][i[3]-1]) ? true : false\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/setup/np/limitAbsNotLower\\\"}, {path: \\\"/setup/np/limitMode\\\"}, {path: \\\"/setup/np/limitValue\\\"}, {path: \\\"/status/today/max\\\"}, {path: \\\"/status/today/hours24Desc\\\"}, {path: \\\"/climate/mode\\\"}, {path: \\\"/status/today/current\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'40')*1, mode: \\\"formula\\\", path: \\\"/status/today/countInRow\\\", value: \\\"i[0] ? (r[0]&&c==r[0] ? -1 : (c==-1||!c?0:c)+1) : 0\\\", nolog: null, items: [{path: \\\"/status/today/blockCondition\\\"}, {path: \\\"/status/hour\\\"}], read: [{path: \\\"/setup/np/limitHoursInRow\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'41')*1, mode: \\\"formula\\\", path: \\\"/status/heatingNeedMax\\\", value: \\\"i[0]>0 && i[1]>=0 && i[2]=='heating' ? i[1] : null\\\", nolog: null, items: [{path: \\\"/status/today/countInRow\\\"}, {path: \\\"/setup/np/heatingNeedMax\\\"}, {path: \\\"/status/climateActive\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'42')*1, mode: \\\"formula\\\", path: \\\"/status/coolingNeedMax\\\", value: \\\"i[0]>0 && i[1]>=0 && i[2]=='cooling' ? i[1] : null\\\", nolog: null, items: [{path: \\\"/status/today/countInRow\\\"}, {path: \\\"/setup/np/coolingNeedMax\\\"}, {path: \\\"/status/climateActive\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'43')*1, mode: \\\"formula\\\", path: \\\"/status/heatingNeedForce\\\", value: \\\"i[0] && i[3] && i[4]=='heating' && i[5] && ( i[1]<=r[0]*(1+i[2]/100) || i[1]<=i[6]/0.1/1.2 ) ? i[5] : null\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/status/today/current\\\"}, {path: \\\"/setup/np/forcedOnPercentOfMin\\\"}, {path: \\\"/climate/mode\\\"}, {path: \\\"/status/climateActive\\\"}, {path: \\\"/setup/np/forcedHeaterTarget\\\"}, {path: \\\"/setup/np/forcedOn_UnderAbsValue\\\"}], read: [{path: \\\"/status/today/min\\\"}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'44')*1, mode: \\\"formula\\\", path: \\\"/status/coolingNeedForce\\\", value: \\\"i[0] && i[3] && i[4]=='cooling' && i[5] && ( i[1]<=r[0]*(1+i[2]/100) || i[1]<=i[6]/0.1/1.2 ) ? i[5] : null\\\", nolog: null, items: [{path: \\\"/setup/nordPoolDeviceId\\\"}, {path: \\\"/status/today/current\\\"}, {path: \\\"/setup/np/forcedOnPercentOfMin\\\"}, {path: \\\"/climate/mode\\\"}, {path: \\\"/status/climateActive\\\"}, {path: \\\"/setup/np/forcedCoolerTarget\\\"}, {path: \\\"/setup/np/forcedOn_UnderAbsValue\\\"}], read: [{path: \\\"/status/today/min\\\"}]}\"}}]},{\"name\":\"onAdd - room - RM - sendCurrentReadings\",\"tag\":\"rmSendCurrentReadings\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"inherit\":[4]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":null,\"load\":[{\"op\":\"httpRequest\",\"method\":\"DELETE\",\"url\":\"http://127.0.0.1/rules?tag=rmKortoSendCurrentReadings\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}]}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.sendAllNow\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?enabled&setup.remoteId&siteId={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: {manualSend: true}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/sendAllNow\"}]}]},{\"name\":\"onAdd - room - RM - sendLastMonthReadings\",\"tag\":\"rmKortoSendLastMonthReadings\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"inherit\":[4]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"path\":\"/setup/korto/buildingId\"}],\"load\":[{\"op\":\"httpRequest\",\"method\":\"DELETE\",\"url\":\"http://127.0.0.1/rules?tag=rmKortoSendLastMonthReadings\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}]}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setup.sendAllLastMonth\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?enabled&setup.remoteId&siteId={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{setup: {manualSendLastMonth: true, manualSend: true}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/sendAllLastMonth\"}]}]},{\"name\":\"onAdd - room - set climate control\",\"tag\":\"sys_onAdd_room_climateControl\",\"remarks\":\"NB! changed by climate.js rule migration function\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?climateControl\"},{\"op\":\"itemAdd\",\"url\":\"rooms?climateControl&forceClimateControlModesAndUiAndSetupAndSetToNormalMode\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/climate\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.rooms.climateControl.climate\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('climate.heaters',[]).length && item.get('climate.coolers',[]).length ? check[0].get('templates.rooms.climateControl.ui') : item.get('climate.heaters',[]).length ? check[0].get('templates.rooms.climateControl.uiHeating') : check[0].get('templates.rooms.climateControl.uiCooling')\"}}]},{\"name\":\"onCreate - securityArea - add follow\",\"tag\":\"sys_onCreate_securityArea_addFollow\",\"remarks\":\"status.armMode position number shows which mode will be armed and will be removed after that\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"securityAreas\"},{\"op\":\"itemAdd\",\"url\":\"securityAreas?forceCreate\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'0')*1, mode: 'on', path: '/status/online', nolog: true, items: [{id: item.get('id'), path: 'id'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'1')*1, mode: 'formula', path: '/status/armed', value: 'r[0]&&i[0]>=0&&r[1][i[0]].name?r[1][i[0]].name:c', items: [{path: '/status/armMode'}], read: [{id: item.get('siteId'), path: '/setup/onLeaveArm'}, {path: '/modes'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'2')*1, mode: 'formula', path: '/status/armModeIndex', value: \\\"r[0].pluck('name').indexOf(i[0])\\\", items: [{path: '/status/armed'}], read: [{path: '/modes'}]}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreate\"}]}]},{\"name\":\"onAdd - room - sipRoom intercom\",\"tag\":\"sys_onAdd_site_sipRoom\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.rooms.sipRoom.ui\"}}]},{\"name\":\"onAdd - site - some fire alarm detectors still active\",\"tag\":\"sys_onAdd_site_smokeDetectorInAlarm\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.fireAlarmIds&status.alarms.alarm24-status-fireAlarm.end\",\"forTime\":1000}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/status/alarms\"}],\"value\":{\"type\":\"formula\",\"value\":\"{fireAlarm: {start: now.date('U'), tpl: \\\"{_('Some fire alarm detectors still active')}\\\", type: 'message'}}\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=shuntTripControl&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: true}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.climate[]=airHandlingUnit*&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?(usage.output[]=socket,saunaHeater,recirculationPump|usage.generic[]=evCharger|usage.climate[]=ventilator)&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {output: false}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeRemoval&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {closeCommand: true, smokeAlarmBlock: true}};json}\",\"delay\":0}]},{\"name\":\"onCreate - site - create READINGS REPORT CHANNELS room\",\"tag\":\"sys_onCreate_site_readingsReportChannelsRoom\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?usage.remoteMeterType\"},{\"op\":\"itemAdd\",\"url\":\"sites?usage.remoteMeterType&forceReadingsReportChannelsRoom\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?tag=channelsRoom&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"vendorId\\\": item.get('vendorId'), \\\"buildingId\\\": item.get('buildingId'), \\\"name\\\": \\\"📧 READINGS REPORT CHANNELS\\\", \\\"tag\\\": \\\"channelsRoom\\\", \\\"nodeId\\\": 2, \\\"enabled\\\":true, \\\"acl\\\": {\\\"inherit\\\": null, \\\"policy\\\":[{\\\"who\\\": [4],\\\"acl\\\": 7}, {\\\"who\\\":[item.get('ids.technicianRoleId'), item.get('ids.buildingManagerRoleId'), item.get('ids.siteManagerRoleId')], \\\"acl\\\":9241}]}, \\\"ui\\\": check[0].get('templates.rooms.readingsReportChannelsRoom.ui')} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceReadingsReportChannelsRoom\"}]}]},{\"name\":\"onCreate - site - create securityArea vol1\",\"tag\":\"sys_onCreate_site_createSecurityArea_vol1\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?type=apartment,house,building\"},{\"op\":\"itemAdd\",\"url\":\"sites?forceCreateSecArea\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/securityAreas?siteId={item.get('id')}&tag=sysSecArea&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ { \\\"tag\\\": \\\"sysSecArea\\\", \\\"nodeId\\\": item.get('nodeId')||2, \\\"enabled\\\": true, \\\"ref\\\": item.get('id'), \\\"name\\\": \\\"Home security\\\", \\\"modes\\\": [ { \\\"name\\\": item.get('lang','en')=='et'?'EEMAL':'AWAY', \\\"exitDelay\\\": 60000, \\\"devices\\\": [] }, { \\\"name\\\": item.get('lang','en')=='et'?'KOHAL':'STAY', \\\"exitDelay\\\": 3000, \\\"devices\\\": [] } ], \\\"ui\\\": { \\\"i1\\\": [\\\"status.armed#mode\\\", \\\"status.exitDelay#{value?_('in exit delay'):''}\\\", \\\"status.entryDelay#{value?_('in entry delay'):''}\\\" ], \\\"icon\\\": \\\"secarea\\\", } } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateSecArea\"}]}]},{\"name\":\"onAdd - site - create securityArea vol2 (update ui.i4)\",\"tag\":\"sys_onCreate_site_createSecurityArea_vol2\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"securityAreas?tag=sysSecArea\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/i4\"}],\"value\":{\"type\":\"formula\",\"value\":\"['status.arm#icon#Security log#seclog####logs#model='+item.get('id')+'&key=security']\"}}]},{\"name\":\"onCreate - site - get room template eeK_wl\",\"tag\":\"sys_onCreate_site_getRoomTmpl_eeK_wl\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?tmpl=eeK_wl\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/templateRooms\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.layouts.eeK_wl\"}}]},{\"name\":\"onCreate - site - get room template ee1BK_wl_rep\",\"tag\":\"sys_onCreate_site_getRoomTmpl_ee1BK_wl_rep\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?tmpl=ee1BK_wl_rep\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/templateRooms\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.layouts.ee1BK_wl_rep\"}}]},{\"name\":\"onCreate - site - get room template ee1BK_wl\",\"tag\":\"sys_onCreate_site_getRoomTmpl_ee1BK_wl\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?tmpl=ee1BK_wl\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/templateRooms\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.layouts.ee1BK_wl\"}}]},{\"name\":\"onCreate - site - get room template ee2BK_wl_rep\",\"tag\":\"sys_onCreate_site_getRoomTmpl_ee2BK_wl_rep\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?tmpl=ee2BK_wl_rep\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/templateRooms\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.layouts.ee2BK_wl_rep\"}}]},{\"name\":\"onAdd - site - create template rooms\",\"tag\":\"sys_onAdd_site_templateRooms_create\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?templateRooms\",\"forTime\":3000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?tag=tmpl*&$by=name\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{item.get('templateRooms');json}\"}]},{\"name\":\"onAdd - site - operatorSite vol1\",\"tag\":\"sys_onAdd_site_operatorSiteVol1\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"sites\",\"path\":\"/operatorSiteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('operatorSiteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{operatedSiteIds: {[item.get('id')]: item.get('operatorSiteId')?true:null}};json}\",\"delay\":2700},{\"remarks\":\"remove role id on operator removal\",\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ids/operatorAdministratorRoleId\"}],\"value\":{\"type\":\"formula\",\"value\":\"!item.get('operatorSiteId')?null:item.get('ids.operatorAdministratorRoleId')\"}},{\"remarks\":\"remove role id on operator removal\",\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ids/operatorCleanerRoleId\"}],\"value\":{\"type\":\"formula\",\"value\":\"!item.get('operatorSiteId')?null:item.get('ids.operatorCleanerRoleId')\"}}]},{\"name\":\"onAdd - site - operatorSite vol2\",\"tag\":\"sys_onAdd_site_operatorSiteVol2\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?operatedSiteIds\",\"path\":\"/operatedSiteIds\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/operatedSites\"}],\"value\":{\"type\":\"formula\",\"value\":\"Object.keys(item.get('operatedSiteIds')).map(n=>n*1)\"}}]},{\"name\":\"onAdd - site - operatorSite vol3\",\"tag\":\"sys_onAdd_site_operatorSiteVol3\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"sites\",\"path\":\"/operatedSites\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?operatorSiteId={item.get('id')}|id={item.get('operatedSites',0)}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {operatedSitesInfo: {ids: {operatorAdministratorRoleId: item.get('ids.operatorAdministratorRoleId'), operatorCleanerRoleId: item.get('ids.operatorCleanerRoleId')}, operatorSiteId: item.get('id')}, operatedSitesCompared:  item.get('operatedSites') }};json}\"}]},{\"name\":\"onAdd - site - operatorSite vol4\",\"tag\":\"sys_onAdd_site_operatorSiteVol4\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.operatedSitesInfo\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ids\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.operatedSitesCompared').includes(item.get('id'))?item.get('status.operatedSitesInfo.ids'):null\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/operatorSiteId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.operatedSitesCompared').includes(item.get('id'))?item.get('status.operatedSitesInfo.operatorSiteId'):null\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/operatedSitesInfo\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/operatedSitesCompared\"}]}]},{\"name\":\"onCreate - site apartment - update site and create roles\",\"tag\":\"sys_onCreate_site_apartment_base\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?number&type=apartment,sharedProperty\"},{\"op\":\"itemAdd\",\"url\":\"sites?number&type=apartment,sharedProperty&ids.technicianRoleId&ids.siteManagerRoleId&ids.siteHabitantRoleId\",\"forTime\":2500},{\"op\":\"itemAdd\",\"url\":\"sites?number&type=apartment,sharedProperty&ids.operatorAdministratorRoleId&ids.operatorCleanerRoleId\",\"forTime\":2500},{\"op\":\"itemChange\",\"url\":\"sites?number&type=apartment,sharedProperty\",\"path\":\"/name\"},{\"op\":\"itemAdd\",\"url\":\"sites?number&type=apartment,sharedProperty&forceUpdateUiAndRoles\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.apartment.ui\"}},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/roles?number={item.get('number')}&tag=site*Role,allSiteRoles&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {name: item.get('name') + \\\" {_('home managers')}\\\", tag: \\\"siteManagerRole\\\", \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('habitants')}\\\", tag: \\\"siteHabitantRole\\\", \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('building managers')} - \\\" + item.get('name'), tag: \\\"siteBuildingManagerRole\\\", roleIds: [item.get('ids.buildingManagerRoleId')], ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('operator')} - \\\" + item.get('name'), tag: \\\"siteOperatorAdministratorRole\\\", roleIds: [item.get('ids.operatorAdministratorRoleId')], ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('operator\\\\\\\\’s')} {_('cleaners')} - \\\" + item.get('name'), tag: \\\"siteOperatorCleanerRole\\\", roleIds: [item.get('ids.operatorCleanerRoleId')], ui:{\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('technicians')} - \\\" + item.get('name'), tag: \\\"siteTechnicianRole\\\", roleIds: [item.get('ids.technicianRoleId')], ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('security and rescue 112')} - \\\" + item.get('name'), tag: \\\"siteSecurityAndResqueRole\\\", roleIds: [item.get('ids.securityAndResqueRoleId')], ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('cleaners')}\\\", tag: \\\"siteCleanerRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: \\\"🏢 {_('Building')} {_('service contractors')} - \\\" + item.get('name'), tag: \\\"siteServiceContractorRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('guests')}\\\", tag: \\\"siteGuestRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('financial info receivers')}\\\", tag: \\\"siteFinancialInfoRole\\\", roleIds: [item.get('ids.siteManagerRoleId')], \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('all roles')}\\\", tag: \\\"allSiteRoles\\\", roleIds: [item.get('ids.siteManagerRoleId'), item.get('ids.siteHabitantRoleId'), item.get('ids.siteBuildingManagerRoleId'), item.get('ids.siteTechnicianRoleId'), item.get('ids.siteSecurityAndResqueRoleId'), item.get('ids.siteCleanerRoleId'), item.get('ids.siteServiceContractorRoleId'), item.get('ids.siteGuestRoleId'), item.get('ids.siteFinancialInfoRoleId'), item.get('ids.siteOperatorAdministratorRoleId'), item.get('ids.siteOperatorCleanerRoleId')], \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]}]},{\"name\":\"onCreate - site building - not house - update site, create roles, nordPool\",\"tag\":\"sys_onCreate_site_buildingNotHouse_base\",\"remarks\":\"delay creating roles to let first tagged rooms be created and then share role ids to them\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type!=house\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type!=house&ids.buildingManagerRoleId&ids.technicianRoleId&ids.vendorTechnicianRoleId\",\"forTime\":2500},{\"op\":\"itemChange\",\"url\":\"sites?category=building&type!=house\",\"path\":\"/name\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type!=house&forceUpdateUiAndRoles\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.buildingNotHouse.ui\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/newSite\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.buildingNotHouse.newSite\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/buildingId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('id')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/roles?tag=buildingManagerRole,technicianRole,buildingFinancialInfoRole,securityAndResqueRole,buildingTechnicianRole,buildingCleanerRole,buildingServiceContractorRole,all*Roles&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {name: item.get('name') + \\\" {_('building managers')}\\\", tag: \\\"buildingManagerRole\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('maintenance partners')}\\\", tag: \\\"technicianRole\\\", roleIds: [item.get('ids.vendorTechnicianRoleId')], enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('financial info receivers')}\\\", tag: \\\"buildingFinancialInfoRole\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('security and rescue 112')}\\\", tag: \\\"securityAndResqueRole\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('building')}\\\"+\\\" {_('technicians')}\\\", tag: \\\"buildingTechnicianRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, roleIds: [item.get('ids.technicianRoleId')], enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('cleaners')}\\\", tag: \\\"buildingCleanerRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('service contractors')}\\\", tag: \\\"buildingServiceContractorRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('all roles')}\\\", tag: \\\"allSiteRoles\\\", roleIds: [item.get('ids.buildingManagerRoleId'), item.get('ids.technicianRoleId'), item.get('ids.buildingFinancialInfoRoleId'), item.get('ids.securityAndResqueRoleId'), item.get('ids.buildingTechnicianRoleId'), item.get('ids.buildingCleanerRoleId'), item.get('ids.buildingServiceContractorRoleId')], \\\"number\\\": item.get('number'), enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('all sites all roles')}\\\", tag: \\\"allSitesAllRoles\\\", roleIds: [item.get('ids.allSiteRolesId')], enabled: true, delRef: item.get('id')} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?tag=nordPool*&siteId=3\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{addToBuildingSiteId: item.get('id')};json}\"}]},{\"name\":\"onCreate - site building - house - update site and create roles, nordPool\",\"tag\":\"sys_onCreate_site_buildingHouse_base\",\"remarks\":\"delay creating roles to let first tagged rooms be created and then share role ids to them\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type=house\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type=house&ids.siteManagerRoleId&ids.siteHabitantRoleId&ids.vendorTechnicianRoleId\",\"forTime\":2500},{\"op\":\"itemChange\",\"url\":\"sites?category=building&type=house\",\"path\":\"/name\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type=house&forceUpdateUiAndRoles\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.buildingHouse.ui\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/buildingId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('id')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/roles?tag=siteManagerRole,siteHabitantRole,technicianRole,securityAndResqueRole,siteCleanerRole,siteServiceContractorRole,siteGuestRole,siteFinancialInfoRole,allSiteRoles&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {name: item.get('name') + \\\" {_('home managers')}\\\", tag: \\\"siteManagerRole\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('habitants')}\\\", tag: \\\"siteHabitantRole\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('maintenance partners')}\\\", tag: \\\"technicianRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, roleIds: [item.get('ids.vendorTechnicianRoleId')], enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('security and rescue 112')}\\\", tag: \\\"securityAndResqueRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('cleaners')}\\\", tag: \\\"siteCleanerRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('service contractors')}\\\", tag: \\\"siteServiceContractorRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('guests')}\\\", tag: \\\"siteGuestRole\\\", ui: {\\\"i1\\\": [\\\"enabled#onoff\\\"]}, enabled: true, delRef: item.get('id')}, {name: item.get('name')+\\\" {_('financial info receivers')}\\\", tag: \\\"siteFinancialInfoRole\\\", roleIds: [item.get('ids.siteManagerRoleId')], enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('all roles')}\\\", tag: \\\"allSiteRoles\\\", roleIds: [item.get('ids.siteManagerRoleId'), item.get('ids.siteHabitantRoleId'), item.get('ids.technicianRoleId'), item.get('ids.securityAndResqueRoleId'), item.get('ids.siteCleanerRoleId'), item.get('ids.siteServiceContractorRoleId'), item.get('ids.siteGuestRoleId'), item.get('ids.siteFinancialInfoRoleId')], enabled: true, delRef: item.get('id')} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?tag=nordPool*&siteId=3\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{addToBuildingSiteId: item.get('id')};json}\"}]},{\"name\":\"onCreate - site building - create Ilmateenistus info pull rule vol1\",\"tag\":\"sys_onCreate_site_building_createIlmateenistusRuleVol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&buildingId&ids.weatherId&weather.service=ilmateenistus&weather.city\"},{\"op\":\"itemChange\",\"url\":\"sites?category=building&buildingId&ids.weatherId&weather.service=ilmateenistus&weather.city\",\"path\":\"/weather/city\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_weather_ilmateenistus&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"Weather by Ilmateenistus - get info\\\", \\\"buildingId\\\": item.get('buildingId'), \\\"nodeId\\\":2, \\\"tag\\\": \\\"sysSite_weather_ilmateenistus\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"change\\\", id: 2, path: \\\"/status/hour\\\"}], \\\"then\\\": \\t[{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"GET\\\", \\\"url\\\": \\\"http://172.17.5.162/rooms?tag=ilmateenistus\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"responseHandler\\\": [ {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/temperature\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".airTemperature\\\"}]}, {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/rh\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".airHumidity\\\"}]}, {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/waterTemperature\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".waterTemperature\\\"}]}, {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/waterLevel_eh2000\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".waterLevel_eh2000\\\"}]}, {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/windSpeed\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".windSpeed\\\"}]}, {\\\"op\\\": \\\"set\\\", items: [{id: item.get('ids.weatherId'), path: \\\"/status/windDirection\\\", \\\"query\\\": \\\"0.status.weather.\\\" + item.get('weather.city') + \\\".windDirection\\\"}]}], \\\"delay\\\": 660000 }], }];json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/devices?tag=weather\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'weather: { 'service': item.get('weather.service'), 'city': item.get('weather.city')}};json}\"}]},{\"name\":\"onCreate - site building - create Ilmateenistus info pull rule vol2\",\"tag\":\"sys_onCreate_site_building_createIlmateenistusRuleVol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rules?tag=sysSite_weather_ilmateenistus\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/load\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{op: 'executeRule', rules: [item.get('id')]}]\"}}]},{\"name\":\"onCreate - site building - create weather device\",\"tag\":\"sys_onCreate_site_building_createWeatherDevice\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&weather.service&weather.city\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/devices?tag=weather&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"roomId\\\": item.get('id'), \\\"weather\\\": {'service': item.get('weather.service'), 'city': item.get('weather.city')}, \\\"enabled\\\": true, \\\"name\\\": item.get('weather.city').charAt(0).toUpperCase() + item.get('weather.city').slice(1) + ' ' + \\\"{_('weather')}\\\", \\\"tag\\\": \\\"weather\\\", \\\"type\\\": \\\"generic\\\", \\\"usage\\\": {\\\"generic\\\": [\\\"weather\\\"]}, \\\"ui\\\": {\\\"icon\\\":\\\"temp\\\", \\\"i1\\\": [\\\"status.temperature#i.temp1###ts2\\\", \\\"status.rh#i.rhE###ts2\\\"], \\\"i2\\\":null, \\\"i3\\\": [\\\"weather.service#{value?value.charAt(0).toUpperCase() + value.slice(1):''}#{value?'Service':''}\\\", \\\"weather.city#{value?value.toUpperCase():''}#{value?'City':''}\\\", \\\"status# #Info##bold\\\", \\\"status.temperature#i.temp1#Temperature##indent\\\", \\\"status.rh#i.rh#Relative humidity##indent\\\", \\\"status.waterTemperature#i.temp1#Water temperature##indent\\\", \\\"status.windSpeed,status.windDirection#{i[0]||'-'} m/s {['','N','NE','E','SE','S','SW','W','NW','N'][((i[1]+45)/45).step(1)]}#Wind##indent\\\", \\\"status.waterLevel_eh2000#{i[0]!==''?(i[0]||'-')+' cm':''}#{i[0]!==''?_('Water level')+' EH2000':''}##indent\\\"]}, \\\"follow\\\": [{mode: \\\"\\\", path: \\\"/status/online\\\", items: [{id: 3,path: \\\"/id\\\"}]}]} ];json}\"}]},{\"name\":\"onCreate - site project - update site and create roles\",\"tag\":\"sys_onCreate_site_project_base\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=project\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=project&forceUpdateUiAndRoles\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.project.ui\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/newBuilding\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.project.newBuilding\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/projectId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('id')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]}]},{\"name\":\"onCreate - site vendor - update site and create roles\",\"tag\":\"sys_onCreate_site_vendor_base\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=vendor\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=vendor&ids.vendorAdministratorRoleId&ids.vendorTechnicianRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=vendor&forceUpdateUiAndRoles\"},{\"op\":\"itemChange\",\"url\":\"sites?category=vendor\",\"path\":\"/ids/vendorAdministratorRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=vendor\",\"path\":\"/ids/vendorTechnicianRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=vendor\",\"path\":\"/name\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.vendor.ui\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/newProject\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.vendor.newProject\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/vendorId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('id')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/roles?tag=vendor*Role,allSiteRoles&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {name: item.get('name') + \\\" - {_('technicians role')}\\\", tag: \\\"vendorTechnicianRole\\\", category: \\\"user\\\", roleIds: [item.get('ids.vendorAdministratorRoleId')], acl: {inherit: [item.get('id')], policy: [{who: [item.get('ids.vendorAdministratorRoleId')], acl:8315}] }, enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" - {_('administrators')}\\\", \\\"tag\\\": \\\"vendorAdministratorRole\\\", \\\"category\\\": \\\"siteAdmin\\\", acl: {inherit: [item.get('id')], policy: [{who: [item.get('ids.vendorAdministratorRoleId')], acl:8315}]}, enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" {_('all roles')}\\\", tag: \\\"allSiteRoles\\\", roleIds: [item.get('ids.vendorTechnicianRoleId'), item.get('ids.vendorAdministratorRoleId')], enabled: true, delRef: item.get('id')} ];json}\"}]},{\"name\":\"onCreate - site operator - update site and create roles\",\"tag\":\"sys_onCreate_site_operator_base\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=operator\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=operator&ids.operatorAdministratorRoleId&ids.operatorCleanerRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=operator&forceUpdateUiAndRoles\"},{\"op\":\"itemChange\",\"url\":\"sites?category=operator\",\"path\":\"/ids/operatorAdministratorRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=operator\",\"path\":\"/ids/operatorCleanerRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=operator\",\"path\":\"/name\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.sites.operator.ui\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/operatorId\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('id')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/roles?tag=operator*Role,allSiteRoles&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {name: item.get('name') + \\\" - {_('cleaners')}\\\", tag: \\\"operatorCleanerRole\\\", category: \\\"user\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name') + \\\" - {_('administrators')}\\\", tag: \\\"operatorAdministratorRole\\\", category: \\\"siteAdmin\\\", enabled: true, delRef: item.get('id')}, {name: item.get('name') +\\\" {_('all roles')}\\\", tag: \\\"allSiteRoles\\\", roleIds: [item.get('ids.operatorCleanerRoleId'), item.get('ids.operatorAdministratorRoleId')], enabled: true, delRef: item.get('id')} ];json}\"}]},{\"name\":\"onAdd - security - force 24h arming after timeout - co\",\"tag\":\"sys_security_forceArm_24h_afterTimeout_co\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerCo\",\"forTime\":14400000}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/removePowerCo\"}]}]},{\"name\":\"onAdd - security - force 24h arming after timeout - gas\",\"tag\":\"sys_security_forceArm_24h_afterTimeout_gas\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerGas\",\"forTime\":14400000}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/removePowerGas\"}]}]},{\"name\":\"onAdd - security - force 24h arming after timeout - fire\",\"tag\":\"sys_security_forceArm_24h_afterTimeout_fire\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerSmoke\",\"forTime\":14400000}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/removePowerSmoke\"}]}]},{\"name\":\"onAdd - security - force 24h arming after timeout - water\",\"tag\":\"sys_security_forceArm_24h_afterTimeout_water\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerWater\",\"forTime\":14400000}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/removePowerWater\"}]}]},{\"name\":\"onCreate - device - 24h security detector power follow\",\"tag\":\"sys_onCreate_device_24hSecurityDetectorPowerFollow\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=*DetectorPower\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=*DetectorPower&forceAddFollow\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, path: '/status/powerOffTime', mode: 'formula', value: \\\"!i[0]?now.date('U'):null\\\", items: [{path: '/status/power'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, path: '/status/power', mode: 'formula', value: \\\"r[0]&&now.date('U')-r[0]>=14400000?true:c\\\", items: [{id: 2, path: '/status/time'}, ], read: [{path: '/status/powerOffTime'}]}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceAddFollow\"}]}]},{\"name\":\"onCreate - device - add to new room array and remove from previous room array Vol1\",\"remarks\":\"non-matching (previous) rooms\",\"tag\":\"sys_onCreate_device_addToNewRoomArrayAndRemoveFromPreviousRoomArrayVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.roomCheck&id!=@status.roomCheck.roomId\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/remove\"}],\"value\":{\"type\":\"formula\",\"value\":\"{[item.get('status.roomCheck.key')]: item.get('status.roomCheck.item')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/roomCheck\"}]}]},{\"name\":\"onCreate - device - add to new room array and remove from previous room array Vol2\",\"remarks\":\"matching (new) room\",\"tag\":\"sys_onCreate_device_addToNewRoomArrayAndRemoveFromPreviousRoomArrayVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.roomCheck&id=@status.roomCheck.roomId\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/add\"}],\"value\":{\"type\":\"formula\",\"value\":\"{[item.get('status.roomCheck.key')]: item.get('status.roomCheck.item')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/roomCheck\"}]}]},{\"name\":\"onCreate - device - access_conlan\",\"tag\":\"sys_onCreate_device_access_conlan\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?conf[]={dType=access_Conlan}\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'01', invertedPath: \\\"/status/greenLed\\\", items: [{path: \\\"/status/locked\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'02', path: \\\"/status/redLed\\\", items: [{path: \\\"/status/open\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'03', invertedPath: \\\"/status/open\\\", items: [{path: \\\"/status/input1\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ id: item.get('created')+'04', path: \\\"/status/switch\\\", items: [{path: \\\"/status/input2\\\"}] }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/onDenied\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: item.get('created')+'01', op: 'turnOn', 'items': [{id: item.get('id'), path: '/status/redLed'}, {id: item.get('id'), path: '/status/buzzer'}], 'time': 1000}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/onDenied\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: item.get('created')+'02', op: 'set', 'items': [{id: item.get('id'), path: '/status/unknown'}], 'value': {type: 'string', 'value': '{ card }'}, 'time': 3600000}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/onDenied\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: item.get('created')+'03', op: 'set', items: [{id: item.get('id'), path: '/status/unknownTime'}], value: {type: 'string', value: \\\"{ now.date('U') }\\\"}, time: 3600000}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/onDenied\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: item.get('created')+'04', op: 'sendmail', to: [{type: 'role'}], subject: 'Võõras kaart `{card}`', text: 'Sisestati `{card}`, mis ütles `{reason}`\\\\n\\\\n\\\\nParimat,\\\\nAGATARK nutirobot!\\\\n\\\\nAGATARK by EnLife\\\\nwww.agatark.ee' }\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/onGranted\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: item.get('created')+'01', op: 'turnOff', 'items': [{id: item.get('id'), 'path': '/status/redLed'}, {id: item.get('id'), 'path': '/status/buzzer'}]}\"}}]},{\"name\":\"onCreate - device - airHandlingUnit - create ventilationRoom\",\"tag\":\"sys_onCreate_device_airHandlingUnit_createVentRoom\",\"remarks\":\"creates ventilation room for end user. after tag=ventilationRoom room is created, follow and setpoints are added\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=airHandlingUnit*\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=airHandlingUnit*&forceCreateVentilationRoom\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?tag=ventilationRoom&sourceId={item.get('id')}&$by=sourceId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {enabled: true, name: item.get('name'), sourceId: item.get('id'), nodeId: item.get('nodeId',2), minSpeed: item.get('usage.climate').includes('airHandlingUnitStep')?null:20, covidAddOn: 19.99, sourceType: item.get('type'), category: 'ventilation', tag: 'ventilationRoom', fanSteps: item.get('usage.climate').includes('airHandlingUnitStep')?item.get('fanSteps',3):null, forClient: true, ui: check[0].get('templates.rooms.ventilationRoom.ui') } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateVentilationRoom\"}]}]},{\"name\":\"onCreate - device - co2 - vol1\",\"tag\":\"sys_onCreate_device_co2_vol1\",\"remarks\":\"sends device id to site ventilation device list for AHU list and creates ventilationNeedCo2 rule\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=co2\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=co2&forceAddVentCo2\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climateSensor[]=co2\",\"path\":\"/name\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {\\\"addVentSensorCo2\\\": item.get('id')}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=ventilationNeedCo2_{item.get('id')}&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"enabled\\\": true, \\\"name\\\": \\\"Ventilation need - CO2 - \\\" + item.get('name'), \\\"type\\\": \\\"calculator\\\", \\\"input\\\": {\\\"method\\\": \\\"avg\\\", items: [{id: item.get('id'), path: \\\"/status/co2\\\"}]}, \\\"output\\\": {\\\"method\\\": \\\"pid\\\", \\\"min\\\": 0, \\\"max\\\": 100, \\\"p\\\": -0.1, \\\"t\\\": 60000, \\\"setpoint\\\": {id: item.get('siteId'), path: \\\"/co2Setpoint\\\"}, items: [{id: item.get('id'), path: \\\"/status/ventilationNeedCo2\\\"}], \\\"i\\\": -1, \\\"d\\\": 0, \\\"iMax\\\": -30, \\\"step\\\": 1}, \\\"category\\\": \\\"climate\\\", \\\"ui\\\": {\\\"icon\\\": \\\"co2\\\"}, \\\"tag\\\": \\\"ventilationNeedCo2_\\\"+item.get('id'), delRef: item.get('id')} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceAddVentCo2\"}]}]},{\"name\":\"onCreate - device - co2 - vol2\",\"tag\":\"sys_onCreate_device_co2_vol2\",\"remarks\":\"sends device id and path to AHU for linkedDevices and max ventilationNeed calculation\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.addVentSensorCo2\"},{\"op\":\"itemChange\",\"url\":\"sites?status.addVentSensorCo2\",\"path\":\"status.addVentSensorCo2\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/ventilation/co2Ids\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.addVentSensorCo2')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/addVentSensorCo2\"}]}]},{\"name\":\"onCreate - device - co2 - vol3\",\"tag\":\"sys_onCreate_device_co2_vol3\",\"remarks\":\"sends device id and path to AHU for linkedDevices and max ventilationNeed calculation\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ventilation.co2Ids\"},{\"op\":\"itemChange\",\"url\":\"sites?ventilation.co2Ids\",\"path\":\"/ventilation/co2Ids\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ventilation/status/ventilationNeedCo2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ventilation.co2Ids').map(n=>({id:n,path:'/status/ventilationNeedCo2'}))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ventilation/status/co2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ventilation.co2Ids').map(n=>({id:n,path:'/status/co2'}))\"}}]},{\"enabled\":true,\"name\":\"onCreate - device - co2 sensor - room sensors Vol1\",\"tag\":\"sys_onCreate_device_co2SensorsVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=co2\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climateSensor[]=co2\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=co2&forceToRoomClimateCo2Sensors\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?!tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {roomCheck: {roomId: item.get('createDevices.io.roomId'), key: 'co2Sensor', item: {'id': item.get('id'), 'path':'/status/co2'}}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceToRoomClimateCo2Sensors\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - co2 sensor - room sensors Vol2\",\"remarks\":\"add to array\",\"tag\":\"sys_onCreate_device_co2SensorsVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.add.co2Sensor\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/climate/co2Sensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.add.co2Sensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/add/co2Sensor\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - co2 sensor - room sensors Vol3\",\"remarks\":\"remove from array when moved to another room\",\"tag\":\"sys_onCreate_device_co2SensorsVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.remove.co2Sensor\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/climate/co2Sensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.remove.co2Sensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/remove/co2Sensor\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - cooler - room coolers Vol1\",\"tag\":\"sys_onCreate_device_roomCoolersVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=coolerElectrical,coolerValve,fanCoil\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climate[]=coolerElectrical,coolerValve,fanCoil\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=coolerElectrical,coolerValve,fanCoil&forceToRoomClimateCoolers\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?!tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {roomCheck: {roomId: item.get('createDevices.io.roomId'), key: 'cooler', item: {'id': item.get('id'), 'path':'/status/target'}}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceToRoomClimateCoolers\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - cooler - room coolers Vol2\",\"remarks\":\"add to room coolers\",\"tag\":\"sys_onCreate_device_roomCoolersVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.add.cooler\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/climate/coolers\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.add.cooler')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/add/cooler\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - cooler - room coolers Vol3\",\"remarks\":\"remove from room coolers\",\"tag\":\"sys_onCreate_device_roomCoolersVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.remove.cooler\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/climate/coolers\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.remove.cooler')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/remove/cooler\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - heater - room heaters Vol1\",\"tag\":\"sys_onCreate_device_roomHeatersVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=floorHeaterElectrical,floorHeaterValve,heaterElectrical,heaterValve\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climate[]=floorHeaterElectrical,floorHeaterValve,heaterElectrical,heaterValve\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climate[]=floorHeaterElectrical,floorHeaterValve,heaterElectrical,heaterValve&forceToRoomClimateHeaters\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?!tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {roomCheck: {roomId: item.get('createDevices.io.roomId'), key: 'heater', item: {'id': item.get('id'), 'path':'/status/target'}}}};json}\"},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.devices.heater.ui\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceToRoomClimateHeaters\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - heater - room heaters Vol2\",\"remarks\":\"add to array\",\"tag\":\"sys_onCreate_device_roomHeatersVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.add.heater\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/climate/heaters\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.add.heater')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/add/heater\"}]}]},{\"enabled\":true,\"name\":\"onCreate - device - heater - room heaters Vol3\",\"remarks\":\"remove from array when moved to another room\",\"tag\":\"sys_onCreate_device_roomHeatersVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.remove.heater\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/climate/heaters\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.remove.heater')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/remove/heater\"}]}]},{\"name\":\"onCreate - device - remote meter - share to client site vol1\",\"remarks\":\"after adding remote meter to building site meter room, it will be defined in which client (linked) site meters room it will be also shown. Firstly, meter ids are set to a building site meters room and then they are patched to the linked site meters room linkedDevices\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.remoteMeterType&roomId\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.remoteMeterType&roomId\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.remoteMeterType&roomId&forceShare\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?category=remoteMeteringBuildingSite&linkedSiteId&id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{remoteMeterIds: {[item.get('id')]:true}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'remoteMetering': {[item.get('meterType')]: true}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceShare\"}]}]},{\"name\":\"onCreate - device - remote meter - share to client site vol2\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol2\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?remoteMeterIds\",\"path\":\"/remoteMeterIds\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/remoteMeters\"}],\"value\":{\"type\":\"formula\",\"value\":\"Object.keys(item.get('remoteMeterIds')).map(n=>n*1)\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol3\",\"remarks\":\"after adding remote meter to building site, it will be shown also on meters room in client site. Firstly, meter ids are set to a room and then they are patched to the linked site meters room linkedDevices.\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?category=remoteMeteringBuildingSite&linkedSiteId&remoteMeters\",\"path\":\"/remoteMeters\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('linkedSiteId')}/rooms?category=remoteMeteringLinkedSite&$by=category\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"nodeId\\\": item.get('nodeId',2), \\\"linkedDevices\\\": item.get('remoteMeters'), \\\"remoteMetersSiteId\\\": item.get('siteId'), \\\"category\\\": \\\"remoteMeteringLinkedSite\\\", \\\"name\\\": \\\"⚡️💧🚿🔥 METERS\\\", \\\"enabled\\\": true, \\\"forClient\\\": true, } ];json}\"}]},{\"enabled\":false,\"name\":\"onCreate - device - remote meter - share to client site vol4\",\"remarks\":\"creating ⚡️💧🚿🔥 METERS room in client site initiates setting remote meters policies\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=remoteMeteringLinkedSite&linkedDevices&remoteMetersSiteId\"},{\"op\":\"itemAdd\",\"url\":\"rooms?category=remoteMeteringLinkedSite&linkedDevices&remoteMetersSiteId&forceShare\"},{\"op\":\"itemChange\",\"url\":\"rooms?category=remoteMeteringLinkedSite&linkedDevices&remoteMetersSiteId\",\"path\":\"/linkedDevices\"}],\"then\":[{\"op\":\"httpRequest\",\"remarks\":\"request client site to send client site policy to this room remote meters\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{overWritePolicy_devicesRemoteMeters: item.get('linkedDevices')};json}\"},{\"op\":\"httpRequest\",\"remarks\":\"request building site to send its policy to all building site remote meters\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('remoteMetersSiteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{requestRemoteMetersPolicies: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceShare\"}]}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.1\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.coldWater\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"coldWater\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.2\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.hotWater\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"hotWater\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.3\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.electricity\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"electricity\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.4\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.4\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.gas\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"gas\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.5\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.5\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.heating\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"heating\"}}]},{\"name\":\"onCreate - device - remote meter - share to client site vol4.6\",\"remarks\":\"adding remote meter type to site usage\",\"tag\":\"sys_onCreate_device_remoteMeter_shareToClientSiteVol4.6\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?remoteMetering.cooling\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/usage/remoteMeterType\"}],\"value\":{\"type\":\"string\",\"value\":\"cooling\"}}]},{\"name\":\"onCreate - device - rh - vol1\",\"tag\":\"sys_onCreate_device_rh_vol1\",\"remarks\":\"sends device id to site ventilation device list for AHU list and creates ventilationNeedRh rule\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=rh\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=rh&forceAddVentRh\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climateSensor[]=rh\",\"path\":\"/name\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {\\\"addVentSensorRh\\\": item.get('id')}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=ventilationNeedRh_{item.get('id')}&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"enabled\\\": true, \\\"name\\\": \\\"Ventilation need - RH - \\\" + item.get('name'), \\\"type\\\": \\\"calculator\\\", \\\"input\\\": {\\\"method\\\": \\\"avg\\\", items: [{id: item.get('id'), path: \\\"/status/rh\\\"}]}, \\\"output\\\": {\\\"method\\\": \\\"pid\\\", \\\"min\\\": 0, \\\"max\\\": 100, \\\"p\\\": -0.1, \\\"t\\\": 60000, \\\"setpoint\\\": {id: item.get('siteId'), path: \\\"/rhSetpoint\\\"}, items: [{id: item.get('id'), path: \\\"/status/ventilationNeedRh\\\"}], \\\"i\\\": -1, \\\"d\\\": 0, \\\"iMax\\\": -30, \\\"step\\\": 1}, \\\"category\\\": \\\"climate\\\", \\\"ui\\\": {\\\"icon\\\": \\\"co2\\\"}, \\\"tag\\\": \\\"ventilationNeedRh_\\\"+item.get('id'), delRef: item.get('id')} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceAddVentRh\"}]}]},{\"name\":\"onCreate - device - rh - vol2\",\"tag\":\"sys_onCreate_device_rh_vol2\",\"remarks\":\"sends device id and path to AHU for linkedDevices and max ventilationNeed calculation\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.addVentSensorRh\"},{\"op\":\"itemChange\",\"url\":\"sites?status.addVentSensorRh\",\"path\":\"status.addVentSensorRh\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/ventilation/rhIds\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.addVentSensorRh')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/addVentSensorRh\"}]}]},{\"name\":\"onCreate - device - rh - vol3\",\"tag\":\"sys_onCreate_device_rh_vol3\",\"remarks\":\"sends device id and path to AHU for linkedDevices and max ventilationNeed calculation\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ventilation.rhIds\"},{\"op\":\"itemChange\",\"url\":\"sites?ventilation.rhIds\",\"path\":\"/ventilation/rhIds\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ventilation/status/ventilationNeedRh\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ventilation.rhIds').map(n=>({id:n,path:'/status/ventilationNeedRh'}))\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ventilation/status/rh\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('ventilation.rhIds').map(n=>({id:n,path:'/status/rh'}))\"}}]},{\"name\":\"onCreate - device - rh sensor - room sensors Vol1\",\"tag\":\"sys_onCreate_device_rhSensorsVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=rh\"},{\"op\":\"itemChange\",\"url\":\"devices?usage.climateSensor[]=rh\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.climateSensor[]=rh&forceToRoomClimateRhSensors\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?!tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {roomCheck: {roomId: item.get('createDevices.io.roomId'), key: 'rhSensor', item: {'id': item.get('id'), 'path':'/status/rh'}}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceToRoomClimateRhSensors\"}]}]},{\"name\":\"onCreate - device - rh sensor - room sensors Vol2\",\"remarks\":\"add to array\",\"tag\":\"sys_onCreate_device_rhSensorsVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.add.rhSensor\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/climate/rhSensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.add.rhSensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/add/rhSensor\"}]}]},{\"name\":\"onCreate - device - rh sensor - room sensors Vol3\",\"remarks\":\"remove from array when moved to another room\",\"tag\":\"sys_onCreate_device_rhSensorsVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.remove.rhSensor\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/climate/rhSensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.remove.rhSensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/remove/rhSensor\"}]}]},{\"name\":\"onCreate - device - roof hatch\",\"tag\":\"sys_onCreate_device_roofHatch\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.output[]=smokeRemoval\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"from\",\"id\":3,\"path\":\"templates.devices.roofHatch.ui\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, path: '/status/openCommand', mode: 'formula', value: \\\"i[0]?false:c\\\", items: [{path: '/status/closeCommand'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, path: '/status/closeCommand', mode: 'formula', value: \\\"i[0]?false:true\\\", items: [{path: '/status/openCommand'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'03')*1, path: '/status/openOutput', mode: 'formula', value: \\\"i[1]||i[2]||now.date('U')-r[0]>(r[1]||10000)?false:i[0]\\\", items: [{path: '/status/openCommand'}, {path: '/status/closeCommand'}, {path: '/status/smokeAlarmBlock'}, {path: '/status/time', id: 2}], read: [{path: '/status/openingTime'}, {path: '/duration'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'04')*1, path: '/status/closeOutput', mode: 'formula', value: \\\"i[1]||now.date('U')-r[0]>(r[1]||10000)?false:i[0]\\\", items: [{path: '/status/closeCommand'}, {path: '/status/openCommand'}, {path: '/status/time', id: 2}], read: [{path: '/status/closingTime'}, {path: '/duration'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'05')*1, path: '/status/openingTime', mode: 'formula', value: \\\"i[0]?now.date('U'):null\\\", items: [{path: '/status/openOutput'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'06')*1, path: '/status/closingTime', mode: 'formula', value: \\\"i[0]?now.date('U'):null\\\", items: [{path: '/status/closeOutput'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'07')*1, path: '/status/active', mode: 'copy', items: [{path: '/status/smokeAlarmBlock'}]}\"}}]},{\"name\":\"onCreate - device - securityDetector burglar - vol1\",\"tag\":\"sys_onCreate_device_securityDetector_burglar_vol1\",\"remarks\":\"sends device id to site secarea list\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.securityDetector[]=motion,glass,door,indoor,perimeter,window\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.securityDetector[]=motion,glass,door,indoor,perimeter,window&forceAddToSecArea\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?tag=sysSecArea&siteId={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {\\\"addToSecArea\\\":{'id': item.get('id'), 'path': item.get('usage.securityDetector').includes('door')?'/status/open':'/status/active'}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceAddToSecArea\"}]}]},{\"name\":\"onCreate - device - siren\",\"tag\":\"sys_onCreate_device_siren\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.indication[]=securitySirenPeriodic\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'01')*1, path: '/status/target', mode: 'formula', value: \\\"c>0&&now.date('U')-(r[0]||0)>600000?0:c\\\", items: [{path: '/status/time', id: 2}], read: [{path: '/status/startTime'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'02')*1, path: '/status/output', mode: 'formula', value: \\\"c&&now.date('U')-(r[0]||0)>600000?0:c\\\", items: [{path: '/status/time', id: 2}], read: [{path: '/status/startTime'}]}\"}}]},{\"name\":\"onCreate - device - temperature sensor - room sensors Vol1\",\"tag\":\"sys_onCreate_device_tempSensorsVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=*Temperature\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&usage.climateSensor[]=*Temperature\",\"path\":\"/roomId\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.climateSensor[]=*Temperature&forceToRoomClimateTemperatureSensors\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rooms?!tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {roomCheck: {roomId: item.get('createDevices.io.roomId'), key: 'temperatureSensor', item: {'id': item.get('id'), 'path':'/status/temperature'}}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceToRoomClimateTemperatureSensors\"}]}]},{\"name\":\"onCreate - device - temperature sensor - room sensors Vol2\",\"remarks\":\"add to array\",\"tag\":\"sys_onCreate_device_tempSensorsVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.add.temperatureSensor\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/climate/temperatureSensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.add.temperatureSensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/add/temperatureSensor\"}]}]},{\"name\":\"onCreate - device - temperature sensor - room sensors Vol3\",\"remarks\":\"remove from array when moved to another room\",\"tag\":\"sys_onCreate_device_tempSensorsVol3\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.remove.temperatureSensor\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/climate/temperatureSensors\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.remove.temperatureSensor')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/remove/temperatureSensor\"}]}]},{\"name\":\"onCreate - device - set ui from template by short type\",\"tag\":\"sys_onCreate_device_setUiFromTemplate\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?deviceType&!ui&!controllerType\"},{\"op\":\"itemAdd\",\"url\":\"devices?deviceType&status.forceUpdateUi\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.devices')[item.get('deviceType')].ui\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/forceUpdateUi\"}]}]},{\"name\":\"onCreate - device - set usage from template by short type\",\"tag\":\"sys_onCreate_device_setUsageFromTemplate\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?deviceType&!usage\"},{\"op\":\"itemAdd\",\"url\":\"devices?deviceType&status.forceUpdateUsage\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/usage\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.devices')[item.get('deviceType')].usage\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/forceUpdateUsage\"}]}]},{\"name\":\"onCreate - controller - set ui from template by type\",\"tag\":\"sys_onCreate_controller_setUiFromTemplateByType\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type&!controllerType&!deviceType\"},{\"op\":\"itemAdd\",\"url\":\"devices?type&!controllerType&!deviceType&status.forceUpdateUi\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers')&&check[0].get('templates.controllers')[item.get('type')]&&check[0].get('templates.controllers')[item.get('type')].ui||{}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/forceUpdateUi\"}]}]},{\"name\":\"onCreate - controller - set ui from template by short type\",\"tag\":\"sys_onCreate_controller_setUiFromTemplate\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?controllerType&!ui\"},{\"op\":\"itemAdd\",\"url\":\"devices?controllerType&status.forceUpdateUi\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers')[item.get('controllerType')].ui\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/forceUpdateUi\"}]}]},{\"name\":\"onCreate - site - eco, Main DB and OFFLINE counter vol1\",\"tag\":\"sys_onCreate_site_vol1\",\"remarks\":\"create eco device, main db room and offline device counter rule\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category!=root,vendor,project&tag!=userManagement,moderanApiSync\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.mainDbMissing\"},{\"op\":\"itemAdd\",\"url\":\"sites?force_sys_onCreate_site_vol1\"}],\"then\":[{\"remarks\":\"create eco device\",\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/devices?tag=eco&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"Energy saving\\\", \\\"nodeId\\\":item.get('nodeId'), \\\"tag\\\": \\\"eco\\\", \\\"roomId\\\": item.get('id'), \\\"follow\\\": [{path: \\\"/status/online\\\", items: [{path: \\\"/id\\\"}]}], \\\"remarks\\\": \\\"Manual switch to eco mode, deactivates scheduled switching\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"enabled\\\": true, \\\"type\\\": \\\"generic\\\", \\\"usage\\\": {\\\"generic\\\": [\\\"eco\\\"]}, \\\"ui\\\":{\\\"icon\\\": \\\"co2\\\", \\\"i1\\\":[\\\"setup.output#onoff\\\"], \\\"i3\\\":[\\\"remarks# #{value||''}##italic\\\"]}} ];json}\"},{\"remarks\":\"create Main DB room\",\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?usage.generic[]==mainDistributionBoard&$by=usage\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ { 'usage': {'generic': ['mainDistributionBoard']}, 'name': 'Main DB', 'tag': 'mainDistributionBoard', 'nodeId': 2, 'enabled': true, 'acl': {'inherit': [4]} } ];json}\"},{\"remarks\":\"create OFFLINE devices counter rule\",\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_offlineDevicesCalculator&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"OFFLINE devices counter\\\", \\\"nodeId\\\":2, \\\"tag\\\": \\\"sysSite_offlineDevicesCalculator\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/devices?enabled&!status.online\\\"}], \\\"then\\\": [{op: \\\"set\\\", items: [{id: item.get('id'), path: \\\"/status/offline/devices\\\"}], value: {\\\"type\\\": \\\"string\\\", value: \\\"{count}\\\"}}], \\\"recover\\\": [{\\\"op\\\": \\\"set\\\", items: [{id: item.get('id'), path: \\\"/status/offline/devices\\\"}], value: {\\\"type\\\": \\\"string\\\", value: \\\"{count}\\\"}}], \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}} ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/mainDbMissing\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/force_sys_onCreate_site_vol1\"}]}]},{\"name\":\"onCreate - site - eco, Main DB and OFFLINE counter vol2\",\"tag\":\"sys_onCreate_site_vol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rules?tag=sysSite_offlineDevicesCalculator\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/load\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{\\\"op\\\": \\\"executeRule\\\", \\\"rules\\\": [item.get('id')], \\\"force\\\": true, \\\"delay\\\": 60000}]\"}}]},{\"name\":\"onCreate - role - create email sending rule - buildingManager\",\"tag\":\"sys_onCreate_role_createEmailSendingRule_buildingManager\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.buildingManagerRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?ids.buildingManagerRoleId&forceCreateEmailSendingRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_sendEmail_buildingManager&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"Send email to buildingManager role\\\", \\\"tag\\\": \\\"sysSite_sendEmail_buildingManager\\\", \\\"nodeId\\\":2, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"&sendMail.buildingManager.send\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"sendmail\\\", \\\"to\\\": [{\\\"type\\\": \\\"role\\\", id: item.get('ids.buildingManagerRoleId')}], \\\"subject\\\": \\\"{item.get('sendMail.buildingManager.subject','')}\\\", \\\"text\\\": \\\"{item.get('sendMail.buildingManager.body','')}\\\", \\\"delay\\\": item.get('sendMail.buildingManager.delay',0)}, {\\\"op\\\": \\\"remove\\\", items: [{path: \\\"/sendMail/buildingManager\\\"}]} ] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateEmailSendingRules\"}],\"delay\":500}]},{\"name\":\"onCreate - role - create email sending rule - siteBuildingManager\",\"tag\":\"sys_onCreate_role_createEmailSendingRule_siteBuildingManager\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteBuildingManagerRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteBuildingManagerRoleId&forceCreateEmailSendingRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_sendEmail_siteBuildingManager&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"Send email to siteBuildingManager role\\\", \\\"tag\\\": \\\"sysSite_sendEmail_siteBuildingManager\\\", \\\"nodeId\\\":2, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"&sendMail.siteBuildingManager.send\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"sendmail\\\", \\\"to\\\": [{\\\"type\\\": \\\"role\\\", id: item.get('ids.siteBuildingManagerRoleId')}], \\\"subject\\\": \\\"{item.get('sendMail.siteBuildingManager.subject','')}\\\", \\\"text\\\": \\\"{item.get('sendMail.siteBuildingManager.body','')}\\\", \\\"delay\\\": item.get('sendMail.siteBuildingManager.delay',0)}, {\\\"op\\\": \\\"remove\\\", items: [{path: \\\"/sendMail/siteBuildingManager\\\"}]} ] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateEmailSendingRules\"}],\"delay\":500}]},{\"name\":\"onCreate - role - create email sending rule - siteHabitant\",\"tag\":\"sys_onCreate_role_createEmailSendingRule_siteHabitant\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteHabitantRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteHabitantRoleId&forceCreateEmailSendingRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_sendEmail_siteHabitant&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"Send email to siteHabitant role\\\", \\\"tag\\\": \\\"sysSite_sendEmail_siteHabitant\\\", \\\"nodeId\\\":2, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"&sendMail.siteHabitant.send\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"sendmail\\\", \\\"to\\\": [{\\\"type\\\": \\\"role\\\", id: item.get('ids.siteHabitantRoleId')}], \\\"subject\\\": \\\"{item.get('sendMail.siteHabitant.subject','')}\\\", \\\"text\\\": \\\"{item.get('sendMail.siteHabitant.body','')}\\\", \\\"delay\\\": item.get('sendMail.siteHabitant.delay',0)}, {\\\"op\\\": \\\"remove\\\", items: [{path: \\\"/sendMail/siteHabitant\\\"}]} ] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateEmailSendingRules\"}],\"delay\":500}]},{\"name\":\"onCreate - role - create email sending rule - siteManager\",\"tag\":\"sys_onCreate_role_createEmailSendingRule_siteManager\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteManagerRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteManagerRoleId&forceCreateEmailSendingRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_sendEmail_siteManager&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"Send email to siteManager role\\\", \\\"tag\\\": \\\"sysSite_sendEmail_siteManager\\\", \\\"nodeId\\\":2, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"&sendMail.siteManager.send\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"sendmail\\\", \\\"to\\\": [{\\\"type\\\": \\\"role\\\", id: item.get('ids.siteManagerRoleId')}], \\\"subject\\\": \\\"{item.get('sendMail.siteManager.subject','')}\\\", \\\"text\\\": \\\"{item.get('sendMail.siteManager.body','')}\\\", \\\"delay\\\": item.get('sendMail.siteManager.delay',0)}, {\\\"op\\\": \\\"remove\\\", items: [{path: \\\"/sendMail/siteManager\\\"}]} ] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateEmailSendingRules\"}],\"delay\":500}]},{\"name\":\"onCreate - role - create email sending rule - siteOperatorAdministrator\",\"tag\":\"sys_onCreate_role_createEmailSendingRule_siteOperatorAdministrator\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteOperatorAdministratorRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?ids.siteOperatorAdministratorRoleId&forceCreateEmailSendingRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_sendEmail_siteOperatorAdministrator&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"Send email to siteOperatorAdministrator role\\\", \\\"tag\\\": \\\"sysSite_sendEmail_siteOperatorAdministrator\\\", \\\"nodeId\\\":2, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"&sendMail.siteOperatorAdministrator.send\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"sendmail\\\", \\\"to\\\": [{\\\"type\\\": \\\"role\\\", id: item.get('ids.siteOperatorAdministratorRoleId')}], \\\"subject\\\": \\\"{item.get('sendMail.siteOperatorAdministrator.subject','')}\\\", \\\"text\\\": \\\"{item.get('sendMail.siteOperatorAdministrator.body','')}\\\", \\\"delay\\\": item.get('sendMail.siteOperatorAdministrator.delay',0)}, {\\\"op\\\": \\\"remove\\\", items: [{path: \\\"/sendMail/siteOperatorAdministrator\\\"}]} ] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreateEmailSendingRules\"}],\"delay\":500}]},{\"name\":\"onCreate - roles - house - project site permissions\",\"tag\":\"sys_onCreate_roles_house_sitePermissions\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type=house&ids.technicianRoleId&ids.securityAndResqueRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=building&type=house&ids.vendorTechnicianRoleId\",\"path\":\"/ids/technicianRoleId\"},{\"op\":\"itemChange\",\"url\":\"sites?category=building&type=house&ids.vendorTechnicianRoleId\",\"path\":\"/ids/securityAndResqueRoleId\"},{\"op\":\"itemAdd\",\"url\":\"sites?category=building&type=house&forceUpdateUiAndRoles\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.technicianRoleId')], \\\"acl\\\": 8201, id: item.get('ids.technicianRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.securityAndResqueRoleId')], \\\"acl\\\": 9, id: item.get('ids.securityAndResqueRoleId')}\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateUiAndRoles\"}]}]},{\"name\":\"onCreate - roles - big house - project site permissions\",\"tag\":\"sys_onCreate_roles_bigHouse_sitePermissions\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?project&type!=house&ids.buildingTechnicianRoleId&ids.buildingManagerRoleId&ids.buildingFinancialInfoRoleId&ids.securityAndResqueRoleId&ids.buildingServiceContractorRoleId&ids.buildingCleanerRoleId\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.buildingTechnicianRoleId')], \\\"acl\\\": 8201, id: item.get('ids.buildingTechnicianRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.buildingManagerRoleId')], \\\"acl\\\": 8201, id: item.get('ids.buildingManagerRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.buildingFinancialInfoRoleId')], \\\"acl\\\": 9, id: item.get('ids.buildingFinancialInfoRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.securityAndResqueRoleId')], \\\"acl\\\": 9, id: item.get('ids.securityAndResqueRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.buildingServiceContractorRoleId')], \\\"acl\\\": 9, id: item.get('ids.buildingServiceContractorRoleId')}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"who\\\": [item.get('ids.buildingCleanerRoleId')], \\\"acl\\\": 9, id: item.get('ids.buildingCleanerRoleId')}\"}}]},{\"name\":\"onCreate - site - create site rules\",\"tag\":\"sys_onCreate_site_siteRules\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.mbusGatewaysRoomId&ids.modbusGatewaysRoomId&ids.rfGatewaysRoomId\"},{\"op\":\"itemAdd\",\"url\":\"sites?force\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=onCreateRoom_*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"onCreate - room - set nodeId, setup\\\", \\\"tag\\\":\\\"sysSite_onCreate_room_setNodeId\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", path: \\\"/id\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/rooms\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{id: null, path: \\\"/nodeId\\\"}], value: {\\\"type\\\": \\\"formula\\\", value: \\\"item.get('nodeId')||check[0].get('/nodeId')\\\"}}, ]}  ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_createZWaveDevice_*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"Create Z-Wave device - thermostat\\\", \\\"tag\\\":\\\"sysSite_createZWaveDevice_thermostat\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", path: \\\"/zWaveGw\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/rooms?setup.zWave.addThermostat\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"http://127.0.0.1/sites?id=\\\"+item.get('id')+\\\"/devices\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{\\\\\\\"enabled\\\\\\\": true, \\\\\\\"type\\\\\\\": \\\\\\\"generic_thermostat_Z-Way\\\\\\\", \\\\\\\"name\\\\\\\": \\\\\\\"{_('\\\\\\\" + item.get('name') + \\\\\\\"') + ' ' + _('thermostat')}\\\\\\\", \\\\\\\"roomId\\\\\\\": item.get('id'), \\\\\\\"parentId\\\\\\\": check[0].get('/zWaveGw'), \\\\\\\"nodeId\\\\\\\": item.get('nodeId',2)};json}\\\"}, {\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/status/messages/createdThermostat\\\"}], value: {\\\"type\\\": \\\"string\\\",value: \\\"{_('Thermostat') + ' ' + _('added')}\\\"}}, {\\\"delay\\\": 5000, \\\"op\\\": \\\"remove\\\", items: [{ id: null, path: \\\"/status/messages/createdThermostat\\\"}, { id: null, path: \\\"/setup/zWave/addThermostat\\\"}]}]},   {\\\"name\\\": \\\"Create Z-Wave device - smoke\\\", \\\"tag\\\":\\\"sysSite_createZWaveDevice_smoke\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", path: \\\"/zWaveGw\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/rooms?setup.zWave.addSmoke\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"http://127.0.0.1/sites?id=\\\"+item.get('id')+\\\"/devices\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{\\\\\\\"enabled\\\\\\\": true, \\\\\\\"type\\\\\\\": \\\\\\\"generic_smoke_Z-Way\\\\\\\", \\\\\\\"name\\\\\\\": \\\\\\\"{_('\\\\\\\" + item.get('name') + \\\\\\\"') + ' ' + _('smoke detector')}\\\\\\\", \\\\\\\"roomId\\\\\\\": item.get('id'), \\\\\\\"parentId\\\\\\\": check[0].get('/zWaveGw'), \\\\\\\"nodeId\\\\\\\": item.get('nodeId',2)};json}\\\"}, {\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/status/messages/createdSmoke\\\"}], value: {\\\"type\\\": \\\"string\\\",value: \\\"{_('Smoke') + ' ' + _('added')}\\\"}}, {\\\"delay\\\": 5000, \\\"op\\\": \\\"remove\\\", items: [{ id: null, path: \\\"/status/messages/createdSmoke\\\"}, { id: null, path: \\\"/setup/zWave/addSmoke\\\"}]}]},   {\\\"name\\\": \\\"Create Z-Wave device - repeater\\\", \\\"tag\\\":\\\"sysSite_createZWaveDevice_repeater\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"defined\\\", path: \\\"/zWaveGw\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/rooms?setup.zWave.addRepeater\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"POST\\\", \\\"url\\\": \\\"http://127.0.0.1/sites?id=\\\"+item.get('id')+\\\"/devices\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{\\\\\\\"enabled\\\\\\\": true, \\\\\\\"type\\\\\\\": \\\\\\\"generic_rangeExtender_Z-Way\\\\\\\", \\\\\\\"name\\\\\\\": \\\\\\\"{_('\\\\\\\" + item.get('name') + \\\\\\\"') + ' ' + _('repeater')}\\\\\\\", \\\\\\\"roomId\\\\\\\": item.get('id'), \\\\\\\"parentId\\\\\\\": check[0].get('/zWaveGw'), \\\\\\\"nodeId\\\\\\\": item.get('nodeId',2)};json}\\\"}, {\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/status/messages/createdRepeater\\\"}], value: {\\\"type\\\": \\\"string\\\",value: \\\"{_('Repeater') + ' ' + _('added')}\\\"}}, {\\\"delay\\\": 5000, \\\"op\\\": \\\"remove\\\", items: [{ id: null, path: \\\"/status/messages/createdRepeater\\\"}, { id: null, path: \\\"/setup/zWave/addRepeater\\\"}]}]},   {\\\"name\\\": \\\"Create Z-Wave device - fail feedback\\\", \\\"tag\\\":\\\"sysSite_createZWaveDevice_fail\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"check\\\": [{\\\"op\\\": \\\"notDefined\\\", path: \\\"/zWaveGw\\\"}], \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\"+item.get('id')+\\\"/rooms?setup.zWave.addThermostat|setup.zWave.addSmoke|setup.zWave.addRepeater\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/status/alarms/missing_zWaveGw\\\"}], value: {\\\"type\\\": \\\"string\\\",value: \\\"Device not added! Assign a Z-Wave gateway to the site.\\\"}}, {\\\"delay\\\": 5000, \\\"op\\\": \\\"remove\\\", items: [{ id: null, path: \\\"/status/alarms/missing_zWaveGw\\\"}, { id: null, path: \\\"/setup/zWave/addThermostat\\\"}, { id: null, path: \\\"/setup/zWave/addSmoke\\\"}, { id: null, path: \\\"/setup/zWave/addRepeater\\\"}]}]}, ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_nodeNames*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"onCreate - device - Controller - add-remove node name to-from gateway rooms\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"sysSite_nodeNamesAdd\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, 'ref': item.get('id'), \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\" + item.get('id') + \\\"/devices?type=child-node\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"arrayAdd\\\", items: [{id: item.get('ids.modbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.mbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.rfGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {path: \\\"/controllerNames/nodes\\\"}], value: {\\\"type\\\": \\\"formula\\\", value: \\\"{'name': item.get('name'), 'val': item.get('id'), 'id': item.get('id')}\\\" }}], \\\"recover\\\": [{\\\"op\\\": \\\"arrayRemove\\\", items: [{id: item.get('ids.modbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.mbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.rfGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {path: \\\"/controllerNames/nodes\\\"}], value: {\\\"type\\\": \\\"string\\\", value: \\\"{item.get('id')}\\\"}}] }, {\\\"name\\\": \\\"onUpdate - device - update node name in site and gateway rooms\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"sysSite_nodeNamesUpdate\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"sites?id=\\\" + item.get('id') + \\\"/devices?type=child-node\\\", path: \\\"/name\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"arrayAdd\\\", items: [{id: item.get('ids.modbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.mbusGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {id: item.get('ids.rfGatewaysRoomId'), path: \\\"/setup/controllerNames\\\"}, {path: \\\"/controllerNames/nodes\\\"}], value: {\\\"type\\\": \\\"formula\\\", value: \\\"{'name': item.get('name'), 'val': item.get('id'), 'id': item.get('id')}\\\" }}] }];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rules?tag=sysSite_zWaveGwNames*&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"onCreate - device - Z-Wave gateway - add-remove to-from site\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"sysSite_zWaveGwNamesAdd\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"sites?id=\\\" + item.get('id') + \\\"/devices?type=z-way\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"arrayAdd\\\", items: [{path: \\\"/controllerNames/zWaveGw\\\"}], value: {\\\"type\\\": \\\"formula\\\", value: \\\"{'name': item.get('name'), 'val': item.get('id'), 'id': item.get('id')}\\\" }}], \\\"recover\\\": [{\\\"op\\\": \\\"arrayRemove\\\", items: [{path: \\\"/controllerNames/zWaveGw\\\"}], value: {\\\"type\\\": \\\"string\\\", value: \\\"{item.get('id')}\\\"} }]}, {\\\"name\\\": \\\"onUpdate - device - update Z-Wave gateway name in site\\\", \\\"nodeId\\\":2, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"tag\\\":\\\"sysSite_zWaveGwNamesUpdate\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"repeat\\\": true, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"sites?id=\\\" + item.get('id') + \\\"/devices?type=z-way\\\", path: \\\"/name\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"arrayAdd\\\", items: [{path: \\\"/controllerNames/zWaveGw\\\"}], value: {\\\"type\\\": \\\"formula\\\", value: \\\"{'name': item.get('name'), 'val': item.get('id'), 'id': item.get('id')}\\\" }}] }];json}\"}]},{\"name\":\"onChange - device - arrive and leave switch - arriveBlock set\",\"tag\":\"sys_onChange_device_arriveAndLeaveSwitch_arriveBlock_set\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=arrive&usage.switch[]=leave&presence&!status.leaveBlock&status.input\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/arriveBlock\"}]}]},{\"name\":\"onChange - device - arrive and leave switch - arriveBlock remove\",\"tag\":\"sys_onChange_device_arriveAndLeaveSwitch_arriveBlock_remove\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=arrive&usage.switch[]=leave&status.arriveBlock&!status.input\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/arriveBlock\"}]}]},{\"name\":\"onChange - device - arrive and leave switch - leaveBlock set\",\"tag\":\"sys_onChange_device_arriveAndLeaveSwitch_leaveBlock_set\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=arrive&usage.switch[]=leave&!presence&!status.arriveBlock&status.input\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/leaveBlock\"}]}]},{\"name\":\"onChange - device - arrive and leave switch - leaveBlock remove\",\"tag\":\"sys_onChange_device_arriveAndLeaveSwitch_leaveBlock_remove\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=arrive&usage.switch[]=leave&status.leaveBlock&!status.input\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/leaveBlock\"}]}]},{\"name\":\"onChange - device - Carlo Gavazzi enable tariff management\",\"tag\":\"sys_onChange_device_CarloGavazziEnableTariffManagement\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=carlo-gavazzi_em*_Modbus&status.online&(!status.tariffManagementEnabled|!status.tariffMode)\",\"forTime\":10000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/tariffManagementEnabled\"}],\"value\":{\"type\":\"number\",\"value\":1}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/tariffMode\"}],\"value\":{\"type\":\"number\",\"value\":1}}]},{\"name\":\"onChange - device - access unlock time to root level\",\"tag\":\"sys_onChange_device_unlockTimeSyncRoot\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&type=access&setup.unlockTime\",\"forTime\":2000},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access\",\"path\":\"/setup/unlockTime\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access&setup.unlockTime\",\"path\":\"/setup/nodeId\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access&setup.unlockTime\",\"path\":\"/setup/siteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=accessUnlockTime&ref={item.get('id')}&$by=ref\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('id'), \\\"tag\\\": \\\"accessUnlockTime\\\", \\\"enabled\\\": true, \\\"name\\\": \\\"Access automatic locking - \\\" + item.get('id'), \\\"category\\\": \\\"access\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"equal\\\", path: \\\"/status/locked\\\", value: {\\\"type\\\": \\\"boolean\\\", value: false}, \\\"forTime\\\": item.get('setup.unlockTime')}], \\\"then\\\": [{\\\"op\\\": \\\"turnOn\\\", items: [{path: \\\"/status/locked\\\"}]}], \\\"check\\\": [ {\\\"op\\\": \\\"notEqual\\\", path: \\\"/status/unlock/manual\\\", value: {\\\"type\\\": \\\"boolean\\\", value: true}, \\\"follow\\\": true}, {\\\"op\\\": \\\"notEqual\\\", path: \\\"/status/unlock/scheduled\\\", value: {\\\"type\\\": \\\"boolean\\\", value: true}, \\\"follow\\\": true} ] }];json}\",\"delay\":2000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/unlockTime\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.unlockTime')\"}}]},{\"name\":\"onChange - device - access unlock time to setup\",\"tag\":\"sys_onChange_device_unlockTimeSyncSetup\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&type=access&unlockTime\",\"forTime\":3000},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access\",\"path\":\"/unlockTime\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access&unlockTime\",\"path\":\"/setup/nodeId\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId&type=access&unlockTime\",\"path\":\"/setup/siteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=accessUnlockTime&ref={item.get('id')}&$by=ref\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('id'), \\\"tag\\\": \\\"accessUnlockTime\\\", \\\"enabled\\\": true, \\\"name\\\": \\\"Access automatic locking - \\\" + item.get('id'), \\\"category\\\": \\\"access\\\", \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"type\\\": \\\"if-then\\\", \\\"if\\\": [{\\\"op\\\": \\\"equal\\\", path: \\\"/status/locked\\\", value: {\\\"type\\\": \\\"boolean\\\", value: false}, \\\"forTime\\\": item.get('unlockTime')}], \\\"then\\\": [{\\\"op\\\": \\\"turnOn\\\", items: [{path: \\\"/status/locked\\\"}]}], \\\"check\\\": [ {\\\"op\\\": \\\"notEqual\\\", path: \\\"/status/unlock/manual\\\", value: {\\\"type\\\": \\\"boolean\\\", value: true}, \\\"follow\\\": true}, {\\\"op\\\": \\\"notEqual\\\", path: \\\"/status/unlock/scheduled\\\", value: {\\\"type\\\": \\\"boolean\\\", value: true}, \\\"follow\\\": true} ] }];json}\",\"delay\":3000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/unlockTime\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('unlockTime')\"}}]},{\"enabled\":true,\"remarks\":\"disabled, functionality taken to in output.js rule in build 419\",\"name\":\"onChange - device - turn off blocked devices status output\",\"tag\":\"sys_onChange_device_blockedTurnOff\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?status.output&status.block{@}>0\"}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/output\"}]}]},{\"enabled\":true,\"remarks\":\"disabled, functionality taken to in output.js rule in build 419\",\"name\":\"onChange - device - turn on forced devices status output\",\"tag\":\"sys_onChange_device_forcededTurnOn\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?!status.output&status.force&status.force{@}>0&!status.block{@}\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/output\"}]}]},{\"name\":\"onChange - device - remove 24h alarm\",\"tag\":\"sys_onChange_device_remove24hAlarm\",\"remarks\":\"sets all type 24h alarms except tamper alarm to devices based on /status/active\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]&status.online&(!status.active&!status.battFail&!status.acFail)\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ [(item.get('usage.alarm24').includes('/status/coAlarm')? 'co': item.get('usage.alarm24').includes('/status/faultAlarm')? 'fault': item.get('usage.alarm24').includes('/status/fireAlarm')? 'fire': item.get('usage.alarm24').includes('/status/gasAlarm')? 'gas': item.get('usage.alarm24').includes('/status/panicAlarm')? 'panic': item.get('usage.alarm24').includes('/status/powerAlarm')? 'power': item.get('usage.alarm24').includes('/status/safetyAlarm')? 'safety' :  item.get('usage.alarm24').includes('/status/waterAlarm')? 'water': '')+'Alarm']: null }\"}}]},{\"name\":\"onChange - device - remove 24h alarm message\",\"tag\":\"sys_onChange_device_remove24hAlarmMessage\",\"remarks\":\"sets all type (except tamper) 24h alarm message to item\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]&status.online&(!status.coAlarm&!status.fireAlarm&!status.gasAlarm&!status.panicAlarm&!status.waterAlarm)\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms\"}],\"value\":{\"type\":\"string\",\"value\":\"Alarm\"}}]},{\"name\":\"onChange - device - remove 24h warning message\",\"tag\":\"sys_onChange_device_remove24hWarningMessage\",\"remarks\":\"sets all type (except tamper) 24h warning message to item\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]&status.online&(!status.faultAlarm&!status.powerAlarm&!status.safetyAlarm)\"}],\"then\":[{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Fault\"}}]},{\"name\":\"onChange - device - set 24h alarm\",\"tag\":\"sys_onChange_device_set24hAlarm\",\"remarks\":\"sets all type 24h alarms except tamper alarm to devices based on /status/active\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]&status.online&(status.active|status.battFail|status.acFail|status.fault)\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status\"}],\"value\":{\"type\":\"formula\",\"value\":\"{ [(item.get('usage.alarm24').includes('/status/coAlarm')? 'co': item.get('usage.alarm24').includes('/status/faultAlarm')? 'fault': item.get('usage.alarm24').includes('/status/fireAlarm')? 'fire': item.get('usage.alarm24').includes('/status/gasAlarm')? 'gas': item.get('usage.alarm24').includes('/status/panicAlarm')? 'panic': item.get('usage.alarm24').includes('/status/powerAlarm')? 'power': item.get('usage.alarm24').includes('/status/safetyAlarm')? 'safety' : item.get('usage.alarm24').includes('/status/waterAlarm')? 'water': '')+'Alarm']: true }\"}}]},{\"name\":\"onChange - device - set 24h alarm message\",\"tag\":\"sys_onChange_device_set24hAlarmMessage\",\"remarks\":\"sets all type (except tamper) 24h alarm message to item\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]&status.online&(status.coAlarm|status.fireAlarm|status.gasAlarm|status.panicAlarm|status.waterAlarm)\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/alarms\"}],\"value\":{\"type\":\"string\",\"value\":\"Alarm\"}}]},{\"name\":\"onChange - device - set 24h warning message\",\"tag\":\"sys_onChange_device_set24hWarningMessage\",\"remarks\":\"sets all type (except tamper) 24h warning message to item\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?(!nodeId||nodeId=2)&usage.alarm24[]&status.online&(status.faultAlarm|status.powerAlarm|status.safetyAlarm)\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Fault\"}}]},{\"name\":\"onChange - device - set tamperAlarm\",\"tag\":\"sys_onChange_device_setTamperAlarm\",\"remarks\":\"sets tamper alarms to devices based on /status/tamper\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*tamperAlarm&status.online&status.tamper\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/tamperAlarm\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/alarms\"}],\"value\":{\"type\":\"string\",\"value\":\"Tamper alarm\"}}],\"recover\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/tamperAlarm\"}]},{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms\"}],\"value\":{\"type\":\"string\",\"value\":\"Tamper alarm\"}}]},{\"name\":\"onChange - device - set turnedOff Alarm\",\"tag\":\"sys_onChange_device_setTurnedOffAlarm\",\"remarks\":\"sets turnedOff alarms to devices based on /status/output<ut:false\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*turnedOffAlarm&status.online&!status.output\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/turnedOffAlarm\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Turned off\"}}],\"recover\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/turnedOffAlarm\"}]},{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Turned off\"}}]},{\"name\":\"onChange - device - set turnedOn Alarm\",\"tag\":\"sys_onChange_device_setTurnedOnAlarm\",\"remarks\":\"sets turnedOn alarms to devices based on /status/output<ut:false\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*turnedOnAlarm&status.online&status.output\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/turnedOnAlarm\"}]},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Turned on\"}}],\"recover\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/turnedOnAlarm\"}]},{\"op\":\"arrayRemove\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}],\"value\":{\"type\":\"string\",\"value\":\"Turned on\"}}]},{\"name\":\"onChange - site - set coAlarm to other sites vol1\",\"tag\":\"sys_onChange_site_setCoAlarmToOtherSites_vol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-coAlarm.start&!status.alarms.alarm24-status-coAlarm.end\",\"forTime\":180000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInCoAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set coAlarm to other sites vol2\",\"tag\":\"sys_onChange_site_setCoAlarmToOtherSites_vol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-coAlarm{@}|status.alarms.alarm24-status-coAlarm.start&status.alarms.alarm24-status-coAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInCoAlarm:{ [item.get('name')]: null }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set coAlarm to other sites vol3\",\"tag\":\"sys_onChange_site_setCoAlarmToOtherSites_vol3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.sitesInCoAlarm{@}\",\"path\":\"/status/sitesInCoAlarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/coInOtherSite\"}],\"value\":{\"type\":\"formula\",\"value\":\"{start: now.date('U'), tpl: \\\"{_('Co alarm')}\\\" + ': ' + Object.keys(item.get('status.sitesInCoAlarm')).join(', '), type: 'warn'}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/coAlarmInOtherSiteMessageClearingMark\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1-5000\"},\"delay\":1000}],\"recover\":null},{\"name\":\"onChange - site - set coAlarm to other sites vol4\",\"tag\":\"sys_onChange_site_setCoAlarmToOtherSites_vol4\",\"remarks\":\"remove messages when on no alarms or after 12 hours i.e 43200000 ms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.sitesInCoAlarm{@}\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.coAlarmInOtherSiteMessageClearingMark<@alarms.coInOtherSite.start\",\"forTime\":43200000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/coInOtherSite\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/coAlarmInOtherSiteMessageClearingMark\"}]}],\"recover\":null},{\"name\":\"onChange - site - set fireAlarm to other sites vol1\",\"tag\":\"sys_onChange_site_setFireAlarmToOtherSites_vol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-fireAlarm.start&!status.alarms.alarm24-status-fireAlarm.end\",\"forTime\":180000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInFireAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set fireAlarm to other sites vol2\",\"tag\":\"sys_onChange_site_setFireAlarmToOtherSites_vol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-fireAlarm{@}|status.alarms.alarm24-status-fireAlarm.start&status.alarms.alarm24-status-fireAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInFireAlarm:{ [item.get('name')]: null }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set fireAlarm to other sites vol3\",\"tag\":\"sys_onChange_site_setFireAlarmToOtherSites_vol3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.sitesInFireAlarm{@}\",\"path\":\"/status/sitesInFireAlarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/fireInOtherSite\"}],\"value\":{\"type\":\"formula\",\"value\":\"{start: now.date('U'), tpl: \\\"{_('Fire alarm')}\\\" + ': ' + Object.keys(item.get('status.sitesInFireAlarm')).join(', '), type: 'warn'}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/fireAlarmInOtherSiteMessageClearingMark\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1-5000\"},\"delay\":1000}],\"recover\":null},{\"name\":\"onChange - site - set fireAlarm to other sites vol4\",\"tag\":\"sys_onChange_site_setFireAlarmToOtherSites_vol4\",\"remarks\":\"remove messages when on no alarms or after 12 hours i.e 43200000 ms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.sitesInFireAlarm{@}\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.fireAlarmInOtherSiteMessageClearingMark<@alarms.fireInOtherSite.start\",\"forTime\":43200000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/fireInOtherSite\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/fireAlarmInOtherSiteMessageClearingMark\"}]}],\"recover\":null},{\"name\":\"onChange - site - set gasAlarm to other sites vol1\",\"tag\":\"sys_onChange_site_setGasAlarmToOtherSites_vol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-gasAlarm.start&!status.alarms.alarm24-status-gasAlarm.end\",\"forTime\":180000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInGasAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set gasAlarm to other sites vol2\",\"tag\":\"sys_onChange_site_setGasAlarmToOtherSites_vol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-gasAlarm{@}|status.alarms.alarm24-status-gasAlarm.start&status.alarms.alarm24-status-gasAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInGasAlarm:{ [item.get('name')]: null }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set gasAlarm to other sites vol3\",\"tag\":\"sys_onChange_site_setGasAlarmToOtherSites_vol3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.sitesInGasAlarm{@}\",\"path\":\"/status/sitesInGasAlarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/gasInOtherSite\"}],\"value\":{\"type\":\"formula\",\"value\":\"{start: now.date('U'), tpl: \\\"{_('Gas alarm')}\\\" + ': ' + Object.keys(item.get('status.sitesInGasAlarm')).join(', '), type: 'warn'}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/gasAlarmInOtherSiteMessageClearingMark\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1-5000\"},\"delay\":1000}],\"recover\":null},{\"name\":\"onChange - site - set gasAlarm to other sites vol4\",\"tag\":\"sys_onChange_site_setGasAlarmToOtherSites_vol4\",\"remarks\":\"remove messages when on no alarms or after 12 hours i.e 43200000 ms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.sitesInGasAlarm{@}\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.gasAlarmInOtherSiteMessageClearingMark<@alarms.gasInOtherSite.start\",\"forTime\":43200000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/gasInOtherSite\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/gasAlarmInOtherSiteMessageClearingMark\"}]}],\"recover\":null},{\"name\":\"onChange - site - set panicAlarm to other sites vol1\",\"tag\":\"sys_onChange_site_setPanicAlarmToOtherSites_vol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-panicAlarm.start&!status.alarms.alarm24-status-panicAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInPanicAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set panicAlarm to other sites vol2\",\"tag\":\"sys_onChange_site_setPanicAlarmToOtherSites_vol2\",\"remarks\":\"in order not to instantly remove panic alarm message on panic alarm removal same content as in vol1 rule is sent (instead of null value eg in rule tag:sys_onChange_site_setCoAlarmToOtherSites_vol2)\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-panicAlarm{@}|status.alarms.alarm24-status-panicAlarm.start&status.alarms.alarm24-status-panicAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInPanicAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set panicAlarm to other sites vol3\",\"tag\":\"sys_onChange_site_setPanicAlarmToOtherSites_vol3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.sitesInPanicAlarm{@}\",\"path\":\"/status/sitesInPanicAlarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/panicInOtherSite\"}],\"value\":{\"type\":\"formula\",\"value\":\"{start: now.date('U'), tpl: \\\"{_('Panic alarm')}\\\" + ': ' + Object.keys(item.get('status.sitesInPanicAlarm')).join(', '), type: 'warn'}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/panicAlarmInOtherSiteMessageClearingMark\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1-5000\"},\"delay\":1000}],\"recover\":null},{\"name\":\"onChange - site - set panicAlarm to other sites vol4\",\"tag\":\"sys_onChange_site_setPanicAlarmToOtherSites_vol4\",\"remarks\":\"remove messages when on no alarms or after 12 hours i.e 43200000 ms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.sitesInPanicAlarm{@}\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.panicAlarmInOtherSiteMessageClearingMark<@alarms.panicInOtherSite.start\",\"forTime\":43200000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/panicInOtherSite\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/panicAlarmInOtherSiteMessageClearingMark\"}]}],\"recover\":null},{\"name\":\"onChange - site - set waterAlarm to other sites vol1\",\"tag\":\"sys_onChange_site_setWaterAlarmToOtherSites_vol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-waterAlarm.start&!status.alarms.alarm24-status-waterAlarm.end\",\"forTime\":180000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInWaterAlarm:{ [item.get('name')]: item.get('id') }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set waterAlarm to other sites vol2\",\"tag\":\"sys_onChange_site_setWaterAlarmToOtherSites_vol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.alarms.alarm24-status-waterAlarm{@}|status.alarms.alarm24-status-waterAlarm.start&status.alarms.alarm24-status-waterAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ sitesInWaterAlarm:{ [item.get('name')]: null }}};json}\"}],\"recover\":null},{\"name\":\"onChange - site - set waterAlarm to other sites vol3\",\"tag\":\"sys_onChange_site_setWaterAlarmToOtherSites_vol3\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?status.sitesInWaterAlarm{@}\",\"path\":\"/status/sitesInWaterAlarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/waterInOtherSite\"}],\"value\":{\"type\":\"formula\",\"value\":\"{start: now.date('U'), tpl: \\\"{_('Water alarm')}\\\" + ': ' + Object.keys(item.get('status.sitesInWaterAlarm')).join(', '), type: 'warn'}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/waterAlarmInOtherSiteMessageClearingMark\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1-5000\"},\"delay\":1000}],\"recover\":null},{\"name\":\"onChange - site - set waterAlarm to other sites vol4\",\"tag\":\"sys_onChange_site_setWaterAlarmToOtherSites_vol4\",\"remarks\":\"remove messages when on no alarms or after 12 hours i.e 43200000 ms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.sitesInWaterAlarm{@}\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.waterAlarmInOtherSiteMessageClearingMark<@alarms.waterInOtherSite.start\",\"forTime\":43200000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/waterInOtherSite\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/waterAlarmInOtherSiteMessageClearingMark\"}]}],\"recover\":null},{\"name\":\"onChange - site - set panicAlarm to other sites\",\"tag\":\"sys_onChange_site_setPanicAlarmToOtherSites\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.alarms.alarm24-status-panicAlarm.start&!status.alarms.alarm24-status-panicAlarm.end\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms:{ ['site_' + item.get('id')]: {start: now.date('U'), tpl: \\\"{_('Panic alarm')}\\\" + ': ' + item.get('name'), type: 'warn'}}}};json}\"}]},{\"name\":\"onChange - device - set tariff DAY on Inepro MBus counter - masternode\",\"tag\":\"sys_onChange_device_setTariffOnIneproMbusDay\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=inepro_pro380-md_M-Bus&status.tariff=1&(!nodeId|nodeId=2)\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"id\":null,\"path\":\"/status/tariffDay\"}]}]},{\"name\":\"onChange - device - set tariff NIGHT on Inepro MBus counter - masternode\",\"tag\":\"sys_onChange_device_setTariffOnIneproMbusNight\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=inepro_pro380-md_M-Bus&status.tariff=2&(!nodeId|nodeId=2)\"}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/tariffDay\"}]}]},{\"name\":\"onChange - device - update 2N IP address to SIP users - videoCall\",\"tag\":\"sys_onChange_device_update2nIpAddressToSipUsers\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?ui.sipUri&setup.sipIp\",\"path\":\"/setup/sipIp\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/users?sip.virtNumber&sip.username&sip.sipUri={item.get('ui.sipUri')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"sip\\\": {\\\"domain\\\": item.get('setup.sipIp')}};json}\"}]},{\"name\":\"onChange - device - sync intercom SIP data -> intercom rooms vol1 - voiceCall\",\"remarks\":\"Ei tööta, kuna intercoms[]={id=item.get('id')} tuleb välja kui patch käsk intercoms[]=611 mitte {id=611}\",\"tag\":\"sys_onChange_device_syncIntercomSipDataToIntercomRoomsVol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.sipIp\",\"path\":\"/setup/sipIp\"},{\"op\":\"itemChange\",\"url\":\"devices?setup.sipNumber\",\"path\":\"/setup/sipNumber\"},{\"op\":\"itemChange\",\"url\":\"devices?ui.sipUri\",\"path\":\"/ui/sipUri\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?category=sipRoom&intercoms[]={id={item.get('id')}}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'updateSip': {'id': item.get('id'), 'sipIp': item.get('setup.sipIp'), 'sipNumber': item.get('setup.sipNumber'), 'sipUri': item.get('ui.sipUri')}};json}\"}]},{\"name\":\"onChange - device - sync intercom SIP data -> intercom rooms vol2 - voiceCall\",\"remarks\":\"Ei ole testinud kuna vol1 reegel ei tööta\",\"tag\":\"sys_onChange_device_syncIntercomSipDataToIntercomRoomsVol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom&updateSip\"}],\"then\":[{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/intercoms\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('updateSip')\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/updateSip\"}]}]},{\"name\":\"onChange - device - zWave smoke alarm translation\",\"tag\":\"sys_onChange_device_zWaveSmokeAlarmTranslation\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=generic_smoke_Z-Way&(!nodeId|nodeId=2)\",\"path\":\"/status/alarm\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/active\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.alarm')?true:false\"}}]},{\"enabled\":true,\"name\":\"onChange - room - climate mode\",\"tag\":\"sys_onChange_room_climateMode\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?climate.modes&climate.previousMode\",\"path\":\"/status/eco\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/climate/mode\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('climate.modes').pluck('name').includes('eco')?(item.get('status.eco')?'eco':item.get('climate.previousMode')):item.get('climate.mode')\"},\"delay\":1000}]},{\"enabled\":true,\"name\":\"onChange - room - climate modes to ui\",\"tag\":\"sys_onChange_room_climateModes\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?!ui.climateModes&climate.modes\",\"path\":\"/climate/modes\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/climateModes\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('climate.modes')\"}}]},{\"name\":\"onChange - room - Moderan Set ID\",\"tag\":\"sys_onChange_room_moderanSetId\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?category=channelsRoom\",\"path\":\"/setup/propertyNames\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/setup/propertyNames\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.propertyNames').map(i=>({val:i.id,name:i.name}))\"}}]},{\"enabled\":true,\"name\":\"onChange - room - setpoint - uiSetpoint init\",\"tag\":\"sys_onChange_room_setpointUiSetpointInit\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setpoint&!status.uiSetpoint&status.temperature\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/uiSetpointInit\"}],\"value\":{\"type\":\"formula\",\"value\":\"true\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/uiSetpoint\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setpoint')\"},\"delay\":1000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/uiSetpointInit\"}],\"delay\":5000}]},{\"enabled\":true,\"name\":\"onChange - room - setpoint - uiSetpoint propagation to setpointNormal\",\"tag\":\"sys_onChange_room_setpointPropagation_uiSetpoint\",\"remarks\":\"uiSetpoint change reflects on setpointNormal, where it is checked against min and max\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?setpoint\",\"path\":\"/status/uiSetpoint\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/setpointNormal\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.uiSetpoint')\"}}]},{\"enabled\":true,\"name\":\"onChange - room - setpointNormal ends eco mode\",\"tag\":\"sys_onChange_room_setpointNormal_endsEcoMode\",\"remarks\":\"setpointNormal change ends economy mode except on system load, and /climate/manual is removed as legacy\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&!status.uiSetpointInit&status.eco\",\"path\":\"/setup/setpointNormal\"}],\"then\":[{\"op\":\"turnOn\",\"items\":[{\"path\":\"/climate/normal\"}]},{\"op\":\"remove\",\"items\":[{\"path\":\"/climate/manual\"}]},{\"op\":\"remove\",\"items\":[{\"path\":\"/setup/manualEco\"}]},{\"op\":\"remove\",\"items\":[{\"path\":\"/status/eco\"}],\"delay\":2000},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms: { ecoEnd: {start: now.date('U'), tpl: item.get('name') + \\\" - {_('Economy mode')} {_('deactivated')}\\\", type: 'warn'}}}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status:{ alarms: { ecoEnd: null }}};json}\",\"delay\":7000}]},{\"enabled\":true,\"name\":\"onChange - room - setpointNormal, Min and Max propagation to setpoint\",\"tag\":\"sys_onChange_room_setpointPropagation_setpointNotEco\",\"remarks\":\"setpointNormal, Min and Max changes reflects on setpoint\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setpoint&!status.eco\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&!status.eco\",\"path\":\"/setup/setpointNormal\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&!status.eco\",\"path\":\"/setpointMin\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&!status.eco\",\"path\":\"/setpointMax\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/setup/setpointNormal\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointNormal',21) < item.get('setpointMin',18) ? item.get('setpointMin',18) : item.get('setup.setpointNormal',21) > (item.get('setpointMax',24)) ? item.get('setpointMax',24) : item.get('setup.setpointNormal',21)\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/setpoint\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointNormal',21) < item.get('setpointMin',18) ? item.get('setpointMin',18) : item.get('setup.setpointNormal',21) > (item.get('setpointMax',24)) ? item.get('setpointMax',24) : item.get('setup.setpointNormal',21)\"}}]},{\"enabled\":true,\"name\":\"onChange - room - setpoint propagation to uiSetpoint\",\"tag\":\"sys_onChange_room_setpointPropagation_setpoint\",\"remarks\":\"setpoint change reflects on other uiSetpoint, where it is reflected to setpointNormal\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setpoint&!status.eco&setpoint!=@status.uiSetpoint\",\"forTime\":2000}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/uiSetpoint\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setpoint')\"}}]},{\"enabled\":true,\"name\":\"onChange - room - setpointEco propagation to setpoint\",\"tag\":\"sys_onChange_room_setpointPropagation_setpointEco\",\"remarks\":\"setpointEco changes reflects on setpoint\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?setpoint&status.eco\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&status.eco\",\"path\":\"/setup/setpointEco\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&status.eco\",\"path\":\"/setpointMin\"},{\"op\":\"itemChange\",\"url\":\"rooms?setpoint&status.eco\",\"path\":\"/setpointMax\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setpoint\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointEco',21) < item.get('setpointMin',16) ? item.get('setpointMin',16) : item.get('setup.setpointEco',21) > (item.get('setpointMax',25)) ? item.get('setpointMax',25) : item.get('setup.setpointEco',21)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/setpointEco\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointEco')||(item.get('setpoint')-2<item.get('setpointMin',16)?item.get('setpointMin',16):item.get('setpoint')-2)\"}}]},{\"name\":\"onChange - room - ventilation devices\",\"tag\":\"sys_onChange_room_ventilationDevices\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"rooms?tag=ventilationRoom&ventilation\",\"path\":\"/ventilation\"},{\"op\":\"itemAdd\",\"url\":\"rooms?tag=ventilationRoom&ventilation&forceAddCo2AndRhSensors\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/linkedDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"[item.get('sourceId')].concat(item.get('ventilation.co2Ids',null)).concat(item.get('ventilation.rhIds',null)).filter(n=>n)\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'00')*1, mode: 'max', path: '/status/ventilationNeed', step: 1, min: 0, max: 100, items: (item.get('ventilation.status.ventilationNeedCo2',[]).concat(item.get('ventilation.status.ventilationNeedRh',[]))).filter(n=>n.id)}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'21')*1, mode: 'max', path: '/status/co2', step: 1, multiplier: 1, items: item.get('ventilation.status.co2').filter(n=>n.id)}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'22')*1, mode: 'max', path: '/status/rh', step: 1, multiplier: 1, items: item.get('ventilation.status.rh').filter(n=>n.id)}\"}}]},{\"name\":\"onChange - room - sync intercom room phone numbers -> 2N user - voiceCall\",\"remarks\":\"Intercom room SIP call phone numbers update to 2N. One room i.e 2N user may have up to 3 numbers\",\"tag\":\"sys_onChange_user_updateSitePhoneNumbersTo2nUser\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom&(setup.sip.phone1|setup.sip.phone2|setup.sip.phone3)\"},{\"op\":\"itemChange\",\"url\":\"rooms?category=sipRoom\",\"path\":\"/setup/sip/phone1\"},{\"op\":\"itemChange\",\"url\":\"rooms?category=sipRoom\",\"path\":\"/setup/sip/phone2\"},{\"op\":\"itemChange\",\"url\":\"rooms?category=sipRoom\",\"path\":\"/setup/sip/phone3\"},{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom&!setup.sip.phone1\"},{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom&!setup.sip.phone2\"},{\"op\":\"itemAdd\",\"url\":\"rooms?category=sipRoom&!setup.sip.phone3\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get('intercoms[0].sipIp','notInUse')}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true, users:[{ uuid: item.get('sip.uuid.0', null),\\n name: item.get('name').replace(\\\"{_('Intercoms')}\\\",\\\"\\\") + ' - ' + item.get('virtNumber',''), virtNumber: item.get('virtNumber'), 'callPos': [{'peer': item.get('setup.sip.phone1')?item.get('setup.sip.phone1')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone2')?item.get('setup.sip.phone2')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone3')?item.get('setup.sip.phone3')+'/1':'', 'grouped': '1',}] }]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid/0\",\"query\":\"result.users[0].uuid\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipSuccess\",\"query\":\"success\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipDescription\",\"query\":\"error.description\"}]}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get('intercoms[1].sipIp','notInUse')}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true, users:[{ uuid: item.get('sip.uuid.1', null),\\n name: item.get('name').replace(\\\"{_('Intercoms')}\\\",\\\"\\\") + ' - ' + item.get('virtNumber',''), virtNumber: item.get('virtNumber'), 'callPos': [{'peer': item.get('setup.sip.phone1')?item.get('setup.sip.phone1')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone2')?item.get('setup.sip.phone2')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone3')?item.get('setup.sip.phone3')+'/1':'', 'grouped': '1',}] }]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid/1\",\"query\":\"result.users[0].uuid\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipSuccess\",\"query\":\"result.success\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipDescription\",\"query\":\"result.error.description\"}]}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get('intercoms[2].sipIp','notInUse')}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true, users:[{ uuid: item.get('sip.uuid.2', null),\\n name: item.get('name').replace(\\\"{_('Intercoms')}\\\",\\\"\\\") + ' - ' + item.get('virtNumber',''), virtNumber: item.get('virtNumber'), 'callPos': [{'peer': item.get('setup.sip.phone1')?item.get('setup.sip.phone1')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone2')?item.get('setup.sip.phone2')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone3')?item.get('setup.sip.phone3')+'/1':'', 'grouped': '1',}] }]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid/2\",\"query\":\"result.users[0].uuid\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipSuccess\",\"query\":\"result.success\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipDescription\",\"query\":\"result.error.description\"}]}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get('intercoms[3].sipIp','notInUse')}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true, users:[{ uuid: item.get('sip.uuid.3', null),\\n name: item.get('name').replace(\\\"{_('Intercoms')}\\\",\\\"\\\") + ' - ' + item.get('virtNumber',''), virtNumber: item.get('virtNumber'), 'callPos': [{'peer': item.get('setup.sip.phone1')?item.get('setup.sip.phone1')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone2')?item.get('setup.sip.phone2')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone3')?item.get('setup.sip.phone3')+'/1':'', 'grouped': '1',}] }]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid/3\",\"query\":\"result.users[0].uuid\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipSuccess\",\"query\":\"result.success\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipDescription\",\"query\":\"result.error.description\"}]}]},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get('intercoms[4].sipIp','notInUse')}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true, users:[{ uuid: item.get('sip.uuid.4', null),\\n name: item.get('name').replace(\\\"{_('Intercoms')}\\\",\\\"\\\") + ' - ' + item.get('virtNumber',''), virtNumber: item.get('virtNumber'), 'callPos': [{'peer': item.get('setup.sip.phone1')?item.get('setup.sip.phone1')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone2')?item.get('setup.sip.phone2')+'/1':'', 'grouped': '1',}, {'peer': item.get('setup.sip.phone3')?item.get('setup.sip.phone3')+'/1':'', 'grouped': '1',}] }]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid/4\",\"query\":\"result.users[0].uuid\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipSuccess\",\"query\":\"result.success\"}]},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/sipDescription\",\"query\":\"result.error.description\"}]}]}]},{\"name\":\"onChange - site - controllerNames - sync building sites\",\"tag\":\"sys_onCreate_site_shareProjectsiteControllerNames\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?buildingId&controllerNames&!avoidLoop\",\"path\":\"/controllerNames\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"avoidLoop\\\": true, \\\"controllerNames\\\": item.get('controllerNames')};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}&id!={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"avoidLoop\\\": false};json}\",\"delay\":2000}]},{\"name\":\"onChange - status_counterT1 - update tariff to T1\",\"tag\":\"sys_onChange_statusCounterT1_updateTariffT1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.localTimeSwitch&status.counterT1&status.tariff!=1\",\"path\":\"/status/counterT1\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/tariff\"}],\"value\":{\"type\":\"number\",\"value\":\"1\"}}]},{\"name\":\"onChange - status_counterT2 - update tariff to T2\",\"tag\":\"sys_onChange_statusCounterT2_updateTariffT2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.localTimeSwitch&status.counterT2&status.tariff!=2\",\"path\":\"/status/counterT2\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/tariff\"}],\"value\":{\"type\":\"number\",\"value\":\"2\"}}]},{\"name\":\"onAdd - user - idle\",\"tag\":\"sys_onAdd_user_idle\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"users?ui.logIdle&status.online&status.idle\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/dot\"}],\"value\":{\"type\":\"string\",\"value\":\"white\"}}]},{\"name\":\"onAdd - user - mark idle and not online user online\",\"tag\":\"sys_onAdd_user_idleUserOnline\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"inherit\":[4]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"users?ui.logIdle&!status.online&status.idle\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/online\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/dot\"}],\"value\":{\"type\":\"string\",\"value\":\"white\"}}]},{\"name\":\"onAdd - user - notIdle\",\"tag\":\"sys_onAdd_user_notIidle\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"users?ui.logIdle&status.online&!status.idle\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/dot\"}],\"value\":{\"type\":\"string\",\"value\":\"green\"}}]},{\"name\":\"onChange - user - modify user sipIp to 2N user phone number - videoCall\",\"remarks\":\"On app launch user device IP address is updated to 2N user to enable intercom call\",\"tag\":\"sys_onChange_user_updateIpAddressTo2nUserPhoneNumber\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"users?status.sipIp&sip.enabled&sip.virtNumber&sip.username\",\"path\":\"/status/sipIp\"},{\"op\":\"itemChange\",\"url\":\"users?status.sipIp&sip.enabled&sip.virtNumber&sip.username\",\"path\":\"/sip/enabled\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get(\\\"sip.domain\\\")}/api/dir/create\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{force:true,users:[{\\n uuid: item.get(\\\"sip.uuid\\\", null),\\n name: item.get(\\\"sip.username\\\") + \\\" - \\\" + item.get(\\\"status.sipIp\\\"),\\n virtNumber: item.get(\\\"sip.virtNumber\\\"),\\n callPos:[{\\n peer: \\\"sip:\\\" + item.get(\\\"sip.username\\\") + \\\"@\\\" + item.get(\\\"status.sipIp\\\"),\\n profiles:\\\"\\\",\\n grouped:\\\"0\\\",\\n ipEye:\\\"\\\"\\n }]\\n}]};json}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/sip/uuid\",\"query\":\"result.users[0].uuid\"}]}],\"delay\":0}]},{\"name\":\"onChange - user - delete user in 2N directory on SIP calls disabling - videoCall\",\"tag\":\"sys_onChange_user_deleteUserIn2nDirectoryOnSipCallsDisabling\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"users?sip.uuid&!sip.enabled\",\"path\":\"/sip/enabled\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://{item.get(\\\"sip.domain\\\")}/api/dir/delete\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"body\":\"{{users:[{\\n uuid: item.get(\\\"sip.uuid\\\")}]};json}\",\"responseHandler\":null,\"delay\":0}]},{\"name\":\"onEvent - codeRead - start 2N videoCall\",\"tag\":\"sys_start2nCallWithCodereadEvent\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemEvent\",\"url\":\"devices?ui.sipUri&ui.sipActions&setup.sipIp\",\"ev\":\"codeRead\",\"filter\":\"\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"GET\",\"url\":\"http://{item.get('setup.sipIp')}/api/call/dial?number=sip:{user.sip.username}@{user.sip.sipIp}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}],\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/siPCallSession\",\"query\":\"result.session\"}]}]}]},{\"name\":\"onEvent - locked - end 2N videoCall\",\"tag\":\"sys_end2nCallOnAccessLockedEvent\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=access&status.siPCallSession&status.locked\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"GET\",\"url\":\"http://{item.get('setup.sipIp')}/api/call/hangup?session={item.get('status.siPCallSession')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic ZW5saWZlOktyMnNzMmsycw==\"}]}]},{\"name\":\"onEvent - login - mark user online\",\"tag\":\"sys_onEvent_login_user\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemEvent\",\"url\":\"users\",\"ev\":\"login\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/online\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')*1\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/dot\"}],\"value\":{\"type\":\"string\",\"value\":\"green\"}}]},{\"name\":\"onEvent - logout - mark user offline\",\"tag\":\"sys_onEvent_logout_user\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemEvent\",\"url\":\"users\",\"ev\":\"logout\"}],\"then\":[{\"op\":\"turnOff\",\"items\":[{\"id\":null,\"path\":\"/status/online\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/dot\"}]}]},{\"name\":\"onCreate - role - share role id to site\",\"tag\":\"sys_onCreate_role_shareIdToSite\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"roles?tag\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('otherRolesSiteId')||item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ids\\\": {[item.get('tag')+\\\"Id\\\"]: item.get('id')}};json}\"}]},{\"name\":\"onAdd - room - create Nord Pool device to building site\",\"tag\":\"sys_onAdd_room_createNordPoolDevice\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=nordPool*&addToBuildingSiteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('addToBuildingSiteId')}/devices?tag=nordPoolDevice&$by=tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {tag: 'nordPoolDevice', enabled: true, name: '⚡NORD POOL', roomId: item.get('createDevices.io.addToBuildingSiteId'), sourcetype: 'output', policy: 'public', deviceTypes: ['genericDevice'], type: 'generic', usage: {generic: ['generic']}, nodeId: 2, ui: check[0].get('templates.devices.nordPoolDevice.ui'), follow: [{mode: 'copy', path: '/status/hour', nolog: true, items: [{id: item.get('id'), path: '/status/hour'}]}, {mode: 'formula', path: '/status/current', value: 'i[0].hours24[i[1]].step(1)', nolog: true, items: [{id: item.get('id'), path: '/status/today'}, {id: item.get('id'), path: '/status/hour'}]}, {mode: 'formula', path: '/status/rel', value: 'i[0].hours24[i[1]]/i[0].max*100', nolog: true, items: [{id: item.get('id'), path: '/status/today'}, {id: item.get('id'), path: '/status/hour'}]}, {mode: 'formula', path: '/status/max', nolog: true, value: 'i[0]?i[0]:null', items: [{id: item.get('id'), path: '/status/today/max'}]}, {mode: 'formula', path: '/status/min', nolog: true, value: 'i[0]?i[0]:null', items: [{id: item.get('id'), path: '/status/today/min'}]}, {mode: 'formula', path: '/status/today', nolog: true, value: 'i[0]?i[0]:null', items: [{id: item.get('id'), path: '/status/today'}]}, {mode: 'formula', path: '/status/tomorrow', nolog: true, value: 'i[0]?i[0]:null', items: [{id: item.get('id'), path: '/status/tomorrow'}]}, {mode: 'on', path: '/status/online', nolog: true, items: [{id: 2, path: '/id'}]}] } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/addToBuildingSiteId\"}]}]},{\"name\":\"onCreate - room - ecoId sharing to climate controlled rooms Vol1\",\"tag\":\"sys_onCreate_room_shareEcoIdToClimateRoomsVol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?climate.modes&(!ids||!ids.ecoId)\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&tag=eco\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {shareEcoId: true}};json}\"}]},{\"name\":\"onCreate - room - ecoId sharing to climate controlled rooms Vol2\",\"tag\":\"sys_onCreate_room_shareEcoIdToClimateRoomsVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?ids.ecoId&status.shareEcoId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?(!ids||ids.ecoId!={item.get('ids.ecoId')})\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'ids': {'ecoId': item.get('ids.ecoId')}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/shareEcoId\"}]}]},{\"name\":\"onAdd - room - messages send\",\"tag\":\"sys_onAdd_room_messagesSend\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=sendMessages&buildingId&setup.text&setup.method&setup.recipient&setup.send\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}{item.get('setup.recipient')=='all'?'':'&number='+item.get('setup.recipient')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {messages: {[now.date('U')]: {body: item.get('setup.text')}}}};json}\"},{\"op\":\"set\",\"items\":[{\"path\":\"/lastMessageTime\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/recallTime\"},{\"path\":\"/setup/recall\"}]},{\"op\":\"remove\",\"items\":[{\"path\":\"/setup/send\"}],\"delay\":5000},{\"op\":\"set\",\"items\":[{\"path\":\"/lastMessageRecipient\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.recipient')\"}}]},{\"name\":\"onAdd - room - messages recall last\",\"tag\":\"sys_onAdd_room_messagesRecallLast\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=sendMessages&lastMessageTime&setup.recall\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId={item.get('buildingId')}{item.get('lastMessageRecipient')=='all'?'':'&number='+item.get('lastMessageRecipient')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {messages: {[item.get('lastMessageTime')]: null}}};json}\"},{\"op\":\"set\",\"items\":[{\"path\":\"/recallTime\"}],\"value\":{\"type\":\"formula\",\"value\":\"now.date('U')\"}},{\"op\":\"remove\",\"items\":[{\"path\":\"/lastMessageTime\"},{\"path\":\"/setup/send\"}]},{\"op\":\"remove\",\"items\":[{\"path\":\"/setup/recall\"}],\"delay\":5000}]},{\"enabled\":false,\"name\":\"onCreate - room - remote meters - create meters room on client site\",\"remarks\":\"This PUT command has to be executed on every meter adding because when all this kind of rooms are put to system together, in some unknown reason this rule executes only for first ones\",\"tag\":\"sys_onCreate_room_remoteMeters_createMetersRoomOnClientSite\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?category=remoteMeteringBuildingSite&linkedSiteId\"},{\"op\":\"itemAdd\",\"url\":\"rooms?category=remoteMeteringBuildingSite&linkedSiteId&forceCreate\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('linkedSiteId')}/rooms?category=remoteMeteringLinkedSite&$by=category\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ { 'category': 'remoteMeteringLinkedSite', 'name': '⚡️💧🚿🔥 METERS', 'nodeId': 2, 'enabled': true } ];json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceCreate\"}]}]},{\"name\":\"onCreate - room - share tagged room id to site\",\"tag\":\"sys_onCreate_room_shareIdToSite\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ids\\\": {[item.get('tag')+\\\"Id\\\"]: item.get('id')}};json}\"}]},{\"name\":\"onCreate - room - clientRoomId follow\",\"tag\":\"sys_onCreate_room_clientRoomId\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=clientRoom\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\",path: \\\"/setup/catConnWater\\\",items: [{id: item.get('id'),path: \\\"/setup/water/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]?null:'water_'+i[0]\\\"}, {mode: \\\"formula\\\",path: \\\"/setup/catConnElectricity\\\",items: [{id: item.get('id'),path: \\\"/setup/electricity/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]?null:'electricity_'+i[0]\\\"}, {mode: \\\"formula\\\",path: \\\"/setup/catConnHeating\\\",items: [{id: item.get('id'),path: \\\"/setup/heating/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]?null:'heating_'+i[0]\\\"}, {mode: \\\"formula\\\",path: \\\"/setup/catConnCooling\\\",items: [{id: item.get('id'),path: \\\"/setup/cooling/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]?null:'cooling_'+i[0]\\\"}, {mode: \\\"formula\\\",path: \\\"/setup/catConnGas\\\",items: [{id: item.get('id'),path: \\\"/setup/gas/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]?null:'gas_'+i[0]\\\"}, {mode: \\\"number\\\", path: \\\"/status/alarms/missingName\\\", value: \\\"i[0]&&!r[0]?'Enter owner name!':null\\\", \\\"nolog\\\": true, items: [{id: item.get('ids.clientRoomId'), path: \\\"/setup/add\\\"}], \\\"read\\\": [{id: item.get('ids.clientRoomId'), path: \\\"/setup/name\\\"}]}, {mode: \\\"number\\\", path: \\\"/status/messages/roleCreatedFeedBack\\\", value: \\\"i[0]?_('Added!'):null\\\", \\\"nolog\\\": true, items: [{id: item.get('ids.clientRoomId'), path: \\\"/setup/add\\\"}]}, {mode: \\\"formula\\\", path: \\\"/setup/water/nodeId\\\", value: \\\"i[0]&&i[1]&&i[2]&&(i[2]=='mb'&&i[3]&&i[4]||i[2]!='mb'&&i[3])?i[5][i[0]]||2:null \\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/water/gateway\\\"}, {path: \\\"/setup/water/type\\\"}, {path: \\\"/setup/water/conn\\\"}, {path: \\\"/setup/water/address1\\\"}, {path: \\\"/setup/water/address2\\\"}, {path: \\\"/setup/gatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/setup/electricity/nodeId\\\", value: \\\"i[0]&&i[1]&&i[2]&&i[3]?i[4][i[1]]||2:null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/electricity/conn\\\"}, {path: \\\"/setup/electricity/gateway\\\"}, {path: \\\"/setup/electricity/type\\\"}, {path: \\\"/setup/electricity/address\\\"}, {path: \\\"/setup/gatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/setup/heating/nodeId\\\", value: \\\"i[0]&&i[1]&&i[2]&&i[3]?i[4][i[1]]||2:null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/heating/conn\\\"}, {path: \\\"/setup/heating/gateway\\\"}, {path: \\\"/setup/heating/type\\\"}, {path: \\\"/setup/heating/address\\\"}, {path: \\\"/setup/gatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/setup/cooling/nodeId\\\", value: \\\"i[0]&&i[1]&&i[2]&&i[3]?i[4][i[1]]||2:null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/cooling/conn\\\"}, {path: \\\"/setup/cooling/gateway\\\"}, {path: \\\"/setup/cooling/type\\\"}, {path: \\\"/setup/cooling/address\\\"}, {path: \\\"/setup/gatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/setup/gas/nodeId\\\", value: \\\"i[0]&&i[1]&&i[2]&&i[3]?i[4][i[1]]||2:null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/gas/conn\\\"}, {path: \\\"/setup/gas/gateway\\\"}, {path: \\\"/setup/gas/type\\\"}, {path: \\\"/setup/gas/address\\\"}, {path: \\\"/setup/gatewayIds\\\"}]} ]\"}}],\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]}},{\"name\":\"onCreate - room - generalRoomId follow\",\"tag\":\"sys_onCreate_room_generalRoomId\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=generalRoom\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\", path: \\\"/status/warnings/missing\\\", value: \\\"(i[0]||i[1]||i[2]||i[3]||i[4]||i[5])&&(!i[0]||!i[1]||!i[2]||!i[3]||!i[4]||!i[5])?(_('For adding fill also')+' '+(!i[0]?'`'+_('name')+'`':'') + (!i[1]?(!i[0]?', ':'')+'`'+_('counts')+'`':'')+(!i[2]?((!i[0]||!i[1])?', ':'')+'`'+_('connectivity')+'`':'')+(!i[3]?((!i[0]||!i[1]||!i[2])?', ':'')+'`'+_('meter type')+'`':'')+(!i[4]?((!i[0]||!i[1]||!i[2]||!i[3])?', ':'')+'`'+_('gateway')+'`':'')+(!i[5]?((!i[0]||!i[1]||!i[2]||!i[3]||!i[4])?', ':'')+'`'+_('address')+'`':'')):null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/name\\\"}, {path: \\\"/setup/meterType\\\"}, {path: \\\"/setup/conn\\\"}, {id: item.get('id'),path: \\\"/setup/type\\\"}, {id: item.get('id'),path: \\\"/setup/gateway\\\"}, {id: item.get('id'),path: \\\"/setup/address\\\"}]}, {mode: \\\"formula\\\", path: \\\"/status/alarms/missingKey\\\", value: \\\"i[0]&&i[1]&&i[2]&&i[3]&&i[4]&&i[5]?null:c\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/name\\\"}, {path: \\\"/setup/meterType\\\"}, {path: \\\"/setup/conn\\\"}, {id: item.get('id'),path: \\\"/setup/type\\\"}, {id: item.get('id'),path: \\\"/setup/gateway\\\"}, {id: item.get('id'),path: \\\"/setup/address\\\"}]}, {mode: \\\"formula\\\",path: \\\"/setup/catConn\\\",items: [{id: item.get('id'),path: \\\"/setup/meterType\\\"}, {id: item.get('id'),path: \\\"/setup/conn\\\"}],\\\"nolog\\\": true,value: \\\"!i[0]||!i[1]?null:i[0]+'_'+i[1]\\\"}]\"}}],\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]}},{\"name\":\"onCreate - room - mbusGatewaysRoomId follow\",\"tag\":\"sys_onCreate_room_mbusGatewaysRoom\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=mbusGatewaysRoom\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\", path: \\\"/status/warnings/portExists\\\", value: \\\"i[1]?null:i[0]&&r[0]&&i[2]&&r[0][i[2]]&&r[0][i[2]][i[0]]&&r[0][i[2]][i[0]].port==i[0]?r[0][i[2]][i[0]].name+' '+_('already uses port')+' '+i[0]:null\\\", \\\"nolog\\\": true,items: [{path: \\\"/setup/port\\\"}, {path: \\\"/setup/add\\\"}, {path: \\\"/setup/node\\\"}],\\\"read\\\": [{path: \\\"/setup/mbusGatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/status/warnings/missing\\\", value: \\\"(i[0]||i[1]||i[2]||i[3])&&(!i[0]||!i[1]||!i[2]||!i[3])?(_('Enter')+' '+(!i[0]?_('name'):'') + (!i[1]?(!i[0]?', ':'')+_('controller'):'')+(!i[2]?((!i[0]||!i[1])?', ':'')+'port':'')+(!i[3]?((!i[0]||!i[1]||!i[2])?', ':'')+'lubatud arvestite arv':'')):null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/name\\\"}, {path: \\\"/setup/node\\\"}, {path: \\\"/setup/port\\\"}, {id: item.get('id'),path: \\\"/setup/mbusSize\\\"}]}]\"}}],\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]}},{\"name\":\"onCreate - room - modbusGatewaysRoomId follow\",\"tag\":\"sys_onCreate_room_modbusGatewaysRoom\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?tag=modbusGatewaysRoom\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\", path: \\\"/status/warnings/addressExists\\\", value: \\\"i[1]?null:i[0]&&r[0]&&i[2]&&r[0][i[2]]&&r[0][i[2]][i[0]]&&r[0][i[2]][i[0]].address==i[0]?r[0][i[2]][i[0]].name+' '+_('already uses address')+' '+i[0]:null\\\", \\\"nolog\\\": true,items: [{path: \\\"/setup/address\\\"}, {path: \\\"/setup/add\\\"}, {path: \\\"/setup/node\\\"}],\\\"read\\\": [{path: \\\"/setup/modbusGatewayIds\\\"}]}, {mode: \\\"formula\\\", path: \\\"/status/warnings/missing\\\", value: \\\"(i[0]||i[1]||i[2]||i[3])&&(!i[0]||!i[1]||!i[2])?(_('Enter')+' '+(!i[0]?_('name'):'') + (!i[1]?(!i[0]?', ':'')+_('controller'):'')+(!i[2]?((!i[0]||!i[1])?', ':'')+_('address'):'')):null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/name\\\"}, {path: \\\"/setup/node\\\"}, {path: \\\"/setup/address\\\"}]}]\"}}],\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]}},{\"name\":\"onCreate - device - set buildingId to device vol1\",\"tag\":\"sys_onCreate_device_setBuildingIdToDeviceVol1\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId\"},{\"op\":\"itemChange\",\"url\":\"devices?siteId\",\"path\":\"/siteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?buildingId&id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'setBuildingId': true};json}\"}]},{\"name\":\"onCreate - device - set buildingId to device vol2\",\"tag\":\"sys_onCreate_device_setBuildingIdToDeviceVol2\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?setBuildingId\",\"forTime\":5000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/devices?buildingId!={item.get('buildingId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'buildingId': item.get('buildingId')};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setbuildingId\"}]}]},{\"name\":\"onCreate - device - share tagged device id to site\",\"tag\":\"sys_onCreate_device_shareIdToSite\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&tag\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ids\\\": {[item.get('tag')+\\\"Id\\\"]: item.get('id')}};json}\"}]},{\"name\":\"onCreate - device - assign siteId Vol1\",\"tag\":\"sys_onCreate_deviceAssignSiteIdVol1\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?roomId\"},{\"op\":\"itemChange\",\"url\":\"devices?roomId\",\"path\":\"/roomId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {assignSiteId: true}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\": {assignSiteId: true}};json}\"}]},{\"name\":\"onCreate - device - assign siteId Vol2\",\"tag\":\"sys_onCreate_deviceAssignSiteIdVol2\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.assignSiteId\"},{\"op\":\"itemAdd\",\"url\":\"sites?status.assignSiteId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?roomId={item.get('id')}&siteId!={item.get('siteId')||item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"siteId\\\": item.get('siteId')||item.get('id')};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/assignSiteId\"}]}]},{\"name\":\"onCreate - device - childNode - common rules - creator node rules\",\"tag\":\"sys_onCreate_childNode_commonRules_creatorNodeRules\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&type=child-node\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&type=child-node&nodeRules.commonRules\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_device_blockedTurnOff,sysNode_onChange_device_forcededTurnOn&nodeId={item.get('id')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"remarks\\\": \\\"disabled, functionality taken to in output.js rule in build 419\\\", \\\"name\\\": \\\"onChange - device - turn off blocked devices status output\\\", \\\"tag\\\":\\\"sysNode_onChange_device_blockedTurnOff\\\", \\\"nodeId\\\": item.get('id'), \\\"enabled\\\": false, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('id')+\\\"status.output&status.block{@}>0\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"turnOff\\\", items: [{id: null, path: \\\"/status/output\\\"}]}], \\\"repeat\\\": true}, {\\\"remarks\\\": \\\"disabled, functionality taken to in output.js rule in build 419\\\", \\\"name\\\": \\\"onChange - device - turn on forced devices status output\\\", \\\"tag\\\":\\\"sysNode_onChange_device_forcededTurnOn\\\", \\\"nodeId\\\": item.get('id'), \\\"enabled\\\": false, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('id')+\\\"!status.output&status.force&status.force{@}>0&!status.block{@}\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"turnOn\\\", items: [{id: null, path: \\\"/status/output\\\"}]}], \\\"repeat\\\": true} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_timeSetRuleChildNode&nodeId={item.get('id')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"TIME set - child-node\\\", \\\"nodeId\\\": item.get('id'), \\\"ref\\\": item.get('id'), \\\"tag\\\": \\\"sysNode_timeSetRuleChildNode\\\", \\\"category\\\": null, \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\":\\\"event\\\", id: null, value: {\\\"event\\\":\\\"load\\\"}}], \\\"then\\\": [{\\\"op\\\": \\\"executeRule\\\", \\\"rules\\\": [], \\\"delay\\\": 60000}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/year\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('YYYY')}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/month\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('M')}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/day\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('D')}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/weekDay\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('w')}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/hourGmt2\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('hh', 2)}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/hour\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('hh')}\\\"}}, {\\\"op\\\": \\\"set\\\", items: [{path: \\\"/status/time\\\"}], value:{\\\"type\\\": \\\"string\\\", value: \\\"{now.date('hh:mm')}\\\"}}]} ];json}\"}]},{\"name\":\"onCreate - device - childNode - update ui, gen key&uuid, create internal and onboard Modbus and RF\",\"tag\":\"sys_onCreate_childNode_common\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&type=child-node\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.childNode.ui')\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/usage\"}],\"value\":{\"type\":\"formula\",\"value\":\"{controller: ['node']}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\", path: \\\"/setup/wifi/mode\\\", value: \\\"i[0]!==''&&i[1]!==''?'apsta':null\\\", items: [{path: '/setup/wifi/staSsid'}, {path: '/setup/wifi/staKey'}] }]\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/key\"}],\"value\":{\"type\":\"string\",\"value\":\"{item.get('key')?item.get('key'):util.rand(32)}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/uuid\"}],\"value\":{\"type\":\"string\",\"value\":\"{item.get('key')?item.get('key'):util.rand(32)}\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('ids.modbusGatewaysRoomId')},{item.get('ids.mbusGatewaysRoomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"controllerIds\\\":{[item.get('id')]: item.get('name')}}};json}\",\"delay\":1000},{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"delRef\\\": item.get('id'), \\\"nodeId\\\": item.get('id'), \\\"dev\\\": \\\"/dev/enlifeMiniModbus\\\", \\\"name\\\": \\\"`\\\" + item.get('name') + \\\"` Modbus internal - only for onboard IO-s\\\", \\\"nodeRoomId\\\": item.get('roomId'), \\\"roomId\\\": item.get('ids.modbusGatewaysRoomId')||item.get('roomId'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"setup\\\": {\\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":5, \\\"nodeName\\\": item.get('name'), \\\"node\\\": item.get('id')}, usage: {controller: ['gateway']}, \\\"enabled\\\": true};json}\",\"delay\":1000},{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"tag\\\": \\\"modbusGateway\\\", \\\"siteId\\\": item.get('siteId'), \\\"delRef\\\": item.get('id'), \\\"nodeId\\\": item.get('id'), \\\"dev\\\": \\\"/dev/enlife0\\\", \\\"name\\\": \\\"`\\\" + item.get('name') + \\\"` Modbus onboard\\\", \\\"nodeRoomId\\\": item.get('roomId'), \\\"roomId\\\": item.get('ids.modbusGatewaysRoomId')||item.get('roomId'), \\\"type\\\": \\\"modbusDriver\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('setup.stairCase'), \\\"floor\\\": item.get('setup.floor'), \\\"setup\\\": {\\\"baudRate\\\":115200, \\\"format\\\":\\\"8E1\\\", \\\"pollingDelay\\\":5, \\\"nodeName\\\": item.get('name'), \\\"node\\\": item.get('id')}, usage: {controller: ['gateway']}, \\\"enabled\\\": false};json}\",\"delay\":1000},{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"tag\\\": \\\"enlifeRf\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('id'), \\\"nodeId\\\": item.get('id'), \\\"baudRate\\\": \\\"115200\\\", \\\"format\\\":\\\"8n1\\\", \\\"name\\\": \\\"`\\\" + item.get('name') + \\\"` RF\\\", \\\"roomId\\\": item.get('ids.rfGatewaysRoomId')||item.get('roomId'), \\\"type\\\":\\\"enlife_lineExtender_RF\\\", \\\"dev\\\":\\\"/dev/enlifeMiniRf\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('stairCase'), \\\"floor\\\": item.get('floor'), \\\"ui\\\":{\\\"i1\\\":[\\\"enabled#onoff\\\", \\\"enabled#i.Enabled\\\"],\\\"i3\\\":[\\\"nodeId#i.valD#Node ID\\\"]}, \\\"enabled\\\": false};json}\",\"delay\":1000}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('ids.modbusGatewaysRoomId')},{item.get('ids.mbusGatewaysRoomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"controllerIds\\\":{[item.get('id')]: null}}};json}\"}]},{\"name\":\"onCreate - device - enlifeMiniModbus - create Mini IO\",\"tag\":\"sys_onCreate_childNode_miniIo\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&nodeId&tag=modbusGateway&dev=*enlifeMiniModbus\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices?tag=miniIo&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"tag\\\": \\\"miniIo\\\", \\\"siteId\\\": item.get('siteId'), \\\"ref\\\": item.get('ref'), \\\"nodeId\\\": item.get('nodeId'), \\\"parentId\\\": item.get('id'), \\\"address\\\": 1, \\\"name\\\": \\\"`\\\" + item.get('setup.nodeName') + \\\"` IO-s\\\", \\\"roomId\\\": item.get('nodeRoomId'), \\\"type\\\": \\\"enlife_6Di2Do1Ro_Modbus\\\", \\\"acl\\\": item.get('acl'), \\\"stairCase\\\": item.get('stairCase'), \\\"floor\\\": item.get('floor'), \\\"ui\\\":{\\\"i1\\\":[\\\"enabled#onoff\\\", \\\"enabled#i.Enabled\\\", \\\"status.voltage#i.volt1\\\"],\\\"i3\\\":[\\\"nodeId#i.valD#Node ID\\\", \\\"setup.delete#button#Delete#true##red#Deleting the device will stop all related devices and they need to be manually reconfigured. Delete anyway?\\\"]}, \\\"enabled\\\": true}];json}\"}]},{\"name\":\"onCreate - room - ventilationRoom_vol1\",\"tag\":\"sys_onCreate_room_ventilationRoom_vol1\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom\",\"forTime\":10000},{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom&requestVentilationDevices\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/linkedDevices\"}],\"value\":{\"type\":\"formula\",\"value\":\"[item.get('sourceId')].concat(item.get('status.ventilationNeedCo2Ids',null)).concat(item.get('status.ventilationNeedRhIds',null)).filter(n=>n)\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'00')*1, mode: 'max', path: '/status/ventilationNeed', step: 1, min: 0, max: 100, items: (item.get('ventilation.status.ventilationNeedCo2',[]).concat(item.get('ventilation.status.ventilationNeedRh',[]))).filter(n=>n.id)}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'10')*1, mode: 'copy', path: '/status/device', nolog: true, items: [{id: item.get('sourceId'), path: '/status'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'11')*1, mode: 'formula', path: '/setpoint', nolog: null, value:'i[0]?i[2]:i[1]', items: [{path: '/status/eco'}, {path: '/setup/setpointNormal'}, {path: '/setup/setpointEco'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'12')*1, mode: 'formula', path: '/setup/ventMode', nolog: null, value:\\\"!r[0]||r[0].slice(0,4)!='auto'&&now.date('U')>=i[0]?'autoCo2':c\\\", items: [{path: '/status/manualVentModeEndTime'}, {id: 2, path: '/status/time'}], read: [{path: '/setup/ventMode'}]}\"}},{\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'13')*1, mode: 'formula', path: '/status/manualVentModeEndTime', nolog: null, value:\\\"!i[0]||i[0].slice(0,4)=='auto'?null:now.date('U')*1+(r[0]||3600000)\\\", items: [{path: '/setup/ventMode'}], read: [{path: '/setup/manualVentModeDuration'}]}\"}},{\"remarks\":\"autoCo2_status.fanStep\",\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'31')*1, mode: 'formula', path: '/status/fanStep', nolog: null, value:\\\"!i[1]?c:i[1]=='min'?1:i[1]=='max'?r[0]:i[0]+(i[1]=='covid'?19.99:0)>100?r[0]:((i[0]+(i[1]=='covid'?19.99:0))/(100/r[0])|0)+1\\\", items: [{path: '/status/ventilationNeed'}, {path: '/setup/ventMode'}], read: [{path: '/fanSteps'}]}\"}},{\"remarks\":\"autoCo2_status.fanSpeed\",\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'32')*1, mode: 'formula', path: '/status/fanSpeed', nolog: null, value:\\\"!i[1]?c:i[1]=='min'?item.get('minSpeed',20):i[1]=='max'?100:i[0]+(i[1]=='covid'?item.get('covidAddOn',19.99):0)>100?100:(i[0]+(i[1]=='covid'?item.get('covidAddOn',19.99):0))|0\\\", items: [{path: '/status/ventilationNeed'}, {path: '/setup/ventMode'}]}\"}},{\"remarks\":\"ui warning message\",\"op\":\"arrayAdd\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"{id: (item.get('created')+'40')*1, mode: 'formula', path: '/status/warnings/fault', nolog: null, value:\\\"i[0]?'Fault':null\\\", items: [{path: '/status/device/fault'}]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/setpointNormal\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointNormal',20)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/setpointEco\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.setpointEco',18)\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setpoint\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setpoint',20)\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {requestVentilationDevices: item.get('id')}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/requestVentilationDevices\"}]}]},{\"name\":\"onCreate - room - ventilationRoom_vol2\",\"tag\":\"sys_onCreate_room_ventilationRoom_vol2\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.requestVentilationDevices\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('status.requestVentilationDevices')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ventilation\\\": item.get('ventilation')};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/requestVentilationDevices\"}]}]},{\"name\":\"onCreate - room - ventilationRoom - type komfovent C6\",\"tag\":\"sys_onCreate_room_ventilationRoom_komfovent_C6\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom&sourceType=komfovent_C6_Modbus\",\"forTime\":10000},{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom&sourceType=komfovent_C6_Modbus&forceUpdateVentDeviceFollow\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('sourceId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{follow: [{mode: 'copy', path: '/status/currentMode', nolog: null, items: [{id: item.get('id'), path: '/status/fanStep'}]}, {mode: 'formula', path: '/status/modeSettings/away/setpoint', value: 'i[1]==1?i[0]:c', items: [{id: item.get('id'), path: '/setpoint'}, {path: '/status/currentMode'}]}, {mode: 'formula', path: '/status/modeSettings/normal/setpoint', value: 'i[1]==2?i[0]:c', items: [{id: item.get('id'), path: '/setpoint'}, {path: '/status/currentMode'}]}, {mode: 'formula', path: '/status/modeSettings/intensive/setpoint', value: 'i[1]==3?i[0]:c', items: [{id: item.get('id'), path: '/setpoint'}, {path: '/status/currentMode'}]}, {mode: 'formula', path: '/status/modeSettings/boost/setpoint', value: 'i[1]==4?i[0]:c', items: [{id: item.get('id'), path: '/setpoint'}, {path: '/status/currentMode'}]}, {mode: 'formula', path: '/status/output', value: 'i[0]>0&&i[0]<10?true:c', items: [{path: '/status/currentMode'}]}, {mode: 'formula', path: '/status/fault', value: 'i[0]>0&&i[0]<11?true:false', items: [{id: item.get('sourceId'), path: '/status/ALARMS/activeAlarmsCount'}]}] };json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateVentDeviceFollow\"}]}]},{\"name\":\"onCreate - room - ventilationRoom - type vallox_MV\",\"tag\":\"sys_onCreate_room_ventilationRoom_vallox_MV\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom&sourceType=vallox_MV_Modbus\",\"forTime\":10000},{\"op\":\"itemAdd\",\"url\":\"rooms?sourceId&tag=ventilationRoom&sourceType=vallox_MV_Modbus&forceUpdateVentDeviceFollow\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('sourceId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{follow:[{mode: \\\"formula\\\", path: \\\"/status/virtual/currentMode\\\", value: \\\"i[1]==1?'away':i[1]==2?'home':i[1]==3?'boost':'extra'\\\", items: [{id: item.get('id'), path: \\\"/status/fanStep\\\"}],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/away/setpoint\\\", value: \\\"i[1]=='away'?i[0]:c\\\", items: [{ id: item.get('id'), path: \\\"/setpoint\\\" }, { path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/home/setpoint\\\", value: \\\"i[1]=='home'?i[0]:c\\\", items: [{ id: item.get('id'), path: \\\"/setpoint\\\" }, { path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/boost/setpoint\\\", value: \\\"i[1]=='boost'?i[0]:c\\\", items: [{ id: item.get('id'), path: \\\"/setpoint\\\" }, { path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/extra/setpoint\\\", value: \\\"i[0]=='extra'?i[0]:c\\\", items: [{ id: item.get('id'), path: \\\"/setpoint\\\" }, { path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/mode\\\", value: \\\"i[0]?0:5\\\", items: [{ path: \\\"/status/output\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/output\\\", value: \\\"i[0]==0?true:false\\\", items: [{ path: \\\"/status/mode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/state\\\", value: \\\"i[0]=='home'?0:i[0]=='away'?1:c\\\", items: [{ path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/boostTimerInMinutes\\\", value: \\\"i[0]=='boost'?65535:0\\\", items: [{ path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/fireplaceTimerInMinutes\\\", value: \\\"i[0]=='fireplace'?65535:0\\\", items: [{ path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/extraTimerInMinutes\\\", value: \\\"i[0]=='extra'?65535:0\\\", items: [{ path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/extraTimeInMinutes\\\", value: \\\"i[0]=='extra'?65535:0\\\", items: [{ path: \\\"/status/virtual/currentMode\\\" }],},{mode: \\\"formula\\\", path: \\\"/status/boostTimerEnabled\\\", value: \\\"!i[0]?1:c\\\", items: [{path: \\\"/status/boostTimerEnabled\\\", }],},{mode: \\\"formula\\\", path: \\\"/status/fireplaceTimerEnabled\\\", value: \\\"!i[0]?1:c\\\", items: [{path: \\\"/status/fireplaceTimerEnabled\\\", }],},{mode: \\\"formula\\\", path: \\\"/status/extraTimerEnabled\\\", value: \\\"!i[0]?1:c\\\", items: [{path: \\\"/status/extraTimerEnabled\\\", }],},{mode: \\\"formula\\\", path: \\\"/status/fanSteps\\\", value: \\\"!c?3:c\\\", items: [{path: \\\"/status/fanSteps\\\", }],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/extra/extractFanSpeed\\\", value: \\\"i[0]||i[1]\\\", items: [{path: \\\"/status/modeSettings/extra/extractFanSpeed\\\"}, {path: \\\"/status/modeSettings/away/fanSpeed\\\"}],},{mode: \\\"formula\\\", path: \\\"/status/modeSettings/extra/supplyFanSpeed\\\", value: \\\"i[0]||i[1]\\\", items: [{path: \\\"/status/modeSettings/extra/supplyFanSpeed\\\"}, {path: \\\"/status/modeSettings/away/fanSpeed\\\"}],},] };json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/forceUpdateVentDeviceFollow\"}]}]},{\"name\":\"onCreate - room - with setpoint - mark node\",\"tag\":\"sys_onCreate_room_withSetpoint_markNode\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?nodeId>2&climateControl\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('nodeId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'nodeRules': {'roomSetpoint': true}};json}\"}]},{\"enabled\":true,\"name\":\"onAdd - childNode - roomSetpoint - creator node rules\",\"tag\":\"sys_onAdd_childNode_roomSetpoint_creatorNodeRules\",\"category\":\"system\",\"type\":\"if-then\",\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=child-node&siteId&nodeRules.roomSetpoint\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_room_setpoint*&nodeId={item.get('id')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"onChange - room - setpointEco propagation to setpoint\\\", \\\"tag\\\": \\\"sysNode_onChange_room_setpointPropagation_setpointEco\\\", \\\"remarks\\\": \\\"setpointEco changes reflects on setpoint\\\", \\\"nodeId\\\": item.get('id'), \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]},\\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&status.eco\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&status.eco\\\", path: \\\"/setup/setpointEco\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&status.eco\\\", path: \\\"/setpointMin\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&status.eco\\\", path: \\\"/setpointMax\\\"},],\\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/setpoint\\\"}],value: {\\\"type\\\": \\\"formula\\\",value: \\\"item.get('setup.setpointEco',21) < item.get('setpointMin',18) ? item.get('setpointMin',18) : item.get('setup.setpointEco',21) > (item.get('setpointMax',24)) ? item.get('setpointMax',24) : item.get('setup.setpointEco',21)\\\"}},],},{\\\"name\\\": \\\"onChange - room - setpointNormal, Min and Max propagation to setpoint\\\", \\\"tag\\\": \\\"sysNode_onChange_room_setpointPropagation_setpointNotEco\\\", \\\"remarks\\\": \\\"setpointNormal, Min and Max changes reflects on setpoint\\\", \\\"nodeId\\\": item.get('id'), \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]},\\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&!status.eco\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&!status.eco\\\", path: \\\"/setup/setpointNormal\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&!status.eco\\\", path: \\\"/setpointMin\\\"},{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&!status.eco\\\", path: \\\"/setpointMax\\\"},],\\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/setpoint\\\"}],value: {\\\"type\\\": \\\"formula\\\",value: \\\"item.get('setup.setpointNormal',21) < item.get('setpointMin',18) ? item.get('setpointMin',18) : item.get('setup.setpointNormal',21) > (item.get('setpointMax',24)) ? item.get('setpointMax',24) : item.get('setup.setpointNormal',21)\\\"}},{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/setup/setpointNormal\\\"}],value: {\\\"type\\\": \\\"formula\\\",value: \\\"item.get('setup.setpointNormal',21) < item.get('setpointMin',18) ? item.get('setpointMin',18) : item.get('setup.setpointNormal',21) > (item.get('setpointMax',24)) ? item.get('setpointMax',24) : item.get('setup.setpointNormal',21)\\\"}},],},{\\\"name\\\": \\\"onChange - room - setpointNormal ends eco mode\\\", \\\"tag\\\": \\\"sysNode_onChange_room_setpointNormal_endsEcoMode\\\", \\\"remarks\\\": \\\"setpointNormal change ends economy mode\\\", \\\"nodeId\\\": item.get('id'), \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]},\\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&status.eco\\\", path: \\\"/setup/setpointNormal\\\"},],\\\"then\\\": [{\\\"op\\\": \\\"remove\\\", items: [{ id: null, path: \\\"/status/eco\\\"}]},{\\\"op\\\": \\\"httpRequest\\\",\\\"method\\\": \\\"PATCH\\\",\\\"url\\\": \\\"http://127.0.0.1/sites?id={item.get('siteId')}\\\",\\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}],\\\"body\\\": \\\"{{status:{ alarms: { ecoEnd: {start: now.date('U'), tpl: item.get('name') + \\\\\\\" - {_('Economy mode')} {_('deactivated')}\\\\\\\", type: 'warn'}}}};json}\\\",},{\\\"op\\\": \\\"httpRequest\\\",\\\"method\\\": \\\"PATCH\\\",\\\"url\\\": \\\"http://127.0.0.1/sites?id={item.get('siteId')}\\\",\\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}],\\\"body\\\": \\\"{{status:{ alarms: { ecoEnd: null }}};json}\\\",\\\"delay\\\": 5000}],},{\\\"name\\\": \\\"onChange - room - uiSetpoint propagation to setpointNormal\\\", \\\"tag\\\": \\\"sysNode_onChange_room_setpointPropagation_uiSetpoint\\\", \\\"remarks\\\": \\\"uiSetpoint change reflects on setpointNormal, where it is checked against min and max\\\", \\\"nodeId\\\": item.get('id'), \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]},\\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id'), path: \\\"/status/uiSetpoint\\\"},],\\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/setup/setpointNormal\\\"}],value: {\\\"type\\\": \\\"formula\\\",value: \\\"item.get('status.uiSetpoint')\\\"}},],},{\\\"name\\\": \\\"onChange - room - setpoint propagation to uiSetpoint\\\", \\\"tag\\\": \\\"sysNode_onChange_room_setpointPropagation_setpoint\\\", \\\"remarks\\\": \\\"setpoint change reflects on other uiSetpoint, where it is reflected to setpointNormal\\\", \\\"nodeId\\\": item.get('id'), \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]},\\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"rooms?climateControl&nodeId=\\\" + item.get('id') + \\\"&!status.eco\\\", path: \\\"/setpoint\\\"},],\\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{ id: null, path: \\\"/status/uiSetpoint\\\"}],value: {\\\"type\\\": \\\"formula\\\",value: \\\"item.get('setpoint')\\\"}},],}, ];json}\"}]},{\"name\":\"onCreate - device - counter - mark node\",\"tag\":\"sys_onCreate_device_counter_markNode\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?nodeId>2&siteId&meterType\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('nodeId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'nodeRules': {'remoteMetering': true}};json}\"}]},{\"name\":\"onAdd - childNode - remoteMetering - creator node rules\",\"tag\":\"sys_onAdd_childNode_remoteMetering_creatorNodeRules\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=child-node&siteId&nodeRules.remoteMetering\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_statusCounterT*_updateTariffT*&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"onChange - status_counterT1 - update tariff to T1\\\", \\\"tag\\\": \\\"sysNode_onChange_statusCounterT1_updateTariffT1\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('nodeId')+\\\"setup.localTimeSwitch&status.counterT1&status.tariff!=1\\\", path: \\\"/status/counterT1\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{id: null, path: \\\"/status/tariff\\\"}], value: {\\\"type\\\": \\\"number\\\",value: \\\"1\\\"}} ]}, {\\\"name\\\": \\\"onChange - status_counterT2 - update tariff to T2\\\", \\\"tag\\\": \\\"sysNode_onChange_statusCounterT2_updateTariffT2\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"ui\\\":{\\\"i1\\\":[\\\"nodeId#i.node\\\"]}, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('nodeId')+\\\"setup.localTimeSwitch&status.counterT2&status.tariff!=2\\\", path: \\\"/status/counterT2\\\"}], \\\"then\\\": [{ \\\"op\\\": \\\"set\\\", items: [{id: null, path: \\\"/status/tariff\\\"}], value: {\\\"type\\\": \\\"number\\\",value: \\\"2\\\"}}]} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_rmFunc_setMeterDataOnMonthChange&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"RM function2 - set meter data on month change\\\", \\\"tag\\\": \\\"sysNode_rmFunc_setMeterDataOnMonthChange\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"check\\\": [{\\\"op\\\": \\\"equal\\\", id: item.get('nodeId'), path: \\\"/status/day\\\", value: {\\\"type\\\": \\\"string\\\", value: \\\"1\\\"}}], \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\", path: \\\"/ui/readings/cacheTime\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('nodeId')+\\\"meterType\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"PATCH\\\", \\\"url\\\": \\\"http://127.0.0.1/devices?id={item.get('id')}\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{'ui': {'readings': {[now.date('M')==1 ? now.date('YYYY')-1 : now.date('YYYY')]: {[now.date('M')==1 ? 12 : now.date('M')-1]: {'reading': item.get('ui.readings.cached'), 'readingT1': item.get('ui.readings.cachedT1'), 'readingT2': item.get('ui.readings.cachedT2'), 'con': ((item.get('ui.readings.cached') - item.get('ui.readings.last1.reading',0))*1000).step(1)/1000, 'conT1': ((item.get('ui.readings.cachedT1') - item.get('ui.readings.last1.readingT1',0))*1000).step(1)/1000, 'conT2': ((item.get('ui.readings.cachedT2') - item.get('ui.readings.last1.readingT2',0))*1000).step(1)/1000}}, 'last2': item.get('ui.readings.last1'), 'last1': {'con': ((item.get('ui.readings.cached') - item.get('ui.readings.last1.reading',0))*1000).step(1)/1000, 'reading': item.get('ui.readings.cached'), 'conT1': ((item.get('ui.readings.cachedT1') - item.get('ui.readings.last1.readingT1',0))*1000).step(1)/1000, 'readingT1': item.get('ui.readings.cachedT1'), 'conT2': ((item.get('ui.readings.cachedT2') - item.get('ui.readings.last1.readingT2',0))*1000).step(1)/1000, 'readingT2': item.get('ui.readings.cachedT2'), 'time': now.date('iso'), 'date': (now.date('U')*1+3*3600000).date('DD.MM.YYYY') }}}};json}\\\" }] } ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_rmFunc_setTariffChild*&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"RM function3 - set tariff on child node NIGHT\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('nodeId'), \\\"tag\\\": \\\"sysNode_rmFunc_setTariffChildNodeNight\\\", \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{'op': 'itemAdd', 'url': 'devices?id='+item.get('nodeId')+'&(status.weekDay>5|status.time>=23:00|status.time<07:00)'}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"PATCH\\\", \\\"url\\\": \\\"http://127.0.0.1/devices?(setup.tariff|tariff)&!setup.localTimeSwitch&nodeId=\\\" + item.get('nodeId'), \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Accept-Confirm\\\", \\\"data\\\": \\\"ok\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{'status':{'tariff':2}};json}\\\"} ]}, {\\\"name\\\": \\\"RM function3 - set tariff on child node DAY\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('nodeId'), \\\"tag\\\": \\\"sysNode_rmFunc_setTariffChildNode\\\", \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{'op': 'itemAdd', 'url': 'devices?id='+item.get('nodeId')+'&status.weekDay<6&status.time<23:00&status.time>=07:00'}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"PATCH\\\", \\\"url\\\": \\\"http://127.0.0.1/devices?(setup.tariff|tariff)&!setup.localTimeSwitch&nodeId=\\\" + item.get('nodeId'), \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Accept-Confirm\\\", \\\"data\\\": \\\"ok\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{'status':{'tariff':1}};json}\\\"} ]} ];json}\"},{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_device_setTariffOnIneproMbus*&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"onChange - device - set tariff DAY on Inepro MBus counter\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('nodeId'), \\\"tag\\\": \\\"sysNode_onChange_device_setTariffOnIneproMbusDay\\\", \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{'op': 'itemAdd', 'url': 'devices?type=inepro_pro380-md_M-Bus&status.tariff=1&nodeId='+item.get('nodeId')}], \\\"then\\\": [{\\\"op\\\": \\\"turnOn\\\", items: [{id: null, path: \\\"/status/tariffDay\\\"}]}]}, {\\\"name\\\": \\\"onChange - device - set tariff NIGHT on Inepro MBus counter\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('nodeId'), \\\"tag\\\": \\\"sysNode_onChange_device_setTariffOnIneproMbusNight\\\", \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{'op': 'itemAdd', 'url': 'devices?type=inepro_pro380-md_M-Bus&status.tariff=2&nodeId='+item.get('nodeId')}], \\\"then\\\": [{\\\"op\\\": \\\"turnOff\\\", items: [{id: null, path: \\\"/status/tariffDay\\\"}]}]}];json}\"}]},{\"name\":\"onCreate - device - zWaySmoke - mark node\",\"tag\":\"sys_onCreate_device_zWaySmoke_markNode\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?nodeId>2&siteId&type=*smoke_Z-Way\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('nodeId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'nodeRules': {'zWaySmoke': true}};json}\"}]},{\"name\":\"onAdd - childNode - zWaySmoke - creator node rules\",\"tag\":\"sys_onAdd_childNode_zWaySmoke_creatorNodeRules\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=child-node&siteId&nodeRules.zWaySmoke\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_device_zWaveSmokeAlarmTranslation&nodeId={item.get('nodeId')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[{\\\"name\\\": \\\"onChange - device - zWave smoke alarm translation\\\", \\\"nodeId\\\": item.get('nodeId'), \\\"ref\\\": item.get('nodeId'), \\\"tag\\\": \\\"sysNode_onChange_device_zWaveSmokeAlarmTranslation\\\", \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"enabled\\\": true, \\\"acl\\\": {\\\"policy\\\":  [{\\\"who\\\":  [4], \\\"acl\\\":  5}]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"itemChange\\\",\\\"url\\\": \\\"devices?type=generic_smoke_Z-Way&nodeId=\\\"+item.get('nodeId'),path: \\\"/status/alarm\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"set\\\", items: [{id: null, path: \\\"/status/active\\\"}], value:{\\\"type\\\": \\\"formula\\\", value: \\\"item.get('status.alarm')?true:false\\\"}}]}];json}\"}]},{\"name\":\"onCreate - device - 24hAlarm - set site to show 24h alarms\",\"tag\":\"sys_onCreate_device_24hAlarm_setSiteToShow24hAlarms\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&usage.alarm24\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'ui':{ 'notify': { [item.get('usage.alarm24').indexOf('/status/coAlarm')>=0 ? 'alarm24-status-coAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*coAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/faultAlarm')>=0 ? 'alarm24-status-faultAlarm' : null]: { 'type': 'warn', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*faultAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/fireAlarm')>=0 ? 'alarm24-status-fireAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*fireAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/gasAlarm')>=0 ? 'alarm24-status-gasAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*gasAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/panicAlarm')>=0 ? 'alarm24-status-panicAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*panicAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/powerAlarm')>=0 ? 'alarm24-status-powerAlarm' : null]: { 'type': 'warn', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*powerAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/safetyAlarm')>=0 ? 'alarm24-status-safetyAlarm' : null]: { 'type': 'warn', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*safetyAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/tamperAlarm')>=0 ? 'alarm24-status-tamperAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*tamperAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/turnedOffAlarm')>=0 ? 'alarm24-status-turnedOffAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*turnedOffAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/turnedOnAlarm')>=0 ? 'alarm24-status-turnedOnAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*turnedOnAlarm}: ')}\\\" }, [item.get('usage.alarm24').indexOf('/status/waterAlarm')>=0 ? 'alarm24-status-waterAlarm' : null]: { 'type': 'alarm', 'tpl': \\\"{_scope.formatAlarm(item,'{events;*waterAlarm}: ')}\\\" } }}};json}\"}]},{\"name\":\"onCreate - device - 24hAlarm - mark node\",\"tag\":\"sys_onCreate_device_24hAlarm_markNode\",\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"nodeId\":2,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?nodeId>2&siteId&usage.alarm24\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('nodeId')}&(!nodeRules||!nodeRules.set24hAlarm)\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{'nodeRules': {'set24hAlarm': true}};json}\"}]},{\"name\":\"onAdd - childNode - set24hAlarm - creator node rules\",\"tag\":\"sys_onAdd_childNode_set24hAlarm_creatorNodeRules\",\"remarks\":\"paistab, et pole vaja teha igasse nodesse seda neid reeglied. Tartus piisas kui oli node:e ja töötas\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":false,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=child-node&siteId&nodeRules.set24hAlarm\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PUT\",\"url\":\"  http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=sysNode_onChange_device_setCoAlarm&nodeId={item.get('id')}&$by=nodeId\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{[ {\\\"name\\\": \\\"onChange - device - set 24h alarm\\\", \\\"tag\\\":\\\"sysNode_onChange_device_set24hAlarm\\\", \\\"nodeId\\\": item.get('id'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('id')+\\\"&usage.alarm24[]&status.active\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"httpRequest\\\", \\\"method\\\": \\\"PATCH\\\", \\\"url\\\": \\\"http://127.0.0.1/devices?id={item.get('id')}\\\", \\\"headers\\\": [{\\\"name\\\": \\\"Content-Type\\\", \\\"data\\\": \\\"application/json\\\"}, {\\\"name\\\": \\\"Authorization\\\", \\\"data\\\": \\\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\\\"}], \\\"body\\\": \\\"{{status:{ [(item.get('usage.alarm24').includes('/status/fireAlarm')? 'fire': item.get('usage.alarm24').includes('/status/coAlarm')? 'co': item.get('usage.alarm24').includes('/status/gasAlarm')? 'gas': item.get('usage.alarm24').includes('/status/waterAlarm')? 'water': item.get('usage.alarm24').includes('/status/panicAlarm')? 'panic': item.get('usage.alarm24').includes('/status/powerAlarm')? 'power': item.get('usage.alarm24').includes('/status/faultAlarm')? 'fault': item.get('usage.alarm24').includes('/status/safetyAlarm')? 'safety' : '')+'Alarm']: true }};json}\\\", }], \\\"repeat\\\": true, \\\"recover\\\": [{\\\"op\\\": \\\"turnOff\\\", items: [{id: null, path: \\\"/status/fireAlarm\\\"}]}] }, {\\\"name\\\": \\\"onChange - device - set tamperAlarm\\\", \\\"tag\\\":\\\"sysNode_onChange_device_setTamperAlarm\\\", \\\"nodeId\\\": item.get('id'), \\\"enabled\\\": true, \\\"category\\\": \\\"system\\\", \\\"type\\\": \\\"if-then\\\", \\\"repeat\\\": true, \\\"acl\\\": {\\\"inherit\\\": [4]}, \\\"ui\\\": {\\\"i1\\\": [\\\"nodeId#i.node\\\"]}, \\\"if\\\": [{\\\"op\\\": \\\"itemAdd\\\", \\\"url\\\": \\\"devices?nodeId=\\\"+item.get('id')+\\\"&usage.alarm24[]=*tamperAlarm&status.tamper\\\"}], \\\"then\\\": [{\\\"op\\\": \\\"turnOn\\\", items: [{id: null, path: \\\"/status/tamperAlarm\\\"}]}], \\\"repeat\\\": true, \\\"recover\\\": [{\\\"op\\\": \\\"turnOff\\\", items: [{id: null, path: \\\"/status/tamperAlarm\\\"}]}]} ];json}\"}]},{\"name\":\"onCreate - device - meterHw - set ui and conf\",\"tag\":\"sys_onCreate_devices_meterHw_set\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?setup.meterType&setup.conn&TEMPORARY_DISABLE_TO_LET_CT_READ_PULSE_DEVICES_AS_VIRTUAL_DEVICES\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"i1\\\": [\\\"address#i.address\\\", \\\"status.rssi#{value?'rssi: '+value:''}\\\", \\\"status.tamper#{value?'open':''}\\\",\\\"status.tariff#{value==1?_('day'):value==2?_('night'):''}\\\", \\\"status.tariff1#{value==1?_('day')+'1':value==2?_('night')+'1':''}\\\", \\\"status.tariff2#{value==1?_('day')+'2':value==2?_('night')+'2':''}\\\", \\\"status.tariff3#{value==1?_('day')+'3':value==2?_('night')+'3':''}\\\", \\\"status.tariff4#{value==1?_('day')+'4':value==2?_('night')+'4':''}\\\"], \\\"i2\\\": [\\\"status.counter#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Current reading'):''}\\\", item.get('setup.tariff')?\\\"status.counterT1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('DAY'):''}\\\":null, item.get('setup.tariff')?\\\"status.counterT2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('NIGHT'):''}\\\":null, \\\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\\\", item.get('setup.tariff1')?\\\"status.counter1T1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('DAY input')+'1':''}\\\":null, item.get('setup.tariff1')?\\\"status.counter1T2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('NIGHT input')+'1':''}\\\":null, \\\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\\\", item.get('setup.tariff2')?\\\"status.counter2T1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('DAY input')+'2':''}\\\":null, item.get('setup.tariff2')?\\\"status.counter2T2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('NIGHT input')+'2':''}\\\":null, \\\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\\\", item.get('setup.tariff3')?\\\"status.counter3T1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('DAY input')+'3':''}\\\":null, item.get('setup.tariff')?\\\"status.counter3T2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('NIGHT input')+'3':''}\\\":null, \\\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\\\", item.get('setup.tariff4')?\\\"status.counter4T1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('DAY input')+'4':''}\\\":null, item.get('setup.tariff4')?\\\"status.counter4T2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('NIGHT input')+'4':''}\\\":null, item.get('type').slice(-5)==\\\"M-Bus\\\"?\\\"setup.secondary#i.valE#{value?'M-Bus serial (secondary address)':''}\\\":null],\\\"i3\\\": [\\\"setup# #------------##indent\\\", \\\"setup# #Configuration##bold\\\", item.get('type').slice(-5)==\\\"M-Bus\\\"?\\\"setup.secondary#edit#Secondary address##indent\\\":null, item.get('type').slice(-5)==\\\"M-Bus\\\"?\\\"address#editn#Primary address##indent\\\" : \\\"address#editn#Address}##indent\\\", item.get('type').slice(-5)==\\\"M-Bus\\\"?\\\"setup.setAddress#button#Set primary address#true##white#Confirm setting primary address\\\":null,\\\"parentId#editn#Gateway ID##indent\\\", \\\"nodeId#editn#Node ID##indent\\\", \\\"enabled#onoff#Enabled##indent\\\", \\\"setup# #------------##indent\\\", \\\"setup.actualReading# #Reading correction##bold\\\", \\\"setup.actualReading#editn#Enter actual reading##indent\\\", \\\"status.counter,status.online#{!i[1]||i[0]==null?' ':''}#i.cantSaveReading##bold\\\", \\\"setup#button#Save#true\\\", item.get('setup.tariff')?\\\"setup# #------------##indent\\\":null, item.get('setup.tariff')?\\\"setup.actualReadingT1# #DAY reading correction##bold\\\":null, item.get('setup.tariff')?\\\"setup.actualReadingT1#editn#Enter actual reading##indent\\\":null, item.get('setup.tariff')?\\\"status.counterT1,status.online#{!i[1]||i[0]==null?' ':''}#i.cantSaveReading##bold\\\":null, item.get('setup.tariff')?\\\"setup#button#Save#true\\\":null, item.get('setup.tariff')?\\\"setup# #------------##indent\\\":null, item.get('setup.tariff')?\\\"setup.actualReadingT2# #NIGHT reading correction##bold\\\":null, item.get('setup.tariff')?\\\"setup.actualReadingT2#editn#Enter actual reading##indent\\\":null, item.get('setup.tariff')?\\\"status.counterT2,status.online#{!i[1]||i[0]==null?' ':''}#i.cantSaveReading##bold\\\":null, item.get('setup.tariff')?\\\"setup#button#Save#true\\\":null, \\\"status.swVersion,status.fwVersion,status.fw.status,status.fw.progress,status.fw.path,status.sleepTime#{i[0]||i[1]||i[2]||i[3]||i[4]||i[5]?' ':''}#{i[0]||i[1]||i[2]||i[3]||i[4]||i[5]?'------------':''}##bold\\\", \\\"status.swVersion,status.fwVersion,status.fw.status,status.fw.progress,status.fw.path,status.sleepTime#{i[0]||i[1]||i[2]||i[3]||i[4]||i[5]?' ':''}#{i[0]||i[1]||i[2]||i[3]||i[4]||i[5]?'Device info':''}##bold\\\", \\\"status.swVersion#i.valE#{value?'Software version':''}##indent\\\", \\\"status.fwVersion#i.valE#{value?'Firmware version':''}##indent\\\", \\\"status.hwVersion#i.valE#{value?'Hardware version':''}##indent\\\", \\\"status.fw.status#i.valE#{value?'Firmware status':''}##indent\\\", \\\"status.fw.progress#i.valE#{value?'Firmware progress':''}##indent\\\", \\\"status.fw.path#i.valE#{value?'Firmware file path':''}##indent\\\", \\\"status.sleepTime#i.valE#{value?'Sleep time':''}##indent\\\", \\\"status.voltage#{value?value+' V':''}#{value?'Voltage':''}##indent\\\",item.get('type')=='enlife_2Ci_RF'?\\\"status.tamper#i.open#'Tamper'##indent\\\":null, \\\"status.drvOffset#{value||''}#{value?'Measured driver offset':''}##indent\\\", \\\"status.offset#{value||''}#{value?'Configured driver offset':''}##indent\\\",]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/conf\"}],\"value\":{\"type\":\"formula\",\"value\":\"[item.get('setup.conn')!='pulse'?({'id': item.get('id'), 'path': '/status/counter', 'target': '/status/counter', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null}):{}, item.get('setup.conn')!='pulse'?({'id': item.get('id'), 'path': '/status/counterT1', 'target': '/status/counterT1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null}):{}, item.get('setup.conn')!='pulse'?({'id': item.get('id'), 'path': '/status/counterT2', 'target': '/status/counterT2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null}):{}, item.get('setup.conn')=='mb'?({'id': item.get('id'), 'path': '/status/readings', 'target': '/status/readings', 'pollTime': 3600000}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter1', 'target': '/status/counter1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter1T1', 'target': '/status/counter1T1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter1T2', 'target': '/status/counter1T2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter2', 'target': '/status/counter2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter2T1', 'target': '/status/counter2T1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('setup.conn')=='pulse'?({'id': item.get('id'), 'path': '/status/counter2T2', 'target': '/status/counter2T2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter3', 'target': '/status/counter3', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter3T1', 'target': '/status/counter3T1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter3T2', 'target': '/status/counter3T2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter4', 'target': '/status/counter4', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter4T1', 'target': '/status/counter4T1', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}, item.get('type')=='enlife_4DSi4DSio_RF'?({'id': item.get('id'), 'path': '/status/counter4T2', 'target': '/status/counter4T2', 'pollTime': 3600000, 'threshold': item.get('setup.threshold')||null,'multiplier': item.get('setup.multiplier')||(item.get('setup.meterType')=='Electricity'?0.002:0.01)}):{}]\"}}]},{\"name\":\"onCreate - devices - meterHw - create client meter\",\"tag\":\"sys_onCreate_devices_meterHw_createClientMeter\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?siteId&setup.meterType&name&usage.controller[]=remoteMeter\"},{\"op\":\"itemAdd\",\"url\":\"devices?siteId&setup.meterType&name&usage.controller[]=remoteMeter&status.forceCreate\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/devices\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"siteId\\\": item.get('siteId'), \\\"roomId\\\": item.get('setup.roomId')||item.get('roomId'), 'tariff': item.get('setup.tariff'), \\\"usage\\\": item.get('setup.usage'), \\\"meterType\\\": item.get('setup.meterType'), \\\"name\\\": item.get(\\\"/name\\\").replace(\\\" kontroller\\\",\\\"\\\"), \\\"nodeId\\\": item.get('nodeId'), \\\"deviceType\\\": 'meter' + item.get('setup.meterType').charAt(0).toUpperCase() + item.get('setup.meterType').substr(1) + (item.get('setup.tariff')?'Tariff':''), \\\"type\\\": 'remoteMeter', \\\"enabled\\\": true, \\\"setup\\\": {\\\"sourceId\\\": item.get('id')}, \\\"conn\\\": item.get('setup.conn'), \\\"acl\\\": {\\\"inherit\\\": [item.get('siteId')], \\\"policy\\\": [{\\\"who\\\": [item.get('ids.technicianRoleId')], \\\"acl\\\": 25689}, {\\\"who\\\": [item.get('ids.buildingManagerRoleId')], \\\"acl\\\": 8281}]} };json}\"}]},{\"name\":\"onCreate - device - client meter - set follow, icon and unit\",\"tag\":\"sys_onCreate_meter\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?meterType\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"number\\\", path: \\\"/ui/readings/cached\\\", value: \\\"i[0]=='00:00'&&r[0]?r[0].step(0.001)*1:c||r[0]||0\\\", items: [{id: item.get('nodeId',2),path: \\\"/status/time\\\"}],\\\"read\\\": [{id: item.get('id'),path: \\\"/status/counter\\\"}]}, {mode: \\\"number\\\", path: \\\"/ui/readings/cachedT1\\\", value: \\\"i[0]=='00:00'&&r[0]?r[0].step(0.001)*1:c||r[0]||0\\\", items: [{id: item.get('nodeId',2),path: \\\"/status/time\\\"}],\\\"read\\\": [{id: item.get('id'),path: \\\"/status/counterT1\\\"}]}, {mode: \\\"number\\\", path: \\\"/ui/readings/cachedT2\\\", value: \\\"i[0]=='00:00'&&r[0]?r[0].step(0.001)*1:c||r[0]||0\\\", items: [{id: item.get('nodeId',2),path: \\\"/status/time\\\"}],\\\"read\\\": [{id: item.get('id'),path: \\\"/status/counterT2\\\"}]}, {mode: \\\"formula\\\", path: \\\"/ui/readings/cacheTime\\\", \\\"nolog\\\": true, items: [{id: item.get('nodeId',2), path: \\\"/status/time\\\"}], value: \\\"i[0]=='00:02'?now.date():c\\\"}, {mode: \\\"formula\\\", path: \\\"/status/counter\\\", value: \\\"i[0]>0?i[0]:c\\\", \\\"nolog\\\": true, items: [{id: item.get('setup.sourceId'), path: \\\"/status/counter\\\"+item.get('setup.sourcePort','')}]}, {mode: \\\"formula\\\", path: \\\"/status/counterT1\\\", value: \\\"i[0]>0?i[0]:c\\\", \\\"nolog\\\": true, items: [{id: item.get('setup.sourceId'), path: \\\"/status/counter\\\"+item.get('setup.sourcePort','')+\\\"T1\\\"}]}, {mode: \\\"formula\\\", path: \\\"/status/counterT2\\\", value: \\\"i[0]>0?i[0]:c\\\", \\\"nolog\\\": true, items: [{id: item.get('setup.sourceId'), path: \\\"/status/counter\\\"+item.get('setup.sourcePort','')+\\\"T2\\\"}]}, {mode: \\\"\\\", path: \\\"/status/online\\\", \\\"nolog\\\": false, items: [{id: item.get('setup.sourceId'), path: \\\"/status/online\\\"}]} ]\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/icon\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('meterType')=='coldWater'||item.get('meterType')=='hotWater'?'waterMeter':item.get('meterType')=='gas'?'gasMeter':'energyMeter'\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui/unit\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('meterType')=='coldWater'||item.get('meterType')=='hotWater'||item.get('meterType')=='gasMeter'?'㎥':'kWh'\"}}]},{\"name\":\"onCreate - device - Modbus gateway\",\"tag\":\"sys_onCreate_modbusGateway\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=modbusDriver\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/baudRate\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('baudRate') || item.get('setup.baudRate') || '115200' \"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/format\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('format') || item.get('setup.format') || '8E1' \"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/pollingDelay\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('pollingDelay') || item.get('setup.pollingDelay') || 5 \"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"address\\\": item.get('setup.address')}\"}},{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.controllers.modbusDriver.ui',{})\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"modbusGatewayIds\\\":{[item.get('setup.node')]: {[item.get('dev')=='/dev/enlifeMiniModbus'?'internal':item.get('dev')=='/dev/enlife0'?'onboard':item.get('setup.address','missing address')]: {\\\"name\\\": item.get('name'), \\\"address\\\": item.get('setup.address')}}}}};json}\"}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"modbusGatewayIds\\\":{[item.get('setup.node')]: {[item.get('setup.address')]:  null}}}};json}\"}]},{\"name\":\"onCreate - device - M-Bus gateway\",\"tag\":\"sys_onCreate_mbusGateWay\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_driver_M-Bus_Serial\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"ports\\\":[10,11,12,13,14,15,16,17,18,19], \\\"baudRates\\\": [\\\"300\\\", \\\"600\\\", \\\"1200\\\", \\\"2400\\\", \\\"4800\\\", \\\"9600\\\", \\\"19200\\\", \\\"38400\\\", \\\"57600\\\", \\\"115200\\\"], \\\"formats\\\": [{\\\"name\\\":\\\"8E1\\\"}, {\\\"name\\\":\\\"8n1\\\"}, {\\\"name\\\":\\\"8n2\\\"}, {\\\"name\\\":\\\"8O1\\\"}]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"i1\\\": [\\\"enabled#onoff\\\", \\\"enabled#i.Enabled\\\", \\\"setup.port#{'port:'+value}\\\"], \\\"i3\\\":[\\\"status.scan#onoff#Scan\\\", \\\"status.scanResults{new}*#{value;map:'{secondary}:{address}:{type}'}#Found meters\\\", \\\"setup# #------------##indent\\\", \\\"setup# #Configuration##bold\\\", \\\"setup.name#edit#Name##indent\\\", \\\"setup.port,no.off#mode#Port#setup.ports#indent\\\", \\\"setup.baudRate,no.off#mode#Baud rate#setup.baudRates#indent\\\", \\\"setup.format,no.off#mode#Format#setup.formats#indent\\\", \\\"setup.mbusSize#editn#M-Bus size##indent\\\", \\\"setup# #------------##indent\\\", \\\"nodeId#i.valD#Node ID\\\", \\\"enabled#onoff#Enabled\\\", \\\"setup.delete#button#Delete#true##red#Deleting the device will stop all related devices and they need to be manually reconfigured. Delete anyway?\\\"]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/follow\"}],\"value\":{\"type\":\"formula\",\"value\":\"[{mode: \\\"formula\\\", path: \\\"/status/warnings/mbusPortExists\\\", value: \\\"i[0]&&r[0]&&r[0][i[0]]&&r[0][i[0]].id!=r[1]?'Mbus port '+i[0]+' on juba kasutuses -> '+r[0][i[0]].name:null\\\", \\\"nolog\\\": true, items: [{path: \\\"/setup/port\\\"}], \\\"read\\\": [{id: item.get('roomId'), path: \\\"/setup/mbusGatewayIds\\\"}, {path: \\\"/id\\\"}]} ]\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"mbusGatewayIds\\\":{[item.get('setup.node')]: {[item.get('setup.port')]: {\\\"name\\\": item.get('name'), \\\"port\\\": item.get('setup.port')}}}}};json}\"}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?id={item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"mbusGatewayIds\\\":{[item.get('setup.node')]: {[item.get('setup.port')]:  null}}}};json}\"}]},{\"name\":\"onCreate - device - EnLife RF controller\",\"tag\":\"sys_onCreate_enlife2CiRf\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=enlife_2Ci_RF\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"i1\\\": [\\\"enabled#onoff#Enabled\\\", \\\"enabled#i.Enabled\\\"], \\\"i3\\\": [\\\"status# #Näit##bold\\\", \\\"status.counterDay1#i.valD#{_('Day')+'1 '+_('current reading')}##indent\\\", \\\"status.counterDay2#i.valD#{_('Day')+'1 '+_('current reading')}##indent\\\", \\\"status.counterNight1#i.valD#{_('Night')+'1 '+_('current reading')}##indent\\\", \\\"status.counterNight2#i.valD#{_('Night')+'2 '+_('current reading')}##indent\\\", \\\"status.voltage#i.volt1#Voltage##indent\\\", \\\"status.drvOffset#i.valD#Driver offset##indent\\\", \\\"status.offset#i.valD#Offset##indent\\\", \\\"parentId# #Konfiguratsioon##bold\\\", \\\"parentId#editn#Parent ID##indent\\\", \\\"nodeId#editn#Host ID##indent\\\", \\\"address#editn#Address andmebaasis##indent\\\", \\\"status# #Tarkvara##bold\\\", \\\"status.swVersion#i.valD#Versioon##indent\\\", \\\"status.fw.status#i.valE#{value?'Firmware status':''}##indent\\\", \\\"status.fw.progress#i.valE#{value?'Firmware progress':''}##indent\\\", \\\"status.fw.path#i.valE#{value?'Firmware path':''}##indent\\\", \\\"status.sleepTime#i.valD#Sleep time#indent\\\", \\\"enabled#onoff#Enabled\\\", \\\"setup.delete#button#Delete#true##red#Deleting the device will stop all related devices and they need to be manually reconfigured. Delete anyway?\\\"]}\"}}]},{\"name\":\"onCreate - device - powerSupply\",\"tag\":\"sys_onCreate_powerSupply\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"check\":[{\"op\":\"defined\",\"id\":3,\"path\":\"/id\"}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=powerSupply\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"check[0].get('templates.devices.powerSupply.ui',{})\"}}]},{\"name\":\"onCreate - device - Z-Way gateway\",\"tag\":\"sys_onCreate_zwayGateWay\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"\\\"i1\\\": [\\\"status.devices{@}#i.valE\\\", \\\"stairCase#i.sc\\\", \\\"floor#i.fl\\\", \\\"status.apiVersion#ver:{value==''?'-':value}\\\"], \\\"i3\\\": [\\\"status# #Technical info##bold\\\", \\\"status.testCmd#edit#Test command - only for advanced users##indent\\\", \\\"status.forceFwUpgrade#onoff#Force firmware upgrade##indent\\\", \\\"setup.licenseCode#edit#License code##indent\\\", \\\"setup# #Learn network##bold\\\", \\\"setup.requestNodeNeighborUpdate#button#{value?'Stop network learning':'Start network learning'}#toggle##white,true=yellow#{value?'Confirm stopping network learning':'Confirm starting network learning'}\\\", \\\"status# #Pairing##bold\\\", \\\"status.lastIncludedDevice#i.valD#Last paired device address\\\", \\\"status.addDevice#button#{value?'Stop pairing':'Start pairing'}#toggle##white,true=green#{value?'Confirm stopping pairing':'Confirm starting pairing'}\\\", \\\"enabled# #Configuration##bold\\\", \\\"nodeId#editn#Node ID##indent\\\", \\\"enabled#onoff#Enabled##indent\\\", \\\"setup# #Delete##bold\\\", \\\"setup.delete#button#Delete#true##red#Deleting the device will stop all related devices and they need to be manually reconfigured. Delete anyway?\\\"]\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/dev\"}],\"value\":{\"type\":\"string\",\"value\":\"/dev/z-wave\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/confDir\"}],\"value\":{\"type\":\"string\",\"value\":\"/enlife/rw/zway\"}}]},{\"name\":\"onCreate - device - Z-Way Range Extender\",\"tag\":\"sys_onCreate_zwayRangeExtender\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=generic_rangeExtender_Z-Way\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"i1\\\":[\\\"address#a:{value}\\\", \\\"status.signalQuality#i.rh\\\"], \\\"i3\\\":[\\\"status# #Technical info##bold\\\", \\\"status.signalQuality#i.rh#Signal quality##indent\\\", \\\"status.rssi#i.valD#RSSI##indent\\\", \\\"status.frameType#{value=='singlecast'?'1':value=='Explore Frame'?'>1':'-'}#Viimase saatmise korduste arv##indent\\\", \\\"setup#----------#-------------\\\", \\\"setup# #Learn network##bold\\\", \\\"setup.requestNodeNeighborUpdate#button#{value?'Stop network learning':'Start network learning'}#toggle##white,true=yellow#{value?'Confirm stopping network learning':'Confirm starting network learning'}\\\", \\\"setup# #Pairing##bold\\\", \\\"setup.include#button#{value?'Stop pairing':'Start pairing'}#toggle##white,true=green#{value?'Confirm stopping pairing':'Confirm starting pairing'}\\\", \\\"enabled# #Configuration##bold\\\", \\\"address#editn#Address##indent\\\", \\\"parentId#editn#Parent ID##indent\\\", \\\"nodeId#editn#Node ID##indent\\\", \\\"enabled#onoff#Enabled##indent\\\", \\\"delete# #Delete##bold\\\", \\\"delete#button#Delete#true##red#Confirm deleting\\\"]}\"}}]},{\"name\":\"onCreate - device - Z-Way thermostat\",\"tag\":\"sys_onCreate_zwayThermostat\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=generic_thermostat_Z-Way\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"icon\\\": \\\"valve\\\", \\\"i1\\\": [ \\\"address#a:{value}\\\", \\\"status.temperature#i.temp#Temperatuur\\\", \\\"status.setpoint#soov: {value||'-';_.num1}\\\"],  \\\"i3\\\": [\\\"status.setpoint# #Temperature setpoint##bold\\\", \\\"status# #Click on room name to set temperature##italic\\\", \\\"status.setpoint#i.temp1#Now##indent\\\", \\\"setpointMin#i.temp1#Minimum##indent\\\", \\\"setpointMax#i.temp1#Maximum##indent\\\", \\\"status# #Technical info##bold\\\", \\\"status.battery#i.rh#🔋{_('Battery')}##indent\\\", \\\"status.signalQuality#i.rh#Signal quality##indent\\\", \\\"status.lcdInvert#{value>0?'upside down':value===0?'normal':'-'}#Display orientation##indent\\\", \\\"setup.lcdInvert,no.off#mode#Set display orientation#setup.lcdInvertModes#indent\\\", \\\"setup# #Learn network##bold\\\", \\\"setup.requestNodeNeighborUpdate#button#{value?'Stop network learning':'Start network learning'}#toggle##white,true=yellow#{value?'Confirm stopping network learning':'Confirm starting network learning'}\\\", \\\"setup# #Pairing##bold\\\", \\\"setup.include#button#{value?'Stop pairing':'Start pairing'}#toggle##white,true=green#{value?'Confirm stopping pairing':'Confirm starting pairing'}\\\", \\\"enabled# #Configuration##bold\\\", \\\"address#editn#Address##indent\\\", \\\"parentId#editn#Parent ID##indent\\\", \\\"nodeId#editn#Node ID##indent\\\", \\\"enabled#onoff#Enabled##indent\\\", \\\"delete# #Delete##bold\\\", \\\"delete#button#Delete#true##red#Confirm deleting\\\"]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"lcdInvertModes\\\": [{\\\"name\\\": \\\"normal\\\", \\\"val\\\": 0}, {\\\"name\\\": \\\"upside down\\\", \\\"val\\\": 1}]}\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setpointMin\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setpointMin')||18\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setpointMax\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setpointMax')||24\"}}]},{\"name\":\"onCreate - device - Z-Way smoke\",\"tag\":\"sys_onCreate_zwaySmoke\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=generic_smoke_Z-Way\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/ui\"}],\"value\":{\"type\":\"formula\",\"value\":\"{\\\"icon\\\": \\\"smokeDetector\\\", \\\"i1\\\": [ \\\"address#a:{value}\\\"], \\\"i3\\\": [\\\"status# #Technical info##bold\\\", \\\"status.battery#i.rh#🔋{_('Battery')}##indent\\\", \\\"status.signalQuality#i.rh#Signal quality##indent\\\", \\\"setup# #Learn network##bold\\\", \\\"setup.requestNodeNeighborUpdate#button#{value?'Stop network learning':'Start network learning'}#toggle##white,true=yellow#{value?'Confirm stopping network learning':'Confirm starting network learning'}\\\", \\\"setup# #Pairing##bold\\\", \\\"setup.include#button#{value?'Stop pairing':'Start pairing'}#toggle##white,true=green#{value?'Confirm stopping pairing':'Confirm starting pairing'}\\\", \\\"enabled# #Configuration##bold\\\", \\\"address#editn#Address##indent\\\", \\\"parentId#editn#Parent ID##indent\\\", \\\"nodeId#editn#Node ID##indent\\\", \\\"enabled#onoff#Enabled##indent\\\", \\\"delete# #Delete##bold\\\", \\\"delete#button#Delete#true##red#Confirm deleting\\\"]}\"}}]},{\"name\":\"onCreate - site - share tagged site id to site\",\"tag\":\"sys_onCreate_site_shareIdToSite\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?tag\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ids\\\": {[item.get('tag')+\\\"Id\\\"]: item.get('id')}};json}\"}]},{\"name\":\"onRemain - device - turnedOnOff Alarm Message\",\"tag\":\"sys_onRemain_device_turnedOnOffAlarmMessage\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?usage.alarm24[]=*turnedO*Alarm&status.warnings\",\"forTime\":21600000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/warnings\"}]}]},{\"name\":\"onRemove - korto data - remove site rule\",\"tag\":\"sys_onRemove_kortoRules\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?!setup.korto.buildingId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"DELETE\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=rmKorto*\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}]}]},{\"name\":\"onRemove - moderan data - remove site rule\",\"tag\":\"sys_onRemove_moderanRules\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?!setup.moderan.domainId|!setup.moderan.setId\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"DELETE\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')}/rules?tag=rmModeran*\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}]}]},{\"name\":\"onRemove - site - remove template rooms\",\"tag\":\"sys_onRemove_site_tmpl\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!tmpl\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/templateRooms\"}]},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?tag=tmpl_*&setup.zWave\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\":{\\\"zWave\\\":null}};json}\"}]},{\"name\":\"onUpdate - site - share ids to tagged rooms\",\"tag\":\"sys_onUpdate_site_shareIdsToRooms\",\"nodeId\":2,\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"if\":[{\"op\":\"itemChange\",\"url\":\"sites?ids\",\"path\":\"/ids\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('id')}/rooms?tag\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"ids\\\": item.get('ids')};json}\"}]},{\"name\":\"onUpdate - device - Modbus gateway\",\"tag\":\"sys_onUpdate_modbusGateway\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=modbusDriver\",\"path\":\"/setup\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"name\\\": (item.get('setup.nodeName')?\\\"`\\\" + item.get('setup.nodeName') + \\\"` \\\":'') + Modbus\\\" + (item.get('dev') == '/dev/enlifeMiniModbus'? ' internal - only for onboard IO-s': item.get('dev') == '/dev/enlife0'? ' onboard': ((item.get('setup.address')?' a:'+item.get('setup.address') :'') + (item.get('setup.port')?'-p:'+item.get('setup.port'):''))) + (item.get('setup.name')? ' ' + item.get('setup.name'):''), \\\"baudRate\\\": item.get('setup.baudRate') || item.get('baudRate'), \\\"format\\\": item.get('setup.format') || item.get('format'), \\\"pollingDelay\\\": item.get('setup.pollingDelay') || item.get('pollingDelay')};json}\"}]},{\"name\":\"onUpdate - device - M-Bus gateway\",\"tag\":\"sys_onUpdate_mbusGateWay\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?tag=mbusGateway\",\"path\":\"/setup\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"name\\\": \\\"`\\\" + item.get('setup.nodeName') + \\\"` M-Bus \\\" + item.get('setup.name'), \\\"baudRate\\\": item.get('setup.baudRate'), \\\"format\\\": item.get('setup.format'), \\\"dev\\\": \\\"/dev/enlife\\\"+item.get('setup.port')+\\\"-1\\\"};json}\"}],\"recover\":null},{\"name\":\"onUpdate - device - child-node setup\",\"tag\":\"sys_onUpdate_childNodeSetup\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/setup/name\"},{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/setup/nameSuffix\"},{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/setup/cert\"},{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/setup/stairCase\"},{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/setup/floor\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/name\"}],\"value\":{\"type\":\"formula\",\"value\":\"(item.get('setup.cert')||item.get('cert')||'') + (item.get('setup.stairCase')!=null?' sc' + item.get('setup.stairCase'):'') + (item.get('setup.floor')!=null?'-fl' + item.get('setup.floor'):'') + (item.get('setup.nameSuffix')!=null?' ' + item.get('setup.nameSuffix'):'')\"}},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?type=z-way&nodeId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"name\\\": \\\"`\\\" + (item.get('setup.cert')||item.get('cert')||'') + (item.get('setup.stairCase')!=null?' sc' + item.get('setup.stairCase'):'') + (item.get('setup.floor')!=null?'-fl' + item.get('setup.floor'):'') + (item.get('setup.nameSuffix')!=null?' ' + item.get('setup.nameSuffix'):'') + \\\"` Z-Way\\\"};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rules?tag=sysNode_timeSetRuleChildNode&nodeId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"name\\\": \\\"TIME set - \\\" + (item.get('setup.cert')||item.get('cert')||'') + (item.get('setup.stairCase')!=null?' sc' + item.get('setup.stairCase'):'') + (item.get('setup.floor')!=null?'-fl' + item.get('setup.floor'):'') + (item.get('setup.nameSuffix')!=null?' ' + item.get('setup.nameSuffix'):'')};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?ref={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\": {\\\"nodeName\\\": (item.get('setup.cert')||item.get('cert')||'') + (item.get('setup.stairCase')!=null?' sc' + item.get('setup.stairCase'):'') + (item.get('setup.floor')!=null?'-fl' + item.get('setup.floor'):'') + (item.get('setup.nameSuffix')!=null?' ' + item.get('setup.nameSuffix'):'')}};json}\"}]},{\"name\":\"onUpdate - device - child-node name\",\"tag\":\"sys_onUpdate_childNodeName\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=child-node\",\"path\":\"/name\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?setup.controllerIds.{item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"setup\\\": {\\\"controllerIds\\\": {[item.get('id')]: item.get('name')}}};json}\"}]},{\"name\":\"onUpdate - device - Mini RF\",\"tag\":\"sys_onUpdate_miniRF\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_lineExtender_RF\",\"path\":\"/setup/nodeName\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/name\"}],\"value\":{\"type\":\"string\",\"value\":\"`{item.get('setup.nodeName')}` RF\"}}]},{\"name\":\"onUpdate - device - Mini IO-s\",\"tag\":\"sys_onUpdate_miniIo\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_6Di2Do1Ro_Modbus\",\"path\":\"/setup/nodeName\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/name\"}],\"value\":{\"type\":\"string\",\"value\":\"`{item.get('setup.nodeName')}` IO-s\"}}]},{\"name\":\"onUpdate - device - Z-Way\",\"tag\":\"sys_onUpdate_zway\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=z-way\",\"path\":\"/setup/nodeName\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/name\"}],\"value\":{\"type\":\"string\",\"value\":\"`{item.get('setup.nodeName')}` Z-Way\"}}]},{\"name\":\"onUpdate - device - CO2 indications - ui\",\"tag\":\"sys_onUpdate_co2IndicationsUi\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=output&setup.co2Warning&setup.co2Alarm\",\"path\":\"/status/co2\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/co2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')<item.get('setup.co2Warning')?'ÕHK ON HEA':null\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/warnings/co2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')>=item.get('setup.co2Warning')&&item.get('status.co2')<item.get('setup.co2Alarm')?'VAJAB TUULUTAMIST':null\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/alarms/co2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')>=item.get('setup.co2Alarm')?'VÄGA HALB - TUULUTA':null\"}}]},{\"name\":\"onUpdate - device - CO2 indications - onboard RGB\",\"tag\":\"sys_onUpdate_co2IndicationsOnboardRgb\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus&setup.co2Indication=onboardRgb&setup.co2Warning&setup.co2Alarm\",\"path\":\"/status/co2\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/ledGreen\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')<item.get('setup.co2Alarm')?true:false\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/ledRed\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')>=item.get('setup.co2Warning')?true:false\"}}]},{\"name\":\"onUpdate - device - CO2 indications - digital outputs onoff\",\"tag\":\"sys_onUpdate_co2IndicationsDigitalOutputsOnOff\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?type=enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus&setup.co2Indication=digitalOutputsOnOff&setup.co2Warning&setup.co2Alarm\",\"path\":\"/status/co2\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/output1\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')<item.get('setup.co2Alarm')?true:false\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/output2\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.co2')>=item.get('setup.co2Warning')?true:false\"}}]},{\"name\":\"onDelete - all\",\"tag\":\"sys_onDelete_all\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"devices?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"rooms?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"roles?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"users?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"securityAreas?delete|setup.delete\"},{\"op\":\"itemAdd\",\"url\":\"rules?delete|setup.delete\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/roles?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/users?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rules?delRef={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"deleteItem\",\"items\":[null]},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')|item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"messages\\\": {[item.get('id')]: \\\"Deleted - \\\"+item.get('name')}}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/sites?id={item.get('siteId')|item.get('roomId')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"messages\\\": {[item.get('id')]: null}}};json}\",\"delay\":5000}]},{\"name\":\"onDelete - room - move deleted room devices to site\",\"tag\":\"sys_onDelete_room\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms\"}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?roomId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"roomId\\\": item.get('siteId')};json}\"}]},{\"name\":\"onDelete - site\",\"tag\":\"sys_onDelete_site\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites\"}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?roomId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rules?siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/roles?siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"delete\\\":true};json}\"}]},{\"name\":\"policy - update - site\",\"tag\":\"sys_policyOverWrite_site\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&(type|category)&overWritePolicy_site\"},{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_allSiteCollections\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('policies.sites')[Object.keys(item.get('policies.sites'))[0]]\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_site\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_allSiteCollections\"}],\"delay\":1000}]},{\"name\":\"policy - update - roles - all items\",\"remarks\":\"overwrites policies of all roles with tag=*Role*\",\"tag\":\"sys_policyOverWrite_roles_allItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_rolesAll\"},{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_allSiteCollections\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/roles?tag=*Role*,&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.roles')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_rolesAll\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_allSiteCollections\"}],\"delay\":1000}]},{\"name\":\"policy - update - roles - defined items\",\"remarks\":\"overwrites defined roles with tag=*Role*; overWritePolicy_rolesItems value must be a single id or an array of id-s\",\"tag\":\"sys_policyOverWrite_roles_definedItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_rolesItems\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/roles?tag=*Role*,&siteId={item.get('id')}&id={item.get('overWritePolicy_rolesItems')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.roles')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_rolesItems\"}]}]},{\"name\":\"policy - update - roles - item\",\"tag\":\"sys_policyOverWrite_roles_item\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"roles?status.policies&tag&overWritePolicy\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.policies')[item.get('tag')]\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/policies\"}]}]},{\"name\":\"policy - update - rooms - all items\",\"remarks\":\"overwrites policies of all rooms with `forclient` attribute\",\"tag\":\"sys_policyOverWrite_rooms_allItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_roomsAll\"},{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_allSiteCollections\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?forClient&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.rooms')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_roomsAll\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_allSiteCollections\"}],\"delay\":1000}]},{\"name\":\"policy - update - rooms - defined items\",\"remarks\":\"overwrites defined rooms with attribute`forclient`; overWritePolicy_roomsItems value must be a single id or an array of id-s\",\"tag\":\"sys_policyOverWrite_rooms_definedItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_roomsItems\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?forClient&siteId={item.get('id')}&id={item.get('overWritePolicy_roomsItems')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.rooms')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_roomsItems\"}]}]},{\"name\":\"policy - update - rooms - item\",\"tag\":\"sys_policyOverWrite_rooms_item\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"rooms?status.policies.forClient&overWritePolicy\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.policies').forClient\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/policies\"}]}]},{\"name\":\"policy - update - securityAreas - all items\",\"remarks\":\"overwrites policies of all securityAreas\",\"tag\":\"sys_policyOverWrite_securityAreas_allItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_securityAreasAll\"},{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_allSiteCollections\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.securityAreas')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_securityAreasAll\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_allSiteCollections\"}],\"delay\":1000}]},{\"name\":\"policy - update - securityAreas - defined items\",\"remarks\":\"overwrites defined securityAreas; overWritePolicy_securityAreasItems value must be a single id or an array of id-s\",\"tag\":\"sys_policyOverWrite_securityAreas_definedItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_securityAreasItems\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/securityAreas?siteId={item.get('id')}&id={item.get('overWritePolicy_securityAreasItems')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.securityAreas')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_securityAreasItems\"}]}]},{\"name\":\"policy - update - securityAreas - item\",\"tag\":\"sys_policyOverWrite_securityAreas_item\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"securityAreas?status.policies.securityAreas&overWritePolicy\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.policies').securityAreas\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/policies\"}]}]},{\"name\":\"policy - update - devices - all items\",\"remarks\":\"overwrites policies of all devices with `policy` attribute\",\"tag\":\"sys_policyOverWrite_devices_allItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_devicesAll\"},{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_allSiteCollections\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?policy&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.devices')}, overWritePolicy: true};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/rooms?category=remoteMeteringLinkedSite&linkedDevices&remoteMetersSiteId&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{forceShare: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_devicesAll\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_allSiteCollections\"}],\"delay\":1000}]},{\"name\":\"policy - update - devices - defined items\",\"remarks\":\"overwrites policies for defined id and having `policy` attribute devices; overWritePolicy_devicesItems value must be a single id or an array of id-s\",\"tag\":\"sys_policyOverWrite_devices_definedItems\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_devicesItems\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?policy&siteId={item.get('id')}&id={item.get('overWritePolicy_devicesItems')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: item.get('policies.devices')}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_devicesItems\"}]}]},{\"name\":\"policy - update - devices - defined remote meters\",\"remarks\":\"overwrites policies for remote meters in building site which are shared to client site; overWritePolicy_devicesRemoteMeters value is taken from METERS room linkedDevices (shareToClientSite rule)\",\"tag\":\"sys_policyOverWrite_devices_definedRemoteMeters\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?policies&overWritePolicy_devicesRemoteMeters\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?id={item.get('overWritePolicy_devicesRemoteMeters')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {linkedSitePolicies: {remoteMeterType: item.get('policies.devices.remoteMeterType')}}, overWritePolicy: true};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy_devicesRemoteMeters\"}]}]},{\"name\":\"policy - update - devices - share building site policy only to remote meters\",\"remarks\":\"shares remote meter policy to all building site remote meters; overWritePolicy command will come with `defined remote meters` rule\",\"tag\":\"sys_policyOverWrite_devices_shareBuildingSitePolicy\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?requestRemoteMetersPolicies\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?status.linkedSitePolicies&siteId={item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{status: {policies: {remoteMeterType: item.get('policies.devices.remoteMeterType')}}};json}\"},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/requestRemoteMetersPolicies\"}]}]},{\"name\":\"policy - update - devices - item\",\"remarks\":\"devices except remote meters shared to client sites\",\"tag\":\"sys_policyOverWrite_devices_item\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?status.policies&!status.linkedSitePolicies&policy&overWritePolicy\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.policies')[item.get('policy')]\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/policies\"}]}]},{\"name\":\"policy - update - devices - remote meter\",\"remarks\":\"remote meters which is shared to client sites\",\"tag\":\"sys_policyOverWrite_devices_remoteMeter\",\"nodeId\":2,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"repeat\":true,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?status.policies.remoteMeterType&status.linkedSitePolicies&overWritePolicy\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/acl/policy\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.policies.remoteMeterType').concat(item.get('status.linkedSitePolicies.remoteMeterType'))\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/overWritePolicy\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/policies\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/linkedSitePolicies\"}]}]},{\"name\":\"Z-Wave include - vol1 - start inclusion on device\",\"tag\":\"sys_zWaveIncludeVol1\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=*_Z-Way&setup.include\"}],\"then\":[{\"op\":\"clearDelays\",\"items\":[null],\"delay\":0},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/battery\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/rssi\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/setpoint\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/temperature\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/signalQuality\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/alarm\"}]},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/active\"}]},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=*_Z-Way&setup.include&parentId={item.get('id')}&id!={item.get('id')}\",\"body\":\"{{setup:{include:null}};json}\"},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/including\"}],\"value\":{\"type\":\"string\",\"value\":\"Pairing\"},\"delay\":200},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?id={item.get('parentId')}\",\"body\":\"{{status: {addDevice: false, lastIncludedDevice: null, messages: {including: null}}};json}\",\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?id={item.get('parentId')}\",\"body\":\"{{status: {addDevice: true, messages: {including: ('{_(\\\\'Pairing\\\\')}' + ': ' + item.get('name') + ', siteId: ' + item.get('siteId'))}}};json}\",\"delay\":1000}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?id={item.get('parentId')}\",\"body\":\"{{status: {addDevice: false}};json}\",\"delay\":0}]},{\"name\":\"Z-Wave include - vol2 - finish device inclusion, set address to it\",\"tag\":\"sys_zWaveIncludeVol2\",\"nodeId\":2,\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&status.lastIncludedDevice\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=*_Z-Way&setup.include&parentId={item.get('id')}\",\"body\":\"{{address: item.get('status.lastIncludedDevice'), status:{messages:{including: '{_(\\\\'Address\\\\')}' + ': ' + item.get('status.lastIncludedDevice')}}};json}\"}]},{\"name\":\"Z-Wave include - vol3 - remove devices inclusions on network closing\",\"tag\":\"sys_zWaveIncludeVol3\",\"nodeId\":2,\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&!status.addDevice\",\"forTime\":1500}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/including\"}]},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=*_Z-Way&(setup.include|status.messages.including)&parentId={item.get('id')}\",\"body\":\"{{setup:{include:null}, status:{messages:{including:null}}};json}\"}],\"recover\":null},{\"name\":\"Z-Wave include - vol4 - close network on timeout\",\"tag\":\"sys_zWaveIncludeVol4\",\"nodeId\":2,\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&status.addDevice\",\"forTime\":240000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/addDevice\"},{\"id\":null,\"path\":\"/status/messages/including\"},{\"id\":null,\"path\":\"/status/sys_zWaveIncludeVol4\"}]}]},{\"name\":\"Z-Wave include - vol5 - stop inclusion on timeout\",\"tag\":\"sys_zWaveIncludeVol5\",\"nodeId\":2,\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=*_Z-Way&setup.include\",\"forTime\":240000}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/include1\"},{\"id\":null,\"path\":\"/status/messages/including\"},{\"id\":null,\"path\":\"/status/sys_zWaveIncludeVol5\"}]}]},{\"name\":\"Z-Wave network learning - single device and all network repeaters\",\"tag\":\"sys_zWaveNeighborUpdate_devicesAndRepeaters\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?setup.requestNodeNeighborUpdate\"}],\"then\":[{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/requestNodeNeighborUpdate\"}],\"delay\":5000},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=generic_rangeExtender_Z-Way&parentId={item.get('parentId')}\",\"body\":\"{{setup:{requestNodeNeighborUpdate:true}};json}\"},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?id={item.get('parentId')}\",\"body\":\"{{status:{requestNodeNeighborUpdate:item.get('address')}};json}\",\"delay\":1000}],\"recover\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?id={item.get('parentId')}\",\"body\":\"{{status:{requestNodeNeighborUpdate:null}};json}\"}]},{\"name\":\"Z-Wave network learning - all network\",\"tag\":\"sys_zWaveNeighborUpdate_allNetwork\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type==z-way&setup.requestNodeNeighborUpdate\"}],\"then\":[{\"op\":\"clearDelays\",\"items\":[null],\"delay\":0},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/setup/requestNodeNeighborUpdate\"}],\"delay\":5000},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=*rangeExtender*&parentId={item.get('id')}\",\"body\":\"{{setup:{requestNodeNeighborUpdate:true}};json}\"},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/learn\"}],\"value\":{\"type\":\"string\",\"value\":\"Learn command sent to repeaters. Delaying thermostats learning 30s.\"},\"delay\":0},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=generic_thermostat_Z-Way&parentId={item.get('id')}\",\"body\":\"{{setup:{requestNodeNeighborUpdate:true}};json}\",\"delay\":30000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/learn\"}],\"value\":{\"type\":\"string\",\"value\":\"Learn command sent to thermstats. Delaying smoke detectors learning 30s.\"},\"delay\":30000},{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"url\":\"http://127.0.0.1/devices?type=generic_smoke_Z-Way&parentId={item.get('id')}\",\"body\":\"{{setup:{requestNodeNeighborUpdate:true}};json}\",\"delay\":60000},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/learn\"}],\"value\":{\"type\":\"string\",\"value\":\"Learn command sent to smoke detectors. Learning process may last more than 5 minutes depending on network size and quality.\"},\"delay\":60000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/messages/learn\"}],\"delay\":360000}]},{\"name\":\"Z-Wave thermostat screen invert\",\"tag\":\"sys_zWaveThermostatScreenInvert\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemChange\",\"url\":\"devices?setup.lcdInvert>=0&status.lcdInvert>=0&setup.lcdInvert!=status.lcdInvert\",\"path\":\"/status/lcdInvert\"},{\"op\":\"itemChange\",\"url\":\"devices?setup.lcdInvert>=0&status.lcdInvert>=0&setup.lcdInvert!=status.lcdInvert\",\"path\":\"/setup/lcdInvert\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/lcdInvert\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('setup.lcdInvert')\"},\"delay\":1000}]},{\"name\":\"Z-Wave dongle fw upgrade\",\"tag\":\"sys_zWaveDongleFwUpgrade\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&status.apiVersionMajor=5&status.apiVersionMinor=25,27,36\"},{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&status.apiVersionMajor=5&status.apiVersionMinor=25,27,36&status.forceFwUpgrade\"},{\"op\":\"itemChange\",\"url\":\"devices?type=z-way&status.apiVersionMajor=5&status.apiVersionMinor=25,27,36\",\"path\":\"/status/apiVersion\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/firmware\"}],\"value\":{\"type\":\"formula\",\"value\":\"item.get('status.apiVersionMinor')==25?'/enlife/rw/papi/logs/zway/zway_5.27.bin':item.get('status.apiVersionMinor')==27? '/enlife/rw/papi/logs/zway/zway_5.36.bin':item.get('status.apiVersionMinor')==36?'/enlife/rw/papi/logs/zway/zway_5.39.bin':null\"},\"delay\":60000},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/forceFwUpgrade\"}]}]},{\"name\":\"Z-Wave dongle license - pull\",\"tag\":\"sys_zWaveDongleLicensePull\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&setup.licenseCode&status.uuid&status.apiVersionMajor&status.apiVersionMinor\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"POST\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/x-www-form-urlencoded\"}],\"url\":\"https://service.z-wave.me/license/upgrade.php\",\"body\":\"scratch={item.get('setup.licenseCode')}&uuid={item.get('status.uuid')}&appVersionMajor={item.get('status.apiVersionMajor')}&appVersionMinor={item.get('status.apiVersionMinor')}\",\"responseHandler\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/setup/license\",\"query\":\"license;toHex\"}]}]}]},{\"name\":\"Z-Wave dongle license - activation\",\"tag\":\"sys_zWaveDongleLicenseActivation\",\"nodeId\":2,\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"enabled\":true,\"category\":\"system\",\"type\":\"if-then\",\"if\":[{\"op\":\"itemAdd\",\"url\":\"devices?type=z-way&setup.license\"}],\"then\":[{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/testCmd\"}],\"value\":{\"type\":\"formula\",\"value\":\"\\\"k \\\" + item.get('setup.license')\"}},{\"op\":\"set\",\"items\":[{\"id\":null,\"path\":\"/status/messages/added\"}],\"value\":{\"type\":\"string\",\"value\":\"License {item.get('setup.licenseCode')} activated\"}},{\"op\":\"remove\",\"items\":[{\"id\":null,\"path\":\"/status/testCmd\"},{\"id\":null,\"path\":\"/status/messages/added\"}],\"delay\":10000}]},{\"name\":\"security - 24h detectors power - turnOff - co\",\"tag\":\"sys_security_24hDetectorsPower_turnOff_co\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerCo\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=coDetectorPower&status.input\",\"forTime\":3000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=coDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":false}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOff - fire\",\"tag\":\"sys_security_24hDetectorsPower_turnOff_fire\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerSmoke\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=smokeDetectorPower&status.input\",\"forTime\":3000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":false}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOff - gas\",\"tag\":\"sys_security_24hDetectorsPower_turnOff_gas\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerGas\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=gasDetectorPower&status.input\",\"forTime\":3000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=gasDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":false}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOff - water\",\"tag\":\"sys_security_24hDetectorsPower_turnOff_water\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?status.removePowerWater\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=waterDetectorPower&status.input\",\"forTime\":3000}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":false}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOn - co\",\"tag\":\"sys_security_24hDetectorsPower_turnOn_co\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"load\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=coDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\",\"delay\":60000}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.removePowerCo\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=coDetectorPower&status.input\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=coDetectorPower&!status.power&siteId={item.get('siteId')||item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOn - gas\",\"tag\":\"sys_security_24hDetectorsPower_turnOn_gas\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"load\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=gasDetectorPower\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\",\"delay\":60000}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.removePowerGas\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=gasDetectorPower&status.input\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=gasDetectorPower&!status.power&siteId={item.get('siteId')||item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOn - fire\",\"tag\":\"sys_security_24hDetectorsPower_turnOn_fire\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"load\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeDetectorPower&!status.power\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\",\"delay\":60000}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.removePowerSmoke\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=smokeDetectorPower&status.input\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=smokeDetectorPower&!status.power&siteId={item.get('siteId')||item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\"}]},{\"name\":\"security - 24h detectors power - turnOn - water\",\"tag\":\"sys_security_24hDetectorsPower_turnOn_water\",\"nodeId\":2,\"category\":\"system\",\"type\":\"if-then\",\"enabled\":true,\"acl\":{\"policy\":[{\"who\":[4],\"acl\":5}]},\"ui\":{\"i1\":[\"nodeId#i.node\"]},\"repeat\":true,\"load\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterDetectorPower&!status.power\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\",\"delay\":60000}],\"if\":[{\"op\":\"itemAdd\",\"url\":\"sites?!status.removePowerWater\"},{\"op\":\"itemAdd\",\"url\":\"devices?usage.switch[]=waterDetectorPower&status.input\"}],\"then\":[{\"op\":\"httpRequest\",\"method\":\"PATCH\",\"url\":\"http://127.0.0.1/devices?usage.output[]=waterDetectorPower&!status.power&siteId={item.get('siteId')||item.get('id')}\",\"headers\":[{\"name\":\"Content-Type\",\"data\":\"application/json\"},{\"name\":\"Accept-Confirm\",\"data\":\"ok\"},{\"name\":\"Authorization\",\"data\":\"Basic aW50ZXJuYWxzeXN0ZW1jb21tYW5kczowLm5oMHBrZHR5cGpuMC5mbHR0bzFmemJr\"}],\"body\":\"{{\\\"status\\\":{\\\"power\\\":true}};json}\"}]}],\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}}]}"
          },
          "redirectURL": "",
          "headersSize": 172,
          "bodySize": 491492,
          "_transferSize": 491664
        },
        "cache": {},
        "timings": {
          "blocked": 0.4470837193366606,
          "dns": 0.00020833249436691403,
          "connect": -1,
          "ssl": -1,
          "send": 0.7733581187494565,
          "wait": 389.41892374350573,
          "receive": 65.58916761059663
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "3",
        "_fetchType": "Network Load",
        "_priority": "medium"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:15.701Z",
        "time": 16.784249455668032,
        "request": {
          "method": "GET",
          "url": "http://192.168.1.125/securityAreas",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Authorization",
              "value": "S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=3, i"
            }
          ],
          "queryString": [],
          "headersSize": 411,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:15 GMT"
            }
          ],
          "content": {
            "size": 3697,
            "compression": -12,
            "mimeType": "application/json",
            "text": "[{\"id\":378,\"created\":1667892939406,\"updated\":1695394525673,\"tag\":\"sysSecArea\",\"nodeId\":2,\"enabled\":true,\"ref\":364,\"name\":\"Home security\",\"modes\":[{\"name\":\"EEMAL\",\"exitDelay\":60000,\"devices\":[{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":467},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":477},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":474},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":485},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":481},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":495},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":493},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":489},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":488},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":500},{\"path\":\"/status/active\",\"entryDelay\":0,\"inverted\":null,\"id\":496},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":469},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":468},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":466},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":465},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":479},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":478},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":476},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":475},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":473},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":472},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":487},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":486},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":484},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":483},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":482},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":480},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":494},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":492},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":491},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":490},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":501},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":499},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":498},{\"path\":\"/status/open\",\"entryDelay\":0,\"inverted\":null,\"id\":497}]},{\"name\":\"KOHAL\",\"exitDelay\":3000,\"devices\":[{\"path\":\"/status/active\",\"entryDelay\":null,\"inverted\":null,\"id\":null}]}],\"ui\":{\"i1\":[\"status.armed#mode\",\"status.exitDelay#{value?_('in exit delay'):''}\",\"status.entryDelay#{value?_('in entry delay'):''}\"],\"icon\":\"secarea\",\"i4\":[\"status.arm#icon#Security log#seclog####logs#model=378&key=security\"]},\"siteId\":364,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":377}]},\"uuid\":\"zhtnz184\",\"follow\":[{\"mode\":\"on\",\"path\":\"/status/online\",\"invertedPath\":\"\",\"nolog\":true,\"items\":[{\"path\":\"id\",\"id\":378}],\"id\":16678929394060},{\"mode\":\"formula\",\"path\":\"/status/armed\",\"value\":\"r[0]&&i[0]>=0&&r[1][i[0]].name?r[1][i[0]].name:c\",\"nolog\":null,\"items\":[{\"path\":\"/status/armMode\",\"id\":null}],\"read\":[{\"path\":\"/setup/onLeaveArm\",\"id\":364},{\"path\":\"/modes\",\"id\":null}],\"id\":16678929394061},{\"mode\":\"formula\",\"path\":\"/status/armModeIndex\",\"value\":\"r[0].pluck('name').indexOf(i[0])\",\"nolog\":null,\"items\":[{\"path\":\"/status/armed\",\"id\":null}],\"read\":[{\"path\":\"/modes\",\"id\":null}],\"id\":16678929394062}],\"remarks\":\"\",\"number\":\"\",\"status\":{\"online\":true,\"debug\":\"sys_onarrive_unlockRemovesSecurity, idx:0\",\"warnings\":{},\"messages\":{},\"armModeIndex\":-1},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}}]"
          },
          "redirectURL": "",
          "headersSize": 140,
          "bodySize": 3709,
          "_transferSize": 3849
        },
        "cache": {},
        "timings": {
          "blocked": 0.7899375050328672,
          "dns": -1,
          "connect": -1,
          "ssl": -1,
          "send": 0,
          "wait": 15.71087235424784,
          "receive": 0.28343959638732485
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "3",
        "_fetchType": "Network Load",
        "_priority": "medium"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:15.703Z",
        "time": 132.60949040341075,
        "request": {
          "method": "GET",
          "url": "http://192.168.1.125/devices",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Authorization",
              "value": "S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=3, i"
            }
          ],
          "queryString": [],
          "headersSize": 405,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:15 GMT"
            }
          ],
          "content": {
            "size": 267227,
            "compression": -14,
            "mimeType": "application/json",
            "text": "[{\"enabled\":true,\"name\":\"Agatark toide 220V\",\"remarks\":\"\",\"roomId\":440,\"tag\":\"\",\"type\":\"powerSupply\",\"usage\":{\"alarm24\":[\"/status/powerAlarm\"],\"securityDetector24\":[\"power\"]},\"conf\":[{\"dType\":\"powerSupply_battFail_Nc\",\"id\":397,\"path\":\"/status/input5\",\"target\":\"/status/battFail\",\"inverted\":null,\"pollTime\":10000,\"mode\":\"input\",\"relay\":\"\"},{\"dType\":\"powerSupply_acFail\",\"id\":397,\"path\":\"/status/input4\",\"target\":\"/status/acFail\",\"inverted\":true,\"pollTime\":10000,\"mode\":\"input\",\"relay\":\"\"}],\"acl\":{\"inherit\":[364]},\"id\":634,\"created\":1728057397958,\"uuid\":\"w9HCtSQ9\",\"siteId\":364,\"ui\":{\"i1\":[\"status.powerAlarm#{value?_('FAILURE'):'OK'}\"],\"i2\":[\"status.acFail#{value?_('FAILURE'):''}#{value?_('Mains power'):''}\",\"status.battFail#{value?_('FAILURE'):''}#{value?_('Accumulator'):''}\"],\"icon\":\"secarea\"},\"status\":{\"offline\":{\"devices\":3},\"online\":true,\"battFail\":false,\"acFail\":false,\"warnings\":[]},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lülla\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":396,\"path\":\"/status/input5\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":631,\"created\":1712003237272,\"uuid\":\"O6DSXEoM\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":3},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti parem + halli nupud (2k Trepp)\",\"remarks\":\"\",\"roomId\":589,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":397,\"path\":\"/status/input7\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":630,\"created\":1711999625913,\"uuid\":\"libAyJnI\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti keskmine (Trepp)\",\"remarks\":\"\",\"roomId\":589,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":397,\"path\":\"/status/input8\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":629,\"created\":1711999543595,\"uuid\":\"qyfjEWxx\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti parem (Trepp)\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":398,\"path\":\"/status/input6\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":628,\"created\":1711998627705,\"uuid\":\"ktjm12Dm\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti keskmine (Trepp)\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":398,\"path\":\"/status/input5\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":250,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":627,\"created\":1711998501943,\"uuid\":\"YvHoqczp\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti vasak (Tambur)\",\"remarks\":\"TE2 Nupud\",\"roomId\":522,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":398,\"path\":\"/status/input7\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":250,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":626,\"created\":1711996616144,\"uuid\":\"PTvG9Qnu\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"Lüliti parem (Tambur)\",\"remarks\":\"TE2 Nupud\",\"roomId\":522,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":398,\"path\":\"/status/input8\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":250,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"id\":625,\"created\":1711996573324,\"uuid\":\"RZl93H4S\",\"siteId\":364,\"ui\":{\"icon\":\"switch1\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"status\":{\"offline\":{\"devices\":7},\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"enabled\":true,\"name\":\"CO andur (Garaaž)\",\"remarks\":\"Z1\",\"roomId\":401,\"tag\":\"\",\"type\":\"securityDetector24\",\"usage\":{\"alarm24\":[\"/status/coAlarm\"],\"securityDetector24\":[\"co\"]},\"ui\":{\"icon\":\"smokeDetector\"},\"conf\":[{\"dType\":\"coDetector_onoff\",\"path\":\"/status/input5\",\"target\":\"/status/active\",\"inverted\":null,\"pollTime\":500,\"mode\":\"input\",\"id\":394}],\"acl\":{\"inherit\":[364]},\"id\":622,\"created\":1711909251027,\"uuid\":\"8asXA3hz\",\"siteId\":364,\"status\":{\"offline\":{\"devices\":3},\"online\":true,\"active\":false,\"alarms\":[]},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":621,\"created\":1711890357924,\"updated\":1711891783330,\"name\":\"Ventilatsiooni agregaat\",\"remarks\":\"\",\"roomId\":611,\"tag\":\"\",\"type\":\"vallox_MV_Modbus\",\"parentId\":527,\"address\":135,\"fanSteps\":\"3\",\"usage\":{},\"ui\":{\"icon\":\"controller\"},\"acl\":{\"inherit\":[364]},\"uuid\":\"eUiUCeje\",\"siteId\":364,\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":615,\"created\":1711302870199,\"updated\":1711302870599,\"enabled\":true,\"name\":\"Väike kardin (köök)\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"blind\",\"usage\":{},\"conf\":[{\"dType\":\"blindDirection\",\"id\":390,\"path\":\"/status/output3\",\"target\":\"/status/direction\",\"inverted\":null,\"pollTime\":60000,\"mode\":\"output\",\"relay\":\"\"},{\"dType\":\"blindDirection\",\"id\":390,\"path\":\"/status/output4\",\"target\":\"/status/direction\",\"inverted\":null,\"pollTime\":60000,\"mode\":\"output\",\"relay\":\"\"}],\"acl\":{\"inherit\":[364]},\"uuid\":\"Iql2XWyo\",\"siteId\":364,\"ui\":{},\"status\":{\"warnings\":{},\"dim\":0,\"online\":true,\"direction\":false,\"offline\":{\"devices\":23}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":614,\"created\":1711301821097,\"updated\":1711301821336,\"enabled\":true,\"name\":\"16 Hoov valgus \",\"remarks\":\"\",\"roomId\":399,\"tag\":\"\",\"type\":\"light\",\"usage\":{\"light\":[\"outdoor\"]},\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"02:00\",\"2s\":\"18:30\",\"2e\":\"02:00\",\"3s\":\"18:30\",\"3e\":\"02:00\",\"4s\":\"18:30\",\"4e\":\"02:00\",\"5s\":\"18:30\",\"5e\":\"02:00\",\"6s\":\"18:30\",\"6e\":\"02:00\",\"7s\":\"18:30\",\"7e\":\"02:00\"}},\"ui\":{\"icon\":\"light\",\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"]},\"conf\":[{\"dType\":\"light_outdoor_output\",\"path\":\"/status/io16\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":383}],\"acl\":{\"inherit\":[364]},\"uuid\":\"jMFPMeC9\",\"siteId\":364,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"block\":{},\"force\":{},\"limit\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"activationWeekSchedule\":true},{\"id\":613,\"created\":1711301044154,\"updated\":1711381533045,\"enabled\":true,\"name\":\"Suur kardin\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"blind\",\"pulse\":10000,\"usage\":{\"generic\":[\"blind\"]},\"conf\":[{\"dType\":\"blindMotor\",\"id\":388,\"path\":\"/status/output3\",\"target\":\"/status/motor\",\"inverted\":null,\"pollTime\":5000,\"mode\":\"output\",\"relay\":\"\"},{\"dType\":\"blindDirection\",\"id\":388,\"path\":\"/status/output4\",\"target\":\"/status/direction\",\"inverted\":null,\"pollTime\":5000,\"mode\":\"output\",\"relay\":\"\"}],\"acl\":{\"inherit\":[364]},\"uuid\":\"ixLVHijq\",\"siteId\":364,\"ui\":{\"icon\":\"window\",\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.level#{value==0?'avatud':value==100?'suletud':'suletud '+value+'%'}# \",\"status.target#level##0:100:1\",\"status.bla# #Avamine\",\"status.target#button#Ava#0\",\"status.bla# #Sulgemine\",\"status.target#button#Sulge#100\",\"----\",\"status.direction\",\"status.motor\"]},\"duration\":20000,\"status\":{\"warnings\":{},\"dim\":20000,\"online\":true,\"motor\":false,\"direction\":false,\"output\":false,\"target\":0,\"level\":100,\"schedule\":{},\"offline\":{\"devices\":31}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":610,\"created\":1709994962294,\"updated\":1711894716013,\"enabled\":true,\"name\":\"2k kollektori modbus module a114\",\"remarks\":\"\",\"roomId\":408,\"tag\":\"\",\"type\":\"yoga_8DiDo_v1_Modbus\",\"acl\":{\"inherit\":[364]},\"uuid\":\"0kwyDiWT\",\"siteId\":364,\"parentId\":385,\"address\":114,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"status.address#i.address\",\"status.voltage#{(value||'').step(0.1)}V\"],\"i3\":[\"status.swVersion#{value||'-'}#Tarkvara versioon\",\"address#editn#Aadress andmebaasis##indent\",\"status.address#editn#Aadress kontrolleris##indent\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status.uptime#{value||'-'}#Uptime\",\"status.reboot#button#Reboot#true#Oled kindel?\",\"status.inputCurrentSource1#onoff#Input1 Current Source\",\"status.inputCurrentSource2#onoff#Input2 Current Source\",\"status.inputCurrentSource3#onoff#Input3 Current Source\",\"status.inputCurrentSource4#onoff#Input4 Current Source\",\"status.inputCurrentSource5#onoff#Input5 Current Source\",\"status.inputCurrentSource6#onoff#Input6 Current Source\",\"status.inputCurrentSource7#onoff#Input7 Current Source\",\"status.inputCurrentSource8#onoff#Input8 Current Source\",\"status.outputMode1#editn#Output1 mode\",\"status.outputMode2#editn#Output2 mode\",\"status.outputMode3#editn#Output3 mode\",\"status.outputMode4#editn#Output4 mode\",\"status.outputMode5#editn#Output5 mode\",\"status.outputMode6#editn#Output6 mode\",\"status.outputMode7#editn#Output7 mode\",\"status.outputMode8#editn#Output8 mode\",\"status.pwmFast#onoff#Fast PWM for LED control\",\"status.outputDefaultFadeTime1#editn#Output1 default fadeTime\",\"status.outputDefaultFadeTime2#editn#Output2 default fadeTime\",\"status.outputDefaultFadeTime3#editn#Output3 default fadeTime\",\"status.outputDefaultFadeTime4#editn#Output4 default fadeTime\",\"status.outputDefaultFadeTime5#editn#Output5 default fadeTime\",\"status.outputDefaultFadeTime6#editn#Output6 default fadeTime\",\"status.outputDefaultFadeTime7#editn#Output7 default fadeTime\",\"status.outputDefaultFadeTime8#editn#Output8 default fadeTime\",\"enabled#onoff#Enabled\"],\"portModes\":[{\"name\":\"Digital output\",\"val\":0},{\"name\":\"PWM output\",\"val\":1}]},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"status\":{\"offline\":{\"devices\":3},\"address\":114,\"reboot\":true,\"online\":false,\"inputCurrentSource1\":true}},{\"id\":606,\"created\":1706471045518,\"updated\":1711304310795,\"enabled\":true,\"name\":\" Kubu tööolek\",\"roomId\":403,\"type\":\"input\",\"conf\":[{\"id\":389,\"path\":\"/status/input5\",\"target\":\"/status/input\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":10000,\"mode\":\"\",\"relay\":\"\"}],\"usage\":{\"generic\":[\"hood\"]},\"ui\":{\"i1\":[\"status.input#{value==true?_('ON'):value==false?_('OFF'):'-'}\"]},\"delRef\":388,\"acl\":{\"inherit\":[364]},\"uuid\":\"r1uPJHS9\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"input\":false,\"offline\":{\"devices\":5}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":604,\"created\":1706457222120,\"updated\":1706470906420,\"enabled\":true,\"name\":\"Välisuks\",\"remarks\":\"\",\"roomId\":522,\"tag\":\"\",\"type\":\"access\",\"acl\":{\"inherit\":[364]},\"uuid\":\"z0P7UBOr\",\"siteId\":364,\"unlockTime\":1000,\"setup\":{\"sipIp\":\"\",\"sipNumber\":\"\",\"unlockTime\":1000},\"ui\":{\"icon\":\"door\",\"i1\":[\"status.locked#icont##lock#btn#,false=open\",\"/status/unlock/manual#{value?'🤝':''}\",\"/status/unlock/scheduled#{value?'🕛':''}\"],\"i3\":[\"status# #Status##bold\",\"status.locked#{value==null?'-':value?_('Locked'):_('Unlocked')}#Lock##indent\",\"/status/unlock/manual#onoff#🤝 {_('Remain unlocked')}\",\"/status/unlock/scheduledOnce#{value?_('ON'):''}#{value?_('🕛 Activated once'):''}\",\"/status/unlock/scheduledPeriodic#{value?_('ON'):''}#{value?_('🕛 Activated by schedule'):''}\",\"setup# #{_('One time activation')}:##bold\",\"setup.onceS#editt#Unlock##indent\",\"setup.onceE#editt#Lock_command##indent\"]},\"conf\":[{\"dType\":\"access_locked_relay\",\"path\":\"/status/output1\",\"target\":\"/status/locked\",\"inverted\":true,\"pollTime\":600000,\"mode\":\"\",\"relay\":\"\",\"id\":388},{\"dType\":\"access_locked\",\"id\":393,\"path\":\"/status/input4\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":600,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"access\":[\"lock\"]},\"status\":{\"online\":true,\"locked\":true,\"schedule\":{},\"offline\":{\"devices\":33},\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":598,\"created\":1700251047696,\"updated\":1706463560762,\"enabled\":true,\"name\":\"Lüliti keskmine (Koridor)\",\"remarks\":\"\",\"roomId\":402,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"\",\"path\":\"/status/input5\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\",\"id\":388}],\"acl\":{\"inherit\":[364]},\"uuid\":\"fk0owifk\",\"ui\":{\"icon\":\"\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"siteId\":364,\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":27}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":596,\"created\":1697565984405,\"updated\":1706460335468,\"enabled\":true,\"name\":\"Keris\",\"remarks\":\"\",\"roomId\":538,\"tag\":\"\",\"type\":\"huumSauna\",\"usage\":{\"output\":[\"saunaHeater\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"fo7ew29o\",\"ui\":{\"i1\":[],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\"],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"siteId\":364,\"activationDuration\":true,\"setup\":{},\"status\":{\"warnings\":{},\"output\":false,\"block\":{},\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":594,\"created\":1685654174442,\"updated\":1685986678942,\"enabled\":true,\"name\":\"Lüliti parem (Saun)\",\"remarks\":\"Välisukse kõrval\",\"roomId\":538,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":540,\"path\":\"/status/input2\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"uuid\":\"gkht5cw8\",\"ui\":{\"icon\":\"\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"siteId\":364,\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":11}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":588,\"created\":1674696097577,\"updated\":1711400695300,\"enabled\":true,\"name\":\"Põranda temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"id\":586,\"dType\":\"floorTempSensor_ntc\",\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"floorTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":586,\"roomId\":412,\"acl\":{\"inherit\":[364]},\"uuid\":\"odfli5m3\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":26.46},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":587,\"created\":1674696097573,\"updated\":1711400695286,\"enabled\":true,\"name\":\"2 korruse halli temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"id\":586,\"dType\":\"airTempSensor_ntc\",\"path\":\"/status/temperature2\",\"target\":\"/status/temperature\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":586,\"roomId\":589,\"acl\":{\"inherit\":[364]},\"uuid\":\"ikroy0hk\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":27.92},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":586,\"created\":1674695679531,\"updated\":1711400721629,\"enabled\":true,\"name\":\"2k Halli andur\",\"remarks\":\"\",\"roomId\":589,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"address\":116,\"shortAddress\":3004,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"floorTempSensor_ntc\",\"name\":\"Põranda temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"NTC 10k\",\"dType\":\"airTempSensor_ntc\",\"name\":\"2 korruse halli temperatuur\",\"path\":\"/status/temperature2\"},\"port3\":{\"portMode\":\"\"}},\"parentId\":528,\"acl\":{\"inherit\":[364]},\"uuid\":\"m6a14vxe\",\"siteId\":364,\"setup\":{\"inputMode1\":10,\"inputMode2\":10},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":10.98,\"serial\":\"842e14ffFE151374\",\"uptime\":32298514,\"bootFlagRegister\":true,\"swVersion\":\"0101\",\"address\":116,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"inputMode2\":10,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":585,\"created\":1674695537950,\"updated\":1711413843379,\"enabled\":true,\"name\":\"Esiku andur\",\"remarks\":\"\",\"roomId\":402,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"address\":115,\"shortAddress\":3001,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"airTempSensor_ntc\",\"name\":\"Tempratuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"\"},\"port3\":{\"portMode\":\"\"}},\"parentId\":528,\"acl\":{\"inherit\":[364]},\"uuid\":\"iiywgdv5\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/inputMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/inputMode1\",\"id\":null},{\"path\":\"/setup/inputMode1\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469553795001},{\"mode\":\"formula\",\"path\":\"/status/inputMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/inputMode2\",\"id\":null},{\"path\":\"/setup/inputMode2\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469553795002}],\"siteId\":364,\"serial\":\"842E14FFFE1511CE\",\"status\":{\"online\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":581,\"created\":1674695182867,\"updated\":1674695241274,\"enabled\":true,\"name\":\"Õhuniiskus\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airRhSensor\",\"id\":524,\"path\":\"/status/rh\",\"target\":\"/status/rh\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"rh\"]},\"ui\":{\"i1\":[\"status.rh#i.rh\",\"status.ventilationNeedRh#i.need\"],\"i3\":[\"status.ventilationNeedRh#i.need#{_('Ventilation need')} - {_('Relative humidity')}\",\"forceAddVentRh#button#{_('Add to ventilation device(s)')} - RH#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"tempRh\"},\"delRef\":524,\"roomId\":403,\"acl\":{\"inherit\":[364]},\"uuid\":\"zo6lciay\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"rh\":26.9,\"ventilationNeedRh\":33},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":580,\"created\":1674695182864,\"updated\":1674695274375,\"enabled\":true,\"name\":\"CO2\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"co2Sensor\",\"id\":524,\"path\":\"/status/co2\",\"target\":\"/status/co2\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"co2\"]},\"ui\":{\"i1\":[\"status.co2#i.co2\",\"status.ventilationNeedCo2#i.need\"],\"i3\":[\"status.ventilationNeedCo2#i.need#{_('Ventilation need')} - CO2\",\"forceAddVentCo2#button#{_('Add to ventilation device(s)')} - CO2#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"co2\"},\"delRef\":524,\"roomId\":403,\"acl\":{\"inherit\":[364]},\"uuid\":\"ppw2qgro\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"co2\":549,\"ventilationNeedCo2\":85},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":577,\"created\":1674695004731,\"updated\":1674695104563,\"enabled\":true,\"name\":\"Temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"id\":574,\"dType\":\"airTempSensor_EnLife\",\"path\":\"/status/temperature\",\"target\":\"/status/temperature\",\"offset\":-0.6,\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":574,\"roomId\":408,\"acl\":{\"inherit\":[364]},\"uuid\":\"419g84a9\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":30.03},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":576,\"created\":1674695004731,\"updated\":1674695104550,\"enabled\":true,\"name\":\"Õhuniiskus\",\"type\":\"climateSensor\",\"conf\":[{\"id\":574,\"dType\":\"airRhSensor\",\"path\":\"/status/rh\",\"target\":\"/status/rh\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"rh\"]},\"ui\":{\"i1\":[\"status.rh#i.rh\",\"status.ventilationNeedRh#i.need\"],\"i3\":[\"status.ventilationNeedRh#i.need#{_('Ventilation need')} - {_('Relative humidity')}\",\"forceAddVentRh#button#{_('Add to ventilation device(s)')} - RH#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"rh\"},\"delRef\":574,\"roomId\":408,\"acl\":{\"inherit\":[364]},\"uuid\":\"pn6ngc4d\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"rh\":26.38,\"ventilationNeedRh\":33},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":575,\"created\":1674695004728,\"updated\":1674695104537,\"enabled\":true,\"name\":\"CO2\",\"type\":\"climateSensor\",\"conf\":[{\"id\":574,\"dType\":\"co2Sensor\",\"path\":\"/status/co2\",\"target\":\"/status/co2\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"co2\"]},\"ui\":{\"i1\":[\"status.co2#i.co2\",\"status.ventilationNeedCo2#i.need\"],\"i3\":[\"status.ventilationNeedCo2#i.need#{_('Ventilation need')} - CO2\",\"forceAddVentCo2#button#{_('Add to ventilation device(s)')} - CO2#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"co2\"},\"delRef\":574,\"roomId\":408,\"acl\":{\"inherit\":[364]},\"uuid\":\"i2l8b7yt\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"co2\":482,\"ventilationNeedCo2\":78},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":574,\"created\":1674694971418,\"updated\":1706466500409,\"enabled\":true,\"name\":\"Magamistuba 2 andur\",\"remarks\":\"\",\"roomId\":408,\"tag\":\"\",\"type\":\"enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"parentId\":528,\"address\":122,\"shortAddress\":1359,\"ui\":{\"icon\":\"tempRhCo2\",\"template\":\"enTempRhCo2\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.temperature#i.temp1E\",\"status.rh#i.rhE\",\"status.co2#i.co2E\",\"status.lux#i.luxE\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.portMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.portMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"setup.portMode2,no.off#mode#Select mode#ui.portModes#indent\",\"status.portMode2,ui.portModes#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"portModes1_2\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3},{\"name\":\"Wiegand1_2\",\"val\":1}]},\"createDevices\":{\"temperature\":{\"portMode\":\"temperature\",\"dType\":\"airTempSensor_EnLife\",\"name\":\"Temperatuur\",\"path\":\"/status/temperature\"},\"rh\":{\"portMode\":\"rh\",\"dType\":\"airRhSensor\",\"name\":\"Õhuniiskus\",\"path\":\"/status/rh\"},\"co2\":{\"portMode\":\"co2\",\"dType\":\"co2Sensor\",\"name\":\"CO2\",\"path\":\"/status/co2\"},\"i2c\":{\"portMode\":\"\"},\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"ai1\":{\"portMode\":\"\"},\"ao1\":{\"portMode\":\"\"},\"ai2\":{\"portMode\":\"\"},\"ao2\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"0sa3107m\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/portMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode1\",\"id\":null},{\"path\":\"/setup/portMode1\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469497141801},{\"mode\":\"formula\",\"path\":\"/status/portMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode2\",\"id\":null},{\"path\":\"/setup/portMode2\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469497141802}],\"siteId\":364,\"setup\":{},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.47,\"loadMax\":0.59,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0123\",\"uptime\":31723748,\"serial\":\"5cef8975247F0908\",\"address\":122,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"adcThreshold1\":0.2,\"adcThreshold2\":0.2,\"temperatureThreshold\":0.15,\"rhThreshold\":1,\"co2Threshold\":20,\"luxThreshold\":1,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"buttonDebounceDelay1\":35,\"buttonDebounceDelay2\":35,\"inputClickTime1\":350,\"inputClickTime2\":350,\"buttonClickTime1\":350,\"buttonClickTime2\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"buttonLongPushTime1\":2000,\"buttonLongPushTime2\":2000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"buttonValidityTime1\":60000,\"buttonValidityTime2\":60000,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defO10vFadeTime1\":1000,\"defO10vFadeTime2\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"o10vInverted1\":false,\"o10vInverted2\":false,\"trafficLightMode\":false,\"trafficLightYellowLevel\":0,\"trafficLightRedLevel\":0},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":571,\"created\":1674694565909,\"updated\":1674694832943,\"enabled\":true,\"name\":\"Temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airTempSensor_EnLife\",\"id\":553,\"path\":\"/status/temperature\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":-0.6,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":568,\"roomId\":409,\"acl\":{\"inherit\":[364]},\"uuid\":\"cdfq5jpj\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":31.66},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":570,\"created\":1674694565908,\"updated\":1674694797990,\"enabled\":true,\"name\":\"Õhuniiskus\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airRhSensor\",\"id\":553,\"path\":\"/status/rh\",\"target\":\"/status/rh\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"rh\"]},\"ui\":{\"i1\":[\"status.rh#i.rh\",\"status.ventilationNeedRh#i.need\"],\"i3\":[\"status.ventilationNeedRh#i.need#{_('Ventilation need')} - {_('Relative humidity')}\",\"forceAddVentRh#button#{_('Add to ventilation device(s)')} - RH#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"rh\"},\"delRef\":568,\"roomId\":409,\"acl\":{\"inherit\":[364]},\"uuid\":\"mqxctg9q\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"rh\":22.88,\"ventilationNeedRh\":32},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":569,\"created\":1674694565906,\"updated\":1674694772496,\"enabled\":true,\"name\":\"CO2\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"co2Sensor\",\"id\":553,\"path\":\"/status/co2\",\"target\":\"/status/co2\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"co2\"]},\"ui\":{\"i1\":[\"status.co2#i.co2\",\"status.ventilationNeedCo2#i.need\"],\"i3\":[\"status.ventilationNeedCo2#i.need#{_('Ventilation need')} - CO2\",\"forceAddVentCo2#button#{_('Add to ventilation device(s)')} - CO2#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"co2\"},\"delRef\":568,\"roomId\":409,\"acl\":{\"inherit\":[364]},\"uuid\":\"f46zwpk4\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"co2\":522,\"ventilationNeedCo2\":82},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":567,\"created\":1674693699045,\"updated\":1685986675928,\"enabled\":true,\"name\":\"Lüliti vasak (Saun)\",\"remarks\":\"Välisukse kõrval\",\"roomId\":538,\"tag\":\"\",\"type\":\"switch\",\"usage\":{\"switch\":[\"generic\"]},\"conf\":[{\"dType\":\"switch\",\"id\":540,\"path\":\"/status/input1\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":250,\"mode\":\"input\"}],\"acl\":{\"inherit\":[364]},\"uuid\":\"t11z7ltp\",\"ui\":{\"icon\":\"\",\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"siteId\":364,\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":8}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":566,\"created\":1674693307720,\"updated\":1674694091097,\"enabled\":true,\"name\":\"Õhutemperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airTempSensor_ntc\",\"id\":541,\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":541,\"roomId\":538,\"acl\":{\"inherit\":[364]},\"uuid\":\"pypykhqe\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":22.89},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":562,\"created\":1674692876357,\"updated\":1674692925642,\"enabled\":true,\"name\":\"Temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airTempSensor_EnLife\",\"id\":552,\"path\":\"/status/temperature\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":-0.6,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":552,\"roomId\":410,\"acl\":{\"inherit\":[364]},\"uuid\":\"ybxyc0ur\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":25.37},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":561,\"created\":1674692876356,\"updated\":1674692909511,\"enabled\":true,\"name\":\"Õhuniiskus\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airRhSensor\",\"id\":552,\"path\":\"/status/rh\",\"target\":\"/status/rh\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"rh\"]},\"ui\":{\"i1\":[\"status.rh#i.rh\",\"status.ventilationNeedRh#i.need\"],\"i3\":[\"status.ventilationNeedRh#i.need#{_('Ventilation need')} - {_('Relative humidity')}\",\"forceAddVentRh#button#{_('Add to ventilation device(s)')} - RH#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"rh\"},\"delRef\":552,\"roomId\":410,\"acl\":{\"inherit\":[364]},\"uuid\":\"jhv0zu8m\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"rh\":29.03,\"ventilationNeedRh\":33},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":560,\"created\":1674692876354,\"updated\":1674692895153,\"enabled\":true,\"name\":\"CO2\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"co2Sensor\",\"id\":552,\"path\":\"/status/co2\",\"target\":\"/status/co2\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"co2\"]},\"ui\":{\"i1\":[\"status.co2#i.co2\",\"status.ventilationNeedCo2#i.need\"],\"i3\":[\"status.ventilationNeedCo2#i.need#{_('Ventilation need')} - CO2\",\"forceAddVentCo2#button#{_('Add to ventilation device(s)')} - CO2#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"co2\"},\"delRef\":552,\"roomId\":410,\"acl\":{\"inherit\":[364]},\"uuid\":\"mj0io1gi\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"co2\":471,\"ventilationNeedCo2\":77},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":556,\"created\":1674690355227,\"updated\":1674690429873,\"enabled\":true,\"name\":\"Temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airTempSensor_EnLife\",\"id\":525,\"path\":\"/status/temperature\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":-0.6,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":525,\"roomId\":404,\"acl\":{\"inherit\":[364]},\"uuid\":\"76rgkhre\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":false,\"temperature\":24.81,\"offline\":{\"devices\":5}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":555,\"created\":1674690355226,\"updated\":1674690450995,\"enabled\":true,\"name\":\"Õhuniiskus\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airRhSensor\",\"id\":525,\"path\":\"/status/rh\",\"target\":\"/status/rh\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"rh\"]},\"ui\":{\"i1\":[\"status.rh#i.rh\",\"status.ventilationNeedRh#i.need\"],\"i3\":[\"status.ventilationNeedRh#i.need#{_('Ventilation need')} - {_('Relative humidity')}\",\"forceAddVentRh#button#{_('Add to ventilation device(s)')} - RH#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"rh\"},\"delRef\":525,\"roomId\":404,\"acl\":{\"inherit\":[364]},\"uuid\":\"my5qdh35\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":false,\"rh\":32.31,\"ventilationNeedRh\":33,\"offline\":{\"devices\":6}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":554,\"created\":1674690355221,\"updated\":1674690402088,\"enabled\":true,\"name\":\"CO2\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"co2Sensor\",\"path\":\"/status/co2\",\"target\":\"/status/co2\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\",\"id\":525}],\"usage\":{\"climateSensor\":[\"co2\"]},\"ui\":{\"i1\":[\"status.co2#i.co2\",\"status.ventilationNeedCo2#i.need\"],\"i3\":[\"status.ventilationNeedCo2#i.need#{_('Ventilation need')} - CO2\",\"forceAddVentCo2#button#{_('Add to ventilation device(s)')} - CO2#true##white,true=green#Confirm - this device will be added to all air handling units in this site. If it needs to be only in one, remove it from others manually\",\"enabled#onoff#Enabled\"],\"icon\":\"co2\"},\"delRef\":525,\"roomId\":404,\"acl\":{\"inherit\":[364]},\"uuid\":\"8qyxb0pm\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":false,\"co2\":1001,\"ventilationNeedCo2\":100,\"offline\":{\"devices\":7}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":553,\"created\":1674690162053,\"updated\":1711413793775,\"enabled\":true,\"name\":\"Magamistuba 1 andur\",\"remarks\":\"\",\"roomId\":409,\"tag\":\"\",\"type\":\"enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"parentId\":528,\"address\":126,\"shortAddress\":1641,\"ui\":{\"icon\":\"tempRhCo2\",\"template\":\"enTempRhCo2\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.temperature#i.temp1E\",\"status.rh#i.rhE\",\"status.co2#i.co2E\",\"status.lux#i.luxE\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.portMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.portMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"setup.portMode2,no.off#mode#Select mode#ui.portModes#indent\",\"status.portMode2,ui.portModes#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"portModes1_2\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3},{\"name\":\"Wiegand1_2\",\"val\":1}]},\"createDevices\":{\"temperature\":{\"portMode\":\"temperature\",\"dType\":\"airTempSensor_EnLife\",\"name\":\"Temperatuur\",\"path\":\"/status/temperature\"},\"rh\":{\"portMode\":\"rh\",\"dType\":\"airRhSensor\",\"name\":\"Õhuniiskus\",\"path\":\"/status/rh\"},\"co2\":{\"portMode\":\"co2\",\"dType\":\"co2Sensor\",\"name\":\"CO2\",\"path\":\"/status/co2\"},\"i2c\":{\"portMode\":\"\"},\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"ai1\":{\"portMode\":\"\"},\"ao1\":{\"portMode\":\"\"},\"ai2\":{\"portMode\":\"\"},\"ao2\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"u80ftl9r\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/portMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode1\",\"id\":null},{\"path\":\"/setup/portMode1\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469016205301},{\"mode\":\"formula\",\"path\":\"/status/portMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode2\",\"id\":null},{\"path\":\"/setup/portMode2\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167469016205302}],\"siteId\":364,\"setup\":{\"portMode1\":0},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.34,\"loadMax\":0.59,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0123\",\"uptime\":31182858,\"serial\":\"5cef88df247F0908\",\"address\":126,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"adcThreshold1\":0.2,\"adcThreshold2\":0.2,\"temperatureThreshold\":0.15,\"rhThreshold\":1,\"co2Threshold\":20,\"luxThreshold\":1,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"buttonDebounceDelay1\":35,\"buttonDebounceDelay2\":35,\"inputClickTime1\":350,\"inputClickTime2\":350,\"buttonClickTime1\":350,\"buttonClickTime2\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"buttonLongPushTime1\":2000,\"buttonLongPushTime2\":2000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"buttonValidityTime1\":60000,\"buttonValidityTime2\":60000,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defO10vFadeTime1\":1000,\"defO10vFadeTime2\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"o10vInverted1\":false,\"o10vInverted2\":false,\"trafficLightMode\":false,\"trafficLightYellowLevel\":0,\"trafficLightRedLevel\":0},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":552,\"created\":1673630071284,\"updated\":1706466349243,\"enabled\":true,\"name\":\"Master bedroom andur 2\",\"remarks\":\"\",\"tag\":\"\",\"type\":\"enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"address\":125,\"shortAddress\":1516,\"ui\":{\"icon\":\"tempRhCo2\",\"template\":\"enTempRhCo2\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.temperature#i.temp1E\",\"status.rh#i.rhE\",\"status.co2#i.co2E\",\"status.lux#i.luxE\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.portMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.portMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"setup.portMode2,no.off#mode#Select mode#ui.portModes#indent\",\"status.portMode2,ui.portModes#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"portModes1_2\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3},{\"name\":\"Wiegand1_2\",\"val\":1}]},\"createDevices\":{\"temperature\":{\"portMode\":\"temperature\",\"dType\":\"airTempSensor_EnLife\",\"name\":\"Temperatuur\",\"path\":\"/status/temperature\"},\"rh\":{\"portMode\":\"rh\",\"dType\":\"airRhSensor\",\"name\":\"Õhuniiskus\",\"path\":\"/status/rh\"},\"co2\":{\"portMode\":\"co2\",\"dType\":\"co2Sensor\",\"name\":\"CO2\",\"path\":\"/status/co2\"},\"i2c\":{\"portMode\":\"\"},\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"ai1\":{\"portMode\":\"\"},\"ao1\":{\"portMode\":\"\"},\"ai2\":{\"portMode\":\"\"},\"ao2\":{\"portMode\":\"\"}},\"parentId\":528,\"roomId\":410,\"acl\":{\"inherit\":[364]},\"uuid\":\"6xre4axq\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/portMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/portMode1\"},{\"id\":null,\"path\":\"/setup/portMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167363007128401},{\"mode\":\"formula\",\"path\":\"/status/portMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/portMode2\"},{\"id\":null,\"path\":\"/setup/portMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167363007128402}],\"siteId\":364,\"setup\":{},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.08,\"loadMax\":0.59,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0123\",\"uptime\":32201865,\"serial\":\"5cef8787243C6205\",\"address\":125,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"adcThreshold1\":0.2,\"adcThreshold2\":0.2,\"temperatureThreshold\":0.15,\"rhThreshold\":1,\"co2Threshold\":20,\"luxThreshold\":1,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"buttonDebounceDelay1\":35,\"buttonDebounceDelay2\":35,\"inputClickTime1\":350,\"inputClickTime2\":350,\"buttonClickTime1\":350,\"buttonClickTime2\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"buttonLongPushTime1\":2000,\"buttonLongPushTime2\":2000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"buttonValidityTime1\":60000,\"buttonValidityTime2\":60000,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defO10vFadeTime1\":1000,\"defO10vFadeTime2\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"o10vInverted1\":false,\"o10vInverted2\":false,\"trafficLightMode\":false,\"trafficLightYellowLevel\":0,\"trafficLightRedLevel\":0},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":545,\"created\":1673553779437,\"updated\":1674693051132,\"enabled\":true,\"name\":\"Põranda temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"id\":543,\"dType\":\"airTempSensor_ntc\",\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":543,\"roomId\":411,\"acl\":{\"inherit\":[364]},\"uuid\":\"ljthlioj\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":25.91},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":543,\"created\":1673553150437,\"updated\":1711413804362,\"enabled\":true,\"name\":\"Master bedroom andur 1\",\"remarks\":\"\",\"roomId\":411,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"parentId\":528,\"address\":118,\"shortAddress\":3014,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"airTempSensor_ntc\",\"name\":\"Põranda temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"\"},\"port3\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"vji30wrc\",\"siteId\":364,\"setup\":{\"inputMode1\":10},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.43,\"serial\":\"842e14ffFE1511EC\",\"uptime\":32336246,\"bootFlagRegister\":true,\"swVersion\":\"0101\",\"address\":118,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"inputMode2\":0,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":541,\"created\":1671244122782,\"updated\":1706466375436,\"enabled\":true,\"name\":\"Sauna andur\",\"remarks\":\"\",\"roomId\":538,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"address\":117,\"shortAddress\":3009,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"airTempSensor_ntc\",\"name\":\"Sauna eesruumi temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"\",\"dType\":\"airTempSensor_ntc\",\"name\":\"Sauna eesruumi temperatuur 2\",\"path\":\"/status/temperature2\"},\"port3\":{\"portMode\":\"\"}},\"parentId\":528,\"acl\":{\"inherit\":[364]},\"uuid\":\"vsco0qn9\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/inputMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/inputMode1\"},{\"id\":null,\"path\":\"/setup/inputMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167124412278201},{\"mode\":\"formula\",\"path\":\"/status/inputMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/inputMode2\"},{\"id\":null,\"path\":\"/setup/inputMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167124412278202}],\"siteId\":364,\"setup\":{\"inputMode1\":10,\"inputMode2\":10},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.7,\"serial\":\"842e14ffFE15136F\",\"uptime\":32313218,\"bootFlagRegister\":true,\"swVersion\":\"0101\",\"address\":117,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"inputMode2\":10,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":540,\"created\":1671236255195,\"updated\":1711891719491,\"enabled\":true,\"name\":\"1k kollektori modbus module\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"yoga8ADi8o_Modbus\",\"parentId\":384,\"address\":113,\"conf\":[{\"id\":384,\"path\":\"\",\"target\":\"\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":5000,\"mode\":\"\",\"relay\":\"\"}],\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"status.address#i.address\",\"status.voltage#{(value||'').step(0.1)}V\"],\"i3\":[\"status.swVersion#{value||'-'}#Tarkvara versioon\",\"address#editn#Aadress andmebaasis\",\"status.address#editn#Aadressi muutmine\",\"status.baudRate#editn#Andmeside kiiruse muutmine\",\"status.uptime#{value||'-'}#Uptime\",\"status.reboot#button#Reboot#true#Oled kindel?\",\"status.inputCurrentSource1#onoff#Input1 Current Source\",\"status.inputCurrentSource2#onoff#Input2 Current Source\",\"status.inputCurrentSource3#onoff#Input3 Current Source\",\"status.inputCurrentSource4#onoff#Input4 Current Source\",\"status.inputCurrentSource5#onoff#Input5 Current Source\",\"status.inputCurrentSource6#onoff#Input6 Current Source\",\"status.inputCurrentSource7#onoff#Input7 Current Source\",\"status.inputCurrentSource8#onoff#Input8 Current Source\",\"status.outputMode1#editn#Output1 mode\",\"status.outputMode2#editn#Output2 mode\",\"status.outputMode3#editn#Output3 mode\",\"status.outputMode4#editn#Output4 mode\",\"status.outputMode5#editn#Output5 mode\",\"status.outputMode6#editn#Output6 mode\",\"status.outputMode7#editn#Output7 mode\",\"status.outputMode8#editn#Output8 mode\",\"status.pwmFast#onoff#Fast PWM for LED control\",\"status.outputDefaultFadeTime1#editn#Output1 default fadeTime\",\"status.outputDefaultFadeTime2#editn#Output2 default fadeTime\",\"status.outputDefaultFadeTime3#editn#Output3 default fadeTime\",\"status.outputDefaultFadeTime4#editn#Output4 default fadeTime\",\"status.outputDefaultFadeTime5#editn#Output5 default fadeTime\",\"status.outputDefaultFadeTime6#editn#Output6 default fadeTime\",\"status.outputDefaultFadeTime7#editn#Output7 default fadeTime\",\"status.outputDefaultFadeTime8#editn#Output8 default fadeTime\",\"enabled#onoff#Enabled\"],\"portModes\":[{\"name\":\"Digital output\",\"val\":0},{\"name\":\"PWM output\",\"val\":1}]},\"acl\":{\"inherit\":[364]},\"uuid\":\"hdgsb2yd\",\"siteId\":364,\"status\":{\"voltage\":24.37,\"voltageCpu\":3.67,\"current\":37,\"buzzer\":false,\"serial\":0,\"uptime\":0,\"swVersion\":264,\"bootFlagRegister\":false,\"loadMin\":984,\"reboot\":false,\"address\":113,\"baudRate\":10,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputValidityTime1\":10000,\"inputValidityTime2\":10000,\"inputValidityTime3\":10000,\"inputValidityTime4\":10000,\"inputValidityTime5\":10000,\"inputValidityTime6\":10000,\"inputValidityTime7\":10000,\"inputValidityTime8\":10000,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputCurrentSource1\":false,\"inputCurrentSource2\":false,\"inputCurrentSource3\":false,\"inputCurrentSource4\":false,\"inputCurrentSource5\":false,\"inputCurrentSource6\":false,\"inputCurrentSource7\":false,\"inputCurrentSource8\":false,\"outputMode1\":0,\"outputMode2\":0,\"outputMode3\":0,\"outputMode4\":0,\"outputMode5\":0,\"outputMode6\":0,\"outputMode7\":0,\"outputMode8\":0,\"outputDefaultFadeTime1\":1000,\"outputDefaultFadeTime2\":1000,\"outputDefaultFadeTime3\":1000,\"outputDefaultFadeTime4\":1000,\"outputDefaultFadeTime5\":1000,\"outputDefaultFadeTime6\":1000,\"outputDefaultFadeTime7\":1000,\"outputDefaultFadeTime8\":1000,\"pwmFast\":false,\"offline\":{\"devices\":22},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":534,\"created\":1671228209263,\"updated\":1674693099835,\"enabled\":true,\"name\":\"Põranda temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"id\":532,\"dType\":\"floorTempSensor_ntc\",\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000}],\"usage\":{\"climateSensor\":[\"floorTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":532,\"roomId\":538,\"acl\":{\"inherit\":[364]},\"uuid\":\"k31oisum\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":25.3},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":533,\"created\":1671228209260,\"updated\":1674693752973,\"enabled\":true,\"name\":\"Halli nupp\",\"type\":\"switch\",\"conf\":[{\"dType\":\"switch\",\"id\":532,\"path\":\"/status/input2\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"usage\":{\"switch\":[\"generic\"]},\"ui\":{\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"delRef\":532,\"roomId\":405,\"acl\":{\"inherit\":[364]},\"uuid\":\"bisuvaug\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"input\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":532,\"created\":1671227247589,\"updated\":1711413810026,\"enabled\":true,\"name\":\"Halli andur\",\"remarks\":\"\",\"roomId\":538,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"parentId\":528,\"address\":121,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"floorTempSensor_ntc\",\"name\":\"Põranda temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"Digital input\",\"dType\":\"switch\",\"name\":\"Halli nupp\",\"path\":\"/status/input2\"},\"port3\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"u3wi821y\",\"siteId\":364,\"shortAddress\":3005,\"setup\":{\"inputMode1\":10,\"inputMode2\":0},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.5,\"serial\":\"842e14ffFE1511E6\",\"uptime\":32348104,\"bootFlagRegister\":false,\"swVersion\":\"0101\",\"address\":121,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"inputMode2\":0,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":529,\"created\":1671213087994,\"updated\":1671213257048,\"enabled\":true,\"name\":\"Elutuba köök temp\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"climateSensor\",\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"conf\":[{\"dType\":\"airTempSensor_EnLife\",\"id\":524,\"path\":\"/status/temperature\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":-0.6,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"acl\":{\"inherit\":[364]},\"uuid\":\"6l1toqvm\",\"ui\":{\"icon\":\"temp\",\"i1\":[\"status.temperature#i.temp\"]},\"siteId\":364,\"status\":{\"online\":true,\"temperature\":26.46},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":528,\"created\":1671210340420,\"updated\":1711414080390,\"enabled\":true,\"name\":\"Modbus 1-2 Tubade seadmed\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"modbusDriver\",\"baudRate\":\"115200\",\"dev\":\"/dev/enlife1-2\",\"format\":\"8E1\",\"pollingDelay\":\"5\",\"follow\":\"\",\"ui\":{\"icon\":\"controller\",\"i1\":[\"dev,setup.address,setup.port#{i[0]=='/dev/enlifeMiniModbus'?'internal':i[0]=='/dev/enlife0'?'onboard':i[1]?('a:'+i[1]+(i[2]?'-p:'+i[2]:'')):i[0].replace('/dev/','')}\",\"baudRate#i.valE\",\"format#i.valE\",\"pollingDelay#i.ms\"],\"i3\":[\"id# #Setup##bold\",\"dev,no.off#mode#Port#ui.devs#indent\",\"baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"format,no.off#mode#Format#ui.formats#indent\",\"pollingDelay,no.off#mode#Polling delay#ui.pollingDelays#indent\",\"setup.scanDevice#editn#Scan device ID##indent\",\"setup.setAddress#button#Set addresses#true##white,true=green#Confirm setting addresses to ALL devices on THIS Modbus line\",\"nodeId#editn#Node ID##indent\",\"enabled#onoff#Enabled\"],\"baudRates\":[\"300\",\"600\",\"1200\",\"2400\",\"4800\",\"9600\",\"19200\",\"38400\",\"57600\",\"115200\"],\"pollingDelays\":[5,10,25,50,100,250,500,1000],\"formats\":[\"8E1\",\"8n1\",\"8n2\",\"8O1\"],\"devs\":[\"\",\"/dev/enlife0\",\"/dev/enlife1-1\",\"/dev/enlife1-2\",\"/dev/enlife1-3\",\"/dev/enlife1-4\",\"/dev/enlife2-1\",\"/dev/enlife2-2\",\"/dev/enlife2-3\",\"/dev/enlife2-4\",\"/dev/enlife3-1\",\"/dev/enlife3-2\",\"/dev/enlife3-3\",\"/dev/enlife3-4\",\"/dev/enlife4-1\",\"/dev/enlife4-2\",\"/dev/enlife4-3\",\"/dev/enlife4-4\",\"/dev/enlife5-1\",\"/dev/enlife5-2\",\"/dev/enlife5-3\",\"/dev/enlife5-4\",\"/dev/enlife6-1\",\"/dev/enlife6-2\",\"/dev/enlife6-3\",\"/dev/enlife6-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife8-1\",\"/dev/enlife8-2\",\"/dev/enlife8-3\",\"/dev/enlife8-4\",\"/dev/enlife9-1\",\"/dev/enlife9-2\",\"/dev/enlife9-3\",\"/dev/enlife9-4\",\"/dev/enlife10-1\",\"/dev/enlife10-2\",\"/dev/enlife10-3\",\"/dev/enlife10-4\",\"/dev/enlife11-1\",\"/dev/enlife11-2\",\"/dev/enlife11-3\",\"/dev/enlife11-4\",\"/dev/enlife12-1\",\"/dev/enlife12-2\",\"/dev/enlife12-3\",\"/dev/enlife12-4\",\"/dev/enlife13-1\",\"/dev/enlife13-2\",\"/dev/enlife13-3\",\"/dev/enlife13-4\",\"/dev/enlife14-1\",\"/dev/enlife14-2\",\"/dev/enlife14-3\",\"/dev/enlife14-4\",\"/dev/enlife15-1\",\"/dev/enlife15-2\",\"/dev/enlife15-3\",\"/dev/enlife15-4\",\"/dev/enlife16-1\",\"/dev/enlife16-2\",\"/dev/enlife16-3\",\"/dev/enlife16-4\",\"/dev/enlife17-1\",\"/dev/enlife17-2\",\"/dev/enlife17-3\",\"/dev/enlife17-4\",\"/dev/enlife18-1\",\"/dev/enlife18-2\",\"/dev/enlife18-3\",\"/dev/enlife18-4\",\"/dev/enlife19-1\",\"/dev/enlife19-2\",\"/dev/enlife19-3\",\"/dev/enlife19-4\",\"/dev/enlifeMiniModbus\",\"/dev/ttyO1\",\"/dev/ttyO2\",\"/dev/ttyO3\",\"/dev/ttyO4\",\"/dev/ttyO5\",\"/dev/ttyO6\",\"/dev/ttyO7\",\"/dev/ttyO8\",\"/dev/ttyO9\",\"/dev/tty1O\",\"/dev/tty11\",\"/dev/tty12\"]},\"acl\":{\"inherit\":[364]},\"setup\":{},\"uuid\":\"s7k7jgzm\",\"siteId\":364,\"status\":{\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":527,\"created\":1671210289683,\"updated\":1711891675042,\"enabled\":false,\"name\":\"Modbus 1-3 Vent. agregaat\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"modbusDriver\",\"baudRate\":\"115200\",\"dev\":\"/dev/enlife1-3\",\"format\":\"8E1\",\"pollingDelay\":\"5\",\"follow\":\"\",\"ui\":{\"icon\":\"controller\",\"i1\":[\"dev,setup.address,setup.port#{i[0]=='/dev/enlifeMiniModbus'?'internal':i[0]=='/dev/enlife0'?'onboard':i[1]?('a:'+i[1]+(i[2]?'-p:'+i[2]:'')):i[0].replace('/dev/','')}\",\"baudRate#i.valE\",\"format#i.valE\",\"pollingDelay#i.ms\"],\"i3\":[\"id# #Setup##bold\",\"dev,no.off#mode#Port#ui.devs#indent\",\"baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"format,no.off#mode#Format#ui.formats#indent\",\"pollingDelay,no.off#mode#Polling delay#ui.pollingDelays#indent\",\"setup.scanDevice#editn#Scan device ID##indent\",\"setup.setAddress#button#Set addresses#true##white,true=green#Confirm setting addresses to ALL devices on THIS Modbus line\",\"nodeId#editn#Node ID##indent\",\"enabled#onoff#Enabled\"],\"baudRates\":[\"300\",\"600\",\"1200\",\"2400\",\"4800\",\"9600\",\"19200\",\"38400\",\"57600\",\"115200\"],\"pollingDelays\":[5,10,25,50,100,250,500,1000],\"formats\":[\"8E1\",\"8n1\",\"8n2\",\"8O1\"],\"devs\":[\"\",\"/dev/enlife0\",\"/dev/enlife1-1\",\"/dev/enlife1-2\",\"/dev/enlife1-3\",\"/dev/enlife1-4\",\"/dev/enlife2-1\",\"/dev/enlife2-2\",\"/dev/enlife2-3\",\"/dev/enlife2-4\",\"/dev/enlife3-1\",\"/dev/enlife3-2\",\"/dev/enlife3-3\",\"/dev/enlife3-4\",\"/dev/enlife4-1\",\"/dev/enlife4-2\",\"/dev/enlife4-3\",\"/dev/enlife4-4\",\"/dev/enlife5-1\",\"/dev/enlife5-2\",\"/dev/enlife5-3\",\"/dev/enlife5-4\",\"/dev/enlife6-1\",\"/dev/enlife6-2\",\"/dev/enlife6-3\",\"/dev/enlife6-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife8-1\",\"/dev/enlife8-2\",\"/dev/enlife8-3\",\"/dev/enlife8-4\",\"/dev/enlife9-1\",\"/dev/enlife9-2\",\"/dev/enlife9-3\",\"/dev/enlife9-4\",\"/dev/enlife10-1\",\"/dev/enlife10-2\",\"/dev/enlife10-3\",\"/dev/enlife10-4\",\"/dev/enlife11-1\",\"/dev/enlife11-2\",\"/dev/enlife11-3\",\"/dev/enlife11-4\",\"/dev/enlife12-1\",\"/dev/enlife12-2\",\"/dev/enlife12-3\",\"/dev/enlife12-4\",\"/dev/enlife13-1\",\"/dev/enlife13-2\",\"/dev/enlife13-3\",\"/dev/enlife13-4\",\"/dev/enlife14-1\",\"/dev/enlife14-2\",\"/dev/enlife14-3\",\"/dev/enlife14-4\",\"/dev/enlife15-1\",\"/dev/enlife15-2\",\"/dev/enlife15-3\",\"/dev/enlife15-4\",\"/dev/enlife16-1\",\"/dev/enlife16-2\",\"/dev/enlife16-3\",\"/dev/enlife16-4\",\"/dev/enlife17-1\",\"/dev/enlife17-2\",\"/dev/enlife17-3\",\"/dev/enlife17-4\",\"/dev/enlife18-1\",\"/dev/enlife18-2\",\"/dev/enlife18-3\",\"/dev/enlife18-4\",\"/dev/enlife19-1\",\"/dev/enlife19-2\",\"/dev/enlife19-3\",\"/dev/enlife19-4\",\"/dev/enlifeMiniModbus\",\"/dev/ttyO1\",\"/dev/ttyO2\",\"/dev/ttyO3\",\"/dev/ttyO4\",\"/dev/ttyO5\",\"/dev/ttyO6\",\"/dev/ttyO7\",\"/dev/ttyO8\",\"/dev/ttyO9\",\"/dev/tty1O\",\"/dev/tty11\",\"/dev/tty12\"]},\"acl\":{\"inherit\":[364]},\"setup\":{},\"uuid\":\"r15p3owr\",\"siteId\":364,\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":526,\"created\":1671209718355,\"updated\":1671231147952,\"enabled\":true,\"name\":\"Tamburi põranda temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"floorTempSensor_ntc\",\"id\":523,\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"floorTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":523,\"roomId\":522,\"acl\":{\"inherit\":[364]},\"uuid\":\"sc3r6uar\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":24.9},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":525,\"created\":1671209635431,\"updated\":1706466469941,\"enabled\":true,\"name\":\"Kabineti andur\",\"remarks\":\"\",\"roomId\":404,\"tag\":\"\",\"type\":\"enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"parentId\":528,\"address\":124,\"shortAddress\":1477,\"ui\":{\"icon\":\"tempRhCo2\",\"template\":\"enTempRhCo2\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.temperature#i.temp1E\",\"status.rh#i.rhE\",\"status.co2#i.co2E\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3},{\"name\":\"Wiegand1_2\",\"val\":1}]},\"createDevices\":{\"temperature\":{\"portMode\":\"temperature\",\"dType\":\"airTempSensor_EnLife\",\"name\":\"Tempratuur\",\"path\":\"/status/temperature\"},\"rh\":{\"portMode\":\"rh\",\"dType\":\"airRhSensor\",\"name\":\"Õhuniiskus\",\"path\":\"/status/rh\"},\"co2\":{\"portMode\":\"co2\",\"dType\":\"co2Sensor\",\"name\":\"CO2\",\"path\":\"/status/co2\"},\"i2c\":{\"portMode\":\"\"},\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"ai1\":{\"portMode\":\"\"},\"ao1\":{\"portMode\":\"\"},\"ai2\":{\"portMode\":\"\"},\"ao2\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"2d3pwft3\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/portMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/portMode1\"},{\"id\":null,\"path\":\"/setup/portMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167120963543101},{\"mode\":\"formula\",\"path\":\"/status/portMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/portMode2\"},{\"id\":null,\"path\":\"/setup/portMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167120963543102}],\"siteId\":364,\"setup\":{},\"serial\":\"\",\"status\":{\"voltage\":11.64,\"loadMax\":0.59,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0123\",\"uptime\":31359466,\"serial\":\"5cef88c3247F0908\",\"address\":124,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"adcThreshold1\":0.2,\"adcThreshold2\":0.2,\"temperatureThreshold\":0.15,\"rhThreshold\":1,\"co2Threshold\":20,\"luxThreshold\":1,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"buttonDebounceDelay1\":35,\"buttonDebounceDelay2\":35,\"inputClickTime1\":350,\"inputClickTime2\":350,\"buttonClickTime1\":350,\"buttonClickTime2\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"buttonLongPushTime1\":2000,\"buttonLongPushTime2\":2000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"buttonValidityTime1\":60000,\"buttonValidityTime2\":60000,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defO10vFadeTime1\":1000,\"defO10vFadeTime2\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"o10vInverted1\":false,\"o10vInverted2\":false,\"trafficLightMode\":false,\"trafficLightYellowLevel\":0,\"trafficLightRedLevel\":0,\"offline\":{\"devices\":4},\"online\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":524,\"created\":1671209356668,\"updated\":1711413771656,\"enabled\":true,\"name\":\"Köögi andur\",\"remarks\":\"\",\"roomId\":403,\"tag\":\"\",\"type\":\"enlife_Co2TempRhLux2Dio2Ai2Ao_Modbus\",\"address\":123,\"shortAddress\":1395,\"ui\":{\"icon\":\"tempRhCo2\",\"template\":\"enTempRhCo2\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.temperature#i.temp1E\",\"status.rh#i.rhE\",\"status.co2#i.co2E\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3},{\"name\":\"Wiegand1_2\",\"val\":1}]},\"createDevices\":{\"temperature\":{\"portMode\":\"temperature\",\"dType\":\"airTempSensor_EnLife\",\"name\":\"Temperatuur\",\"path\":\"/status/temperature\"},\"rh\":{\"portMode\":\"rh\",\"dType\":\"airRhSensor\",\"name\":\"Õhuniiskus\",\"path\":\"/status/rh\"},\"co2\":{\"portMode\":\"co2\",\"dType\":\"co2Sensor\",\"name\":\"CO2\",\"path\":\"/status/co2\"},\"i2c\":{\"portMode\":\"\"},\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"ai1\":{\"portMode\":\"\"},\"ao1\":{\"portMode\":\"\"},\"ai2\":{\"portMode\":\"\"},\"ao2\":{\"portMode\":\"\"}},\"parentId\":528,\"acl\":{\"inherit\":[364]},\"uuid\":\"piv0b56b\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/portMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode1\",\"id\":null},{\"path\":\"/setup/portMode1\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167120935666801},{\"mode\":\"formula\",\"path\":\"/status/portMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"path\":\"/status/portMode2\",\"id\":null},{\"path\":\"/setup/portMode2\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":167120935666802}],\"siteId\":364,\"setup\":{},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":11.74,\"loadMax\":0.59,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0123\",\"uptime\":31508384,\"serial\":\"5ce7c01f244F4008\",\"address\":123,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"adcThreshold1\":0.2,\"adcThreshold2\":0.2,\"temperatureThreshold\":0.15,\"rhThreshold\":1,\"co2Threshold\":20,\"luxThreshold\":1,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"buttonDebounceDelay1\":35,\"buttonDebounceDelay2\":35,\"inputClickTime1\":350,\"inputClickTime2\":350,\"buttonClickTime1\":350,\"buttonClickTime2\":350,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"buttonLongPushTime1\":2000,\"buttonLongPushTime2\":2000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"buttonValidityTime1\":60000,\"buttonValidityTime2\":60000,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defO10vFadeTime1\":1000,\"defO10vFadeTime2\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"o10vInverted1\":false,\"o10vInverted2\":false,\"trafficLightMode\":false,\"trafficLightYellowLevel\":0,\"trafficLightRedLevel\":0},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":523,\"created\":1671209015090,\"updated\":1710102958706,\"enabled\":true,\"name\":\"Tambur temp\",\"remarks\":\"\",\"roomId\":522,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"parentId\":528,\"address\":120,\"shortAddress\":3016,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"floorTempSensor_ntc\",\"name\":\"Tamburi põranda temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"\"},\"port3\":{\"portMode\":\"\"}},\"acl\":{\"inherit\":[364]},\"uuid\":\"bkeqo602\",\"siteId\":364,\"setup\":{\"inputMode1\":10},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":12.1,\"serial\":\"842e14ffFE1511C4\",\"uptime\":33653644,\"bootFlagRegister\":true,\"swVersion\":\"0101\",\"address\":120,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"inputMode2\":0,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":521,\"created\":1671208863751,\"updated\":1671229732504,\"enabled\":true,\"name\":\"Garaaži temperatuur\",\"type\":\"climateSensor\",\"conf\":[{\"dType\":\"airTempSensor_ntc\",\"id\":520,\"path\":\"/status/temperature1\",\"target\":\"/status/temperature\",\"pollTime\":60000,\"threshold\":null,\"offset\":null,\"multiplier\":null,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.temperature#i.temp1\"],\"i3\":[\"enabled#onoff#Enabled\"],\"icon\":\"temp\"},\"delRef\":520,\"roomId\":401,\"acl\":{\"inherit\":[364]},\"uuid\":\"q32pu1dy\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"temperature\":22.54},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":520,\"created\":1671141807863,\"updated\":1711413782970,\"enabled\":true,\"name\":\"Garaaž andur\",\"remarks\":\"\",\"roomId\":401,\"tag\":\"\",\"type\":\"enlife_2ADi1Dio_Modbus\",\"address\":119,\"shortAddress\":3015,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"setup.inputMode1,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode1,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 2##bold\",\"setup.inputMode2,no.off#mode#Select mode#ui.portModes1_2#indent\",\"status.inputMode2,ui.portModes1_2#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Port 3##bold\",\"setup.ioMode3,no.off#mode#Select mode#ui.portModes3#indent\",\"status.ioMode3,ui.portModes3#{i[1][i[1].pluck('val').indexOf(i[0])].name}#Actual mode##indent\",\"status# #Controller##bold\",\"status.lux#i.luxE#{value!=''?'Illumination':''}##indent\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"portModes1_2\":[{\"name\":\"NTC 10k\",\"val\":10},{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Wiegand1_2\",\"val\":1},{\"name\":\"DI for 0..10 or 4..20\",\"val\":4}],\"portModes3\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}]},\"createDevices\":{\"port1\":{\"portMode\":\"NTC 10k\",\"dType\":\"airTempSensor_ntc\",\"name\":\"Garaaži temperatuur\",\"path\":\"/status/temperature1\"},\"port2\":{\"portMode\":\"\"},\"port3\":{\"portMode\":\"\"}},\"parentId\":528,\"acl\":{\"inherit\":[364]},\"uuid\":\"c8epbhff\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/inputMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/inputMode1\"},{\"id\":null,\"path\":\"/setup/inputMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167114180786301},{\"mode\":\"formula\",\"path\":\"/status/inputMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/inputMode2\"},{\"id\":null,\"path\":\"/setup/inputMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":167114180786302}],\"siteId\":364,\"setup\":{\"inputMode1\":10},\"serial\":\"\",\"status\":{\"online\":true,\"voltage\":12.29,\"serial\":\"842e14ffFE151375\",\"uptime\":32333319,\"bootFlagRegister\":true,\"swVersion\":\"0101\",\"address\":119,\"baudRate\":10,\"format\":1,\"inputMode1\":10,\"ioMode3\":2},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":513,\"created\":1668090537520,\"updated\":1706471045571,\"enabled\":true,\"name\":\" Värav\",\"roomId\":455,\"type\":\"access\",\"conf\":[{\"dType\":\"access_switch\",\"id\":389,\"path\":\"/status/output1\",\"target\":\"/status/locked\",\"inverted\":true,\"pollTime\":600000,\"mode\":\"output\",\"relay\":\"\"},{\"dType\":\"access_switch\",\"id\":388,\"path\":\"/status/output2\",\"target\":\"/status/output2\",\"inverted\":true,\"pollTime\":600000,\"mode\":\"output\",\"relay\":\"\"},{\"dType\":\"access_openOutdoor\",\"id\":390,\"path\":\"/status/input5\",\"target\":\"/status/open1\",\"inverted\":null,\"pollTime\":600,\"mode\":\"input\",\"relay\":\"\"},{\"dType\":\"access_openOutdoor\",\"id\":390,\"path\":\"/status/input6\",\"target\":\"/status/open2\",\"inverted\":null,\"pollTime\":600,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"access\":[\"lock\"]},\"ui\":{\"i1\":[\"status.locked#icont##lock#btn#,false=open\",\"/status/unlock/manual#{value?'🤝':''}\",\"/status/unlock/scheduled#{value?'🕛':''}\"],\"i3\":[\"status# #Pool väravat##bold\",\"status.output2#icont##lock#btn#,false=open\"],\"icon\":\"door\",\"i4\":[\"status.locked#icon##doorlog####logs#model=-123&key=access\"],\"i2\":[\"\",\"\"]},\"delRef\":388,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[369],\"acl\":345}]},\"uuid\":\"ndreukzk\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"setup\":{\"sipIp\":\"\",\"sipNumber\":\"\",\"unlockTime\":1000},\"status\":{\"online\":true,\"locked\":true,\"schedule\":{},\"offline\":{\"devices\":32},\"locked2\":true,\"warnings\":{},\"output2\":true,\"input2\":true,\"open2\":false,\"open1\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"unlockTime\":1000},{\"id\":512,\"created\":1668089444326,\"updated\":1706455158814,\"enabled\":true,\"name\":\" Garaažiuks\",\"roomId\":401,\"type\":\"access\",\"conf\":[{\"dType\":\"access_locked_relay\",\"id\":389,\"path\":\"/status/output2\",\"target\":\"/status/locked\",\"inverted\":true,\"pollTime\":600000,\"mode\":\"\",\"relay\":\"\"},{\"dType\":\"access_locked\",\"id\":392,\"path\":\"/status/input5\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":600,\"mode\":\"input\",\"relay\":\"\"}],\"usage\":{\"access\":[\"lock\"]},\"ui\":{\"i1\":[\"status.locked#icont##lock#btn#,false=open\",\"/status/unlock/manual#{value?'🤝':''}\",\"/status/unlock/scheduled#{value?'🕛':''}\"],\"i3\":[\"status# #Status##bold\",\"status.locked#{value==null?'-':value?_('Locked'):_('Unlocked')}#Lock##indent\",\"/status/unlock/manual#onoff#🤝 {_('Remain unlocked')}\",\"/status/unlock/scheduledOnce#{value?_('ON'):''}#{value?_('🕛 Activated once'):''}\",\"/status/unlock/scheduledPeriodic#{value?_('ON'):''}#{value?_('🕛 Activated by schedule'):''}\",\"setup# #{_('One time activation')}:##bold\",\"setup.onceS#editt#Unlock##indent\",\"setup.onceE#editt#Lock_command##indent\"],\"icon\":\"door\",\"i4\":[\"status.open#icon##doorlog####logs#model=-123&key=access\"]},\"delRef\":389,\"acl\":{\"inherit\":[364]},\"uuid\":\"jeoobjn2\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"setup\":{\"sipIp\":\"\",\"sipNumber\":\"\",\"unlockTime\":1000},\"unlockTime\":1000,\"status\":{\"online\":true,\"locked\":true,\"schedule\":{},\"offline\":{\"devices\":34},\"open\":false,\"closed\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":508,\"created\":1668088578701,\"updated\":1671320314926,\"enabled\":true,\"name\":\"GR4 Automaatika seadmete olek\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"id\":387,\"path\":\"/status/input5\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\"}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":387,\"acl\":{\"inherit\":[364]},\"uuid\":\"yp9gq8zn\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"warnings\":[],\"offline\":{\"devices\":4}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":507,\"created\":1668088578701,\"updated\":1671320281062,\"enabled\":true,\"name\":\"GR5 Arvutisidejaotla olek\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"path\":\"/status/input6\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\",\"id\":387}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":387,\"acl\":{\"inherit\":[364]},\"uuid\":\"6cvo184c\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"offline\":{\"devices\":10}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":506,\"created\":1668088578698,\"updated\":1671320772034,\"enabled\":true,\"name\":\"GR6 Veepuhastus seadmed\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"id\":387,\"path\":\"/status/input7\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\"}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":387,\"acl\":{\"inherit\":[364]},\"uuid\":\"timuzazk\",\"siteId\":364,\"remarks\":\".\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"offline\":{\"devices\":9}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":505,\"created\":1668088476230,\"updated\":1671323747798,\"enabled\":true,\"name\":\"LPP Liigpingepiirik\",\"roomId\":455,\"type\":\"input\",\"conf\":[{\"path\":\"/status/input5\",\"target\":\"/status/active\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\",\"relay\":\"\",\"id\":386}],\"usage\":{\"input\":[\"circuitBreakerCheck\"],\"alarm24\":[\"/status/safetyAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('OFF'):'OK'}\"],\"icon\":\"\"},\"delRef\":386,\"acl\":{\"inherit\":[364]},\"uuid\":\"siwz3b9l\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"offline\":{\"devices\":3}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":504,\"created\":1668088476230,\"updated\":1671320730081,\"enabled\":true,\"name\":\"GR1 Maasoojuspumba kompressori olek\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"path\":\"/status/input6\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\",\"id\":386}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":386,\"acl\":{\"inherit\":[364]},\"uuid\":\"uxzpapeo\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"warnings\":[],\"offline\":{\"devices\":7}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":503,\"created\":1668088476229,\"updated\":1671321687130,\"enabled\":true,\"name\":\"GR2 RESERV\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"path\":\"/status/input7\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"mode\":\"input\",\"id\":386}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":386,\"acl\":{\"inherit\":[364]},\"uuid\":\"f7ch6nd8\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"offline\":{\"devices\":6}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":502,\"created\":1668088476227,\"updated\":1673246658549,\"enabled\":true,\"name\":\"GR3 Päikesepaneelide olek - RESERV\",\"roomId\":455,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"faultDetector\",\"id\":386,\"path\":\"/status/input8\",\"target\":\"/status/active\",\"inverted\":null,\"pollTime\":1000,\"mode\":\"input\"}],\"usage\":{\"securityDetector24\":[\"fault\"],\"alarm24\":[\"/status/faultAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"\"},\"delRef\":386,\"acl\":{\"inherit\":[364]},\"uuid\":\"1q2x7uig\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false,\"offline\":{\"devices\":5}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":501,\"created\":1668087492362,\"updated\":1711297951865,\"enabled\":true,\"name\":\"Aken\",\"roomId\":408,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":397,\"path\":\"/status/input1\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":397,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"2rd0ad14\",\"remarks\":\"Z33\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":500,\"created\":1668087492362,\"updated\":1711285981547,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":410,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":397,\"path\":\"/status/input2\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":397,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"loep39y9\",\"presence\":true,\"remarks\":\"Z34\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":499,\"created\":1668087492361,\"updated\":1711285937926,\"enabled\":true,\"name\":\"Aken\",\"roomId\":410,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":397,\"path\":\"/status/input3\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":397,\"acl\":{\"inherit\":[364]},\"uuid\":\"fqhd38v1\",\"siteId\":364,\"remarks\":\"Z35\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":496,\"created\":1668087492358,\"updated\":1711297642895,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":589,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"path\":\"/status/input6\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\",\"id\":397}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":397,\"acl\":{\"inherit\":[364]},\"uuid\":\"n92gu7wq\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z38\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":495,\"created\":1668087340117,\"updated\":1711288369135,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":405,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":396,\"path\":\"/status/input1\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"bqpj4pld\",\"presence\":true,\"remarks\":\"Z25\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":494,\"created\":1668087340117,\"updated\":1711288337620,\"enabled\":true,\"name\":\"Uks (mets)\",\"roomId\":405,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"doorSensorIndoor\",\"id\":396,\"path\":\"/status/input2\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"indoor\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"door\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"z7n76tdg\",\"remarks\":\"Z26\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":493,\"created\":1668087340117,\"updated\":1711288591557,\"enabled\":true,\"name\":\"Liikumisandur (köök)\",\"roomId\":403,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":396,\"path\":\"/status/input3\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"ce7bw4yc\",\"presence\":true,\"remarks\":\"Z27\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":492,\"created\":1668087340116,\"updated\":1711286319616,\"enabled\":true,\"name\":\"Aken (köök)\",\"roomId\":403,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\",\"id\":396}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"l9f2923f\",\"remarks\":\"Z28\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":490,\"created\":1668087340115,\"updated\":1711297878517,\"enabled\":true,\"name\":\"Aken\",\"roomId\":409,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":396,\"path\":\"/status/input6\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"uuid\":\"orre8zwr\",\"siteId\":364,\"remarks\":\"Z30\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":489,\"created\":1668087340114,\"updated\":1711306136536,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":409,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":396,\"path\":\"/status/input7\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"uuid\":\"5l8luwtt\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z31\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":488,\"created\":1668087340112,\"updated\":1711297918992,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":408,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":396,\"path\":\"/status/input8\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":396,\"acl\":{\"inherit\":[364]},\"uuid\":\"54k4htw5\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z23\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":487,\"created\":1668086955051,\"updated\":1711286504807,\"enabled\":true,\"name\":\"Lükandaken (parem)\",\"roomId\":403,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":394,\"path\":\"/status/input1\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"txe6mbbo\",\"remarks\":\"Z17\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":486,\"created\":1668086955050,\"updated\":1711288563356,\"enabled\":true,\"name\":\"Uks (tänav)\",\"roomId\":405,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"\",\"id\":394,\"path\":\"/status/input2\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"perimeter\",\"door\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"door\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"ayi8f2e7\",\"presence\":true,\"remarks\":\"Z18\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":485,\"created\":1668086955050,\"updated\":1711288646845,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":404,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":394,\"path\":\"/status/input3\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"tpq7fquo\",\"presence\":true,\"remarks\":\"Z19\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":484,\"created\":1668086955050,\"updated\":1711288659432,\"enabled\":true,\"name\":\"Aken\",\"roomId\":404,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":394,\"path\":\"/status/input4\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"hhaogwus\",\"remarks\":\"Z20\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":482,\"created\":1668086955049,\"updated\":1711289279839,\"enabled\":true,\"name\":\"Aken\",\"roomId\":538,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":394,\"path\":\"/status/input6\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"uuid\":\"qwx351v7\",\"siteId\":364,\"remarks\":\"Z22\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":481,\"created\":1668086955048,\"updated\":1711288622371,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":538,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":394,\"path\":\"/status/input7\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"uuid\":\"5t9dpkwc\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z23\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":480,\"created\":1668086955046,\"updated\":1711288091859,\"enabled\":true,\"name\":\"Uks\",\"roomId\":538,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"doorSensorIndoor\",\"id\":394,\"path\":\"/status/input8\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"indoor\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"door\"},\"delRef\":394,\"acl\":{\"inherit\":[364]},\"uuid\":\"jfqqokwk\",\"siteId\":364,\"remarks\":\"Z24\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":477,\"created\":1668086802205,\"updated\":1711287019937,\"enabled\":true,\"name\":\"Liikumisandur\",\"roomId\":522,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":393,\"path\":\"/status/input3\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":393,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"jaewo7vg\",\"presence\":true,\"remarks\":\"Z11\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":476,\"created\":1668086802205,\"updated\":1706471615496,\"name\":\"z12 Peauks MK\",\"roomId\":522,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"\",\"id\":393,\"path\":\"/status/input4\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"perimeter\",\"door\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"door\"},\"delRef\":393,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"lqldfr7a\",\"presence\":true,\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"remarks\":\"\",\"tag\":\"\"},{\"id\":474,\"created\":1668086802204,\"updated\":1711287707165,\"enabled\":true,\"name\":\"Liikumisandur (elutuba)\",\"roomId\":403,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":393,\"path\":\"/status/input6\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":1000,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":393,\"acl\":{\"inherit\":[364]},\"uuid\":\"rjkv85c4\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z14\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":473,\"created\":1668086802203,\"updated\":1711286515206,\"enabled\":true,\"name\":\"Lükandaken (vasak)\",\"roomId\":403,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":393,\"path\":\"/status/input7\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":393,\"acl\":{\"inherit\":[364]},\"uuid\":\"j99flc1u\",\"siteId\":364,\"remarks\":\"Z15\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":472,\"created\":1668086802195,\"updated\":1711297729653,\"enabled\":true,\"name\":\"Aken\",\"roomId\":612,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":393,\"path\":\"/status/input8\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":393,\"acl\":{\"inherit\":[364]},\"uuid\":\"wr0c2fvv\",\"siteId\":364,\"remarks\":\"Z16\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":471,\"created\":1668086538929,\"updated\":1668086539924,\"enabled\":true,\"name\":\"z2 1k suitsuandurid\",\"roomId\":440,\"type\":\"securityDetector24\",\"conf\":[{\"id\":392,\"dType\":\"smokeDetector\",\"path\":\"/status/input2\",\"target\":\"/status/active\",\"pollTime\":1000}],\"usage\":{\"securityDetector24\":[\"fire\"],\"alarm24\":[\"/status/fireAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"smokeDetector\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"8a6e5cpr\",\"status\":{\"online\":true,\"active\":false,\"alarms\":[],\"alarmEnd\":\"1735593917266\"},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":470,\"created\":1668086538928,\"updated\":1668086539627,\"enabled\":true,\"name\":\"z3 2k suitsuandurid\",\"roomId\":440,\"type\":\"securityDetector24\",\"conf\":[{\"id\":392,\"dType\":\"smokeDetector\",\"path\":\"/status/input3\",\"target\":\"/status/active\",\"pollTime\":1000}],\"usage\":{\"securityDetector24\":[\"fire\"],\"alarm24\":[\"/status/fireAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"smokeDetector\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"rx2gh41p\",\"status\":{\"online\":true,\"active\":false,\"alarmEnd\":\"1735593917266\"},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":469,\"created\":1668086538928,\"updated\":1711286825264,\"enabled\":true,\"name\":\"Aken\",\"roomId\":611,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\",\"id\":392}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"siteId\":364,\"uuid\":\"eowfo1kk\",\"remarks\":\"Z4\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":468,\"created\":1668086538926,\"updated\":1711286853788,\"name\":\"Tõsteuks\",\"roomId\":401,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"doorSensorIndoor\",\"id\":392,\"path\":\"/status/input5\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"perimeter\",\"door\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"door\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"uuid\":\"z9lrffpq\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z5\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":467,\"created\":1668086538926,\"updated\":1711286870606,\"enabled\":true,\"name\":\"Liikumisandur (Garaaž)\",\"roomId\":401,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"motionDetector\",\"id\":392,\"path\":\"/status/input6\",\"target\":\"/status/active\",\"inverted\":true,\"pollTime\":100,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"motion\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"icon\":\"motionDetector\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"uuid\":\"11cufgy7\",\"siteId\":364,\"presence\":true,\"remarks\":\"Z6\",\"tag\":\"\",\"status\":{\"online\":true,\"active\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":466,\"created\":1668086538925,\"updated\":1711286965921,\"enabled\":true,\"name\":\"Aken (suur)\",\"roomId\":401,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":392,\"path\":\"/status/input7\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"uuid\":\"vop5lcxj\",\"siteId\":364,\"remarks\":\"Z7\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":465,\"created\":1668086538922,\"updated\":1711286983688,\"enabled\":true,\"name\":\"Aken (väike)\",\"roomId\":401,\"type\":\"securityDetector\",\"conf\":[{\"dType\":\"windowSensor\",\"id\":392,\"path\":\"/status/input8\",\"target\":\"/status/open\",\"inverted\":true,\"pollTime\":300,\"multiplier\":null,\"offset\":null,\"threshold\":null,\"mode\":\"input\"}],\"usage\":{\"securityDetector\":[\"window\"],\"alarm\":[\"burglarAlarm\"]},\"ui\":{\"i1\":[\"status.open#{value?_('Open'):_('Closed')}\"],\"icon\":\"window\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"uuid\":\"vkuzve9v\",\"siteId\":364,\"remarks\":\"Z8\",\"tag\":\"\",\"status\":{\"online\":true,\"open\":false},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":464,\"created\":1668086320502,\"updated\":1668086538954,\"enabled\":true,\"name\":\"Suitsuandur (Garaaž)\",\"roomId\":401,\"type\":\"securityDetector24\",\"conf\":[{\"dType\":\"smokeDetector\",\"path\":\"/status/input1\",\"target\":\"/status/active\",\"inverted\":null,\"pollTime\":1000,\"mode\":\"input\",\"id\":392}],\"usage\":{\"securityDetector24\":[\"fire\"],\"alarm24\":[\"/status/fireAlarm\"]},\"ui\":{\"i1\":[\"status.active#{value?_('ALARM'):'OK'}\"],\"icon\":\"smokeDetector\"},\"delRef\":392,\"acl\":{\"inherit\":[364]},\"uuid\":\"16i1mwhm\",\"siteId\":364,\"status\":{\"online\":true,\"active\":false,\"alarmEnd\":\"1735593917266\"},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"remarks\":\"Z1\",\"tag\":\"\"},{\"id\":463,\"created\":1667945951225,\"updated\":1706460335437,\"enabled\":true,\"name\":\"19 Sadeveelehtri küte\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"id\":390,\"path\":\"/status/output2\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"input\",\"relay\":\"\"}],\"ui\":{\"i1\":[\"status.target#i.rh\"],\"i3\":[\"status.output#onoff#Hetkeolek\",\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\"],\"icon\":\"heater\",\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":390,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"dfgvu8qp\",\"activationDuration\":true,\"period\":600000,\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"usage\":{\"climate\":[\"heaterElectrical\"]},\"setup\":{},\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":24}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":462,\"created\":1667945951222,\"updated\":1695403899378,\"enabled\":true,\"name\":\"20_28 PP õue 2k\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"path\":\"/status/output1\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"\",\"relay\":\"\",\"id\":390}],\"usage\":{\"output\":[\"socket\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"socket\"},\"delRef\":390,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"h7o458l9\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"block\":{},\"offline\":{\"devices\":25}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":461,\"created\":1667945790959,\"updated\":1711363612197,\"enabled\":true,\"name\":\"20_20 PP õue maja ees\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"path\":\"/status/output3\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":389}],\"usage\":{\"output\":[\"socket\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"socket\"},\"delRef\":389,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"5hqdxyor\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"23:00\",\"2s\":\"18:30\",\"2e\":\"23:00\",\"3s\":\"18:30\",\"3e\":\"23:00\",\"4s\":\"18:30\",\"4e\":\"23:00\",\"5s\":\"18:30\",\"5e\":\"00:00\",\"6s\":\"18:30\",\"6e\":\"00:00\",\"7s\":\"18:30\",\"7e\":\"23:00\"}},\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"block\":{},\"offline\":{\"devices\":33}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":460,\"created\":1667945790956,\"updated\":1695403899346,\"enabled\":true,\"name\":\"20_21 PP õue 2k\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"id\":389,\"dType\":\"socket_output\",\"path\":\"/status/output4\",\"target\":\"/status/output\",\"pollTime\":3600000}],\"usage\":{\"output\":[\"socket\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"socket\"},\"delRef\":389,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"sh7y5hq3\",\"siteId\":364,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"block\":{},\"offline\":{\"devices\":32}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":458,\"created\":1667945390203,\"updated\":1706479311676,\"enabled\":true,\"name\":\" Valgus gar_ lül\",\"roomId\":401,\"type\":\"switch\",\"conf\":[{\"dType\":\"light_switch\",\"id\":388,\"path\":\"/status/input6\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"usage\":{\"switch\":[\"generic\"]},\"ui\":{\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"delRef\":388,\"acl\":{\"inherit\":[364]},\"uuid\":\"l1774f4m\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"category\":\"\",\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":30}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":457,\"created\":1667945390202,\"updated\":1706479326602,\"enabled\":true,\"name\":\"Lüliti vasak (Koridor)\",\"roomId\":402,\"type\":\"switch\",\"conf\":[{\"dType\":\"switch\",\"id\":388,\"path\":\"/status/input7\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"usage\":{\"switch\":[\"generic\"]},\"ui\":{\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"delRef\":388,\"acl\":{\"inherit\":[364]},\"uuid\":\"daq62s46\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"category\":\"\",\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":29}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":456,\"created\":1667945390200,\"updated\":1706479339356,\"enabled\":true,\"name\":\"Lüliti parem (Koridor)\",\"roomId\":402,\"type\":\"switch\",\"conf\":[{\"dType\":\"switch\",\"id\":388,\"path\":\"/status/input8\",\"target\":\"/status/input\",\"inverted\":true,\"pollTime\":200,\"mode\":\"input\"}],\"usage\":{\"switch\":[\"generic\"]},\"ui\":{\"i1\":[\"status.input#{value?_('OFF'):_('ON')}#Switch\"]},\"delRef\":388,\"acl\":{\"inherit\":[364]},\"uuid\":\"nkm4g9fy\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"category\":\"\",\"status\":{\"online\":true,\"input\":true,\"offline\":{\"devices\":28}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":454,\"created\":1667944763669,\"updated\":1695403031254,\"enabled\":true,\"name\":\"17_1 2k koridori valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":387,\"path\":\"/status/output1\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":387,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"4qeldf8r\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":20}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"switch\":[{\"id\":630,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}]},{\"id\":453,\"created\":1667944763669,\"updated\":1707762043424,\"enabled\":true,\"name\":\"2 korrus valgus ÜLD\",\"roomId\":608,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/output2\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":387}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":387,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"4qn3uin8\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"schedule\":{},\"offline\":{\"devices\":19}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":452,\"created\":1667944763668,\"updated\":1695403899259,\"enabled\":true,\"name\":\"20 Tulekahju vabasti\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"path\":\"/status/output3\",\"target\":\"/setup/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"input\",\"relay\":\"\",\"id\":387}],\"usage\":{\"output\":[\"shuntTripControl\"]},\"ui\":{\"i1\":[\"setup.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"\"},\"delRef\":387,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"b7mhirog\",\"setup\":{\"output\":false},\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":18}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":451,\"created\":1667944763665,\"updated\":1698358381418,\"enabled\":true,\"name\":\"8 Tarbevee ringluspump\",\"roomId\":455,\"type\":\"output\",\"conf\":[{\"id\":387,\"path\":\"/status/output4\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"\",\"relay\":\"\"}],\"usage\":{\"output\":[\"recirculationPump\",\"leave\",\"movement\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - Turn on##indent\",\"setup.schedule.1e#editt# - Turn off##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - Turn on##indent\",\"setup.schedule.2e#editt# - Turn off##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - Turn on##indent\",\"setup.schedule.3e#editt# - Turn off##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - Turn on##indent\",\"setup.schedule.4e#editt# - Turn off##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - Turn on##indent\",\"setup.schedule.5e#editt# - Turn off##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - Turn on##indent\",\"setup.schedule.6e#editt# - Turn off##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - Turn on##indent\",\"setup.schedule.7e#editt# - Turn off##indent\"],\"icon\":\"valve\",\"i2\":[]},\"delRef\":387,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"gbwkvdyd\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"06:00\",\"1e\":\"01:00\",\"2s\":\"06:00\",\"2e\":\"01:00\",\"3s\":\"06:00\",\"3e\":\"01:00\",\"4s\":\"06:00\",\"4e\":\"01:00\",\"5s\":\"06:00\",\"5e\":\"03:00\",\"6s\":\"08:00\",\"6e\":\"03:00\",\"7s\":\"08:00\",\"7e\":\"01:00\"}},\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"block\":{},\"schedule\":{},\"offline\":{\"devices\":17},\"scheduleLastReason\":\"scheduled\"},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":450,\"created\":1667944549074,\"updated\":1711302238463,\"enabled\":true,\"name\":\"17 Trepi valgus\",\"roomId\":399,\"type\":\"output\",\"conf\":[{\"id\":386,\"path\":\"/status/output4\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":386,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"8ud194so\",\"siteId\":364,\"remarks\":\"2. korrus\",\"tag\":\"\",\"category\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":12}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"switch\":[{\"id\":630,\"path\":\"/status/input\",\"event\":\"doubleClick\",\"mode\":\"toggle\"}]},{\"id\":449,\"created\":1667943714597,\"updated\":1695403031235,\"enabled\":true,\"name\":\"16_3 Reserv valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":386,\"path\":\"/status/output3\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"outdoor\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":386,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"92j7bmd8\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":13}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":446,\"created\":1667943482677,\"updated\":1695403899402,\"enabled\":true,\"name\":\"Tünn\",\"type\":\"output\",\"conf\":[{\"path\":\"/status/output2\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":386}],\"usage\":{\"light\":[\"outdoor\"],\"indication\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"setup.nordPoolDeviceId,setup.np.enabled,status.block.nordPool,status.force.nordPool,status.today.countInRow#{i[0]&&i[1]&&!i[2]&&!i[3]&&i[4]!=-1?'⚡Nord Pool':''}\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\",\"setup# #Nord Pool##bold\",\"setup.np.enabled#onoff#Follows Nord Pool price##indent\",\"status.today.current,status.today.max#{i[0]*0.1*1.2;#0,1;-}{_('¢')} ({i[0]/i[1]*100;#1}%)#Current price##indent\",\"status.today.max#{i[0]*0.1*1.2;#0,1;-} {_('¢')}#Today’s maximum price##indent\",\"status.today.min#{i[0]*0.1*1.2;#0,1;-} {_('¢')}#Today’s minimum price##indent\",\"setup.np.limitMode,no.off#mode#Limiting method#ui.limitModes#bold\",\"setup.np.limitValue,setup.np.limitMode#editn#{i[1]=='percOfMax'?_('Limit above X% of MAX price'):i[1]=='expHours'?_('Limit on X most expensive hours'):_('Limit method not defined!')}##indent\",\"setup.np.limitHoursInRow#editn#Maximum limited hours in a row##indent\",\"setup.np.limitHoursInRow#{!i[0]?'':' '}#{!i[0]?'':' (' + _('Normal operation will be restored after') + ' ' + i[0] + ' '+ _('h') + ')'}##italic\",\"setup.np.limitAbsNotLower#editn#Don’t limit when price is lower than X¢##indent\",\"setup.np.limitValue,status.today.max,setup.np.limitMode,setup.np.limitAbsNotLower,status.today.hours24Desc#{!i[0]||!i[2]?'':' '}#{!i[0]||!i[2] ? '' : i[2]=='percOfMax' ? ' -> ' + _('Limited above') + ' ' + i[0] + _('% of max price') + ' (' + (i[1]*i[0]/100*0.1*1.2).step(1) + _('¢') + ')': i[2]=='expHours' ? ' -> ' + _('Limited on') + ' ' + i[0] + ' ' + _('most expensive hours, today above') + ' ' + (i[4][i[0]-1]*0.1*1.2).step(1) + _('¢') : ''}{!i[0]||!i[2]||!i[3] ? '' : ', ' + _('but not below') + ' ' + i[3] + _('¢')}##italic\",\"setup.np.limitValue,setup.np.limitMode#{(i[0]||i[1])&&(!i[0]||!i[1])?' ':''}#{(i[0]||i[1])&&(!i[0]||!i[1])?' -> ' + _('Not applied, some parameters missing') + '!':''}##italic\",\"setup.np# #Force activate on low price:##bold\",\"setup.np.forcedOnPercentOfMin#editn#{'- '+_('up to X% above today’s MIN price')}##indent\",\"setup.np# # {_('and')} / {_('or')}##indent\",\"setup.np.forcedOnUnderAbsValue#editn#{'- '+_('below X¢ price')}##indent\",\"setup.np.forcedOnPercentOfMin,setup.np.forcedOnUnderAbsValue,status.today.min#{!i[0]&&!i[1]?'':' '}#{!i[0]&&!i[1] ? '' : ' -> ' + _('Forced activated below') + ' ' + (!i[0] ? i[1] : !i[1] ? (i[2]*(i[0]/100+1)*0.1*1.2).step(1) : ((i[2]*((i[0]>i[1]?i[0]:i[1])/100+1)*0.1*1.2)>i[1]?(i[2]*((i[0]>i[1]?i[0]:i[1])/100+1)*0.1*1.2):i[1])) + _('¢')}##italic\",\"setup.np.forcedOnPercentOfMin,setup.np.forcedOnUnderAbsValue,status.today.min#{!i[0]&&!i[1] ?' ':''}#{!i[0]&&!i[1] ? ' -> ' + _('Not applied, some parameters missing') + '!':''}##italic\"],\"icon\":\"waterDetector\",\"i2\":[\"status.block.nordPool,status.today.countInRow,setup.np.limitHoursInRow#{i[0]?' ':''}#{i[0]?'🚫 '+_('Limited by Nord Pool high price')+(i[2]?'. '+_('Limited in a row')+': '+i[1]+_('h')+' ('+_('maximum')+': '+i[2]+_('h')+')':''):''}\",\"status.today.countInRow,setup.np.limitHoursInRow#{i[0]==-1?' ':''}#{i[0]==-1?'❕ '+_('Nord pool price is still high, but ’Maximum limited hours in a row’ reached')+' ('+i[1]+_('h')+')':''}\",\"status.force.nordPool#{value?' ':''}#{value?'❗ '+_('Forced activated on Nord Pool low price'):''}\"],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}],\"limitModes\":[{\"name\":\"OFF\",\"val\":0},{\"name\":\"% of max price\",\"val\":\"percOfMax\"},{\"name\":\"expensive hours\",\"val\":\"expHours\"}]},\"delRef\":386,\"roomId\":538,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"7uwvpaye\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"setup\":{\"nordPoolDeviceId\":379,\"np\":{\"enabled\":true,\"limitMode\":\"expHours\",\"limitValue\":14,\"limitAbsNotLower\":5}},\"switch\":[{\"id\":594,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"},{\"id\":533,\"path\":\"/status/input\",\"event\":\"doubleClick\",\"mode\":\"toggle\"}],\"status\":{\"warnings\":{\"blocked\":\"{_('Blocked')}: {_('nordPool')}\"},\"online\":true,\"output\":false,\"schedule\":{},\"today\":{\"hours24Desc\":[225,166.84,152.45,146.99,146.74,108.25,94.79,87.49,85.05,81.49,80.18,70.75,22.01,16.94,5.3,5.1,5.1,3.09,2.09,0.97,-0.04,-0.04,-0.3,-0.36],\"current\":94.79,\"max\":225,\"min\":-0.36,\"countInRow\":2},\"stateBeforeBlock\":true,\"block\":{\"nordPool\":true},\"force\":{},\"scheduleLastReason\":\"blocked\",\"offline\":{\"devices\":14},\"blocked\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":445,\"created\":1667943287160,\"updated\":1695403031215,\"enabled\":true,\"name\":\"16_1 Hoov valgus \",\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"path\":\"/status/output1\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":386}],\"usage\":{\"light\":[\"outdoor\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\"},\"delRef\":386,\"roomId\":399,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"meyagsu7\",\"siteId\":364,\"remarks\":\"Maja taga terrassi all\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{},\"offline\":{\"devices\":15},\"block\":{},\"force\":{},\"limit\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"23:00\",\"2s\":\"18:30\",\"2e\":\"23:00\",\"3s\":\"18:30\",\"3e\":\"23:00\",\"4s\":\"18:30\",\"4e\":\"23:00\",\"5s\":\"18:30\",\"5e\":\"00:00\",\"6s\":\"18:30\",\"6e\":\"00:00\",\"7s\":\"18:30\",\"7e\":\"23:00\"}}},{\"id\":434,\"created\":1667909603506,\"updated\":1706474665427,\"enabled\":true,\"name\":\"13 WC, Tehno valgus ÜLD\",\"roomId\":608,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io7\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"8od1l7vc\",\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":433,\"created\":1667909603506,\"updated\":1700254357207,\"enabled\":true,\"name\":\"13_1 Esik valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io8\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"8dfhejpx\",\"remarks\":\"\",\"tag\":\"\",\"switch\":[{\"id\":457,\"path\":\"/status/input\",\"event\":\"doubleClick\",\"mode\":\"toggle\"}],\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":432,\"created\":1667909603505,\"updated\":1695403031032,\"enabled\":true,\"name\":\"13_2 Garaaži valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"id\":383,\"path\":\"/status/io9\",\"target\":\"/status/output\",\"multiplier\":null,\"offset\":null,\"threshold\":null,\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"np5sznyv\",\"remarks\":\"\",\"tag\":\"\",\"category\":\"\",\"switch\":[{\"id\":458,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}],\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":431,\"created\":1667909603505,\"updated\":1711363604195,\"enabled\":true,\"name\":\"13_3 Trepiastmete valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io10\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"fpx3vayr\",\"remarks\":\"\",\"tag\":\"\",\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"00:00\",\"2s\":\"18:30\",\"2e\":\"00:00\",\"3s\":\"18:30\",\"3e\":\"00:00\",\"4s\":\"17:30\",\"4e\":\"00:00\",\"5s\":\"18:30\",\"5e\":\"00:00\",\"6s\":\"18:30\",\"6e\":\"02:00\",\"7s\":\"18:30\",\"7e\":\"23:30\"}},\"activationWeekSchedule\":true,\"activationDuration\":true,\"activationOnceSchedule\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"switch\":[{\"id\":630,\"path\":\"/status/input\",\"event\":\"longPush\",\"mode\":\"toggle\"},{\"id\":628,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}]},{\"id\":430,\"created\":1667909603504,\"updated\":1700254369384,\"enabled\":true,\"name\":\"13_4 Garderoob valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io11\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"u32mwsf9\",\"remarks\":\"\",\"tag\":\"\",\"switch\":[{\"id\":457,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}],\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":429,\"created\":1667909603504,\"updated\":1700254449931,\"enabled\":true,\"name\":\"13_5 Elutuba pikk rida valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io12\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"oaht9vyn\",\"remarks\":\"\",\"tag\":\"\",\"switch\":[{\"id\":598,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}],\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":428,\"created\":1667909603503,\"updated\":1706474675662,\"enabled\":true,\"name\":\"14 Elutuba, köök valgus ÜLD\",\"roomId\":608,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io13\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[376,377],\"acl\":361}],\"who\":[376,377],\"acl\":361},\"uuid\":\"hsmptj6x\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":427,\"created\":1667909603503,\"updated\":1695403031162,\"enabled\":true,\"name\":\"14_1 Köök mööblivalgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/io14\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":383}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"nyydxbpz\",\"siteId\":364,\"tag\":\"\",\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":426,\"created\":1667909603502,\"updated\":1706474692018,\"enabled\":true,\"name\":\"15 Kontor, saun valgus ÜLD\",\"roomId\":608,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"id\":383,\"path\":\"/status/io15\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"indoorIndividual\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"a80khnhm\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"test\",\"status\":{\"warnings\":{},\"online\":true,\"output\":true,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":422,\"created\":1667908997702,\"updated\":1711363550571,\"enabled\":true,\"name\":\"11 astmed ja terrass küljel\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":383,\"path\":\"/status/io1\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"\"],\"climateSensor\":[\"airTemperature\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"agkeljsu\",\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"06:30\",\"2s\":\"18:30\",\"2e\":\"06:30\",\"3s\":\"18:30\",\"3e\":\"06:30\",\"4s\":\"18:30\",\"4e\":\"06:30\",\"5s\":\"18:30\",\"5e\":\"06:30\",\"6s\":\"18:30\",\"6e\":\"06:30\",\"7s\":\"18:30\",\"7e\":\"06:30\"}},\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":421,\"created\":1667908997701,\"updated\":1711363559281,\"name\":\"11_1 Fassadi valgus - Garaaž\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":383,\"path\":\"/status/io2\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"siteId\":364,\"uuid\":\"c0ahlvf8\",\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"00:00\",\"2s\":\"18:30\",\"2e\":\"00:00\",\"3s\":\"18:30\",\"3e\":\"00:00\",\"4s\":\"18:30\",\"4e\":\"00:00\",\"5s\":\"18:30\",\"5e\":\"00:00\",\"6s\":\"18:30\",\"6e\":\"02:00\",\"7s\":\"18:30\",\"7e\":\"00:00\"}},\"activationOnceSchedule\":true,\"activationDuration\":true,\"enabled\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"switch\":[{\"id\":625,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}]},{\"id\":420,\"created\":1667908997701,\"updated\":1711363567807,\"enabled\":true,\"name\":\"11_2 Fassadi valgus - Põhiosa\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":383,\"path\":\"/status/io3\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"switch\":null}],\"usage\":{\"light\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"2fqorjup\",\"siteId\":364,\"tag\":\"\",\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"7s\":\"18:30\",\"1e\":\"23:00\",\"2s\":\"18:30\",\"3s\":\"18:30\",\"4s\":\"18:30\",\"5s\":\"18:30\",\"6s\":\"18:30\",\"2e\":\"23:00\",\"3e\":\"23:00\",\"4e\":\"23:00\",\"5e\":\"00:00\",\"6e\":\"02:00\",\"7e\":\"23:09\"}},\"activationWeekSchedule\":true,\"switch\":[{\"id\":533,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"},{\"id\":567,\"path\":\"/status/input\",\"event\":\"singleClick\",\"mode\":\"toggle\"}],\"remarks\":\"\",\"activationDuration\":true,\"activationOnceSchedule\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":419,\"created\":1667908997700,\"updated\":1711363577486,\"enabled\":true,\"name\":\"12 Fassadi valgus - Väliköök\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":383,\"path\":\"/status/io4\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"9x7u6efk\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"23:00\",\"2s\":\"18:30\",\"2e\":\"23:00\",\"3s\":\"18:30\",\"3e\":\"23:00\",\"4s\":\"18:30\",\"4e\":\"23:00\",\"5s\":\"18:30\",\"5e\":\"00:00\",\"6s\":\"18:30\",\"6e\":\"00:00\",\"7s\":\"18:30\",\"7e\":\"23:00\"}},\"activationDuration\":true,\"activationOnceSchedule\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":418,\"created\":1667908997700,\"updated\":1711363590419,\"name\":\"12_1 Terrass maja taga\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_outdoor_output\",\"id\":383,\"path\":\"/status/io5\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\"}],\"usage\":{\"light\":[\"\"]},\"ui\":{\"i1\":[\"status.output#onoff\",\"status.scheduleLastReason#{i[0]=='timed'?'🤝':i[0]=='scheduled'?'🕛':''}\"],\"i3\":[\"status.activationHours# #{_('Duration activation')}:##bold\",\"status.activationHours#mode#Duration#ui.activationHours#indent\",\"status.deActivationTime#{value?value.date('hh:mm:ss'):''}#{value?'Deactivation time':''}##indent\",\"status.once# #{_('One time activation')}:##bold\",\"status.onceS#editt#Turn on##indent\",\"status.onceE#editt#Turn off##indent\",\"setup.schedule# #{_('Scheduled activation')}:##bold\",\"setup.schedule.1#onoff#Monday##indent\",\"setup.schedule.1s#editt# - {_('Turn on')}##indent\",\"setup.schedule.1e#editt# - {_('Turn off')}##indent\",\"setup.schedule.2#onoff#Tuesday##indent\",\"setup.schedule.2s#editt# - {_('Turn on')}##indent\",\"setup.schedule.2e#editt# - {_('Turn off')}##indent\",\"setup.schedule.3#onoff#Wednesday##indent\",\"setup.schedule.3s#editt# - {_('Turn on')}##indent\",\"setup.schedule.3e#editt# - {_('Turn off')}##indent\",\"setup.schedule.4#onoff#Thursday##indent\",\"setup.schedule.4s#editt# - {_('Turn on')}##indent\",\"setup.schedule.4e#editt# - {_('Turn off')}##indent\",\"setup.schedule.5#onoff#Friday##indent\",\"setup.schedule.5s#editt# - {_('Turn on')}##indent\",\"setup.schedule.5e#editt# - {_('Turn off')}##indent\",\"setup.schedule.6#onoff#Saturday##indent\",\"setup.schedule.6s#editt# - {_('Turn on')}##indent\",\"setup.schedule.6e#editt# - {_('Turn off')}##indent\",\"setup.schedule.7#onoff#Sunday##indent\",\"setup.schedule.7s#editt# - {_('Turn on')}##indent\",\"setup.schedule.7e#editt# - {_('Turn off')}##indent\"],\"icon\":\"light\",\"i2\":[],\"activationHours\":[{\"name\":\"ON\",\"val\":0},{\"name\":\"5 min\",\"val\":0.08333},{\"name\":\"15 min\",\"val\":0.25},{\"name\":\"30 min\",\"val\":0.5},{\"name\":\"1 h\",\"val\":1},{\"name\":\"2 h\",\"val\":2},{\"name\":\"3 h\",\"val\":3},{\"name\":\"4 h\",\"val\":4},{\"name\":\"6 h\",\"val\":6},{\"name\":\"8 h\",\"val\":8},{\"name\":\"12 h\",\"val\":12},{\"name\":\"24 h\",\"val\":24}]},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"1sp0eoxo\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"activationWeekSchedule\":true,\"setup\":{\"schedule\":{\"1\":true,\"2\":true,\"3\":true,\"4\":true,\"5\":true,\"6\":true,\"7\":true,\"1s\":\"18:30\",\"1e\":\"23:00\",\"2s\":\"18:30\",\"2e\":\"23:00\",\"3s\":\"18:30\",\"3e\":\"23:00\",\"4s\":\"18:30\",\"5s\":\"18:30\",\"4e\":\"23:00\",\"5e\":\"23:00\",\"6s\":\"18:30\",\"6e\":\"00:00\",\"7s\":\"18:30\",\"7e\":\"23:00\"}},\"activationDuration\":true,\"activationOnceSchedule\":true,\"enabled\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":417,\"created\":1667908997697,\"updated\":1703096327988,\"name\":\"12_2 Fassadi valgus\",\"roomId\":399,\"type\":\"light\",\"conf\":[{\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/io6\",\"target\":\"/status/output\",\"inverted\":null,\"pollTime\":3600000,\"mode\":\"output\",\"relay\":\"\",\"id\":383}],\"usage\":{\"light\":[\"outdoor\"]},\"ui\":{\"i1\":[\"status.output#onoff\"],\"i3\":[\"status.output#{value?_('ON'):_('OFF')}#Output\"],\"icon\":\"light\"},\"delRef\":383,\"acl\":{\"inherit\":[364],\"who\":[376,377],\"acl\":361,\"policy\":[{\"who\":[376,377],\"acl\":361}]},\"uuid\":\"97mrojh8\",\"siteId\":364,\"remarks\":\"\",\"tag\":\"\",\"enabled\":true,\"status\":{\"warnings\":{},\"online\":true,\"output\":false,\"schedule\":{}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":398,\"created\":1667898954989,\"updated\":1710103067341,\"enabled\":true,\"name\":\"4Dio_12\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":112,\"shortAddress\":2341,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"ek6a6y4a\",\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"\"},\"io3\":{\"portMode\":\"\"},\"io4\":{\"portMode\":\"\"},\"i5\":{\"portMode\":\"\"},\"i6\":{\"portMode\":\"\"},\"i7\":{\"portMode\":\"\"},\"i8\":{\"portMode\":\"\"}},\"setup\":{},\"serial\":\"\",\"status\":{\"voltage\":12.4,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":33209287,\"securityBootFlagRegister\":true,\"serial\":\"5cc102ef244F4003\",\"address\":112,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":397,\"created\":1667898917554,\"updated\":1706463012500,\"enabled\":true,\"name\":\"4Dio_11\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":111,\"shortAddress\":2342,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"wfy85pv4\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789891755401},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789891755402},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789891755403},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789891755404}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input1\",\"name\":\"z33 Mag_12,09 aken\",\"roomId\":440},\"io2\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input2\",\"name\":\"z34 Mag_20,34 Liikumine\",\"roomId\":440},\"io3\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input3\",\"name\":\"z35 Mag_20,34 aken\",\"roomId\":440},\"io4\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"name\":\"z36 Garderoob aken\",\"roomId\":440},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input5\",\"name\":\"z37 Vannituba aken\",\"roomId\":440},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input6\",\"name\":\"z38 2k trepp liikumine\",\"roomId\":440},\"i7\":{\"portMode\":\"\"},\"i8\":{\"portMode\":\"\"}},\"setup\":{\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0},\"status\":{\"voltage\":12.29,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":33103535,\"securityBootFlagRegister\":true,\"serial\":\"5cc0ff2b24C9F804\",\"address\":111,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":396,\"created\":1667898876135,\"updated\":1706463039763,\"enabled\":true,\"name\":\"4Dio_10\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":110,\"shortAddress\":2395,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"h9ywo4vy\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789887613501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789887613502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789887613503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789887613504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input1\",\"name\":\"z25 Hall liikumine\",\"roomId\":440},\"io2\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorIndoor\",\"path\":\"/status/input2\",\"name\":\"z26 Hall uks\",\"roomId\":440},\"io3\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input3\",\"name\":\"z27 Köök liikumine\",\"roomId\":440},\"io4\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"name\":\"z28 Köök aken\",\"roomId\":440},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input5\",\"name\":\"z29 2k koridori aken\",\"roomId\":440},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input6\",\"name\":\"z30 Mag_12,19 aken\",\"roomId\":440},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input7\",\"name\":\"z31 Mag_12,19 Liikumine\",\"roomId\":440},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input8\",\"name\":\"z32 Mag_12,09 Liikumine\",\"roomId\":440}},\"setup\":{\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0},\"status\":{\"voltage\":12.33,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":33177524,\"securityBootFlagRegister\":true,\"serial\":\"5cc102e524C9F804\",\"address\":110,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":4},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":395,\"created\":1667898772901,\"updated\":1711407956644,\"enabled\":true,\"name\":\"Modbus 1-4 Turvaseadmed\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"modbusDriver\",\"baudRate\":\"115200\",\"dev\":\"/dev/enlife1-4\",\"format\":\"8E1\",\"pollingDelay\":\"5\",\"follow\":\"\",\"ui\":{\"icon\":\"controller\",\"i1\":[\"dev,setup.address,setup.port#{i[0]=='/dev/enlifeMiniModbus'?'internal':i[0]=='/dev/enlife0'?'onboard':i[1]?('a:'+i[1]+(i[2]?'-p:'+i[2]:'')):i[0].replace('/dev/','')}\",\"baudRate#i.valE\",\"format#i.valE\",\"pollingDelay#i.ms\"],\"i3\":[\"id# #Setup##bold\",\"dev,no.off#mode#Port#ui.devs#indent\",\"baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"format,no.off#mode#Format#ui.formats#indent\",\"pollingDelay,no.off#mode#Polling delay#ui.pollingDelays#indent\",\"setup.scanDevice#editn#Scan device ID##indent\",\"setup.setAddress#button#Set addresses#true##white,true=green#Confirm setting addresses to ALL devices on THIS Modbus line\",\"nodeId#editn#Node ID##indent\",\"enabled#onoff#Enabled\"],\"baudRates\":[\"300\",\"600\",\"1200\",\"2400\",\"4800\",\"9600\",\"19200\",\"38400\",\"57600\",\"115200\"],\"pollingDelays\":[5,10,25,50,100,250,500,1000],\"formats\":[\"8E1\",\"8n1\",\"8n2\",\"8O1\"],\"devs\":[\"\",\"/dev/enlife0\",\"/dev/enlife1-1\",\"/dev/enlife1-2\",\"/dev/enlife1-3\",\"/dev/enlife1-4\",\"/dev/enlife2-1\",\"/dev/enlife2-2\",\"/dev/enlife2-3\",\"/dev/enlife2-4\",\"/dev/enlife3-1\",\"/dev/enlife3-2\",\"/dev/enlife3-3\",\"/dev/enlife3-4\",\"/dev/enlife4-1\",\"/dev/enlife4-2\",\"/dev/enlife4-3\",\"/dev/enlife4-4\",\"/dev/enlife5-1\",\"/dev/enlife5-2\",\"/dev/enlife5-3\",\"/dev/enlife5-4\",\"/dev/enlife6-1\",\"/dev/enlife6-2\",\"/dev/enlife6-3\",\"/dev/enlife6-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife8-1\",\"/dev/enlife8-2\",\"/dev/enlife8-3\",\"/dev/enlife8-4\",\"/dev/enlife9-1\",\"/dev/enlife9-2\",\"/dev/enlife9-3\",\"/dev/enlife9-4\",\"/dev/enlife10-1\",\"/dev/enlife10-2\",\"/dev/enlife10-3\",\"/dev/enlife10-4\",\"/dev/enlife11-1\",\"/dev/enlife11-2\",\"/dev/enlife11-3\",\"/dev/enlife11-4\",\"/dev/enlife12-1\",\"/dev/enlife12-2\",\"/dev/enlife12-3\",\"/dev/enlife12-4\",\"/dev/enlife13-1\",\"/dev/enlife13-2\",\"/dev/enlife13-3\",\"/dev/enlife13-4\",\"/dev/enlife14-1\",\"/dev/enlife14-2\",\"/dev/enlife14-3\",\"/dev/enlife14-4\",\"/dev/enlife15-1\",\"/dev/enlife15-2\",\"/dev/enlife15-3\",\"/dev/enlife15-4\",\"/dev/enlife16-1\",\"/dev/enlife16-2\",\"/dev/enlife16-3\",\"/dev/enlife16-4\",\"/dev/enlife17-1\",\"/dev/enlife17-2\",\"/dev/enlife17-3\",\"/dev/enlife17-4\",\"/dev/enlife18-1\",\"/dev/enlife18-2\",\"/dev/enlife18-3\",\"/dev/enlife18-4\",\"/dev/enlife19-1\",\"/dev/enlife19-2\",\"/dev/enlife19-3\",\"/dev/enlife19-4\",\"/dev/enlifeMiniModbus\",\"/dev/ttyO1\",\"/dev/ttyO2\",\"/dev/ttyO3\",\"/dev/ttyO4\",\"/dev/ttyO5\",\"/dev/ttyO6\",\"/dev/ttyO7\",\"/dev/ttyO8\",\"/dev/ttyO9\",\"/dev/tty1O\",\"/dev/tty11\",\"/dev/tty12\"]},\"acl\":{\"inherit\":[364]},\"setup\":{},\"uuid\":\"7fg62j5d\",\"siteId\":364,\"nodeId\":2,\"status\":{\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":394,\"created\":1667898677896,\"updated\":1706463036660,\"enabled\":true,\"name\":\"4Dio_9\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":109,\"shortAddress\":2394,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"jidya5h9\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789867789601},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789867789602},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789867789603},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789867789604}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input1\",\"name\":\"z17 Elutuba lükandaken 2\",\"roomId\":440},\"io2\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorPerimeter\",\"path\":\"/status/input2\",\"name\":\"z18 Terrassi_hall uks\",\"roomId\":440},\"io3\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input3\",\"name\":\"z19 Kabinet liikumine\",\"roomId\":440},\"io4\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"name\":\"z20 Kabinet aken\",\"roomId\":440},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input5\",\"name\":\"z21 Sauna aken\",\"roomId\":440},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input6\",\"name\":\"z22 Puhkeruumi aken\",\"roomId\":440},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input7\",\"name\":\"z23 Puhkeruumi liikumine\",\"roomId\":440},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorIndoor\",\"path\":\"/status/input8\",\"name\":\"z24 Puhkeruumi uks\",\"roomId\":440}},\"setup\":{\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0},\"status\":{\"voltage\":12.19,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":33354089,\"securityBootFlagRegister\":true,\"serial\":\"5cc0ff2b24B7A302\",\"address\":109,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":393,\"created\":1667898606295,\"updated\":1706462985774,\"enabled\":true,\"name\":\"4Dio_8\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":108,\"shortAddress\":2393,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"6whatd6p\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789860629501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789860629502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789860629503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789860629504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorPerimeter\",\"path\":\"/status/input1\",\"name\":\"z9 Tehno uks\",\"roomId\":440},\"io2\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorPerimeter\",\"path\":\"/status/input2\",\"name\":\"z10 Tambur_gar uks\",\"roomId\":440},\"io3\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input3\",\"name\":\"z11 Tambur liikumine\",\"roomId\":440},\"io4\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorPerimeter\",\"path\":\"/status/input4\",\"name\":\"z12 Peauks MK\",\"roomId\":440},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorIndoor\",\"path\":\"/status/input5\",\"name\":\"z13 Tambur_esik uks\",\"roomId\":440},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input6\",\"name\":\"z14 Elutuba liikumine\",\"roomId\":440},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input7\",\"name\":\"z15 Elutuba lükandaken 1\",\"roomId\":440},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input8\",\"name\":\"z16 1k WC aken\",\"roomId\":440}},\"setup\":{\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0},\"status\":{\"voltage\":12.11,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":32774742,\"securityBootFlagRegister\":true,\"serial\":\"5cc1034a244F4003\",\"address\":108,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":392,\"created\":1667898575775,\"updated\":1706462975185,\"enabled\":true,\"name\":\"4Dio_7\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":395,\"address\":107,\"shortAddress\":2347,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"5os4bq2j\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789857577501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789857577502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789857577503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789857577504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital input\",\"dType\":\"smokeDetector\",\"path\":\"/status/input1\",\"name\":\"z1 Garaaž suitsuandur\",\"roomId\":440},\"io2\":{\"portMode\":\"Digital input\",\"dType\":\"smokeDetector\",\"path\":\"/status/input2\",\"name\":\"z2 1k suitsuandurid\",\"roomId\":440},\"io3\":{\"portMode\":\"Digital input\",\"dType\":\"smokeDetector\",\"path\":\"/status/input3\",\"name\":\"z3 2k suitsuandurid\",\"roomId\":440},\"io4\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input4\",\"name\":\"z4 Tehno aken\",\"roomId\":440},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"doorSensorPerimeter\",\"path\":\"/status/input5\",\"name\":\"z5 Gar_Tõsteuks MK\",\"roomId\":440},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"motionDetector\",\"path\":\"/status/input6\",\"name\":\"z6 Gar_liikumine\",\"roomId\":440},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input7\",\"name\":\"z7 Gar_aken\",\"roomId\":440},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"windowSensor\",\"path\":\"/status/input8\",\"name\":\"z8 Gar_tehno korid aken\",\"roomId\":440}},\"setup\":{\"ioMode1\":0,\"ioMode2\":0,\"ioMode3\":0,\"ioMode4\":0},\"status\":{\"voltage\":12.26,\"loadMax\":0.67,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":32881545,\"securityBootFlagRegister\":true,\"serial\":\"5cc0ff3f24C9F804\",\"address\":107,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":391,\"created\":1667898546699,\"updated\":1700476055363,\"enabled\":true,\"name\":\"4Dio_6_reserv\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":106,\"shortAddress\":2373,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"4oanukzh\",\"follow\":[{\"id\":166789854669901,\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"items\":[{\"path\":\"/status/ioMode1\"},{\"path\":\"/setup/ioMode1\"},{\"path\":\"/status/online\"}]},{\"id\":166789854669902,\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"items\":[{\"path\":\"/status/ioMode2\"},{\"path\":\"/setup/ioMode2\"},{\"path\":\"/status/online\"}]},{\"id\":166789854669903,\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"items\":[{\"path\":\"/status/ioMode3\"},{\"path\":\"/setup/ioMode3\"},{\"path\":\"/status/online\"}]},{\"id\":166789854669904,\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"items\":[{\"path\":\"/status/ioMode4\"},{\"path\":\"/setup/ioMode4\"},{\"path\":\"/status/online\"}]}],\"siteId\":364,\"status\":{\"online\":true,\"voltage\":23.86,\"loadMax\":0.66,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2228326,\"securityBootFlagRegister\":true,\"serial\":\"5ccc6352247F0908\",\"address\":106,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":390,\"created\":1667898516575,\"updated\":1711891758362,\"enabled\":true,\"name\":\"4Dio_5 2336\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":105,\"shortAddress\":2336,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"8c7rxwgd\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789851657501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789851657502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789851657503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789851657504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"\"},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"heater\",\"path\":\"/status/output2\",\"name\":\"19 Sadeveelehtri küte\",\"roomId\":455},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"socket_output\",\"path\":\"/status/output3\",\"name\":\"20_28 PP õue 2k\",\"roomId\":455},\"io4\":{\"portMode\":\"\"},\"i5\":{\"portMode\":\"\"},\"i6\":{\"portMode\":\"\"},\"i7\":{\"portMode\":\"\"},\"i8\":{\"portMode\":\"\"}},\"setup\":{\"ioMode2\":2,\"ioMode3\":2},\"status\":{\"voltage\":24.03,\"loadMax\":0.51,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2186077,\"securityBootFlagRegister\":true,\"serial\":\"5cc0ff03244F4003\",\"address\":105,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode2\":2,\"ioMode3\":2,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":7},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":389,\"created\":1667898485635,\"updated\":1700476055355,\"enabled\":true,\"name\":\"4Dio_4 2331\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":104,\"shortAddress\":2331,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"yetsvozi\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789848563501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789848563502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789848563503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789848563504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital output\",\"dType\":\"recirculationPump\",\"path\":\"/status/output1\",\"name\":\" Kütte tsirkulatsioonipump \",\"roomId\":455},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"access_locked\",\"path\":\"/status/output2\",\"name\":\" Garaažiuks\",\"roomId\":401},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"socket_output\",\"path\":\"/status/output3\",\"name\":\"20_20 PP õue maja ees\",\"roomId\":455},\"io4\":{\"portMode\":\"Digital output\",\"dType\":\"socket_output\",\"path\":\"/status/output4\",\"name\":\"20_21 PP õue 2k\",\"roomId\":455},\"i5\":{\"portMode\":\"\"},\"i6\":{\"portMode\":\"\"},\"i7\":{\"portMode\":\"\"},\"i8\":{\"portMode\":\"\"}},\"setup\":{\"ioMode3\":2,\"ioMode4\":2,\"ioMode1\":2,\"ioMode2\":2},\"status\":{\"voltage\":23.52,\"loadMax\":0.35,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2206165,\"securityBootFlagRegister\":true,\"serial\":\"5cc102f9243C6201\",\"address\":104,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":9},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":388,\"created\":1667898456565,\"updated\":1711891753105,\"enabled\":true,\"name\":\"4Dio_3 2321\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":103,\"shortAddress\":2321,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"7vye83cd\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789845656501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789845656502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789845656503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"delay\":null,\"time\":null,\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789845656504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital output\",\"dType\":\"access_locked_relay\",\"path\":\"/status/output1\",\"name\":\"Välisuks\",\"roomId\":522},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"access_locked\",\"path\":\"/status/output2\",\"name\":\" Värav\",\"roomId\":455},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"socket_output\",\"path\":\"/status/output3\",\"name\":\" Ventagregaadi juhtimine\",\"roomId\":455},\"io4\":{\"portMode\":\"Digital output\",\"dType\":\"generic_output_digital\",\"path\":\"/status/output4\",\"name\":\" Siseõhuringlus (vent)\",\"roomId\":455},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"kitchenHood\",\"path\":\"/status/input5\",\"name\":\" Kubu tööolek\",\"roomId\":403},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"switch\",\"path\":\"/status/input6\",\"name\":\" Valgus gar_ lül\",\"roomId\":401},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"switch\",\"path\":\"/status/input7\",\"name\":\" Valgus trepp lül1\",\"roomId\":402},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"switch\",\"path\":\"/status/input8\",\"name\":\" Valgus trepp lül2\",\"roomId\":402}},\"setup\":{\"ioMode3\":2,\"ioMode4\":2,\"ioMode2\":2,\"ioMode1\":2},\"serial\":\"\",\"status\":{\"voltage\":24.05,\"loadMax\":0.35,\"bootFlagRegister\":false,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2162094,\"securityBootFlagRegister\":true,\"serial\":\"5cc10321243E5606\",\"address\":103,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":8},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":387,\"created\":1667894072577,\"updated\":1706461888080,\"enabled\":true,\"name\":\"4Dio_2 2346\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":102,\"shortAddress\":2346,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"lees7emo\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode1\"},{\"id\":null,\"path\":\"/setup/ioMode1\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789407257701},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode2\"},{\"id\":null,\"path\":\"/setup/ioMode2\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789407257702},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode3\"},{\"id\":null,\"path\":\"/setup/ioMode3\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789407257703},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"id\":null,\"path\":\"/status/ioMode4\"},{\"id\":null,\"path\":\"/setup/ioMode4\"},{\"id\":null,\"path\":\"/status/online\"}],\"read\":null,\"id\":166789407257704}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/output1\",\"name\":\"17_1 2k koridori valgus\",\"roomId\":399},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/output2\",\"name\":\"17_2 Magamistoa valgus\",\"roomId\":399},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"shuntTripControl_output\",\"path\":\"/status/output3\",\"name\":\"20 Tulekahju vabasti\",\"roomId\":455},\"io4\":{\"portMode\":\"Digital output\",\"dType\":\"recirculationPump\",\"path\":\"/status/output4\",\"name\":\"8 Tarbevee ringluspump\",\"roomId\":455},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input5\",\"name\":\"GR4 Automaatika seadmete olek\",\"roomId\":455},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input6\",\"name\":\"GR5 Arvutisidejaotla olek\",\"roomId\":455},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input7\",\"name\":\"GR6 Videoseadmete olek\",\"roomId\":455},\"i8\":{\"portMode\":\"\"}},\"setup\":{\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2},\"status\":{\"voltage\":24.19,\"loadMax\":0.35,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2210510,\"securityBootFlagRegister\":true,\"serial\":\"5cc0ff0d243E5606\",\"address\":102,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":21},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":386,\"created\":1667893869785,\"updated\":1711891749440,\"enabled\":true,\"name\":\"4Dio_1 2345\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_4DSi4DSio_Modbus\",\"parentId\":384,\"address\":101,\"shortAddress\":2345,\"ui\":{\"icon\":\"controller\",\"baudRates\":[{\"name\":115200,\"val\":10},{\"name\":1200,\"val\":3},{\"name\":2400,\"val\":4},{\"name\":4800,\"val\":5},{\"name\":9600,\"val\":6},{\"name\":19200,\"val\":7},{\"name\":38400,\"val\":8},{\"name\":57600,\"val\":9}],\"formats\":[{\"name\":\"8E1\",\"val\":1},{\"name\":\"8N1\",\"val\":3},{\"name\":\"8N2\",\"val\":2},{\"name\":\"8O1\",\"val\":4}],\"i1\":[\"address#i.address\",\"status.tariff1#{value===0?_('day')+'1':value===1?_('night')+'1':''}\",\"status.tariff2#{value===0?_('day')+'2':value===1?_('night')+'2':''}\",\"status.tariff3#{value===0?_('day')+'3':value===1?_('night')+'3':''}\",\"status.tariff4#{value===0?_('day')+'4':value===1?_('night')+'4':''}\"],\"i3\":[\"status# #Configuration##bold\",\"address#editn#Address in configuration##indent\",\"status.address#editn#Address in controller##indent\",\"shortAddress#editn#Device ID##indent\",\"shortAddress#{!value?' ':''}#i.cantSetModbusAddress##indent\",\"status.setAddress#i.valE#{value!=''?'Sent to':''}##indent\",\"setAddressModbus#button#Set address#toggle#white,true=green##Confirm setting address\",\"status.baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"status.format,no.off#mode#Format#ui.formats#indent\",\"status# #Port 1##bold\",\"status.ioMode1,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted1,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 2##bold\",\"status.ioMode2,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted2,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 3##bold\",\"status.ioMode3,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted3,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Port 4##bold\",\"status.ioMode4,no.off#mode#Mode#ui.portModes#indent\",\"status.outputInverted4,no.off#mode#Digital output#ui.invertModes#indent\",\"status# #Controller##bold\",\"status.voltage#i.volt1#Voltage##indent\",\"status.hwVersion#{value||''}#Hardware version##indent\",\"status.swVersion#{value||'-'}#Software version##indent\",\"status.serial#{value||''}#Serial number##indent\",\"status.uptime#i.uptime#Uptime##indent\",\"enabled#onoff#Enabled\"],\"invertModes\":[{\"name\":\"inverted\",\"val\":true},{\"name\":\"normal\",\"val\":false}],\"portModes\":[{\"name\":\"Digital input\",\"val\":0},{\"name\":\"Digital output\",\"val\":2},{\"name\":\"PWM output\",\"val\":3}],\"i2\":[\"status.counter1#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'1':''}\",\"status.counter2#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'2':''}\",\"status.counter3#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'3':''}\",\"status.counter4#{i[0]>=0?i[0]:''}#{i[0]>=0?_('Reading input')+'4':''}\"]},\"acl\":{\"inherit\":[364]},\"uuid\":\"qb816c7x\",\"follow\":[{\"mode\":\"formula\",\"path\":\"/status/ioMode1\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"path\":\"/status/ioMode1\",\"id\":null},{\"path\":\"/setup/ioMode1\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":166789386978501},{\"mode\":\"formula\",\"path\":\"/status/ioMode2\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"path\":\"/status/ioMode2\",\"id\":null},{\"path\":\"/setup/ioMode2\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":166789386978502},{\"mode\":\"formula\",\"path\":\"/status/ioMode3\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"path\":\"/status/ioMode3\",\"id\":null},{\"path\":\"/setup/ioMode3\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":166789386978503},{\"mode\":\"formula\",\"path\":\"/status/ioMode4\",\"value\":\"i[2]&&i[1]>=0&&i[0]!=i[1]?i[1]:c\",\"nolog\":null,\"items\":[{\"path\":\"/status/ioMode4\",\"id\":null},{\"path\":\"/setup/ioMode4\",\"id\":null},{\"path\":\"/status/online\",\"id\":null}],\"read\":null,\"id\":166789386978504}],\"siteId\":364,\"createDevices\":{\"io1\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"path\":\"/status/output1\",\"name\":\"16_1 Hoov valgus \",\"roomId\":399},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"path\":\"/status/output2\",\"name\":\"16_2 Reserv valgus\",\"roomId\":399},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"path\":\"/status/output3\",\"name\":\"16_3 Reserv valgus\",\"roomId\":399},\"io4\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"path\":\"/status/output4\",\"name\":\"17 Trepi valgus\",\"roomId\":399},\"i5\":{\"portMode\":\"Digital input\",\"dType\":\"circuitBreakerNo\",\"path\":\"/status/input5\",\"name\":\"LPP Liigpingepiirik\",\"roomId\":455},\"i6\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input6\",\"name\":\"GR1 Maasoojuspumba kompressori olek\",\"roomId\":455},\"i7\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input7\",\"name\":\"GR2 Maasoojuspumba automaatika olek\",\"roomId\":455},\"i8\":{\"portMode\":\"Digital input\",\"dType\":\"faultDetector\",\"path\":\"/status/input8\",\"name\":\"GR3 Päikesepaneelide olek\",\"roomId\":455}},\"setup\":{\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2},\"status\":{\"voltage\":23.83,\"loadMax\":0.35,\"bootFlagRegister\":true,\"hwVersion\":\"0002\",\"swVersion\":\"0121\",\"uptime\":2193216,\"securityBootFlagRegister\":true,\"serial\":\"5cc10303244F4003\",\"address\":101,\"baudRate\":10,\"format\":1,\"voltageThreshold\":0.25,\"defOutputFadeTime1\":1000,\"defOutputFadeTime2\":1000,\"defOutputFadeTime3\":1000,\"defOutputFadeTime4\":1000,\"ioMode1\":2,\"ioMode2\":2,\"ioMode3\":2,\"ioMode4\":2,\"outputInverted1\":false,\"outputInverted2\":false,\"outputInverted3\":false,\"outputInverted4\":false,\"counterThreshold1\":10,\"counterThreshold2\":10,\"counterThreshold3\":10,\"counterThreshold4\":10,\"consumptionMeasurementInterval1\":300,\"consumptionMeasurementInterval2\":300,\"consumptionMeasurementInterval3\":300,\"consumptionMeasurementInterval4\":300,\"securityAlarmResistor1\":5600,\"securityAlarmResistor2\":5600,\"securityAlarmResistor3\":5600,\"securityAlarmResistor4\":5600,\"securityAlarmResistor5\":5600,\"securityAlarmResistor6\":5600,\"securityAlarmResistor7\":5600,\"securityAlarmResistor8\":5600,\"securityTamperResistor1\":5600,\"securityTamperResistor2\":5600,\"securityTamperResistor3\":5600,\"securityTamperResistor4\":5600,\"securityTamperResistor5\":5600,\"securityTamperResistor6\":5600,\"securityTamperResistor7\":5600,\"securityTamperResistor8\":5600,\"rfFreqOffs\":60,\"rfAddress\":16777215,\"rfHostAddress\":16777215,\"rfConState\":2,\"rfCounterMode1\":1,\"rfCounterMode2\":1,\"rfCounterMode3\":1,\"rfCounterMode4\":1,\"inputDebounceDelay5\":35,\"inputDebounceDelay6\":35,\"inputDebounceDelay7\":35,\"inputDebounceDelay8\":35,\"inputDebounceDelay1\":35,\"inputDebounceDelay2\":35,\"inputDebounceDelay3\":35,\"inputDebounceDelay4\":35,\"inputClickTime5\":350,\"inputClickTime6\":350,\"inputClickTime7\":350,\"inputClickTime8\":350,\"inputClickTime1\":350,\"inputClickTime2\":350,\"inputClickTime3\":350,\"inputClickTime4\":350,\"inputLongPushTime5\":2000,\"inputLongPushTime6\":2000,\"inputLongPushTime7\":2000,\"inputLongPushTime8\":2000,\"inputLongPushTime1\":2000,\"inputLongPushTime2\":2000,\"inputLongPushTime3\":2000,\"inputLongPushTime4\":2000,\"inputValidityTime5\":60000,\"inputValidityTime6\":60000,\"inputValidityTime7\":60000,\"inputValidityTime8\":60000,\"inputValidityTime1\":60000,\"inputValidityTime2\":60000,\"inputValidityTime3\":60000,\"inputValidityTime4\":60000,\"offline\":{\"devices\":16},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":385,\"created\":1667893768662,\"updated\":1711894716023,\"enabled\":true,\"name\":\"Modbus 1-1 Reserv\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"modbusDriver\",\"baudRate\":\"115200\",\"dev\":\"/dev/enlife1-1\",\"format\":\"8E1\",\"pollingDelay\":\"5\",\"follow\":\"\",\"ui\":{\"icon\":\"controller\",\"i1\":[\"dev,setup.address,setup.port#{i[0]=='/dev/enlifeMiniModbus'?'internal':i[0]=='/dev/enlife0'?'onboard':i[1]?('a:'+i[1]+(i[2]?'-p:'+i[2]:'')):i[0].replace('/dev/','')}\",\"baudRate#i.valE\",\"format#i.valE\",\"pollingDelay#i.ms\"],\"i3\":[\"id# #Setup##bold\",\"dev,no.off#mode#Port#ui.devs#indent\",\"baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"format,no.off#mode#Format#ui.formats#indent\",\"pollingDelay,no.off#mode#Polling delay#ui.pollingDelays#indent\",\"setup.scanDevice#editn#Scan device ID##indent\",\"setup.setAddress#button#Set addresses#true##white,true=green#Confirm setting addresses to ALL devices on THIS Modbus line\",\"nodeId#editn#Node ID##indent\",\"enabled#onoff#Enabled\"],\"baudRates\":[\"300\",\"600\",\"1200\",\"2400\",\"4800\",\"9600\",\"19200\",\"38400\",\"57600\",\"115200\"],\"pollingDelays\":[5,10,25,50,100,250,500,1000],\"formats\":[\"8E1\",\"8n1\",\"8n2\",\"8O1\"],\"devs\":[\"\",\"/dev/enlife0\",\"/dev/enlife1-1\",\"/dev/enlife1-2\",\"/dev/enlife1-3\",\"/dev/enlife1-4\",\"/dev/enlife2-1\",\"/dev/enlife2-2\",\"/dev/enlife2-3\",\"/dev/enlife2-4\",\"/dev/enlife3-1\",\"/dev/enlife3-2\",\"/dev/enlife3-3\",\"/dev/enlife3-4\",\"/dev/enlife4-1\",\"/dev/enlife4-2\",\"/dev/enlife4-3\",\"/dev/enlife4-4\",\"/dev/enlife5-1\",\"/dev/enlife5-2\",\"/dev/enlife5-3\",\"/dev/enlife5-4\",\"/dev/enlife6-1\",\"/dev/enlife6-2\",\"/dev/enlife6-3\",\"/dev/enlife6-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife8-1\",\"/dev/enlife8-2\",\"/dev/enlife8-3\",\"/dev/enlife8-4\",\"/dev/enlife9-1\",\"/dev/enlife9-2\",\"/dev/enlife9-3\",\"/dev/enlife9-4\",\"/dev/enlife10-1\",\"/dev/enlife10-2\",\"/dev/enlife10-3\",\"/dev/enlife10-4\",\"/dev/enlife11-1\",\"/dev/enlife11-2\",\"/dev/enlife11-3\",\"/dev/enlife11-4\",\"/dev/enlife12-1\",\"/dev/enlife12-2\",\"/dev/enlife12-3\",\"/dev/enlife12-4\",\"/dev/enlife13-1\",\"/dev/enlife13-2\",\"/dev/enlife13-3\",\"/dev/enlife13-4\",\"/dev/enlife14-1\",\"/dev/enlife14-2\",\"/dev/enlife14-3\",\"/dev/enlife14-4\",\"/dev/enlife15-1\",\"/dev/enlife15-2\",\"/dev/enlife15-3\",\"/dev/enlife15-4\",\"/dev/enlife16-1\",\"/dev/enlife16-2\",\"/dev/enlife16-3\",\"/dev/enlife16-4\",\"/dev/enlife17-1\",\"/dev/enlife17-2\",\"/dev/enlife17-3\",\"/dev/enlife17-4\",\"/dev/enlife18-1\",\"/dev/enlife18-2\",\"/dev/enlife18-3\",\"/dev/enlife18-4\",\"/dev/enlife19-1\",\"/dev/enlife19-2\",\"/dev/enlife19-3\",\"/dev/enlife19-4\",\"/dev/enlifeMiniModbus\",\"/dev/ttyO1\",\"/dev/ttyO2\",\"/dev/ttyO3\",\"/dev/ttyO4\",\"/dev/ttyO5\",\"/dev/ttyO6\",\"/dev/ttyO7\",\"/dev/ttyO8\",\"/dev/ttyO9\",\"/dev/tty1O\",\"/dev/tty11\",\"/dev/tty12\"]},\"acl\":{\"inherit\":[364]},\"setup\":{},\"uuid\":\"se1juatx\",\"siteId\":364,\"nodeId\":2,\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true},\"status\":{\"online\":true}},{\"id\":384,\"created\":1667893577539,\"updated\":1711892269309,\"tag\":\"modbusGateway\",\"siteId\":364,\"delRef\":383,\"nodeId\":2,\"dev\":\"/dev/enlife0\",\"name\":\"`SMART Compact 584` Modbus onboard\",\"nodeRoomId\":366,\"roomId\":366,\"type\":\"modbusDriver\",\"acl\":{\"inherit\":[364]},\"setup\":{\"baudRate\":115200,\"format\":\"8E1\",\"pollingDelay\":5,\"nodeName\":\"SMART Compact 584\",\"node\":383},\"usage\":{\"controller\":[\"gateway\"]},\"enabled\":true,\"baudRate\":\"115200\",\"format\":\"8E1\",\"pollingDelay\":\"5\",\"ui\":{\"icon\":\"controller\",\"i1\":[\"dev,setup.address,setup.port#{i[0]=='/dev/enlifeMiniModbus'?'internal':i[0]=='/dev/enlife0'?'onboard':i[1]?('a:'+i[1]+(i[2]?'-p:'+i[2]:'')):i[0].replace('/dev/','')}\",\"baudRate#i.valE\",\"format#i.valE\",\"pollingDelay#i.ms\"],\"i3\":[\"id# #Setup##bold\",\"dev,no.off#mode#Port#ui.devs#indent\",\"baudRate,no.off#mode#Baud rate#ui.baudRates#indent\",\"format,no.off#mode#Format#ui.formats#indent\",\"pollingDelay,no.off#mode#Polling delay#ui.pollingDelays#indent\",\"setup.scanDevice#editn#Scan device ID##indent\",\"setup.setAddress#button#Set addresses#true##white,true=green#Confirm setting addresses to ALL devices on THIS Modbus line\",\"nodeId#editn#Node ID##indent\",\"enabled#onoff#Enabled\"],\"baudRates\":[\"300\",\"600\",\"1200\",\"2400\",\"4800\",\"9600\",\"19200\",\"38400\",\"57600\",\"115200\"],\"pollingDelays\":[5,10,25,50,100,250,500,1000],\"formats\":[\"8E1\",\"8n1\",\"8n2\",\"8O1\"],\"devs\":[\"\",\"/dev/enlife0\",\"/dev/enlife1-1\",\"/dev/enlife1-2\",\"/dev/enlife1-3\",\"/dev/enlife1-4\",\"/dev/enlife2-1\",\"/dev/enlife2-2\",\"/dev/enlife2-3\",\"/dev/enlife2-4\",\"/dev/enlife3-1\",\"/dev/enlife3-2\",\"/dev/enlife3-3\",\"/dev/enlife3-4\",\"/dev/enlife4-1\",\"/dev/enlife4-2\",\"/dev/enlife4-3\",\"/dev/enlife4-4\",\"/dev/enlife5-1\",\"/dev/enlife5-2\",\"/dev/enlife5-3\",\"/dev/enlife5-4\",\"/dev/enlife6-1\",\"/dev/enlife6-2\",\"/dev/enlife6-3\",\"/dev/enlife6-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife7-1\",\"/dev/enlife7-2\",\"/dev/enlife7-3\",\"/dev/enlife7-4\",\"/dev/enlife8-1\",\"/dev/enlife8-2\",\"/dev/enlife8-3\",\"/dev/enlife8-4\",\"/dev/enlife9-1\",\"/dev/enlife9-2\",\"/dev/enlife9-3\",\"/dev/enlife9-4\",\"/dev/enlife10-1\",\"/dev/enlife10-2\",\"/dev/enlife10-3\",\"/dev/enlife10-4\",\"/dev/enlife11-1\",\"/dev/enlife11-2\",\"/dev/enlife11-3\",\"/dev/enlife11-4\",\"/dev/enlife12-1\",\"/dev/enlife12-2\",\"/dev/enlife12-3\",\"/dev/enlife12-4\",\"/dev/enlife13-1\",\"/dev/enlife13-2\",\"/dev/enlife13-3\",\"/dev/enlife13-4\",\"/dev/enlife14-1\",\"/dev/enlife14-2\",\"/dev/enlife14-3\",\"/dev/enlife14-4\",\"/dev/enlife15-1\",\"/dev/enlife15-2\",\"/dev/enlife15-3\",\"/dev/enlife15-4\",\"/dev/enlife16-1\",\"/dev/enlife16-2\",\"/dev/enlife16-3\",\"/dev/enlife16-4\",\"/dev/enlife17-1\",\"/dev/enlife17-2\",\"/dev/enlife17-3\",\"/dev/enlife17-4\",\"/dev/enlife18-1\",\"/dev/enlife18-2\",\"/dev/enlife18-3\",\"/dev/enlife18-4\",\"/dev/enlife19-1\",\"/dev/enlife19-2\",\"/dev/enlife19-3\",\"/dev/enlife19-4\",\"/dev/enlifeMiniModbus\",\"/dev/ttyO1\",\"/dev/ttyO2\",\"/dev/ttyO3\",\"/dev/ttyO4\",\"/dev/ttyO5\",\"/dev/ttyO6\",\"/dev/ttyO7\",\"/dev/ttyO8\",\"/dev/ttyO9\",\"/dev/tty1O\",\"/dev/tty11\",\"/dev/tty12\"]},\"uuid\":\"8tbua62j\",\"remarks\":\"\",\"follow\":\"\",\"status\":{\"offline\":{\"devices\":4},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":383,\"created\":1667893576209,\"updated\":1667914556171,\"enabled\":true,\"name\":\"SMART Compact 584\",\"remarks\":\"\",\"roomId\":366,\"tag\":\"\",\"type\":\"enlife_SMART_Compact_16\",\"usage\":{\"controller\":[\"smart\"]},\"ui\":{\"icon\":\"controller\",\"i1\":[\"status.voltage#i.volt1\"],\"i3\":[\"enabled#onoff#Enabled\"]},\"createDevices\":{\"io1\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"11 Fassadi valgus\",\"path\":\"/status/io1\",\"roomId\":399},\"io2\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"11_1 Fassadi valgus\",\"path\":\"/status/io2\",\"roomId\":399},\"io3\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"11_2 Fassadi valgus\",\"path\":\"/status/io3\",\"roomId\":399},\"io4\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"12 Fassadi valgus\",\"path\":\"/status/io4\",\"roomId\":399},\"io5\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"12_1 Fassadi valgus\",\"path\":\"/status/io5\",\"roomId\":399},\"io6\":{\"portMode\":\"Digital output\",\"dType\":\"light_outdoor_output\",\"name\":\"12_2 Fassadi valgus\",\"path\":\"/status/io6\",\"roomId\":399},\"io7\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13 Tehnilise ruumi valgus\",\"path\":\"/status/io7\",\"roomId\":399},\"io8\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13_1 Esik valgus\",\"path\":\"/status/io8\",\"roomId\":399},\"io9\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13_2 Garaaži valgus\",\"path\":\"/status/io9\",\"roomId\":399},\"io10\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13_3 Trepiastmete valgus\",\"path\":\"/status/io10\",\"roomId\":399},\"io11\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13_4 Garderoob valgus\",\"path\":\"/status/io11\",\"roomId\":399},\"io12\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"13_5 Elutuba pikk rida valgus\",\"path\":\"/status/io12\",\"roomId\":399},\"io13\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"14 Elutuba, köök valgus\",\"path\":\"/status/io13\",\"roomId\":399},\"io14\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"14_1 Köök mööblivalgus\",\"path\":\"/status/io14\",\"roomId\":399},\"io15\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"15 Tööduba, saun valgus\",\"path\":\"/status/io15\",\"roomId\":399},\"io16\":{\"portMode\":\"Digital output\",\"dType\":\"light_indoorIndividual_output\",\"name\":\"16 Hoov valgus\",\"path\":\"/status/io16\",\"roomId\":399}},\"acl\":{\"inherit\":[364]},\"uuid\":\"rjnlb56k\",\"siteId\":364,\"status\":{\"voltage\":12.3721,\"offline\":{\"devices\":3},\"online\":true},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":379,\"created\":1667892939666,\"updated\":1695394270394,\"tag\":\"nordPoolDevice\",\"enabled\":true,\"name\":\"⚡NORD POOL\",\"roomId\":364,\"sourcetype\":\"output\",\"policy\":\"public\",\"deviceTypes\":[\"genericDevice\"],\"type\":\"generic\",\"usage\":{\"generic\":[\"generic\"]},\"nodeId\":2,\"ui\":{\"icon\":\"calendar\",\"i1\":[\"status.current,status.hour#{i[0]*0.1*1.2;#1;-}{_('¢')} @{i[1]+':00'}\",\"status.rel#i.rh\",\"status.min#min:{i[0]*0.1*1.2;#1;-}{_('¢')}#Minimum\",\"status.max#max:{i[0]*0.1*1.2;#1;-}{_('¢')}#Maximum\"],\"i3\":[\"status.today#{i[0]?' ':'-'}#Today##bold\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[0]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[0]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'00'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[1]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[1]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'01'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[2]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[2]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'02'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[3]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[3]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'03'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[4]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[4]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'04'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[5]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[5]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'05'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[6]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[6]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'06'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[7]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[7]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'07'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[8]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[8]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'08'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[9]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[9]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'09'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[10]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[10]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'10'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[11]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[11]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'11'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[12]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[12]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'12'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[13]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[13]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'13'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[14]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[14]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'14'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[15]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[15]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'15'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[16]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[16]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'16'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[17]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[17]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'17'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[18]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[18]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'18'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[19]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[19]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'19'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[20]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[20]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'20'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[21]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[21]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'21'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[22]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[22]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'22'}##indent\",\"status.today#{i[0]&&i[0].hours24?((i[0].hours24[23]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[23]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'23'}##indent\",\"status.tomorrow.max#{i[0]?' ':'-'}#Tomorrow##bold\",\"status.tomorrow.max#{i[0]?(i[0]*0.1*1.2).step(1)+' s':''}#{i[0]?'Maximum':''}##indent\",\"status.tomorrow.min#{i[0]?(i[0]*0.1*1.2).step(1)+' s':''}#{i[0]?'Minimum':''}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[0]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[0]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'00'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[1]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[1]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'01'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[2]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[2]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'02'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[3]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[3]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'03'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[4]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[4]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'04'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[5]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[5]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'05'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[6]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[6]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'06'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[7]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[7]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'07'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[8]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[8]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'08'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[9]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[9]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'09'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[10]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[10]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'10'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[11]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[11]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'11'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[12]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[12]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'12'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[13]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[13]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'13'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[14]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[14]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'14'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[15]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[15]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'15'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[16]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[16]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'16'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[17]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[17]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'17'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[18]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[18]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'18'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[19]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[19]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'19'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[20]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[20]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'20'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[21]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[21]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'21'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[22]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[22]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'22'}##indent\",\"status.tomorrow#{i[0]&&i[0].hours24?((i[0].hours24[23]*0.1*1.2).step(1)+' '+_('¢')+' ('+(i[0].hours24[23]/i[0].max*100).step(1)+'%)'):''}#{!i[0]?'':'23'}##indent\"]},\"follow\":[{\"mode\":\"copy\",\"path\":\"/status/hour\",\"nolog\":true,\"items\":[{\"id\":357,\"path\":\"/status/hour\"}]},{\"mode\":\"formula\",\"path\":\"/status/current\",\"value\":\"i[0].hours24[i[1]].step(1)\",\"nolog\":true,\"items\":[{\"id\":357,\"path\":\"/status/today\"},{\"id\":357,\"path\":\"/status/hour\"}]},{\"mode\":\"formula\",\"path\":\"/status/rel\",\"value\":\"i[0].hours24[i[1]]/i[0].max*100\",\"nolog\":true,\"items\":[{\"id\":357,\"path\":\"/status/today\"},{\"id\":357,\"path\":\"/status/hour\"}]},{\"mode\":\"formula\",\"path\":\"/status/max\",\"nolog\":true,\"value\":\"i[0]?i[0]:null\",\"items\":[{\"id\":357,\"path\":\"/status/today/max\"}]},{\"mode\":\"formula\",\"path\":\"/status/min\",\"nolog\":true,\"value\":\"i[0]?i[0]:null\",\"items\":[{\"id\":357,\"path\":\"/status/today/min\"}]},{\"mode\":\"formula\",\"path\":\"/status/today\",\"nolog\":true,\"value\":\"i[0]?i[0]:null\",\"items\":[{\"id\":357,\"path\":\"/status/today\"}]},{\"mode\":\"formula\",\"path\":\"/status/tomorrow\",\"nolog\":true,\"value\":\"i[0]?i[0]:null\",\"items\":[{\"id\":357,\"path\":\"/status/tomorrow\"}]},{\"mode\":\"on\",\"path\":\"/status/online\",\"nolog\":true,\"items\":[{\"id\":2,\"path\":\"/id\"}]}],\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[369],\"acl\":345}]},\"uuid\":\"grchkf8a\",\"siteId\":364,\"status\":{\"lastError\":\"Cannot read property 'step' of undefined\",\"online\":true,\"offline\":{\"devices\":56},\"max\":225,\"current\":\"95\",\"input\":true,\"min\":-0.36,\"today\":{\"hoursSource\":[{\"timestamp\":1743541200,\"price\":80.18},{\"timestamp\":1743544800,\"price\":5.1},{\"timestamp\":1743548400,\"price\":5.3},{\"timestamp\":1743552000,\"price\":22.01},{\"timestamp\":1743555600,\"price\":5.1},{\"timestamp\":1743559200,\"price\":70.75},{\"timestamp\":1743562800,\"price\":87.49},{\"timestamp\":1743566400,\"price\":225},{\"timestamp\":1743570000,\"price\":152.45},{\"timestamp\":1743573600,\"price\":81.49},{\"timestamp\":1743577200,\"price\":2.09},{\"timestamp\":1743580800,\"price\":3.09},{\"timestamp\":1743584400,\"price\":0.97},{\"timestamp\":1743588000,\"price\":-0.04},{\"timestamp\":1743591600,\"price\":-0.36},{\"timestamp\":1743595200,\"price\":-0.3},{\"timestamp\":1743598800,\"price\":-0.04},{\"timestamp\":1743602400,\"price\":16.94},{\"timestamp\":1743606000,\"price\":94.79},{\"timestamp\":1743609600,\"price\":146.99},{\"timestamp\":1743613200,\"price\":166.84},{\"timestamp\":1743616800,\"price\":146.74},{\"timestamp\":1743620400,\"price\":108.25},{\"timestamp\":1743624000,\"price\":85.05},{\"timestamp\":1743627600,\"price\":73.19}],\"max\":225,\"min\":-0.36,\"hours24\":[80.18,5.1,5.3,22.01,5.1,70.75,87.49,225,152.45,81.49,2.09,3.09,0.97,-0.04,-0.36,-0.3,-0.04,16.94,94.79,146.99,166.84,146.74,108.25,85.05],\"hours24Desc\":[225,166.84,152.45,146.99,146.74,108.25,94.79,87.49,85.05,81.49,80.18,70.75,22.01,16.94,5.3,5.1,5.1,3.09,2.09,0.97,-0.04,-0.04,-0.3,-0.36]},\"hour\":18,\"rel\":42.128888888888895,\"tomorrow\":{\"hoursSource\":[{\"timestamp\":1743627600,\"price\":73.19},{\"timestamp\":1743631200,\"price\":65.73},{\"timestamp\":1743634800,\"price\":65.87},{\"timestamp\":1743638400,\"price\":65.89},{\"timestamp\":1743642000,\"price\":67.85},{\"timestamp\":1743645600,\"price\":69.87},{\"timestamp\":1743649200,\"price\":107.69},{\"timestamp\":1743652800,\"price\":137.43},{\"timestamp\":1743656400,\"price\":164.31},{\"timestamp\":1743660000,\"price\":106},{\"timestamp\":1743663600,\"price\":0},{\"timestamp\":1743667200,\"price\":-0.01},{\"timestamp\":1743670800,\"price\":-1.04},{\"timestamp\":1743674400,\"price\":-1.46},{\"timestamp\":1743678000,\"price\":-8.09},{\"timestamp\":1743681600,\"price\":-5.38},{\"timestamp\":1743685200,\"price\":-0.58},{\"timestamp\":1743688800,\"price\":16.89},{\"timestamp\":1743692400,\"price\":60.61},{\"timestamp\":1743696000,\"price\":142.82},{\"timestamp\":1743699600,\"price\":225.11},{\"timestamp\":1743703200,\"price\":85.01},{\"timestamp\":1743706800,\"price\":85.03},{\"timestamp\":1743710400,\"price\":38.02},{\"timestamp\":1743714000,\"price\":32.21}],\"max\":225.11,\"min\":-8.09,\"hours24\":[73.19,65.73,65.87,65.89,67.85,69.87,107.69,137.43,164.31,106,0,-0.01,-1.04,-1.46,-8.09,-5.38,-0.58,16.89,60.61,142.82,225.11,85.01,85.03,38.02],\"hours24Desc\":[225.11,164.31,142.82,137.43,107.69,106,85.03,85.01,73.19,69.87,67.85,65.89,65.87,65.73,60.61,38.02,16.89,0,-0.01,-0.58,-1.04,-1.46,-5.38,-8.09]}},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":368,\"created\":1667892939288,\"updated\":1695394291748,\"roomId\":364,\"weather\":{\"service\":\"ilmateenistus\",\"city\":\"pirita\"},\"enabled\":true,\"name\":\"Pirita {_('weather')}\",\"tag\":\"weather\",\"type\":\"generic\",\"usage\":{\"generic\":[\"weather\"]},\"ui\":{\"icon\":\"temp\",\"i1\":[\"status.temperature#i.temp1###ts2\",\"status.rh#i.rhE###ts2\"],\"i3\":[\"weather.service#{value?value.charAt(0).toUpperCase() + value.slice(1):''}#{value?'Service':''}\",\"weather.city#{value?value.toUpperCase():''}#{value?'City':''}\",\"status# #Info##bold\",\"status.temperature#i.temp1#Temperature##indent\",\"status.rh#i.rh#Relative humidity##indent\",\"status.waterTemperature#i.temp1#Water temperature##indent\",\"status.windSpeed,status.windDirection#{i[0]||'-'} m/s {['','N','NE','E','SE','S','SW','W','NW','N'][((i[1]+45)/45).step(1)]}#Wind##indent\",\"status.waterLevel_eh2000#{i[0]!==''?(i[0]||'-')+' cm':''}#{i[0]!==''?_('Water level')+' EH2000':''}##indent\"]},\"follow\":[{\"mode\":\"\",\"path\":\"/status/online\",\"items\":[{\"id\":3,\"path\":\"/id\"}]}],\"acl\":{\"inherit\":[364],\"policy\":[{\"who\":[369],\"acl\":345}]},\"uuid\":\"5v6v5sdp\",\"siteId\":364,\"buildingId\":364,\"status\":{\"online\":true,\"temperature\":8.9,\"waterTemperature\":4.8,\"waterLevel_eh2000\":19,\"windSpeed\":6.8,\"windDirection\":274},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}},{\"id\":365,\"created\":1667892939211,\"updated\":1711890521939,\"name\":\"Energy saving\",\"tag\":\"eco\",\"roomId\":364,\"follow\":[{\"path\":\"/status/online\",\"items\":[{\"path\":\"/id\"}]}],\"remarks\":\"Manual switch to eco mode, deactivates scheduled switching\",\"acl\":{\"inherit\":[4]},\"ref\":364,\"enabled\":true,\"type\":\"generic\",\"usage\":{\"generic\":[\"eco\"]},\"ui\":{\"icon\":\"co2\",\"i1\":[\"setup.output#onoff\"],\"i3\":[\"remarks# #{value||''}##italic\"]},\"uuid\":\"dyatvtcd\",\"siteId\":364,\"buildingId\":364,\"presence\":true,\"setup\":{\"output\":false},\"status\":{\"online\":true,\"remarks\":\"onArrive - switch, eco button, motion, door\",\"idx\":5},\"_acl\":{\"read\":true,\"write\":true,\"admin\":true,\"logs\":true}}]"
          },
          "redirectURL": "",
          "headersSize": 140,
          "bodySize": 267241,
          "_transferSize": 267381
        },
        "cache": {},
        "timings": {
          "blocked": 0.2581065782578662,
          "dns": 0.00004166577127762139,
          "connect": 0.00008333154255524278,
          "ssl": -1,
          "send": 1.1530339143064339,
          "wait": 108.80045289377449,
          "receive": 22.397730350348866
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "4",
        "_fetchType": "Network Load",
        "_priority": "medium"
      },
      {
        "pageref": "page_0",
        "startedDateTime": "2025-04-02T15:06:17.219Z",
        "time": 27.037463300075615,
        "request": {
          "method": "POST",
          "url": "http://192.168.1.125/events",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Origin",
              "value": "http://192.168.1.125"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15"
            },
            {
              "name": "Authorization",
              "value": "S cQDAdxe4pwLqyKGP1CmLlHwYxIV71O39uQYA"
            },
            {
              "name": "Referer",
              "value": "http://192.168.1.125/"
            },
            {
              "name": "Content-Length",
              "value": "0"
            },
            {
              "name": "Accept-Language",
              "value": "et-EE,et;q=0.9,en-US;q=0.8,en;q=0.7"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Priority",
              "value": "u=3, i"
            }
          ],
          "queryString": [],
          "headersSize": 454,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Date",
              "value": "Wed, 02 Apr 2025 15:06:17 GMT"
            }
          ],
          "content": {
            "size": 93,
            "compression": -11,
            "mimeType": "application/json",
            "text": "{\"events\":[{\"id\":441,\"status\":{\"online\":1743606375460}},{\"id\":441,\"status\":{\"dot\":\"green\"}}]}"
          },
          "redirectURL": "",
          "headersSize": 140,
          "bodySize": 104,
          "_transferSize": 244
        },
        "cache": {},
        "timings": {
          "blocked": 1.4988437651481945,
          "dns": -1,
          "connect": -1,
          "ssl": -1,
          "send": 0,
          "wait": 25.525569915771484,
          "receive": 0.013049619155935943
        },
        "serverIPAddress": "192.168.1.125",
        "_serverPort": 80,
        "connection": "3",
        "_fetchType": "Network Load",
        "_priority": "medium"
      }
    ]
  }
}